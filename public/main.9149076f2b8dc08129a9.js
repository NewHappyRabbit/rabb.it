"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkrabb_it"] = self["webpackChunkrabb_it"] || []).push([["main"],{

/***/ "./src/css/categories.css":
/*!********************************!*\
  !*** ./src/css/categories.css ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY3NzL2NhdGVnb3JpZXMuY3NzIiwibWFwcGluZ3MiOiI7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvY3NzL2NhdGVnb3JpZXMuY3NzP2U4MDMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/css/categories.css\n");

/***/ }),

/***/ "./src/css/global.css":
/*!****************************!*\
  !*** ./src/css/global.css ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY3NzL2dsb2JhbC5jc3MiLCJtYXBwaW5ncyI6IjtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmFiYi5pdC8uL3NyYy9jc3MvZ2xvYmFsLmNzcz82Nzc0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/css/global.css\n");

/***/ }),

/***/ "./src/css/orders.css":
/*!****************************!*\
  !*** ./src/css/orders.css ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY3NzL29yZGVycy5jc3MiLCJtYXBwaW5ncyI6IjtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmFiYi5pdC8uL3NyYy9jc3Mvb3JkZXJzLmNzcz9jNTRkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/css/orders.css\n");

/***/ }),

/***/ "./src/css/products.css":
/*!******************************!*\
  !*** ./src/css/products.css ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY3NzL3Byb2R1Y3RzLmNzcyIsIm1hcHBpbmdzIjoiO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWJiLml0Ly4vc3JjL2Nzcy9wcm9kdWN0cy5jc3M/YzI2NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/css/products.css\n");

/***/ }),

/***/ "./src/api.js":
/*!********************!*\
  !*** ./src/api.js ***!
  \********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addQuery: () => (/* binding */ addQuery),\n/* harmony export */   asterisk: () => (/* binding */ asterisk),\n/* harmony export */   deductVat: () => (/* binding */ deductVat),\n/* harmony export */   delay: () => (/* binding */ delay),\n/* harmony export */   fixInputPrice: () => (/* binding */ fixInputPrice),\n/* harmony export */   formatPrice: () => (/* binding */ formatPrice),\n/* harmony export */   formatPriceNoCurrency: () => (/* binding */ formatPriceNoCurrency),\n/* harmony export */   getVat: () => (/* binding */ getVat),\n/* harmony export */   initSocket: () => (/* binding */ initSocket),\n/* harmony export */   loadPreviewImage: () => (/* binding */ loadPreviewImage),\n/* harmony export */   markInvalid: () => (/* binding */ markInvalid),\n/* harmony export */   markInvalidEl: () => (/* binding */ markInvalidEl),\n/* harmony export */   markValid: () => (/* binding */ markValid),\n/* harmony export */   markValidEl: () => (/* binding */ markValidEl),\n/* harmony export */   numberToBGText: () => (/* binding */ numberToBGText),\n/* harmony export */   priceRegex: () => (/* binding */ priceRegex),\n/* harmony export */   publicURL: () => (/* binding */ publicURL),\n/* harmony export */   removeQuery: () => (/* binding */ removeQuery),\n/* harmony export */   reverseTranslitarate: () => (/* binding */ reverseTranslitarate),\n/* harmony export */   roundPrice: () => (/* binding */ roundPrice),\n/* harmony export */   serverURL: () => (/* binding */ serverURL),\n/* harmony export */   slugify: () => (/* binding */ slugify),\n/* harmony export */   socket: () => (/* binding */ socket),\n/* harmony export */   successScan: () => (/* binding */ successScan),\n/* harmony export */   toggleDarkMode: () => (/* binding */ toggleDarkMode),\n/* harmony export */   transliterate: () => (/* binding */ transliterate),\n/* harmony export */   unslugify: () => (/* binding */ unslugify)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! socket.io-client */ \"./node_modules/socket.io-client/build/esm/index.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var _views_login__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/views/login */ \"./src/views/login.js\");\n/* harmony import */ var _printer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/printer */ \"./src/printer.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst serverURL = `https://${location.hostname}/server`;\r\nconst publicURL = `https://${location.hostname}`;\r\nconst socketPath = '/server/socket.io';\r\n\r\naxios__WEBPACK_IMPORTED_MODULE_4__[\"default\"].defaults.baseURL = serverURL;\r\naxios__WEBPACK_IMPORTED_MODULE_4__[\"default\"].defaults.withCredentials = true; // used for SSL\r\n\r\nvar socket;\r\nfunction initSocket() {\r\n    if (!_views_login__WEBPACK_IMPORTED_MODULE_2__.loggedInUser || socket && socket.connected) return;\r\n\r\n    socket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_0__.io)(publicURL, {\r\n        withCredentials: true,\r\n        path: socketPath,\r\n        addTrailingSlash: true,\r\n        transports: ['polling'],\r\n    });\r\n\r\n    socket.on('connected', () => {\r\n        console.log('Socket connection successful!');\r\n    })\r\n\r\n    socket.on(\"connect_error\", (err) => {\r\n        // the reason of the error, for example \"xhr poll error\"\r\n        console.error(\"Socket error\", {\r\n            msg: err.message,\r\n            desc: err.description,\r\n            context: err.context\r\n        })\r\n    });\r\n\r\n    (0,_printer__WEBPACK_IMPORTED_MODULE_3__.printerSockets)();\r\n}\r\n\r\nconst currency = \"лв.\";\r\nconst asterisk = (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<i class=\"bi bi-asterisk text-danger asterisk\"></i>`;\r\n\r\nfunction toggleDarkMode({ appStart = false }) {\r\n    const current = localStorage.getItem('darkMode');\r\n\r\n    if (appStart) {\r\n        if (current === 'true') {\r\n            document.querySelector('html').setAttribute('data-bs-theme', 'dark');\r\n        } else {\r\n            document.querySelector('html').setAttribute('data-bs-theme', 'light');\r\n        }\r\n        return;\r\n    }\r\n\r\n    if (current === 'true') {\r\n        localStorage.setItem('darkMode', 'false');\r\n        document.querySelector('html').setAttribute('data-bs-theme', 'light');\r\n    } else {\r\n        localStorage.setItem('darkMode', 'true');\r\n        document.querySelector('html').setAttribute('data-bs-theme', 'dark');\r\n    }\r\n}\r\n\r\nfunction markValidEl(el) {\r\n    el.classList.add('is-valid');\r\n    el.classList.remove('is-invalid');\r\n}\r\n\r\nfunction markInvalidEl(el) {\r\n    el.classList.add('is-invalid');\r\n    el.classList.remove('is-valid');\r\n    return true;\r\n}\r\n\r\nfunction markValid(elName) {\r\n    const el = document.getElementById(elName);\r\n    el.classList.add('is-valid');\r\n    el.classList.remove('is-invalid');\r\n}\r\n\r\nfunction markInvalid(elName) {\r\n    const el = document.getElementById(elName);\r\n    el.classList.add('is-invalid');\r\n    el.classList.remove('is-valid');\r\n    return true;\r\n}\r\n\r\nfunction formatPrice(price) {\r\n    // Convert to xx xxx.xx лв.\r\n    price = price.toFixed(2);\r\n    price = price.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n    price += ` ${currency}`;\r\n    return price;\r\n}\r\n\r\nfunction formatPriceNoCurrency(price) {\r\n    // Convert to xx xxx.xx\r\n    price = price.toFixed(2);\r\n    price = price.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n    return price;\r\n}\r\n\r\nfunction numberToBGText(number) {\r\n    // Created by https://georgi.unixsol.org/programs/num2bgmoney.php/view/ in PHP\r\n    function convert(number, stotinki = false) {\r\n        const num0 = {\r\n            0: \"нула\",\r\n            1: \"един\",\r\n            2: \"две\",\r\n            3: \"три\",\r\n            4: \"четири\",\r\n            5: \"пет\",\r\n            6: \"шест\",\r\n            7: \"седем\",\r\n            8: \"осем\",\r\n            9: \"девет\",\r\n            10: \"десет\",\r\n            11: \"единадесет\",\r\n            12: \"дванадесет\",\r\n        }\r\n\r\n        const num100 = {\r\n            1: \"сто\",\r\n            2: \"двеста\",\r\n            3: \"триста\"\r\n        }\r\n\r\n        const div10 = (number - number % 10) / 10;\r\n        const mod10 = number % 10;\r\n        const div100 = (number - number % 100) / 100;\r\n        const mod100 = number % 100;\r\n        const div1000 = (number - number % 1000) / 1000;\r\n        const mod1000 = number % 1000;\r\n        const div1000000 = (number - number % 1000000) / 1000000;\r\n        const mod1000000 = number % 1000000;\r\n        const div1000000000 = (number - number % 1000000000) / 1000000000;\r\n        const mod1000000000 = number % 1000000000;\r\n\r\n        if (number == 0)\r\n            return num0[0];\r\n\r\n        // Till 20\r\n        if (number > 0 && number < 20) {\r\n            if (stotinki && number === 1)\r\n                return \"една\";\r\n            if (stotinki && number === 2)\r\n                return \"две\";\r\n            if (number === 2)\r\n                return \"два\";\r\n\r\n            return number in num0 ? num0[number] : num0[mod10] += 'надесет';\r\n        }\r\n\r\n        // Till 100\r\n        if (number > 19 && number < 100) {\r\n            let temp = div10 === 2 ? \"двадесет\" : num0[div10] + \"десет\";\r\n            if (mod10) temp += \" и \" + convert(mod10, stotinki);\r\n            return temp;\r\n        }\r\n\r\n        // Till 1,000\r\n        if (number > 99 && number < 1000) {\r\n            let temp = div100 in num100 ? num100[div100] : num0[div100] + 'стотин';\r\n            if ((mod100 % 10 === 0 || mod100 < 20) && mod100 !== 0) temp += ' и';\r\n            if (mod100) temp += \" \" + convert(mod100);\r\n\r\n            return temp\r\n        }\r\n\r\n        // Till 1,000,000\r\n        if (number > 999 && number < 1000000) {\r\n            /* Damn bulgarian @#$%@#$% два хиляди is wrong :) */\r\n            let temp = div1000 === 1 ? \"хиляда\" : div1000 === 2 ? \"две хиляди\" : convert(div1000) + \" хиляди\";\r\n            num0[2] = \"два\";\r\n\r\n            if ((mod1000 % 10 === 0 || mod1000 < 20) && mod1000 !== 0)\r\n                if (!((mod100 % 10 == 0 || mod100 < 20) && mod100 !== 0)) temp += ' и';\r\n\r\n            if ((mod1000 % 10 === 0 || mod1000 < 20) && mod1000 !== 0 && mod1000 < 100) return temp += ' и';\r\n\r\n            if (mod1000) temp += \" \" + convert(mod1000);\r\n\r\n            return temp;\r\n        }\r\n\r\n        /* Over a million */\r\n        if (number > 999999 && number < 1000000000) {\r\n            let temp = (div1000000 == 1) ? \"един милион\" : convert(div1000000) + \" милиона\";\r\n            if ((mod1000000 % 10 == 0 || mod1000000 < 20) && mod1000000 != 0)\r\n                if (!((mod1000 % 10 == 0 || mod1000 < 20) && mod1000 != 0))\r\n                    if (!((mod100 % 10 == 0 || mod100 < 20) && mod100 != 0))\r\n                        temp += \" и\";\r\n\r\n            if ((mod1000000 % 10 == 0 || mod1000000 < 20) && mod1000000 != 0 && mod1000000 < 1000)\r\n                if ((mod1000 % 10 == 0 || mod1000 < 20) && mod1000 != 0 && mod1000 < 100)\r\n                    temp += \" и\";\r\n\r\n            if (mod1000000)\r\n                temp += \" \" + convert(mod1000000);\r\n            return temp;\r\n        }\r\n\r\n        /* Over a billion */\r\n        if (number > 99999999 && number <= 2000000000) {\r\n            let temp = (div1000000000 == 1) ? \"един милиард\" : \"\";\r\n            temp = (div1000000000 == 2) ? \"два милиарда\" : temp;\r\n            if (mod1000000000)\r\n                temp += \" \" + convert(mod1000000000);\r\n\r\n            return temp;\r\n        }\r\n        /* Bye ... */\r\n        return \"\";\r\n    }\r\n\r\n    let [lv, st] = number.toFixed(2).toString().split(\".\");\r\n    lv = Number(lv);\r\n\r\n    if (lv >= 2000000000)\r\n        return; // Too big number\r\n\r\n    let text = convert(lv);\r\n    text += lv === 1 ? \" лев\" : \" лева\";\r\n\r\n    if (st && st !== 0) {\r\n        let sttext = convert(st, true);\r\n        text += \" и \" + sttext;\r\n        text += st === 1 ? \" стотинка\" : \" стотинки\";\r\n    }\r\n\r\n    return text;\r\n}\r\n\r\nfunction getVat(price, vat) {\r\n    if (vat === undefined)\r\n        vat = 20;\r\n    // Extract vat from price (price already includes vat)\r\n    return (price * vat) / 100;\r\n}\r\n\r\nfunction deductVat(price, vat) {\r\n    if (vat === undefined)\r\n        vat = 20;\r\n    // Return the original price with deducted vat\r\n    return price - ((price * vat) / 100);\r\n}\r\n\r\nfunction roundPrice(price) {\r\n    // Round to 1 decimal\r\n    return Math.round(price * 10) / 10;\r\n}\r\n\r\nfunction delay(fn, ms) {\r\n    // This function is used for calculating the time between key presses in the search bar\r\n    // So we can fire the search only after the user has stopped typing for a certain amount of time\r\n    let timer = 0\r\n    return function (...args) {\r\n        clearTimeout(timer)\r\n        timer = setTimeout(fn.bind(this, ...args), ms || 0)\r\n    }\r\n}\r\n\r\nfunction addQuery(ctx, name, value) {\r\n    var uri = ctx.path;\r\n\r\n    if (!name || value === undefined)\r\n        return uri;\r\n\r\n    if (!ctx.querystring)\r\n        return uri += `?${name}=${value}`;\r\n\r\n    if (ctx.querystring && !ctx.querystring.includes(name))\r\n        return uri += `&${name}=${value}`;\r\n\r\n    const regex = new RegExp(`${name}=[^&]*`);\r\n\r\n    return uri = uri.replace(regex, `${name}=${value}`);\r\n}\r\n\r\nfunction removeQuery(ctx, name) {\r\n    var uri = ctx.path;\r\n\r\n    const removeRegex = new RegExp(`(\\\\?)?(&)?${name}=[^&]*`);\r\n    uri = uri.replace(removeRegex, '');\r\n\r\n    // Check if url is bugged (../url&name=value) and convert to (../url?name=value)\r\n    const bugfixRegex = /\\/.+(&).+=/;\r\n    if (bugfixRegex.test(uri))\r\n        uri = uri.replace(/&/, '?');\r\n\r\n    return uri;\r\n}\r\n\r\n// replace cyrillic characters with latin\r\nconst alphabet = { \"а\": \"a\", \"б\": \"b\", \"в\": \"v\", \"г\": \"g\", \"д\": \"d\", \"е\": \"e\", \"ж\": \"j\", \"з\": \"z\", \"и\": \"i\", \"й\": \"y\", \"к\": \"k\", \"л\": \"l\", \"м\": \"m\", \"н\": \"n\", \"о\": \"o\", \"п\": \"p\", \"р\": \"r\", \"с\": \"s\", \"т\": \"t\", \"у\": \"u\", \"ф\": \"f\", \"х\": \"h\", \"ц\": \"c\", \"ч\": \"ch\", \"ш\": \"sh\", \"щ\": \"sht\", \"ъ\": \"u\", \"ь\": \"y\", \"ю\": \"yu\", \"я\": \"ya\" };\r\n\r\nfunction transliterate(word) {\r\n    return word.split('').map(function (char) {\r\n        return alphabet[char] || char;\r\n    }).join(\"\");\r\n}\r\n\r\nfunction slugify(word) {\r\n    return transliterate(word.toLowerCase().replace(/ /g, '-'))\r\n}\r\n\r\nfunction reverseTranslitarate(word) {\r\n    return word.split('').map(function (char) {\r\n        return Object.keys(alphabet).find(key => alphabet[key] === char) || char;\r\n    }).join(\"\");\r\n}\r\n\r\nfunction unslugify(word) {\r\n    var newWord = reverseTranslitarate(word.toLowerCase().replace(/-/g, ' '));\r\n    return newWord.charAt(0).toUpperCase() + newWord.slice(1);\r\n}\r\n\r\nfunction successScan(target) {\r\n    const beep = new Audio('/audio/beep.mp3');\r\n    beep.play();\r\n\r\n    target.classList.add('flashingSuccessBorder')\r\n    setTimeout(() => target.classList.remove('flashingSuccessBorder'), 1000);\r\n}\r\n\r\nfunction loadPreviewImage(e) {\r\n    const image = e.target.files[0];\r\n    const imagePreview = document.getElementById('imagePreview');\r\n    const reader = new FileReader();\r\n\r\n    reader.onload = function (e) {\r\n        imagePreview.src = e.target.result;\r\n        imagePreview.classList.remove('d-none');\r\n    }\r\n\r\n    reader.readAsDataURL(image);\r\n}\r\n\r\nconst priceRegex = /^\\d{1,}(\\.\\d{1,2})?$/; // good: 0.01, 0.2, 1; bad: 0.001\r\nfunction fixInputPrice(target, round = false) {\r\n    // This function replaces comma with dot (from mobile keyboard)\r\n    // It also limits the number to 2 decimal places max\r\n    let value = target.value;\r\n\r\n    if (value === '') return;\r\n\r\n    value = Number(target.value.replace(',', '.'));\r\n\r\n    if (target.value === '' || isNaN(value))\r\n        return target.value = '';\r\n\r\n    // if last character is a comma, replace it with dot\r\n    if (target.value.slice(-1) === ',')\r\n        target.value = target.value.replace(',', '.');\r\n    else if (round && target.value.slice(-1) !== '.') // used in products page\r\n        target.value = roundPrice(value);\r\n    else if (target.value.slice(-1) !== '.' && !priceRegex.test(value)) // may be used in orders page, currently using round\r\n        target.value = value.toFixed(2);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sd0JBQXdCLEdBQUcsTUFBTSxJQUFJLE1BQU0sdUJBQXVCO0FBQ2xFO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWJiLml0Ly4vc3JjL2FwaS5qcz9iZjRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XHJcbmltcG9ydCB7IGlvIH0gZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7XHJcbmltcG9ydCB7IGh0bWwgfSBmcm9tICdsaXQvaHRtbC5qcyc7XHJcbmltcG9ydCB7IGxvZ2dlZEluVXNlciB9IGZyb20gJ0Avdmlld3MvbG9naW4nO1xyXG5pbXBvcnQgeyBwcmludGVyU29ja2V0cyB9IGZyb20gJ0AvcHJpbnRlcic7XHJcblxyXG5leHBvcnQgY29uc3Qgc2VydmVyVVJMID0gYGh0dHBzOi8vJHtsb2NhdGlvbi5ob3N0bmFtZX0vc2VydmVyYDtcclxuZXhwb3J0IGNvbnN0IHB1YmxpY1VSTCA9IGBodHRwczovLyR7bG9jYXRpb24uaG9zdG5hbWV9YDtcclxuY29uc3Qgc29ja2V0UGF0aCA9ICcvc2VydmVyL3NvY2tldC5pbyc7XHJcblxyXG5heGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gc2VydmVyVVJMO1xyXG5heGlvcy5kZWZhdWx0cy53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOyAvLyB1c2VkIGZvciBTU0xcclxuXHJcbmV4cG9ydCB2YXIgc29ja2V0O1xyXG5leHBvcnQgZnVuY3Rpb24gaW5pdFNvY2tldCgpIHtcclxuICAgIGlmICghbG9nZ2VkSW5Vc2VyIHx8IHNvY2tldCAmJiBzb2NrZXQuY29ubmVjdGVkKSByZXR1cm47XHJcblxyXG4gICAgc29ja2V0ID0gaW8ocHVibGljVVJMLCB7XHJcbiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxyXG4gICAgICAgIHBhdGg6IHNvY2tldFBhdGgsXHJcbiAgICAgICAgYWRkVHJhaWxpbmdTbGFzaDogdHJ1ZSxcclxuICAgICAgICB0cmFuc3BvcnRzOiBbJ3BvbGxpbmcnXSxcclxuICAgIH0pO1xyXG5cclxuICAgIHNvY2tldC5vbignY29ubmVjdGVkJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTb2NrZXQgY29ubmVjdGlvbiBzdWNjZXNzZnVsIScpO1xyXG4gICAgfSlcclxuXHJcbiAgICBzb2NrZXQub24oXCJjb25uZWN0X2Vycm9yXCIsIChlcnIpID0+IHtcclxuICAgICAgICAvLyB0aGUgcmVhc29uIG9mIHRoZSBlcnJvciwgZm9yIGV4YW1wbGUgXCJ4aHIgcG9sbCBlcnJvclwiXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlNvY2tldCBlcnJvclwiLCB7XHJcbiAgICAgICAgICAgIG1zZzogZXJyLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgIGRlc2M6IGVyci5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY29udGV4dDogZXJyLmNvbnRleHRcclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG4gICAgcHJpbnRlclNvY2tldHMoKTtcclxufVxyXG5cclxuY29uc3QgY3VycmVuY3kgPSBcItC70LIuXCI7XHJcbmV4cG9ydCBjb25zdCBhc3RlcmlzayA9IGh0bWxgPGkgY2xhc3M9XCJiaSBiaS1hc3RlcmlzayB0ZXh0LWRhbmdlciBhc3Rlcmlza1wiPjwvaT5gO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZURhcmtNb2RlKHsgYXBwU3RhcnQgPSBmYWxzZSB9KSB7XHJcbiAgICBjb25zdCBjdXJyZW50ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RhcmtNb2RlJyk7XHJcblxyXG4gICAgaWYgKGFwcFN0YXJ0KSB7XHJcbiAgICAgICAgaWYgKGN1cnJlbnQgPT09ICd0cnVlJykge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykuc2V0QXR0cmlidXRlKCdkYXRhLWJzLXRoZW1lJywgJ2RhcmsnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykuc2V0QXR0cmlidXRlKCdkYXRhLWJzLXRoZW1lJywgJ2xpZ2h0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY3VycmVudCA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2RhcmtNb2RlJywgJ2ZhbHNlJyk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpLnNldEF0dHJpYnV0ZSgnZGF0YS1icy10aGVtZScsICdsaWdodCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGFya01vZGUnLCAndHJ1ZScpO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtdGhlbWUnLCAnZGFyaycpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFya1ZhbGlkRWwoZWwpIHtcclxuICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2lzLXZhbGlkJyk7XHJcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1pbnZhbGlkJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXJrSW52YWxpZEVsKGVsKSB7XHJcbiAgICBlbC5jbGFzc0xpc3QuYWRkKCdpcy1pbnZhbGlkJyk7XHJcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy12YWxpZCcpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXJrVmFsaWQoZWxOYW1lKSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsTmFtZSk7XHJcbiAgICBlbC5jbGFzc0xpc3QuYWRkKCdpcy12YWxpZCcpO1xyXG4gICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtaW52YWxpZCcpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFya0ludmFsaWQoZWxOYW1lKSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsTmFtZSk7XHJcbiAgICBlbC5jbGFzc0xpc3QuYWRkKCdpcy1pbnZhbGlkJyk7XHJcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy12YWxpZCcpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRQcmljZShwcmljZSkge1xyXG4gICAgLy8gQ29udmVydCB0byB4eCB4eHgueHgg0LvQsi5cclxuICAgIHByaWNlID0gcHJpY2UudG9GaXhlZCgyKTtcclxuICAgIHByaWNlID0gcHJpY2UudG9TdHJpbmcoKS5yZXBsYWNlKC9cXEIoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCBcIiBcIik7XHJcbiAgICBwcmljZSArPSBgICR7Y3VycmVuY3l9YDtcclxuICAgIHJldHVybiBwcmljZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFByaWNlTm9DdXJyZW5jeShwcmljZSkge1xyXG4gICAgLy8gQ29udmVydCB0byB4eCB4eHgueHhcclxuICAgIHByaWNlID0gcHJpY2UudG9GaXhlZCgyKTtcclxuICAgIHByaWNlID0gcHJpY2UudG9TdHJpbmcoKS5yZXBsYWNlKC9cXEIoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCBcIiBcIik7XHJcbiAgICByZXR1cm4gcHJpY2U7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBudW1iZXJUb0JHVGV4dChudW1iZXIpIHtcclxuICAgIC8vIENyZWF0ZWQgYnkgaHR0cHM6Ly9nZW9yZ2kudW5peHNvbC5vcmcvcHJvZ3JhbXMvbnVtMmJnbW9uZXkucGhwL3ZpZXcvIGluIFBIUFxyXG4gICAgZnVuY3Rpb24gY29udmVydChudW1iZXIsIHN0b3RpbmtpID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBudW0wID0ge1xyXG4gICAgICAgICAgICAwOiBcItC90YPQu9CwXCIsXHJcbiAgICAgICAgICAgIDE6IFwi0LXQtNC40L1cIixcclxuICAgICAgICAgICAgMjogXCLQtNCy0LVcIixcclxuICAgICAgICAgICAgMzogXCLRgtGA0LhcIixcclxuICAgICAgICAgICAgNDogXCLRh9C10YLQuNGA0LhcIixcclxuICAgICAgICAgICAgNTogXCLQv9C10YJcIixcclxuICAgICAgICAgICAgNjogXCLRiNC10YHRglwiLFxyXG4gICAgICAgICAgICA3OiBcItGB0LXQtNC10LxcIixcclxuICAgICAgICAgICAgODogXCLQvtGB0LXQvFwiLFxyXG4gICAgICAgICAgICA5OiBcItC00LXQstC10YJcIixcclxuICAgICAgICAgICAgMTA6IFwi0LTQtdGB0LXRglwiLFxyXG4gICAgICAgICAgICAxMTogXCLQtdC00LjQvdCw0LTQtdGB0LXRglwiLFxyXG4gICAgICAgICAgICAxMjogXCLQtNCy0LDQvdCw0LTQtdGB0LXRglwiLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbnVtMTAwID0ge1xyXG4gICAgICAgICAgICAxOiBcItGB0YLQvlwiLFxyXG4gICAgICAgICAgICAyOiBcItC00LLQtdGB0YLQsFwiLFxyXG4gICAgICAgICAgICAzOiBcItGC0YDQuNGB0YLQsFwiXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkaXYxMCA9IChudW1iZXIgLSBudW1iZXIgJSAxMCkgLyAxMDtcclxuICAgICAgICBjb25zdCBtb2QxMCA9IG51bWJlciAlIDEwO1xyXG4gICAgICAgIGNvbnN0IGRpdjEwMCA9IChudW1iZXIgLSBudW1iZXIgJSAxMDApIC8gMTAwO1xyXG4gICAgICAgIGNvbnN0IG1vZDEwMCA9IG51bWJlciAlIDEwMDtcclxuICAgICAgICBjb25zdCBkaXYxMDAwID0gKG51bWJlciAtIG51bWJlciAlIDEwMDApIC8gMTAwMDtcclxuICAgICAgICBjb25zdCBtb2QxMDAwID0gbnVtYmVyICUgMTAwMDtcclxuICAgICAgICBjb25zdCBkaXYxMDAwMDAwID0gKG51bWJlciAtIG51bWJlciAlIDEwMDAwMDApIC8gMTAwMDAwMDtcclxuICAgICAgICBjb25zdCBtb2QxMDAwMDAwID0gbnVtYmVyICUgMTAwMDAwMDtcclxuICAgICAgICBjb25zdCBkaXYxMDAwMDAwMDAwID0gKG51bWJlciAtIG51bWJlciAlIDEwMDAwMDAwMDApIC8gMTAwMDAwMDAwMDtcclxuICAgICAgICBjb25zdCBtb2QxMDAwMDAwMDAwID0gbnVtYmVyICUgMTAwMDAwMDAwMDtcclxuXHJcbiAgICAgICAgaWYgKG51bWJlciA9PSAwKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVtMFswXTtcclxuXHJcbiAgICAgICAgLy8gVGlsbCAyMFxyXG4gICAgICAgIGlmIChudW1iZXIgPiAwICYmIG51bWJlciA8IDIwKSB7XHJcbiAgICAgICAgICAgIGlmIChzdG90aW5raSAmJiBudW1iZXIgPT09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCLQtdC00L3QsFwiO1xyXG4gICAgICAgICAgICBpZiAoc3RvdGlua2kgJiYgbnVtYmVyID09PSAyKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwi0LTQstC1XCI7XHJcbiAgICAgICAgICAgIGlmIChudW1iZXIgPT09IDIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCLQtNCy0LBcIjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudW1iZXIgaW4gbnVtMCA/IG51bTBbbnVtYmVyXSA6IG51bTBbbW9kMTBdICs9ICfQvdCw0LTQtdGB0LXRgic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUaWxsIDEwMFxyXG4gICAgICAgIGlmIChudW1iZXIgPiAxOSAmJiBudW1iZXIgPCAxMDApIHtcclxuICAgICAgICAgICAgbGV0IHRlbXAgPSBkaXYxMCA9PT0gMiA/IFwi0LTQstCw0LTQtdGB0LXRglwiIDogbnVtMFtkaXYxMF0gKyBcItC00LXRgdC10YJcIjtcclxuICAgICAgICAgICAgaWYgKG1vZDEwKSB0ZW1wICs9IFwiINC4IFwiICsgY29udmVydChtb2QxMCwgc3RvdGlua2kpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGVtcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRpbGwgMSwwMDBcclxuICAgICAgICBpZiAobnVtYmVyID4gOTkgJiYgbnVtYmVyIDwgMTAwMCkge1xyXG4gICAgICAgICAgICBsZXQgdGVtcCA9IGRpdjEwMCBpbiBudW0xMDAgPyBudW0xMDBbZGl2MTAwXSA6IG51bTBbZGl2MTAwXSArICfRgdGC0L7RgtC40L0nO1xyXG4gICAgICAgICAgICBpZiAoKG1vZDEwMCAlIDEwID09PSAwIHx8IG1vZDEwMCA8IDIwKSAmJiBtb2QxMDAgIT09IDApIHRlbXAgKz0gJyDQuCc7XHJcbiAgICAgICAgICAgIGlmIChtb2QxMDApIHRlbXAgKz0gXCIgXCIgKyBjb252ZXJ0KG1vZDEwMCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGVtcFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVGlsbCAxLDAwMCwwMDBcclxuICAgICAgICBpZiAobnVtYmVyID4gOTk5ICYmIG51bWJlciA8IDEwMDAwMDApIHtcclxuICAgICAgICAgICAgLyogRGFtbiBidWxnYXJpYW4gQCMkJUAjJCUg0LTQstCwINGF0LjQu9GP0LTQuCBpcyB3cm9uZyA6KSAqL1xyXG4gICAgICAgICAgICBsZXQgdGVtcCA9IGRpdjEwMDAgPT09IDEgPyBcItGF0LjQu9GP0LTQsFwiIDogZGl2MTAwMCA9PT0gMiA/IFwi0LTQstC1INGF0LjQu9GP0LTQuFwiIDogY29udmVydChkaXYxMDAwKSArIFwiINGF0LjQu9GP0LTQuFwiO1xyXG4gICAgICAgICAgICBudW0wWzJdID0gXCLQtNCy0LBcIjtcclxuXHJcbiAgICAgICAgICAgIGlmICgobW9kMTAwMCAlIDEwID09PSAwIHx8IG1vZDEwMDAgPCAyMCkgJiYgbW9kMTAwMCAhPT0gMClcclxuICAgICAgICAgICAgICAgIGlmICghKChtb2QxMDAgJSAxMCA9PSAwIHx8IG1vZDEwMCA8IDIwKSAmJiBtb2QxMDAgIT09IDApKSB0ZW1wICs9ICcg0LgnO1xyXG5cclxuICAgICAgICAgICAgaWYgKChtb2QxMDAwICUgMTAgPT09IDAgfHwgbW9kMTAwMCA8IDIwKSAmJiBtb2QxMDAwICE9PSAwICYmIG1vZDEwMDAgPCAxMDApIHJldHVybiB0ZW1wICs9ICcg0LgnO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1vZDEwMDApIHRlbXAgKz0gXCIgXCIgKyBjb252ZXJ0KG1vZDEwMDApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRlbXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBPdmVyIGEgbWlsbGlvbiAqL1xyXG4gICAgICAgIGlmIChudW1iZXIgPiA5OTk5OTkgJiYgbnVtYmVyIDwgMTAwMDAwMDAwMCkge1xyXG4gICAgICAgICAgICBsZXQgdGVtcCA9IChkaXYxMDAwMDAwID09IDEpID8gXCLQtdC00LjQvSDQvNC40LvQuNC+0L1cIiA6IGNvbnZlcnQoZGl2MTAwMDAwMCkgKyBcIiDQvNC40LvQuNC+0L3QsFwiO1xyXG4gICAgICAgICAgICBpZiAoKG1vZDEwMDAwMDAgJSAxMCA9PSAwIHx8IG1vZDEwMDAwMDAgPCAyMCkgJiYgbW9kMTAwMDAwMCAhPSAwKVxyXG4gICAgICAgICAgICAgICAgaWYgKCEoKG1vZDEwMDAgJSAxMCA9PSAwIHx8IG1vZDEwMDAgPCAyMCkgJiYgbW9kMTAwMCAhPSAwKSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISgobW9kMTAwICUgMTAgPT0gMCB8fCBtb2QxMDAgPCAyMCkgJiYgbW9kMTAwICE9IDApKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wICs9IFwiINC4XCI7XHJcblxyXG4gICAgICAgICAgICBpZiAoKG1vZDEwMDAwMDAgJSAxMCA9PSAwIHx8IG1vZDEwMDAwMDAgPCAyMCkgJiYgbW9kMTAwMDAwMCAhPSAwICYmIG1vZDEwMDAwMDAgPCAxMDAwKVxyXG4gICAgICAgICAgICAgICAgaWYgKChtb2QxMDAwICUgMTAgPT0gMCB8fCBtb2QxMDAwIDwgMjApICYmIG1vZDEwMDAgIT0gMCAmJiBtb2QxMDAwIDwgMTAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXAgKz0gXCIg0LhcIjtcclxuXHJcbiAgICAgICAgICAgIGlmIChtb2QxMDAwMDAwKVxyXG4gICAgICAgICAgICAgICAgdGVtcCArPSBcIiBcIiArIGNvbnZlcnQobW9kMTAwMDAwMCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZW1wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogT3ZlciBhIGJpbGxpb24gKi9cclxuICAgICAgICBpZiAobnVtYmVyID4gOTk5OTk5OTkgJiYgbnVtYmVyIDw9IDIwMDAwMDAwMDApIHtcclxuICAgICAgICAgICAgbGV0IHRlbXAgPSAoZGl2MTAwMDAwMDAwMCA9PSAxKSA/IFwi0LXQtNC40L0g0LzQuNC70LjQsNGA0LRcIiA6IFwiXCI7XHJcbiAgICAgICAgICAgIHRlbXAgPSAoZGl2MTAwMDAwMDAwMCA9PSAyKSA/IFwi0LTQstCwINC80LjQu9C40LDRgNC00LBcIiA6IHRlbXA7XHJcbiAgICAgICAgICAgIGlmIChtb2QxMDAwMDAwMDAwKVxyXG4gICAgICAgICAgICAgICAgdGVtcCArPSBcIiBcIiArIGNvbnZlcnQobW9kMTAwMDAwMDAwMCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGVtcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyogQnllIC4uLiAqL1xyXG4gICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBbbHYsIHN0XSA9IG51bWJlci50b0ZpeGVkKDIpLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpO1xyXG4gICAgbHYgPSBOdW1iZXIobHYpO1xyXG5cclxuICAgIGlmIChsdiA+PSAyMDAwMDAwMDAwKVxyXG4gICAgICAgIHJldHVybjsgLy8gVG9vIGJpZyBudW1iZXJcclxuXHJcbiAgICBsZXQgdGV4dCA9IGNvbnZlcnQobHYpO1xyXG4gICAgdGV4dCArPSBsdiA9PT0gMSA/IFwiINC70LXQslwiIDogXCIg0LvQtdCy0LBcIjtcclxuXHJcbiAgICBpZiAoc3QgJiYgc3QgIT09IDApIHtcclxuICAgICAgICBsZXQgc3R0ZXh0ID0gY29udmVydChzdCwgdHJ1ZSk7XHJcbiAgICAgICAgdGV4dCArPSBcIiDQuCBcIiArIHN0dGV4dDtcclxuICAgICAgICB0ZXh0ICs9IHN0ID09PSAxID8gXCIg0YHRgtC+0YLQuNC90LrQsFwiIDogXCIg0YHRgtC+0YLQuNC90LrQuFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0ZXh0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmF0KHByaWNlLCB2YXQpIHtcclxuICAgIGlmICh2YXQgPT09IHVuZGVmaW5lZClcclxuICAgICAgICB2YXQgPSAyMDtcclxuICAgIC8vIEV4dHJhY3QgdmF0IGZyb20gcHJpY2UgKHByaWNlIGFscmVhZHkgaW5jbHVkZXMgdmF0KVxyXG4gICAgcmV0dXJuIChwcmljZSAqIHZhdCkgLyAxMDA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWR1Y3RWYXQocHJpY2UsIHZhdCkge1xyXG4gICAgaWYgKHZhdCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHZhdCA9IDIwO1xyXG4gICAgLy8gUmV0dXJuIHRoZSBvcmlnaW5hbCBwcmljZSB3aXRoIGRlZHVjdGVkIHZhdFxyXG4gICAgcmV0dXJuIHByaWNlIC0gKChwcmljZSAqIHZhdCkgLyAxMDApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcm91bmRQcmljZShwcmljZSkge1xyXG4gICAgLy8gUm91bmQgdG8gMSBkZWNpbWFsXHJcbiAgICByZXR1cm4gTWF0aC5yb3VuZChwcmljZSAqIDEwKSAvIDEwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGVsYXkoZm4sIG1zKSB7XHJcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgZm9yIGNhbGN1bGF0aW5nIHRoZSB0aW1lIGJldHdlZW4ga2V5IHByZXNzZXMgaW4gdGhlIHNlYXJjaCBiYXJcclxuICAgIC8vIFNvIHdlIGNhbiBmaXJlIHRoZSBzZWFyY2ggb25seSBhZnRlciB0aGUgdXNlciBoYXMgc3RvcHBlZCB0eXBpbmcgZm9yIGEgY2VydGFpbiBhbW91bnQgb2YgdGltZVxyXG4gICAgbGV0IHRpbWVyID0gMFxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKVxyXG4gICAgICAgIHRpbWVyID0gc2V0VGltZW91dChmbi5iaW5kKHRoaXMsIC4uLmFyZ3MpLCBtcyB8fCAwKVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkUXVlcnkoY3R4LCBuYW1lLCB2YWx1ZSkge1xyXG4gICAgdmFyIHVyaSA9IGN0eC5wYXRoO1xyXG5cclxuICAgIGlmICghbmFtZSB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHJldHVybiB1cmk7XHJcblxyXG4gICAgaWYgKCFjdHgucXVlcnlzdHJpbmcpXHJcbiAgICAgICAgcmV0dXJuIHVyaSArPSBgPyR7bmFtZX09JHt2YWx1ZX1gO1xyXG5cclxuICAgIGlmIChjdHgucXVlcnlzdHJpbmcgJiYgIWN0eC5xdWVyeXN0cmluZy5pbmNsdWRlcyhuYW1lKSlcclxuICAgICAgICByZXR1cm4gdXJpICs9IGAmJHtuYW1lfT0ke3ZhbHVlfWA7XHJcblxyXG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGAke25hbWV9PVteJl0qYCk7XHJcblxyXG4gICAgcmV0dXJuIHVyaSA9IHVyaS5yZXBsYWNlKHJlZ2V4LCBgJHtuYW1lfT0ke3ZhbHVlfWApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUXVlcnkoY3R4LCBuYW1lKSB7XHJcbiAgICB2YXIgdXJpID0gY3R4LnBhdGg7XHJcblxyXG4gICAgY29uc3QgcmVtb3ZlUmVnZXggPSBuZXcgUmVnRXhwKGAoXFxcXD8pPygmKT8ke25hbWV9PVteJl0qYCk7XHJcbiAgICB1cmkgPSB1cmkucmVwbGFjZShyZW1vdmVSZWdleCwgJycpO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHVybCBpcyBidWdnZWQgKC4uL3VybCZuYW1lPXZhbHVlKSBhbmQgY29udmVydCB0byAoLi4vdXJsP25hbWU9dmFsdWUpXHJcbiAgICBjb25zdCBidWdmaXhSZWdleCA9IC9cXC8uKygmKS4rPS87XHJcbiAgICBpZiAoYnVnZml4UmVnZXgudGVzdCh1cmkpKVxyXG4gICAgICAgIHVyaSA9IHVyaS5yZXBsYWNlKC8mLywgJz8nKTtcclxuXHJcbiAgICByZXR1cm4gdXJpO1xyXG59XHJcblxyXG4vLyByZXBsYWNlIGN5cmlsbGljIGNoYXJhY3RlcnMgd2l0aCBsYXRpblxyXG5jb25zdCBhbHBoYWJldCA9IHsgXCLQsFwiOiBcImFcIiwgXCLQsVwiOiBcImJcIiwgXCLQslwiOiBcInZcIiwgXCLQs1wiOiBcImdcIiwgXCLQtFwiOiBcImRcIiwgXCLQtVwiOiBcImVcIiwgXCLQtlwiOiBcImpcIiwgXCLQt1wiOiBcInpcIiwgXCLQuFwiOiBcImlcIiwgXCLQuVwiOiBcInlcIiwgXCLQulwiOiBcImtcIiwgXCLQu1wiOiBcImxcIiwgXCLQvFwiOiBcIm1cIiwgXCLQvVwiOiBcIm5cIiwgXCLQvlwiOiBcIm9cIiwgXCLQv1wiOiBcInBcIiwgXCLRgFwiOiBcInJcIiwgXCLRgVwiOiBcInNcIiwgXCLRglwiOiBcInRcIiwgXCLRg1wiOiBcInVcIiwgXCLRhFwiOiBcImZcIiwgXCLRhVwiOiBcImhcIiwgXCLRhlwiOiBcImNcIiwgXCLRh1wiOiBcImNoXCIsIFwi0YhcIjogXCJzaFwiLCBcItGJXCI6IFwic2h0XCIsIFwi0YpcIjogXCJ1XCIsIFwi0YxcIjogXCJ5XCIsIFwi0Y5cIjogXCJ5dVwiLCBcItGPXCI6IFwieWFcIiB9O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGl0ZXJhdGUod29yZCkge1xyXG4gICAgcmV0dXJuIHdvcmQuc3BsaXQoJycpLm1hcChmdW5jdGlvbiAoY2hhcikge1xyXG4gICAgICAgIHJldHVybiBhbHBoYWJldFtjaGFyXSB8fCBjaGFyO1xyXG4gICAgfSkuam9pbihcIlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNsdWdpZnkod29yZCkge1xyXG4gICAgcmV0dXJuIHRyYW5zbGl0ZXJhdGUod29yZC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLyAvZywgJy0nKSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJldmVyc2VUcmFuc2xpdGFyYXRlKHdvcmQpIHtcclxuICAgIHJldHVybiB3b3JkLnNwbGl0KCcnKS5tYXAoZnVuY3Rpb24gKGNoYXIpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoYWxwaGFiZXQpLmZpbmQoa2V5ID0+IGFscGhhYmV0W2tleV0gPT09IGNoYXIpIHx8IGNoYXI7XHJcbiAgICB9KS5qb2luKFwiXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdW5zbHVnaWZ5KHdvcmQpIHtcclxuICAgIHZhciBuZXdXb3JkID0gcmV2ZXJzZVRyYW5zbGl0YXJhdGUod29yZC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLy0vZywgJyAnKSk7XHJcbiAgICByZXR1cm4gbmV3V29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5ld1dvcmQuc2xpY2UoMSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzdWNjZXNzU2Nhbih0YXJnZXQpIHtcclxuICAgIGNvbnN0IGJlZXAgPSBuZXcgQXVkaW8oJy9hdWRpby9iZWVwLm1wMycpO1xyXG4gICAgYmVlcC5wbGF5KCk7XHJcblxyXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2ZsYXNoaW5nU3VjY2Vzc0JvcmRlcicpXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdmbGFzaGluZ1N1Y2Nlc3NCb3JkZXInKSwgMTAwMCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsb2FkUHJldmlld0ltYWdlKGUpIHtcclxuICAgIGNvbnN0IGltYWdlID0gZS50YXJnZXQuZmlsZXNbMF07XHJcbiAgICBjb25zdCBpbWFnZVByZXZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VQcmV2aWV3Jyk7XHJcbiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cclxuICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGltYWdlUHJldmlldy5zcmMgPSBlLnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgaW1hZ2VQcmV2aWV3LmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGltYWdlKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHByaWNlUmVnZXggPSAvXlxcZHsxLH0oXFwuXFxkezEsMn0pPyQvOyAvLyBnb29kOiAwLjAxLCAwLjIsIDE7IGJhZDogMC4wMDFcclxuZXhwb3J0IGZ1bmN0aW9uIGZpeElucHV0UHJpY2UodGFyZ2V0LCByb3VuZCA9IGZhbHNlKSB7XHJcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIHJlcGxhY2VzIGNvbW1hIHdpdGggZG90IChmcm9tIG1vYmlsZSBrZXlib2FyZClcclxuICAgIC8vIEl0IGFsc28gbGltaXRzIHRoZSBudW1iZXIgdG8gMiBkZWNpbWFsIHBsYWNlcyBtYXhcclxuICAgIGxldCB2YWx1ZSA9IHRhcmdldC52YWx1ZTtcclxuXHJcbiAgICBpZiAodmFsdWUgPT09ICcnKSByZXR1cm47XHJcblxyXG4gICAgdmFsdWUgPSBOdW1iZXIodGFyZ2V0LnZhbHVlLnJlcGxhY2UoJywnLCAnLicpKTtcclxuXHJcbiAgICBpZiAodGFyZ2V0LnZhbHVlID09PSAnJyB8fCBpc05hTih2YWx1ZSkpXHJcbiAgICAgICAgcmV0dXJuIHRhcmdldC52YWx1ZSA9ICcnO1xyXG5cclxuICAgIC8vIGlmIGxhc3QgY2hhcmFjdGVyIGlzIGEgY29tbWEsIHJlcGxhY2UgaXQgd2l0aCBkb3RcclxuICAgIGlmICh0YXJnZXQudmFsdWUuc2xpY2UoLTEpID09PSAnLCcpXHJcbiAgICAgICAgdGFyZ2V0LnZhbHVlID0gdGFyZ2V0LnZhbHVlLnJlcGxhY2UoJywnLCAnLicpO1xyXG4gICAgZWxzZSBpZiAocm91bmQgJiYgdGFyZ2V0LnZhbHVlLnNsaWNlKC0xKSAhPT0gJy4nKSAvLyB1c2VkIGluIHByb2R1Y3RzIHBhZ2VcclxuICAgICAgICB0YXJnZXQudmFsdWUgPSByb3VuZFByaWNlKHZhbHVlKTtcclxuICAgIGVsc2UgaWYgKHRhcmdldC52YWx1ZS5zbGljZSgtMSkgIT09ICcuJyAmJiAhcHJpY2VSZWdleC50ZXN0KHZhbHVlKSkgLy8gbWF5IGJlIHVzZWQgaW4gb3JkZXJzIHBhZ2UsIGN1cnJlbnRseSB1c2luZyByb3VuZFxyXG4gICAgICAgIHRhcmdldC52YWx1ZSA9IHZhbHVlLnRvRml4ZWQoMik7XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api.js\n");

/***/ }),

/***/ "./src/app.js":
/*!********************!*\
  !*** ./src/app.js ***!
  \********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   container: () => (/* binding */ container)\n/* harmony export */ });\n/* harmony import */ var _css_global_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/css/global.css */ \"./src/css/global.css\");\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _views_main_main_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/views/main/main.js */ \"./src/views/main/main.js\");\n/* harmony import */ var _views_login_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/views/login.js */ \"./src/views/login.js\");\n/* harmony import */ var _views_customers_routes_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/views/customers/routes.js */ \"./src/views/customers/routes.js\");\n/* harmony import */ var _views_products_routes_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/views/products/routes.js */ \"./src/views/products/routes.js\");\n/* harmony import */ var _views_categories_routes_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/views/categories/routes.js */ \"./src/views/categories/routes.js\");\n/* harmony import */ var _views_admin_users_routes_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/views/admin/users/routes.js */ \"./src/views/admin/users/routes.js\");\n/* harmony import */ var _views_orders_routes_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/views/orders/routes.js */ \"./src/views/orders/routes.js\");\n/* harmony import */ var _views_admin_settings_routes_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/views/admin/settings/routes.js */ \"./src/views/admin/settings/routes.js\");\n/* harmony import */ var _views_admin_companies_routes_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/views/admin/companies/routes.js */ \"./src/views/admin/companies/routes.js\");\n/* harmony import */ var _views_references_orders_routes_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/views/references/orders/routes.js */ \"./src/views/references/orders/routes.js\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/api */ \"./src/api.js\");\n/* harmony import */ var _printer__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/printer */ \"./src/printer.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst container = document.querySelector('body'); // where to render everything\r\n\r\nfunction auth(ctx, next) {\r\n    if (!_views_login_js__WEBPACK_IMPORTED_MODULE_3__.loggedInUser)\r\n        return page__WEBPACK_IMPORTED_MODULE_1__('/login');\r\n    next();\r\n}\r\n\r\nfunction keybinds(e) {\r\n    if (!_views_login_js__WEBPACK_IMPORTED_MODULE_3__.loggedInUser || e.ctrlKey === false) return;\r\n    if (e.code === 'Digit2') { // CTRL+2 - new order page\r\n        e.preventDefault();\r\n        page__WEBPACK_IMPORTED_MODULE_1__('/orders/create');\r\n    } else if (e.code === 'Digit3') { // CTRL+3 - new product page\r\n        e.preventDefault();\r\n        page__WEBPACK_IMPORTED_MODULE_1__('/products/create')\r\n    } else if (e.code === 'Digit4') { // CTRL+4 - new customer page\r\n        e.preventDefault();\r\n        page__WEBPACK_IMPORTED_MODULE_1__('/customers/create')\r\n    }\r\n}\r\n\r\ndocument.onkeydown = keybinds;\r\n\r\npage__WEBPACK_IMPORTED_MODULE_1__('/', _views_main_main_js__WEBPACK_IMPORTED_MODULE_2__.mainPage);\r\npage__WEBPACK_IMPORTED_MODULE_1__('/login', _views_login_js__WEBPACK_IMPORTED_MODULE_3__.loginPage);\r\npage__WEBPACK_IMPORTED_MODULE_1__('/logout', auth, _views_login_js__WEBPACK_IMPORTED_MODULE_3__.logout);\r\npage__WEBPACK_IMPORTED_MODULE_1__('/worker', auth, _views_main_main_js__WEBPACK_IMPORTED_MODULE_2__.mainPage);\r\n(0,_views_products_routes_js__WEBPACK_IMPORTED_MODULE_5__.productsRoutes)(auth);\r\n(0,_views_customers_routes_js__WEBPACK_IMPORTED_MODULE_4__.customersRoutes)(auth);\r\n(0,_views_categories_routes_js__WEBPACK_IMPORTED_MODULE_6__.categoriesRoutes)(auth);\r\n(0,_views_orders_routes_js__WEBPACK_IMPORTED_MODULE_8__.salesRoutes)(auth);\r\n(0,_views_admin_users_routes_js__WEBPACK_IMPORTED_MODULE_7__.usersRoutes)();\r\n(0,_views_admin_settings_routes_js__WEBPACK_IMPORTED_MODULE_9__.settingsRoutes)();\r\n(0,_views_admin_companies_routes_js__WEBPACK_IMPORTED_MODULE_10__.companiesRoutes)();\r\n(0,_views_references_orders_routes_js__WEBPACK_IMPORTED_MODULE_11__.referencesSalesRoutes)(auth);\r\npage__WEBPACK_IMPORTED_MODULE_1__('*', () => page__WEBPACK_IMPORTED_MODULE_1__('/')); // Everything else, redirect to home page\r\n\r\npage__WEBPACK_IMPORTED_MODULE_1__();\r\n\r\nif (!_views_login_js__WEBPACK_IMPORTED_MODULE_3__.loggedInUser)\r\n    page__WEBPACK_IMPORTED_MODULE_1__('/login');\r\n\r\n(0,_api__WEBPACK_IMPORTED_MODULE_12__.initSocket)();\r\n(0,_printer__WEBPACK_IMPORTED_MODULE_13__.printerSetup)();\r\n\r\n\r\n(0,_api__WEBPACK_IMPORTED_MODULE_12__.toggleDarkMode)({ appStart: true }); // Set dark mode on app start//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwQjtBQUNGO0FBQ3dCO0FBQ21CO0FBQ0w7QUFDRjtBQUNJO0FBQ0o7QUFDTDtBQUNXO0FBQ0U7QUFDUTtBQUN6QjtBQUNWO0FBQ3pDO0FBQ0E7QUFDTyxrREFBa0Q7QUFDekQ7QUFDQTtBQUNBLFNBQVMseURBQVk7QUFDckIsZUFBZSxpQ0FBSTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMseURBQVk7QUFDckIsK0JBQStCO0FBQy9CO0FBQ0EsUUFBUSxpQ0FBSTtBQUNaLE1BQU0sZ0NBQWdDO0FBQ3RDO0FBQ0EsUUFBUSxpQ0FBSTtBQUNaLE1BQU0sZ0NBQWdDO0FBQ3RDO0FBQ0EsUUFBUSxpQ0FBSTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBSSxNQUFNLHlEQUFRO0FBQ2xCLGlDQUFJLFdBQVcsc0RBQVM7QUFDeEIsaUNBQUksa0JBQWtCLG1EQUFNO0FBQzVCLGlDQUFJLGtCQUFrQix5REFBUTtBQUM5Qix5RUFBYztBQUNkLDJFQUFlO0FBQ2YsNkVBQWdCO0FBQ2hCLG9FQUFXO0FBQ1gseUVBQVc7QUFDWCwrRUFBYztBQUNkLGtGQUFlO0FBQ2YsMEZBQXFCO0FBQ3JCLGlDQUFJLFlBQVksaUNBQUksUUFBUTtBQUM1QjtBQUNBLGlDQUFJO0FBQ0o7QUFDQSxLQUFLLHlEQUFZO0FBQ2pCLElBQUksaUNBQUk7QUFDUjtBQUNBLGlEQUFVO0FBQ1YsdURBQVk7QUFDWjtBQUNBO0FBQ0EscURBQWMsR0FBRyxnQkFBZ0IsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvYXBwLmpzPzk1YjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdAL2Nzcy9nbG9iYWwuY3NzJztcclxuaW1wb3J0IHBhZ2UgZnJvbSAncGFnZSc7XHJcbmltcG9ydCB7IG1haW5QYWdlIH0gZnJvbSAnQC92aWV3cy9tYWluL21haW4uanMnO1xyXG5pbXBvcnQgeyBsb2dvdXQsIGxvZ2luUGFnZSwgbG9nZ2VkSW5Vc2VyIH0gZnJvbSAnQC92aWV3cy9sb2dpbi5qcyc7XHJcbmltcG9ydCB7IGN1c3RvbWVyc1JvdXRlcyB9IGZyb20gJ0Avdmlld3MvY3VzdG9tZXJzL3JvdXRlcy5qcyc7XHJcbmltcG9ydCB7IHByb2R1Y3RzUm91dGVzIH0gZnJvbSAnQC92aWV3cy9wcm9kdWN0cy9yb3V0ZXMuanMnO1xyXG5pbXBvcnQgeyBjYXRlZ29yaWVzUm91dGVzIH0gZnJvbSAnQC92aWV3cy9jYXRlZ29yaWVzL3JvdXRlcy5qcyc7XHJcbmltcG9ydCB7IHVzZXJzUm91dGVzIH0gZnJvbSAnQC92aWV3cy9hZG1pbi91c2Vycy9yb3V0ZXMuanMnO1xyXG5pbXBvcnQgeyBzYWxlc1JvdXRlcyB9IGZyb20gJ0Avdmlld3Mvb3JkZXJzL3JvdXRlcy5qcyc7XHJcbmltcG9ydCB7IHNldHRpbmdzUm91dGVzIH0gZnJvbSAnQC92aWV3cy9hZG1pbi9zZXR0aW5ncy9yb3V0ZXMuanMnO1xyXG5pbXBvcnQgeyBjb21wYW5pZXNSb3V0ZXMgfSBmcm9tICdAL3ZpZXdzL2FkbWluL2NvbXBhbmllcy9yb3V0ZXMuanMnO1xyXG5pbXBvcnQgeyByZWZlcmVuY2VzU2FsZXNSb3V0ZXMgfSBmcm9tICdAL3ZpZXdzL3JlZmVyZW5jZXMvb3JkZXJzL3JvdXRlcy5qcyc7XHJcbmltcG9ydCB7IHRvZ2dsZURhcmtNb2RlLCBpbml0U29ja2V0IH0gZnJvbSAnQC9hcGknO1xyXG5pbXBvcnQgeyBwcmludGVyU2V0dXAgfSBmcm9tICdAL3ByaW50ZXInO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7IC8vIHdoZXJlIHRvIHJlbmRlciBldmVyeXRoaW5nXHJcblxyXG5mdW5jdGlvbiBhdXRoKGN0eCwgbmV4dCkge1xyXG4gICAgaWYgKCFsb2dnZWRJblVzZXIpXHJcbiAgICAgICAgcmV0dXJuIHBhZ2UoJy9sb2dpbicpO1xyXG4gICAgbmV4dCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBrZXliaW5kcyhlKSB7XHJcbiAgICBpZiAoIWxvZ2dlZEluVXNlciB8fCBlLmN0cmxLZXkgPT09IGZhbHNlKSByZXR1cm47XHJcbiAgICBpZiAoZS5jb2RlID09PSAnRGlnaXQyJykgeyAvLyBDVFJMKzIgLSBuZXcgb3JkZXIgcGFnZVxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBwYWdlKCcvb3JkZXJzL2NyZWF0ZScpO1xyXG4gICAgfSBlbHNlIGlmIChlLmNvZGUgPT09ICdEaWdpdDMnKSB7IC8vIENUUkwrMyAtIG5ldyBwcm9kdWN0IHBhZ2VcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgcGFnZSgnL3Byb2R1Y3RzL2NyZWF0ZScpXHJcbiAgICB9IGVsc2UgaWYgKGUuY29kZSA9PT0gJ0RpZ2l0NCcpIHsgLy8gQ1RSTCs0IC0gbmV3IGN1c3RvbWVyIHBhZ2VcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgcGFnZSgnL2N1c3RvbWVycy9jcmVhdGUnKVxyXG4gICAgfVxyXG59XHJcblxyXG5kb2N1bWVudC5vbmtleWRvd24gPSBrZXliaW5kcztcclxuXHJcbnBhZ2UoJy8nLCBtYWluUGFnZSk7XHJcbnBhZ2UoJy9sb2dpbicsIGxvZ2luUGFnZSk7XHJcbnBhZ2UoJy9sb2dvdXQnLCBhdXRoLCBsb2dvdXQpO1xyXG5wYWdlKCcvd29ya2VyJywgYXV0aCwgbWFpblBhZ2UpO1xyXG5wcm9kdWN0c1JvdXRlcyhhdXRoKTtcclxuY3VzdG9tZXJzUm91dGVzKGF1dGgpO1xyXG5jYXRlZ29yaWVzUm91dGVzKGF1dGgpO1xyXG5zYWxlc1JvdXRlcyhhdXRoKTtcclxudXNlcnNSb3V0ZXMoKTtcclxuc2V0dGluZ3NSb3V0ZXMoKTtcclxuY29tcGFuaWVzUm91dGVzKCk7XHJcbnJlZmVyZW5jZXNTYWxlc1JvdXRlcyhhdXRoKTtcclxucGFnZSgnKicsICgpID0+IHBhZ2UoJy8nKSk7IC8vIEV2ZXJ5dGhpbmcgZWxzZSwgcmVkaXJlY3QgdG8gaG9tZSBwYWdlXHJcblxyXG5wYWdlKCk7XHJcblxyXG5pZiAoIWxvZ2dlZEluVXNlcilcclxuICAgIHBhZ2UoJy9sb2dpbicpO1xyXG5cclxuaW5pdFNvY2tldCgpO1xyXG5wcmludGVyU2V0dXAoKTtcclxuXHJcblxyXG50b2dnbGVEYXJrTW9kZSh7IGFwcFN0YXJ0OiB0cnVlIH0pOyAvLyBTZXQgZGFyayBtb2RlIG9uIGFwcCBzdGFydCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/app.js\n");

/***/ }),

/***/ "./src/printer.js":
/*!************************!*\
  !*** ./src/printer.js ***!
  \************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   availablePrinters: () => (/* binding */ availablePrinters),\n/* harmony export */   printLabel: () => (/* binding */ printLabel),\n/* harmony export */   printerFound: () => (/* binding */ printerFound),\n/* harmony export */   printerModal: () => (/* binding */ printerModal),\n/* harmony export */   printerSetup: () => (/* binding */ printerSetup),\n/* harmony export */   printerSockets: () => (/* binding */ printerSockets),\n/* harmony export */   selectedPrinter: () => (/* binding */ selectedPrinter),\n/* harmony export */   setSelectedPrinter: () => (/* binding */ setSelectedPrinter)\n/* harmony export */ });\n/* harmony import */ var lit_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit-html */ \"./node_modules/lit-html/development/lit-html.js\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/api */ \"./src/api.js\");\n/* harmony import */ var _views_login__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/views/login */ \"./src/views/login.js\");\n\r\n\r\n\r\n\r\nvar selectedPrinter, availablePrinters = [], printerFound;\r\n\r\nfunction printerSockets() {\r\n    // check if pc with printer is connected (check happens if no printer found on this device)\r\n    // when a pc with printer connects or disconnects, update status\r\n    _api__WEBPACK_IMPORTED_MODULE_1__.socket.on('remotePrinter', (bool) => {\r\n        printerFound = bool; // if true then it connected, if false it disconnected\r\n\r\n        const printerIcon = document.getElementById('printerIconNav');\r\n        if (!printerIcon) return; // nav is not yet rendered\r\n\r\n        if (printerFound) {\r\n            printerIcon.classList.add('text-success');\r\n            printerIcon.classList.remove('text-danger');\r\n            printerIcon.classList.remove('text-warning');\r\n        } else {\r\n            printerIcon.classList.add('text-danger');\r\n            printerIcon.classList.remove('text-success');\r\n            printerIcon.classList.remove('text-warning');\r\n        }\r\n    })\r\n\r\n    // initialize socket.io print commands only on the device that has a printer connected\r\n    _api__WEBPACK_IMPORTED_MODULE_1__.socket.on('printRestock', products => {\r\n        for (let product of products)\r\n            printLabel(product, product.quantity);\r\n    });\r\n\r\n    _api__WEBPACK_IMPORTED_MODULE_1__.socket.on('print', (product, quantity) => {\r\n        printLabel(product, quantity);\r\n    });\r\n}\r\n\r\n\r\nasync function printerSetup() {\r\n    if (!_views_login__WEBPACK_IMPORTED_MODULE_2__.loggedInUser) return;\r\n\r\n    //Get the default device from the application as a first step. Discovery takes longer to complete.\r\n    await BrowserPrint.getDefaultDevice(\"printer\", async function (device) {\r\n        //Add device to list of devices\r\n        selectedPrinter = device;\r\n        availablePrinters.push(device);\r\n\r\n        //Discover any other devices available to the application\r\n        await BrowserPrint.getLocalDevices(function (device_list) {\r\n            for (var i = 0; i < device_list.length; i++) {\r\n                //Add device to list of devices\r\n                availablePrinters.push(device);\r\n\r\n                // set as default if none found\r\n                if (!selectedPrinter) selectedPrinter = device;\r\n            }\r\n\r\n            // if local printer found, emit to all other devices\r\n            _api__WEBPACK_IMPORTED_MODULE_1__.socket.emit('printerConnected');\r\n        }, function (error) {\r\n            _api__WEBPACK_IMPORTED_MODULE_1__.socket.emit('remotePrinter');\r\n        });\r\n    }, function (error) {\r\n        _api__WEBPACK_IMPORTED_MODULE_1__.socket.emit('remotePrinter');\r\n    });\r\n    const printerModalDiv = document.getElementById('selectPrinterModalDiv');\r\n\r\n    if (!printerModalDiv) return; // not yet rendered\r\n    (0,lit_html__WEBPACK_IMPORTED_MODULE_0__.render)(printerModal(), printerModalDiv);\r\n}\r\n\r\nconst printerModal = () => (0,lit_html__WEBPACK_IMPORTED_MODULE_0__.html)`\r\n    <div class=\"modal fade\" id=\"selectPrinterModal\" tabindex=\"-1\" aria-labelledby=\"selectPrinterModalLabel\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h1 class=\"modal-title fs-5\" id=\"selectPrinterModalLabel\">Избери принтер за етикети</h1>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <select class=\"form-select\">\r\n                    ${availablePrinters.map(printer => (0,lit_html__WEBPACK_IMPORTED_MODULE_0__.html)`<option ?selected=${printer.uid === selectedPrinter?.uid} value=\"${printer.uid}\">${printer.name} [${printer.connection}]</option>`)}\r\n                </select>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Отказ</button>\r\n                <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\" @click=${setSelectedPrinter}>Запази</button>\r\n            </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n`;\r\n\r\nfunction setSelectedPrinter() {\r\n    const selectedPrinterUid = document.querySelector('#selectPrinterModal select').value;\r\n    if (!selectedPrinterUid) return;\r\n\r\n    const printer = availablePrinters.find(printer => printer.uid === selectedPrinterUid);\r\n\r\n    if (!printer) return;\r\n\r\n    selectedPrinter = printer;\r\n}\r\n\r\nfunction printLabel(product = { barcode, name, sizes, code, wholesalePrice }, quantity = 1) {\r\n    // The below code was generated with these steps:\r\n    // 1. Install ZebraDesigner3\r\n    // 2. Setup the label however you want\r\n    // 3. Go to File > Print > check \"Print to file\" > click \"Print\"\r\n    // 4. Save the file and then edit with notepad\r\n    // 5. First line is some thrash, so skip it and copy everything else. Done!\r\n\r\n    console.log('printlabel function:')\r\n    console.log(product, quantity);\r\n\r\n    const zplCommand = `^XA\r\n~TA024\r\n~JSN\r\n^LT0\r\n^MNW\r\n^MTT\r\n^PON\r\n^PMN\r\n^LH0,0\r\n^JMA\r\n^PR4,4\r\n~SD17\r\n^JUS\r\n^LRN\r\n^CI27\r\n^PA0,1,1,0\r\n^XZ\r\n^XA\r\n^MMT\r\n^PW440\r\n^LL200\r\n^LS0\r\n^BY3,2,72^FT87,120^BEN,,Y,N\r\n^FH\\^FD${product.barcode}^FS\r\n^FT79,35^A0N,28,28^FH\\^CI28^FD${product.name} ${product?.sizes?.length > 0 ? `[${product.sizes.map(s => s.size).join(', ')}]` : ''}^FS^CI27\r\n^FT13,186^A0N,28,28^FH\\^CI28^FD${product?.sizes?.length > 0 ? `${product.sizes.length} бр. по ` : ''}${(0,_api__WEBPACK_IMPORTED_MODULE_1__.formatPrice)(product?.sizes?.length > 0 ? product.wholesalePrice / product.sizes.length : product.wholesalePrice)}^FS^CI27\r\n^FT303,186^A0N,28,28^FH\\^CI28^FDКод: ${product.code}^FS^CI27\r\n^PQ${quantity},0\r\n^XZ\r\n`;\r\n\r\n    if (!selectedPrinter) {\r\n        // Try finding printer\r\n        BrowserPrint.getDefaultDevice(\"printer\", function (device) {\r\n            selectedPrinter = device;\r\n\r\n            selectedPrinter.send(zplCommand, undefined, (err) => {\r\n                console.error(err);\r\n            });\r\n        }, function (error) {\r\n            return alert('Не успяхме да намерим принтер за етикети!');\r\n        });\r\n    } else {\r\n        selectedPrinter.send(zplCommand, undefined, (err) => {\r\n            console.error(err);\r\n        });\r\n    }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbnRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUF3QztBQUNJO0FBQ0M7QUFDN0M7QUFDTztBQUNQO0FBQ087QUFDUDtBQUNBO0FBQ0EsSUFBSSx3Q0FBTTtBQUNWLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUksd0NBQU07QUFDVjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSSx3Q0FBTTtBQUNWO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsU0FBUyxzREFBWTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsd0JBQXdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdDQUFNO0FBQ2xCLFNBQVM7QUFDVCxZQUFZLHdDQUFNO0FBQ2xCLFNBQVM7QUFDVCxLQUFLO0FBQ0wsUUFBUSx3Q0FBTTtBQUNkLEtBQUs7QUFDTDtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLElBQUksZ0RBQU07QUFDVjtBQUNBO0FBQ08sMkJBQTJCLDhDQUFJO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpQ0FBaUMsOENBQUkscUJBQXFCLHNDQUFzQyxTQUFTLFlBQVksSUFBSSxjQUFjLEdBQUcsbUJBQW1CO0FBQ25MO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0ZBQStGLG1CQUFtQjtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sZ0NBQWdDLDRDQUE0QztBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGdCQUFnQjtBQUN6QixnQ0FBZ0MsY0FBYyxFQUFFLGlDQUFpQywwQ0FBMEMsUUFBUTtBQUNuSSxpQ0FBaUMsZ0NBQWdDLHNCQUFzQixjQUFjLEVBQUUsaURBQVcsc0dBQXNHO0FBQ3hOLHVDQUF1QyxhQUFhO0FBQ3BELEtBQUssU0FBUztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVCxNQUFNO0FBQ047QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmFiYi5pdC8uL3NyYy9wcmludGVyLmpzP2VkZDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaHRtbCwgcmVuZGVyIH0gZnJvbSAnbGl0LWh0bWwnO1xyXG5pbXBvcnQgeyBmb3JtYXRQcmljZSwgc29ja2V0IH0gZnJvbSAnQC9hcGknO1xyXG5pbXBvcnQgeyBsb2dnZWRJblVzZXIgfSBmcm9tICdAL3ZpZXdzL2xvZ2luJztcclxuXHJcbmV4cG9ydCB2YXIgc2VsZWN0ZWRQcmludGVyLCBhdmFpbGFibGVQcmludGVycyA9IFtdLCBwcmludGVyRm91bmQ7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJpbnRlclNvY2tldHMoKSB7XHJcbiAgICAvLyBjaGVjayBpZiBwYyB3aXRoIHByaW50ZXIgaXMgY29ubmVjdGVkIChjaGVjayBoYXBwZW5zIGlmIG5vIHByaW50ZXIgZm91bmQgb24gdGhpcyBkZXZpY2UpXHJcbiAgICAvLyB3aGVuIGEgcGMgd2l0aCBwcmludGVyIGNvbm5lY3RzIG9yIGRpc2Nvbm5lY3RzLCB1cGRhdGUgc3RhdHVzXHJcbiAgICBzb2NrZXQub24oJ3JlbW90ZVByaW50ZXInLCAoYm9vbCkgPT4ge1xyXG4gICAgICAgIHByaW50ZXJGb3VuZCA9IGJvb2w7IC8vIGlmIHRydWUgdGhlbiBpdCBjb25uZWN0ZWQsIGlmIGZhbHNlIGl0IGRpc2Nvbm5lY3RlZFxyXG5cclxuICAgICAgICBjb25zdCBwcmludGVySWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludGVySWNvbk5hdicpO1xyXG4gICAgICAgIGlmICghcHJpbnRlckljb24pIHJldHVybjsgLy8gbmF2IGlzIG5vdCB5ZXQgcmVuZGVyZWRcclxuXHJcbiAgICAgICAgaWYgKHByaW50ZXJGb3VuZCkge1xyXG4gICAgICAgICAgICBwcmludGVySWNvbi5jbGFzc0xpc3QuYWRkKCd0ZXh0LXN1Y2Nlc3MnKTtcclxuICAgICAgICAgICAgcHJpbnRlckljb24uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1kYW5nZXInKTtcclxuICAgICAgICAgICAgcHJpbnRlckljb24uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC13YXJuaW5nJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJpbnRlckljb24uY2xhc3NMaXN0LmFkZCgndGV4dC1kYW5nZXInKTtcclxuICAgICAgICAgICAgcHJpbnRlckljb24uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1zdWNjZXNzJyk7XHJcbiAgICAgICAgICAgIHByaW50ZXJJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtd2FybmluZycpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8gaW5pdGlhbGl6ZSBzb2NrZXQuaW8gcHJpbnQgY29tbWFuZHMgb25seSBvbiB0aGUgZGV2aWNlIHRoYXQgaGFzIGEgcHJpbnRlciBjb25uZWN0ZWRcclxuICAgIHNvY2tldC5vbigncHJpbnRSZXN0b2NrJywgcHJvZHVjdHMgPT4ge1xyXG4gICAgICAgIGZvciAobGV0IHByb2R1Y3Qgb2YgcHJvZHVjdHMpXHJcbiAgICAgICAgICAgIHByaW50TGFiZWwocHJvZHVjdCwgcHJvZHVjdC5xdWFudGl0eSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzb2NrZXQub24oJ3ByaW50JywgKHByb2R1Y3QsIHF1YW50aXR5KSA9PiB7XHJcbiAgICAgICAgcHJpbnRMYWJlbChwcm9kdWN0LCBxdWFudGl0eSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcmludGVyU2V0dXAoKSB7XHJcbiAgICBpZiAoIWxvZ2dlZEluVXNlcikgcmV0dXJuO1xyXG5cclxuICAgIC8vR2V0IHRoZSBkZWZhdWx0IGRldmljZSBmcm9tIHRoZSBhcHBsaWNhdGlvbiBhcyBhIGZpcnN0IHN0ZXAuIERpc2NvdmVyeSB0YWtlcyBsb25nZXIgdG8gY29tcGxldGUuXHJcbiAgICBhd2FpdCBCcm93c2VyUHJpbnQuZ2V0RGVmYXVsdERldmljZShcInByaW50ZXJcIiwgYXN5bmMgZnVuY3Rpb24gKGRldmljZSkge1xyXG4gICAgICAgIC8vQWRkIGRldmljZSB0byBsaXN0IG9mIGRldmljZXNcclxuICAgICAgICBzZWxlY3RlZFByaW50ZXIgPSBkZXZpY2U7XHJcbiAgICAgICAgYXZhaWxhYmxlUHJpbnRlcnMucHVzaChkZXZpY2UpO1xyXG5cclxuICAgICAgICAvL0Rpc2NvdmVyIGFueSBvdGhlciBkZXZpY2VzIGF2YWlsYWJsZSB0byB0aGUgYXBwbGljYXRpb25cclxuICAgICAgICBhd2FpdCBCcm93c2VyUHJpbnQuZ2V0TG9jYWxEZXZpY2VzKGZ1bmN0aW9uIChkZXZpY2VfbGlzdCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRldmljZV9saXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvL0FkZCBkZXZpY2UgdG8gbGlzdCBvZiBkZXZpY2VzXHJcbiAgICAgICAgICAgICAgICBhdmFpbGFibGVQcmludGVycy5wdXNoKGRldmljZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc2V0IGFzIGRlZmF1bHQgaWYgbm9uZSBmb3VuZFxyXG4gICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZFByaW50ZXIpIHNlbGVjdGVkUHJpbnRlciA9IGRldmljZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaWYgbG9jYWwgcHJpbnRlciBmb3VuZCwgZW1pdCB0byBhbGwgb3RoZXIgZGV2aWNlc1xyXG4gICAgICAgICAgICBzb2NrZXQuZW1pdCgncHJpbnRlckNvbm5lY3RlZCcpO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBzb2NrZXQuZW1pdCgncmVtb3RlUHJpbnRlcicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgc29ja2V0LmVtaXQoJ3JlbW90ZVByaW50ZXInKTtcclxuICAgIH0pO1xyXG4gICAgY29uc3QgcHJpbnRlck1vZGFsRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdFByaW50ZXJNb2RhbERpdicpO1xyXG5cclxuICAgIGlmICghcHJpbnRlck1vZGFsRGl2KSByZXR1cm47IC8vIG5vdCB5ZXQgcmVuZGVyZWRcclxuICAgIHJlbmRlcihwcmludGVyTW9kYWwoKSwgcHJpbnRlck1vZGFsRGl2KTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHByaW50ZXJNb2RhbCA9ICgpID0+IGh0bWxgXHJcbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIGlkPVwic2VsZWN0UHJpbnRlck1vZGFsXCIgdGFiaW5kZXg9XCItMVwiIGFyaWEtbGFiZWxsZWRieT1cInNlbGVjdFByaW50ZXJNb2RhbExhYmVsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8aDEgY2xhc3M9XCJtb2RhbC10aXRsZSBmcy01XCIgaWQ9XCJzZWxlY3RQcmludGVyTW9kYWxMYWJlbFwiPtCY0LfQsdC10YDQuCDQv9GA0LjQvdGC0LXRgCDQt9CwINC10YLQuNC60LXRgtC4PC9oMT5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuLWNsb3NlXCIgZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVwiZm9ybS1zZWxlY3RcIj5cclxuICAgICAgICAgICAgICAgICAgICAke2F2YWlsYWJsZVByaW50ZXJzLm1hcChwcmludGVyID0+IGh0bWxgPG9wdGlvbiA/c2VsZWN0ZWQ9JHtwcmludGVyLnVpZCA9PT0gc2VsZWN0ZWRQcmludGVyPy51aWR9IHZhbHVlPVwiJHtwcmludGVyLnVpZH1cIj4ke3ByaW50ZXIubmFtZX0gWyR7cHJpbnRlci5jb25uZWN0aW9ufV08L29wdGlvbj5gKX1cclxuICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCI+0J7RgtC60LDQtzwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIiBkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiIEBjbGljaz0ke3NldFNlbGVjdGVkUHJpbnRlcn0+0JfQsNC/0LDQt9C4PC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG5gO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFNlbGVjdGVkUHJpbnRlcigpIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkUHJpbnRlclVpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWxlY3RQcmludGVyTW9kYWwgc2VsZWN0JykudmFsdWU7XHJcbiAgICBpZiAoIXNlbGVjdGVkUHJpbnRlclVpZCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHByaW50ZXIgPSBhdmFpbGFibGVQcmludGVycy5maW5kKHByaW50ZXIgPT4gcHJpbnRlci51aWQgPT09IHNlbGVjdGVkUHJpbnRlclVpZCk7XHJcblxyXG4gICAgaWYgKCFwcmludGVyKSByZXR1cm47XHJcblxyXG4gICAgc2VsZWN0ZWRQcmludGVyID0gcHJpbnRlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHByaW50TGFiZWwocHJvZHVjdCA9IHsgYmFyY29kZSwgbmFtZSwgc2l6ZXMsIGNvZGUsIHdob2xlc2FsZVByaWNlIH0sIHF1YW50aXR5ID0gMSkge1xyXG4gICAgLy8gVGhlIGJlbG93IGNvZGUgd2FzIGdlbmVyYXRlZCB3aXRoIHRoZXNlIHN0ZXBzOlxyXG4gICAgLy8gMS4gSW5zdGFsbCBaZWJyYURlc2lnbmVyM1xyXG4gICAgLy8gMi4gU2V0dXAgdGhlIGxhYmVsIGhvd2V2ZXIgeW91IHdhbnRcclxuICAgIC8vIDMuIEdvIHRvIEZpbGUgPiBQcmludCA+IGNoZWNrIFwiUHJpbnQgdG8gZmlsZVwiID4gY2xpY2sgXCJQcmludFwiXHJcbiAgICAvLyA0LiBTYXZlIHRoZSBmaWxlIGFuZCB0aGVuIGVkaXQgd2l0aCBub3RlcGFkXHJcbiAgICAvLyA1LiBGaXJzdCBsaW5lIGlzIHNvbWUgdGhyYXNoLCBzbyBza2lwIGl0IGFuZCBjb3B5IGV2ZXJ5dGhpbmcgZWxzZS4gRG9uZSFcclxuXHJcbiAgICBjb25zb2xlLmxvZygncHJpbnRsYWJlbCBmdW5jdGlvbjonKVxyXG4gICAgY29uc29sZS5sb2cocHJvZHVjdCwgcXVhbnRpdHkpO1xyXG5cclxuICAgIGNvbnN0IHpwbENvbW1hbmQgPSBgXlhBXHJcbn5UQTAyNFxyXG5+SlNOXHJcbl5MVDBcclxuXk1OV1xyXG5eTVRUXHJcbl5QT05cclxuXlBNTlxyXG5eTEgwLDBcclxuXkpNQVxyXG5eUFI0LDRcclxuflNEMTdcclxuXkpVU1xyXG5eTFJOXHJcbl5DSTI3XHJcbl5QQTAsMSwxLDBcclxuXlhaXHJcbl5YQVxyXG5eTU1UXHJcbl5QVzQ0MFxyXG5eTEwyMDBcclxuXkxTMFxyXG5eQlkzLDIsNzJeRlQ4NywxMjBeQkVOLCxZLE5cclxuXkZIXFxeRkQke3Byb2R1Y3QuYmFyY29kZX1eRlNcclxuXkZUNzksMzVeQTBOLDI4LDI4XkZIXFxeQ0kyOF5GRCR7cHJvZHVjdC5uYW1lfSAke3Byb2R1Y3Q/LnNpemVzPy5sZW5ndGggPiAwID8gYFske3Byb2R1Y3Quc2l6ZXMubWFwKHMgPT4gcy5zaXplKS5qb2luKCcsICcpfV1gIDogJyd9XkZTXkNJMjdcclxuXkZUMTMsMTg2XkEwTiwyOCwyOF5GSFxcXkNJMjheRkQke3Byb2R1Y3Q/LnNpemVzPy5sZW5ndGggPiAwID8gYCR7cHJvZHVjdC5zaXplcy5sZW5ndGh9INCx0YAuINC/0L4gYCA6ICcnfSR7Zm9ybWF0UHJpY2UocHJvZHVjdD8uc2l6ZXM/Lmxlbmd0aCA+IDAgPyBwcm9kdWN0Lndob2xlc2FsZVByaWNlIC8gcHJvZHVjdC5zaXplcy5sZW5ndGggOiBwcm9kdWN0Lndob2xlc2FsZVByaWNlKX1eRlNeQ0kyN1xyXG5eRlQzMDMsMTg2XkEwTiwyOCwyOF5GSFxcXkNJMjheRkTQmtC+0LQ6ICR7cHJvZHVjdC5jb2RlfV5GU15DSTI3XHJcbl5QUSR7cXVhbnRpdHl9LDBcclxuXlhaXHJcbmA7XHJcblxyXG4gICAgaWYgKCFzZWxlY3RlZFByaW50ZXIpIHtcclxuICAgICAgICAvLyBUcnkgZmluZGluZyBwcmludGVyXHJcbiAgICAgICAgQnJvd3NlclByaW50LmdldERlZmF1bHREZXZpY2UoXCJwcmludGVyXCIsIGZ1bmN0aW9uIChkZXZpY2UpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRQcmludGVyID0gZGV2aWNlO1xyXG5cclxuICAgICAgICAgICAgc2VsZWN0ZWRQcmludGVyLnNlbmQoenBsQ29tbWFuZCwgdW5kZWZpbmVkLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gYWxlcnQoJ9Cd0LUg0YPRgdC/0Y/RhdC80LUg0LTQsCDQvdCw0LzQtdGA0LjQvCDQv9GA0LjQvdGC0LXRgCDQt9CwINC10YLQuNC60LXRgtC4IScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzZWxlY3RlZFByaW50ZXIuc2VuZCh6cGxDb21tYW5kLCB1bmRlZmluZWQsIChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/printer.js\n");

/***/ }),

/***/ "./src/views/admin/companies/companies.js":
/*!************************************************!*\
  !*** ./src/views/admin/companies/companies.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   companiesPage: () => (/* binding */ companiesPage)\n/* harmony export */ });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var lit_directives_until_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit/directives/until.js */ \"./node_modules/lit/directives/until.js\");\n/* harmony import */ var _views_nav__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/views/nav */ \"./src/views/nav.js\");\n/* harmony import */ var _views_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/views/components */ \"./src/views/components.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar selectedCompany;\r\n\r\nasync function deleteCompany() {\r\n    try {\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_6__[\"default\"].delete(`/companies/${selectedCompany}`);\r\n\r\n        if (req.status === 204) {\r\n            //close modal\r\n            const modal = document.getElementById('deleteModal');\r\n            const modalInstance = bootstrap.Modal.getInstance(modal);\r\n            modalInstance.hide();\r\n            page__WEBPACK_IMPORTED_MODULE_2__('/admin/companies');\r\n\r\n        }\r\n    } catch (err) {\r\n        if (err.response.status === 400)\r\n            alert(err.response.data);\r\n    }\r\n}\r\n\r\nasync function setDefault(_id) {\r\n    try {\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_6__[\"default\"].put(`/companies/${_id}/default`);\r\n\r\n        if (req.status === 201)\r\n            page__WEBPACK_IMPORTED_MODULE_2__('/admin/companies');\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert('Възникна грешка');\r\n    }\r\n}\r\n\r\nconst companyRow = (company) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n    <tr .id=${company._id}>\r\n        <td>${company.name} ${company.default ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<i class=\"bi bi-star-fill text-warning\"></i>` : ''}</td>\r\n        <td>${company.vat}</td>\r\n        <td class=\"text-nowrap\">\r\n            <button @click=${() => setDefault(company._id)} class=\"btn btn-primary\" .disabled=${company.default}><i class=\"bi bi-star-fill\"></i><span class=\"d-none d-sm-inline\"> Задай по подразбиране</span></button>\r\n            <a class=\"btn btn-secondary\" href=${`/admin/companies/${company._id}`}><i class=\"bi bi-pencil\"></i><span class=\"d-none d-sm-inline\"> Редактирай</span></a>\r\n            <div class=\"d-inline\" data-bs-toggle=${company.canBeDeleted ? 'tooltip' : ''} data-bs-title=${company.canBeDeleted ? 'Тази фирма не може да се изтрие, защото има продажби' : ''}>\r\n                <button @click=${() => selectedCompany = company._id} ?disabled=${company.canBeDeleted} class=\"btn btn-danger\"  data-bs-target=\"#deleteModal\" data-bs-toggle=${company.canBeDeleted ? '' : 'modal'}><i class=\"bi bi-trash\"></i><span class=\"d-none d-sm-inline\"> Изтрий</span></button>\r\n            </div>\r\n        </td>\r\n    </tr>\r\n`;\r\nconst table = (companies) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n    <div class=\"table-responsive\">\r\n        <table class=\"mt-3 table table-striped table-hover text-center\">\r\n            <thead>\r\n                <tr>\r\n                    <th scope=\"col\">Фирма</th>\r\n                    <th scope=\"col\">ЕИК</th>\r\n                    <th scope=\"col\">Действия</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                ${companies ? companies.map(companyRow) : ''}\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n`;\r\n\r\nasync function loadCompanies() {\r\n    try {\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_6__[\"default\"].get('/companies?canBeDeleted=true')\r\n        const companies = req.data;\r\n\r\n        setTimeout(() => {\r\n            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle=\"tooltip\"]')\r\n            console.log(tooltipTriggerList)\r\n            if (tooltipTriggerList.length)\r\n                [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))\r\n        }, 300);\r\n        return table(companies);\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert('Възникна грешка');\r\n    }\r\n}\r\n\r\n\r\nasync function companiesPage() {\r\n    const deleteModal = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n    <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\" aria-labelledby=\"deleteModalLabel\" aria-hidden=\"true\" >\r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h1 class=\"modal-title fs-5\" id=\"deleteModalLabel\">Изтрий фирма</h1>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    Ако фирмата има издадени документи, тя няма да може да бъде изтрита. Сигурни ли сте че искате да изтриете тази фирма?\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Откажи</button>\r\n                    <button @click=${deleteCompany} type=\"button\" class=\"btn btn-danger\">Изтрий</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>`;\r\n\r\n    const template = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n        ${deleteModal()}\r\n        ${(0,_views_nav__WEBPACK_IMPORTED_MODULE_4__.nav)()}\r\n        <div class=\"container-fluid\">\r\n            <a href='/admin/companies/create' class=\"btn btn-primary\"><i class=\"bi bi-plus\"></i> Създай фирма</a>\r\n            ${(0,lit_directives_until_js__WEBPACK_IMPORTED_MODULE_3__.until)(loadCompanies(), _views_components__WEBPACK_IMPORTED_MODULE_5__.spinner)}\r\n        </div>\r\n    `;\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.render)(template(), _app_js__WEBPACK_IMPORTED_MODULE_0__.container);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvYWRtaW4vY29tcGFuaWVzL2NvbXBhbmllcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFxQztBQUNNO0FBQ2pCO0FBQ0Y7QUFDd0I7QUFDZDtBQUNXO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNkNBQUssc0JBQXNCLGdCQUFnQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlDQUFJO0FBQ2hCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNkNBQUssbUJBQW1CLElBQUk7QUFDdEQ7QUFDQTtBQUNBLFlBQVksaUNBQUk7QUFDaEIsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQUk7QUFDcEMsY0FBYyxZQUFZO0FBQzFCLGNBQWMsY0FBYyxFQUFFLGtCQUFrQixpREFBSSxvREFBb0Q7QUFDeEcsY0FBYyxZQUFZO0FBQzFCO0FBQ0EsNkJBQTZCLCtCQUErQixvQ0FBb0MsZ0JBQWdCO0FBQ2hILGdEQUFnRCxvQkFBb0IsWUFBWSxFQUFFO0FBQ2xGLG1EQUFtRCx1Q0FBdUMsZ0JBQWdCLG1GQUFtRjtBQUM3TCxpQ0FBaUMscUNBQXFDLFlBQVksc0JBQXNCLHVFQUF1RSxvQ0FBb0M7QUFDbk47QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaURBQUk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNkNBQUs7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCw4QkFBOEIsaURBQUk7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGVBQWU7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixpREFBSTtBQUMvQixVQUFVO0FBQ1YsVUFBVSwrQ0FBRztBQUNiO0FBQ0E7QUFDQSxjQUFjLDhEQUFLLGtCQUFrQixzREFBTztBQUM1QztBQUNBO0FBQ0E7QUFDQSxJQUFJLG1EQUFNLGFBQWEsOENBQVM7QUFDaEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWJiLml0Ly4vc3JjL3ZpZXdzL2FkbWluL2NvbXBhbmllcy9jb21wYW5pZXMuanM/MjE4NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb250YWluZXIgfSBmcm9tIFwiQC9hcHAuanNcIjtcclxuaW1wb3J0IHsgaHRtbCwgcmVuZGVyIH0gZnJvbSAnbGl0L2h0bWwuanMnO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XHJcbmltcG9ydCBwYWdlIGZyb20gJ3BhZ2UnO1xyXG5pbXBvcnQgeyB1bnRpbCB9IGZyb20gXCJsaXQvZGlyZWN0aXZlcy91bnRpbC5qc1wiO1xyXG5pbXBvcnQgeyBuYXYgfSBmcm9tIFwiQC92aWV3cy9uYXZcIjtcclxuaW1wb3J0IHsgc3Bpbm5lciB9IGZyb20gXCJAL3ZpZXdzL2NvbXBvbmVudHNcIjtcclxuXHJcbnZhciBzZWxlY3RlZENvbXBhbnk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVDb21wYW55KCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXEgPSBhd2FpdCBheGlvcy5kZWxldGUoYC9jb21wYW5pZXMvJHtzZWxlY3RlZENvbXBhbnl9YCk7XHJcblxyXG4gICAgICAgIGlmIChyZXEuc3RhdHVzID09PSAyMDQpIHtcclxuICAgICAgICAgICAgLy9jbG9zZSBtb2RhbFxyXG4gICAgICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWxldGVNb2RhbCcpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2RhbEluc3RhbmNlID0gYm9vdHN0cmFwLk1vZGFsLmdldEluc3RhbmNlKG1vZGFsKTtcclxuICAgICAgICAgICAgbW9kYWxJbnN0YW5jZS5oaWRlKCk7XHJcbiAgICAgICAgICAgIHBhZ2UoJy9hZG1pbi9jb21wYW5pZXMnKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgaWYgKGVyci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMClcclxuICAgICAgICAgICAgYWxlcnQoZXJyLnJlc3BvbnNlLmRhdGEpO1xyXG4gICAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBzZXREZWZhdWx0KF9pZCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXEgPSBhd2FpdCBheGlvcy5wdXQoYC9jb21wYW5pZXMvJHtfaWR9L2RlZmF1bHRgKTtcclxuXHJcbiAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT09IDIwMSlcclxuICAgICAgICAgICAgcGFnZSgnL2FkbWluL2NvbXBhbmllcycpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIGFsZXJ0KCfQktGK0LfQvdC40LrQvdCwINCz0YDQtdGI0LrQsCcpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBjb21wYW55Um93ID0gKGNvbXBhbnkpID0+IGh0bWxgXHJcbiAgICA8dHIgLmlkPSR7Y29tcGFueS5faWR9PlxyXG4gICAgICAgIDx0ZD4ke2NvbXBhbnkubmFtZX0gJHtjb21wYW55LmRlZmF1bHQgPyBodG1sYDxpIGNsYXNzPVwiYmkgYmktc3Rhci1maWxsIHRleHQtd2FybmluZ1wiPjwvaT5gIDogJyd9PC90ZD5cclxuICAgICAgICA8dGQ+JHtjb21wYW55LnZhdH08L3RkPlxyXG4gICAgICAgIDx0ZCBjbGFzcz1cInRleHQtbm93cmFwXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gQGNsaWNrPSR7KCkgPT4gc2V0RGVmYXVsdChjb21wYW55Ll9pZCl9IGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCIgLmRpc2FibGVkPSR7Y29tcGFueS5kZWZhdWx0fT48aSBjbGFzcz1cImJpIGJpLXN0YXItZmlsbFwiPjwvaT48c3BhbiBjbGFzcz1cImQtbm9uZSBkLXNtLWlubGluZVwiPiDQl9Cw0LTQsNC5INC/0L4g0L/QvtC00YDQsNC30LHQuNGA0LDQvdC1PC9zcGFuPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YSBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5XCIgaHJlZj0ke2AvYWRtaW4vY29tcGFuaWVzLyR7Y29tcGFueS5faWR9YH0+PGkgY2xhc3M9XCJiaSBiaS1wZW5jaWxcIj48L2k+PHNwYW4gY2xhc3M9XCJkLW5vbmUgZC1zbS1pbmxpbmVcIj4g0KDQtdC00LDQutGC0LjRgNCw0Lk8L3NwYW4+PC9hPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1pbmxpbmVcIiBkYXRhLWJzLXRvZ2dsZT0ke2NvbXBhbnkuY2FuQmVEZWxldGVkID8gJ3Rvb2x0aXAnIDogJyd9IGRhdGEtYnMtdGl0bGU9JHtjb21wYW55LmNhbkJlRGVsZXRlZCA/ICfQotCw0LfQuCDRhNC40YDQvNCwINC90LUg0LzQvtC20LUg0LTQsCDRgdC1INC40LfRgtGA0LjQtSwg0LfQsNGJ0L7RgtC+INC40LzQsCDQv9GA0L7QtNCw0LbQsdC4JyA6ICcnfT5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gQGNsaWNrPSR7KCkgPT4gc2VsZWN0ZWRDb21wYW55ID0gY29tcGFueS5faWR9ID9kaXNhYmxlZD0ke2NvbXBhbnkuY2FuQmVEZWxldGVkfSBjbGFzcz1cImJ0biBidG4tZGFuZ2VyXCIgIGRhdGEtYnMtdGFyZ2V0PVwiI2RlbGV0ZU1vZGFsXCIgZGF0YS1icy10b2dnbGU9JHtjb21wYW55LmNhbkJlRGVsZXRlZCA/ICcnIDogJ21vZGFsJ30+PGkgY2xhc3M9XCJiaSBiaS10cmFzaFwiPjwvaT48c3BhbiBjbGFzcz1cImQtbm9uZSBkLXNtLWlubGluZVwiPiDQmNC30YLRgNC40Lk8L3NwYW4+PC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvdGQ+XHJcbiAgICA8L3RyPlxyXG5gO1xyXG5jb25zdCB0YWJsZSA9IChjb21wYW5pZXMpID0+IGh0bWxgXHJcbiAgICA8ZGl2IGNsYXNzPVwidGFibGUtcmVzcG9uc2l2ZVwiPlxyXG4gICAgICAgIDx0YWJsZSBjbGFzcz1cIm10LTMgdGFibGUgdGFibGUtc3RyaXBlZCB0YWJsZS1ob3ZlciB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0KTQuNGA0LzQsDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0JXQmNCaPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj7QlNC10LnRgdGC0LLQuNGPPC90aD5cclxuICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICR7Y29tcGFuaWVzID8gY29tcGFuaWVzLm1hcChjb21wYW55Um93KSA6ICcnfVxyXG4gICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgIDwvdGFibGU+XHJcbiAgICA8L2Rpdj5cclxuYDtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRDb21wYW5pZXMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlcSA9IGF3YWl0IGF4aW9zLmdldCgnL2NvbXBhbmllcz9jYW5CZURlbGV0ZWQ9dHJ1ZScpXHJcbiAgICAgICAgY29uc3QgY29tcGFuaWVzID0gcmVxLmRhdGE7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0b29sdGlwVHJpZ2dlckxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1icy10b2dnbGU9XCJ0b29sdGlwXCJdJylcclxuICAgICAgICAgICAgY29uc29sZS5sb2codG9vbHRpcFRyaWdnZXJMaXN0KVxyXG4gICAgICAgICAgICBpZiAodG9vbHRpcFRyaWdnZXJMaXN0Lmxlbmd0aClcclxuICAgICAgICAgICAgICAgIFsuLi50b29sdGlwVHJpZ2dlckxpc3RdLm1hcCh0b29sdGlwVHJpZ2dlckVsID0+IG5ldyBib290c3RyYXAuVG9vbHRpcCh0b29sdGlwVHJpZ2dlckVsKSlcclxuICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgIHJldHVybiB0YWJsZShjb21wYW5pZXMpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIGFsZXJ0KCfQktGK0LfQvdC40LrQvdCwINCz0YDQtdGI0LrQsCcpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbXBhbmllc1BhZ2UoKSB7XHJcbiAgICBjb25zdCBkZWxldGVNb2RhbCA9ICgpID0+IGh0bWxgXHJcbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIGlkPVwiZGVsZXRlTW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgYXJpYS1sYWJlbGxlZGJ5PVwiZGVsZXRlTW9kYWxMYWJlbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiID5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzPVwibW9kYWwtdGl0bGUgZnMtNVwiIGlkPVwiZGVsZXRlTW9kYWxMYWJlbFwiPtCY0LfRgtGA0LjQuSDRhNC40YDQvNCwPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0bi1jbG9zZVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAg0JDQutC+INGE0LjRgNC80LDRgtCwINC40LzQsCDQuNC30LTQsNC00LXQvdC4INC00L7QutGD0LzQtdC90YLQuCwg0YLRjyDQvdGP0LzQsCDQtNCwINC80L7QttC1INC00LAg0LHRitC00LUg0LjQt9GC0YDQuNGC0LAuINCh0LjQs9GD0YDQvdC4INC70Lgg0YHRgtC1INGH0LUg0LjRgdC60LDRgtC1INC00LAg0LjQt9GC0YDQuNC10YLQtSDRgtCw0LfQuCDRhNC40YDQvNCwP1xyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCI+0J7RgtC60LDQttC4PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBAY2xpY2s9JHtkZWxldGVDb21wYW55fSB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRhbmdlclwiPtCY0LfRgtGA0LjQuTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+YDtcclxuXHJcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICgpID0+IGh0bWxgXHJcbiAgICAgICAgJHtkZWxldGVNb2RhbCgpfVxyXG4gICAgICAgICR7bmF2KCl9XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lci1mbHVpZFwiPlxyXG4gICAgICAgICAgICA8YSBocmVmPScvYWRtaW4vY29tcGFuaWVzL2NyZWF0ZScgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIj48aSBjbGFzcz1cImJpIGJpLXBsdXNcIj48L2k+INCh0YrQt9C00LDQuSDRhNC40YDQvNCwPC9hPlxyXG4gICAgICAgICAgICAke3VudGlsKGxvYWRDb21wYW5pZXMoKSwgc3Bpbm5lcil9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIHJlbmRlcih0ZW1wbGF0ZSgpLCBjb250YWluZXIpO1xyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/views/admin/companies/companies.js\n");

/***/ }),

/***/ "./src/views/admin/companies/createEdit.js":
/*!*************************************************!*\
  !*** ./src/views/admin/companies/createEdit.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEditCompanyPage: () => (/* binding */ createEditCompanyPage)\n/* harmony export */ });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/api */ \"./src/api.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _views_nav__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/views/nav */ \"./src/views/nav.js\");\n/* harmony import */ var _views_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/views/components */ \"./src/views/components.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar company = '';\r\n\r\nfunction validateCompany(data) {\r\n    var invalidFlag = false;\r\n\r\n    if (!data.name)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_1__.markInvalid)('name');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_1__.markValid)('name');\r\n\r\n    if (!data.mol)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_1__.markInvalid)('mol');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_1__.markValid)('mol');\r\n\r\n    if (!data.vat || data.vat.length !== 9)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_1__.markInvalid)('vat');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_1__.markValid)('vat');\r\n\r\n    if (!data.tax || data.tax < 0 || data.tax > 100)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_1__.markInvalid)('tax');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_1__.markValid)('tax');\r\n\r\n    if (!data.address)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_1__.markInvalid)('address');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_1__.markValid)('address');\r\n\r\n    if (data.phone && data.phone.length > 15)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_1__.markInvalid)('phone');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_1__.markValid)('phone');\r\n\r\n    if (!data.bank?.name)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_1__.markInvalid)('bankName');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_1__.markValid)('bankName');\r\n\r\n    if (!data.bank?.code)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_1__.markInvalid)('bankCode');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_1__.markValid)('bankCode');\r\n\r\n    if (!data.bank?.iban || data.bank.iban.length > 34)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_1__.markInvalid)('bankIban');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_1__.markValid)('bankIban');\r\n\r\n    return invalidFlag;\r\n}\r\n\r\nasync function createEditCompany(e) {\r\n    e.preventDefault();\r\n    (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n\r\n    const form = e.target;\r\n    const formData = new FormData(form);\r\n    const data = Object.fromEntries(formData.entries());\r\n\r\n    data.bank = {\r\n        name: data.bankName,\r\n        code: data.bankCode,\r\n        iban: data.bankIban,\r\n    }\r\n\r\n    const invalidData = validateCompany(data);\r\n    if (invalidData) return (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n\r\n    form.classList.add('was-validated');\r\n    form.classList.remove('needs-validation');\r\n\r\n    const alertEl = document.getElementById('alert');\r\n    try {\r\n        const req = company ? await axios__WEBPACK_IMPORTED_MODULE_5__[\"default\"].put(`/companies/${company._id}`, data) : await axios__WEBPACK_IMPORTED_MODULE_5__[\"default\"].post('/companies', data);\r\n\r\n        if (req.status === 201) {\r\n            (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n            if (!company) {\r\n                form.reset();\r\n                document.getElementById('tax').value = 20;\r\n            }\r\n\r\n            document.querySelectorAll('input').forEach(el => el.classList.remove('is-valid', 'is-invalid'));\r\n            form.classList.remove('was-validated');\r\n            form.classList.add('needs-validation');\r\n            alertEl.classList.remove('d-none', 'alert-danger');\r\n            alertEl.classList.add('alert-success');\r\n            alertEl.textContent = `Фирмата е ${company ? 'редактирана' : 'създадена'} успешно.`;\r\n        }\r\n    } catch (err) {\r\n        (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n        if (err.response?.status === 400) {\r\n            alertEl.classList.remove('d-none', 'alert-success');\r\n            alertEl.classList.add('alert-danger');\r\n            alertEl.textContent = err.response.data;\r\n            form.classList.remove('was-validated');\r\n            form.classList.add('needs-validation');\r\n\r\n            if (err.response.data.toLowerCase().includes('ддс еик')) {\r\n                (0,_api__WEBPACK_IMPORTED_MODULE_1__.markInvalid)('taxvat');\r\n            } else if (err.response.data.toLowerCase().includes('еик')) {\r\n                (0,_api__WEBPACK_IMPORTED_MODULE_1__.markInvalid)('vat');\r\n            }\r\n\r\n            if (err.response.data.toLowerCase().includes('телефон')) {\r\n                (0,_api__WEBPACK_IMPORTED_MODULE_1__.markInvalid)('phone');\r\n            }\r\n\r\n            if (err.response.data.toLowerCase().includes('данъчна')) {\r\n                (0,_api__WEBPACK_IMPORTED_MODULE_1__.markInvalid)('tax');\r\n            }\r\n        }\r\n        else if (err.response?.status === 500) {\r\n            alertEl.classList.remove('d-none', 'alert-success');\r\n            alertEl.classList.add('alert-danger');\r\n            alertEl.textContent = 'Грешка в сървъра';\r\n            console.error(err);\r\n        } else console.error(err)\r\n    }\r\n}\r\n\r\nasync function createEditCompanyPage(ctx, next) {\r\n    const id = ctx.params.id;\r\n    if (id) {\r\n        try {\r\n            const req = await axios__WEBPACK_IMPORTED_MODULE_5__[\"default\"].get(`/companies/${id}`);\r\n            company = req.data;\r\n        } catch (err) {\r\n            console.error(err);\r\n            alert('Възникна грешка');\r\n        }\r\n    } else company = '';\r\n\r\n    const template = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        ${(0,_views_nav__WEBPACK_IMPORTED_MODULE_3__.nav)()}\r\n        <div class=\"container-fluid\">\r\n            <form novalidate encytpe=\"multipart/form-data\" @submit=${createEditCompany} class=\"row g-3 needs-validation\">\r\n                <div class=\"col-sm-6\">\r\n                    <label for=\"name\" class=\"form-label\">Фирма</label>\r\n                    <input class=\"form-control border-primary\" type=\"text\" id=\"name\" name=\"name\" .value=${company && company.name} placeholder=\"пример: Сиско Трейд ЕТ\" required autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div class=\"col-sm-6\">\r\n                    <label for=\"mol\" class=\"form-label\">МОЛ</label>\r\n                    <input class=\"form-control border-primary\" type=\"text\" id=\"mol\" name=\"mol\" .value=${company && company.mol} placeholder=\"пример: Иван Иванов\" required autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div class=\"col-sm-4\">\r\n                    <label for=\"vat\" class=\"form-label\">ЕИК</label>\r\n                    <div class=\"input-group\">\r\n                        <input class=\"form-control border-primary\" type=\"text\" id=\"vat\" name=\"vat\" .value=${company && company.vat} placeholder=\"9 цифри\" pattern=\"[0-9]{9}\" inputmode=\"numeric\" maxlength=\"9\" required autocomplete=\"off\">\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-sm-4\">\r\n                    <label for=\"taxvat\" class=\"form-label\">ДДС ЕИК</label>\r\n                    <div class=\"input-group\">\r\n                        <input class=\"form-control\" type=\"text\" id=\"taxvat\" name=\"taxvat\" .value=${company?.taxvat || ''} placeholder=\"пример: BG123...\" autocomplete=\"off\">\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-sm-4\">\r\n                    <label for=\"taxvat\" class=\"form-label\">ДДС %</label>\r\n                    <div class=\"input-group\">\r\n                        <input class=\"form-control\" type=\"number\" step=\"1\" min=\"0\" max=\"100\" id=\"tax\" name=\"tax\" inputmode=\"numeric\" .value=${company?.tax || 20} placeholder=\"пример: 20, 0, 10\" autocomplete=\"off\">\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-sm-6\">\r\n                    <label for=\"address\" class=\"form-label\">Адрес</label>\r\n                    <input class=\"form-control border-primary\" type=\"text\" id=\"address\" name=\"address\" placeholder=\"пример: гр. Русе, ул. Шипка 44\" .value=${company && company.address} required autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div class=\"col-sm-6\">\r\n                    <label for=\"phone\" class=\"form-label\">Телефон</label>\r\n                    <input class=\"form-control\" type=\"tel\" id=\"phone\" name=\"phone\" maxlength=\"15\" .value=${company && company.phone} placeholder=\"пример: 0891234567\" autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div class=\"col-sm-4\">\r\n                    <label for=\"bankName\" class=\"form-label\">Банка</label>\r\n                    <input class=\"form-control border-primary\" type=\"text\" id=\"bankName\" name=\"bankName\" .value=${company && company.bank.name} placeholder=\"пример: Райфайзен\" required autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div class=\"col-sm-4\">\r\n                    <label for=\"bankCode\" class=\"form-label\">Код на банката</label>\r\n                    <input class=\"form-control border-primary\" type=\"text\" id=\"bankCode\" name=\"bankCode\" .value=${company && company.bank.code} placeholder=\"пример: 123\" required autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div class=\"col-sm-4\">\r\n                    <label for=\"bankIban\" class=\"form-label\">IBAN</label>\r\n                    <input class=\"form-control border-primary\" type=\"text\" id=\"bankIban\" name=\"bankIban\" .value=${company && company.bank.iban} maxlength=34 placeholder=\"пример: BG12RZBB91551012345678\" required autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div id=\"alert\" class=\"d-none alert\" role=\"alert\"></div>\r\n                ${(0,_views_components__WEBPACK_IMPORTED_MODULE_4__.submitBtn)({ classes: 'd-block m-auto col-sm-3 mt-3', icon: 'bi-check-lg' })}\r\n            </form>\r\n        </div>\r\n    `;\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(template(), _app_js__WEBPACK_IMPORTED_MODULE_0__.container);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvYWRtaW4vY29tcGFuaWVzL2NyZWF0ZUVkaXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxQztBQUNVO0FBQ0o7QUFDakI7QUFDUTtBQUM4QjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpREFBVztBQUNqQyxTQUFTLCtDQUFTO0FBQ2xCO0FBQ0E7QUFDQSxzQkFBc0IsaURBQVc7QUFDakMsU0FBUywrQ0FBUztBQUNsQjtBQUNBO0FBQ0Esc0JBQXNCLGlEQUFXO0FBQ2pDLFNBQVMsK0NBQVM7QUFDbEI7QUFDQTtBQUNBLHNCQUFzQixpREFBVztBQUNqQyxTQUFTLCtDQUFTO0FBQ2xCO0FBQ0E7QUFDQSxzQkFBc0IsaURBQVc7QUFDakMsU0FBUywrQ0FBUztBQUNsQjtBQUNBO0FBQ0Esc0JBQXNCLGlEQUFXO0FBQ2pDLFNBQVMsK0NBQVM7QUFDbEI7QUFDQTtBQUNBLHNCQUFzQixpREFBVztBQUNqQyxTQUFTLCtDQUFTO0FBQ2xCO0FBQ0E7QUFDQSxzQkFBc0IsaURBQVc7QUFDakMsU0FBUywrQ0FBUztBQUNsQjtBQUNBO0FBQ0Esc0JBQXNCLGlEQUFXO0FBQ2pDLFNBQVMsK0NBQVM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrRUFBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0VBQWU7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDZDQUFLLG1CQUFtQixZQUFZLGlCQUFpQiw2Q0FBSztBQUM5RjtBQUNBO0FBQ0EsWUFBWSxrRUFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyx1Q0FBdUM7QUFDdEY7QUFDQSxNQUFNO0FBQ04sUUFBUSxrRUFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGlEQUFXO0FBQzNCLGNBQWM7QUFDZCxnQkFBZ0IsaURBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGlEQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixpREFBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw2Q0FBSyxtQkFBbUIsR0FBRztBQUN6RDtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSwyQkFBMkIsaURBQUk7QUFDL0IsVUFBVSwrQ0FBRztBQUNiO0FBQ0EscUVBQXFFLG1CQUFtQjtBQUN4RjtBQUNBO0FBQ0EsMEdBQTBHLHlCQUF5QjtBQUNuSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdHQUF3Ryx3QkFBd0I7QUFDaEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRHQUE0Ryx3QkFBd0IscUNBQXFDLEVBQUU7QUFDM0s7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUdBQW1HLHVCQUF1QjtBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4SUFBOEksb0JBQW9CO0FBQ2xLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2SkFBNkosNEJBQTRCO0FBQ3pMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkdBQTJHLDBCQUEwQjtBQUNySTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtIQUFrSCw4QkFBOEI7QUFDaEo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrSEFBa0gsOEJBQThCO0FBQ2hKO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0hBQWtILDhCQUE4QjtBQUNoSjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNERBQVMsR0FBRyw4REFBOEQ7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLG1EQUFNLGFBQWEsOENBQVM7QUFDaEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWJiLml0Ly4vc3JjL3ZpZXdzL2FkbWluL2NvbXBhbmllcy9jcmVhdGVFZGl0LmpzP2IxY2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29udGFpbmVyIH0gZnJvbSBcIkAvYXBwLmpzXCI7XHJcbmltcG9ydCB7IG1hcmtJbnZhbGlkLCBtYXJrVmFsaWQgfSBmcm9tIFwiQC9hcGlcIjtcclxuaW1wb3J0IHsgaHRtbCwgcmVuZGVyIH0gZnJvbSAnbGl0L2h0bWwuanMnO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XHJcbmltcG9ydCB7IG5hdiB9IGZyb20gXCJAL3ZpZXdzL25hdlwiO1xyXG5pbXBvcnQgeyB0b2dnbGVTdWJtaXRCdG4sIHN1Ym1pdEJ0biB9IGZyb20gXCJAL3ZpZXdzL2NvbXBvbmVudHNcIjtcclxuXHJcbnZhciBjb21wYW55ID0gJyc7XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNvbXBhbnkoZGF0YSkge1xyXG4gICAgdmFyIGludmFsaWRGbGFnID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKCFkYXRhLm5hbWUpXHJcbiAgICAgICAgaW52YWxpZEZsYWcgPSBtYXJrSW52YWxpZCgnbmFtZScpO1xyXG4gICAgZWxzZSBtYXJrVmFsaWQoJ25hbWUnKTtcclxuXHJcbiAgICBpZiAoIWRhdGEubW9sKVxyXG4gICAgICAgIGludmFsaWRGbGFnID0gbWFya0ludmFsaWQoJ21vbCcpO1xyXG4gICAgZWxzZSBtYXJrVmFsaWQoJ21vbCcpO1xyXG5cclxuICAgIGlmICghZGF0YS52YXQgfHwgZGF0YS52YXQubGVuZ3RoICE9PSA5KVxyXG4gICAgICAgIGludmFsaWRGbGFnID0gbWFya0ludmFsaWQoJ3ZhdCcpO1xyXG4gICAgZWxzZSBtYXJrVmFsaWQoJ3ZhdCcpO1xyXG5cclxuICAgIGlmICghZGF0YS50YXggfHwgZGF0YS50YXggPCAwIHx8IGRhdGEudGF4ID4gMTAwKVxyXG4gICAgICAgIGludmFsaWRGbGFnID0gbWFya0ludmFsaWQoJ3RheCcpO1xyXG4gICAgZWxzZSBtYXJrVmFsaWQoJ3RheCcpO1xyXG5cclxuICAgIGlmICghZGF0YS5hZGRyZXNzKVxyXG4gICAgICAgIGludmFsaWRGbGFnID0gbWFya0ludmFsaWQoJ2FkZHJlc3MnKTtcclxuICAgIGVsc2UgbWFya1ZhbGlkKCdhZGRyZXNzJyk7XHJcblxyXG4gICAgaWYgKGRhdGEucGhvbmUgJiYgZGF0YS5waG9uZS5sZW5ndGggPiAxNSlcclxuICAgICAgICBpbnZhbGlkRmxhZyA9IG1hcmtJbnZhbGlkKCdwaG9uZScpO1xyXG4gICAgZWxzZSBtYXJrVmFsaWQoJ3Bob25lJyk7XHJcblxyXG4gICAgaWYgKCFkYXRhLmJhbms/Lm5hbWUpXHJcbiAgICAgICAgaW52YWxpZEZsYWcgPSBtYXJrSW52YWxpZCgnYmFua05hbWUnKTtcclxuICAgIGVsc2UgbWFya1ZhbGlkKCdiYW5rTmFtZScpO1xyXG5cclxuICAgIGlmICghZGF0YS5iYW5rPy5jb2RlKVxyXG4gICAgICAgIGludmFsaWRGbGFnID0gbWFya0ludmFsaWQoJ2JhbmtDb2RlJyk7XHJcbiAgICBlbHNlIG1hcmtWYWxpZCgnYmFua0NvZGUnKTtcclxuXHJcbiAgICBpZiAoIWRhdGEuYmFuaz8uaWJhbiB8fCBkYXRhLmJhbmsuaWJhbi5sZW5ndGggPiAzNClcclxuICAgICAgICBpbnZhbGlkRmxhZyA9IG1hcmtJbnZhbGlkKCdiYW5rSWJhbicpO1xyXG4gICAgZWxzZSBtYXJrVmFsaWQoJ2JhbmtJYmFuJyk7XHJcblxyXG4gICAgcmV0dXJuIGludmFsaWRGbGFnO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVFZGl0Q29tcGFueShlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0b2dnbGVTdWJtaXRCdG4oKTtcclxuXHJcbiAgICBjb25zdCBmb3JtID0gZS50YXJnZXQ7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKTtcclxuICAgIGNvbnN0IGRhdGEgPSBPYmplY3QuZnJvbUVudHJpZXMoZm9ybURhdGEuZW50cmllcygpKTtcclxuXHJcbiAgICBkYXRhLmJhbmsgPSB7XHJcbiAgICAgICAgbmFtZTogZGF0YS5iYW5rTmFtZSxcclxuICAgICAgICBjb2RlOiBkYXRhLmJhbmtDb2RlLFxyXG4gICAgICAgIGliYW46IGRhdGEuYmFua0liYW4sXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaW52YWxpZERhdGEgPSB2YWxpZGF0ZUNvbXBhbnkoZGF0YSk7XHJcbiAgICBpZiAoaW52YWxpZERhdGEpIHJldHVybiB0b2dnbGVTdWJtaXRCdG4oKTtcclxuXHJcbiAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ3dhcy12YWxpZGF0ZWQnKTtcclxuICAgIGZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnbmVlZHMtdmFsaWRhdGlvbicpO1xyXG5cclxuICAgIGNvbnN0IGFsZXJ0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxlcnQnKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVxID0gY29tcGFueSA/IGF3YWl0IGF4aW9zLnB1dChgL2NvbXBhbmllcy8ke2NvbXBhbnkuX2lkfWAsIGRhdGEpIDogYXdhaXQgYXhpb3MucG9zdCgnL2NvbXBhbmllcycsIGRhdGEpO1xyXG5cclxuICAgICAgICBpZiAocmVxLnN0YXR1cyA9PT0gMjAxKSB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVN1Ym1pdEJ0bigpO1xyXG4gICAgICAgICAgICBpZiAoIWNvbXBhbnkpIHtcclxuICAgICAgICAgICAgICAgIGZvcm0ucmVzZXQoKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXgnKS52YWx1ZSA9IDIwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtdmFsaWQnLCAnaXMtaW52YWxpZCcpKTtcclxuICAgICAgICAgICAgZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCd3YXMtdmFsaWRhdGVkJyk7XHJcbiAgICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LmFkZCgnbmVlZHMtdmFsaWRhdGlvbicpO1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScsICdhbGVydC1kYW5nZXInKTtcclxuICAgICAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QuYWRkKCdhbGVydC1zdWNjZXNzJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwudGV4dENvbnRlbnQgPSBg0KTQuNGA0LzQsNGC0LAg0LUgJHtjb21wYW55ID8gJ9GA0LXQtNCw0LrRgtC40YDQsNC90LAnIDogJ9GB0YrQt9C00LDQtNC10L3QsCd9INGD0YHQv9C10YjQvdC+LmA7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgdG9nZ2xlU3VibWl0QnRuKCk7XHJcbiAgICAgICAgaWYgKGVyci5yZXNwb25zZT8uc3RhdHVzID09PSA0MDApIHtcclxuICAgICAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnLCAnYWxlcnQtc3VjY2VzcycpO1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LWRhbmdlcicpO1xyXG4gICAgICAgICAgICBhbGVydEVsLnRleHRDb250ZW50ID0gZXJyLnJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnd2FzLXZhbGlkYXRlZCcpO1xyXG4gICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ25lZWRzLXZhbGlkYXRpb24nKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlcnIucmVzcG9uc2UuZGF0YS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCfQtNC00YEg0LXQuNC6JykpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtJbnZhbGlkKCd0YXh2YXQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlcnIucmVzcG9uc2UuZGF0YS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCfQtdC40LonKSkge1xyXG4gICAgICAgICAgICAgICAgbWFya0ludmFsaWQoJ3ZhdCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlLmRhdGEudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygn0YLQtdC70LXRhNC+0L0nKSkge1xyXG4gICAgICAgICAgICAgICAgbWFya0ludmFsaWQoJ3Bob25lJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlcnIucmVzcG9uc2UuZGF0YS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCfQtNCw0L3RitGH0L3QsCcpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXJrSW52YWxpZCgndGF4Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXJyLnJlc3BvbnNlPy5zdGF0dXMgPT09IDUwMCkge1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScsICdhbGVydC1zdWNjZXNzJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LmFkZCgnYWxlcnQtZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwudGV4dENvbnRlbnQgPSAn0JPRgNC10YjQutCwINCyINGB0YrRgNCy0YrRgNCwJztcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIH0gZWxzZSBjb25zb2xlLmVycm9yKGVycilcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUVkaXRDb21wYW55UGFnZShjdHgsIG5leHQpIHtcclxuICAgIGNvbnN0IGlkID0gY3R4LnBhcmFtcy5pZDtcclxuICAgIGlmIChpZCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcSA9IGF3YWl0IGF4aW9zLmdldChgL2NvbXBhbmllcy8ke2lkfWApO1xyXG4gICAgICAgICAgICBjb21wYW55ID0gcmVxLmRhdGE7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgYWxlcnQoJ9CS0YrQt9C90LjQutC90LAg0LPRgNC10YjQutCwJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIGNvbXBhbnkgPSAnJztcclxuXHJcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICgpID0+IGh0bWxgXHJcbiAgICAgICAgJHtuYXYoKX1cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkXCI+XHJcbiAgICAgICAgICAgIDxmb3JtIG5vdmFsaWRhdGUgZW5jeXRwZT1cIm11bHRpcGFydC9mb3JtLWRhdGFcIiBAc3VibWl0PSR7Y3JlYXRlRWRpdENvbXBhbnl9IGNsYXNzPVwicm93IGctMyBuZWVkcy12YWxpZGF0aW9uXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwibmFtZVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCk0LjRgNC80LA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbCBib3JkZXItcHJpbWFyeVwiIHR5cGU9XCJ0ZXh0XCIgaWQ9XCJuYW1lXCIgbmFtZT1cIm5hbWVcIiAudmFsdWU9JHtjb21wYW55ICYmIGNvbXBhbnkubmFtZX0gcGxhY2Vob2xkZXI9XCLQv9GA0LjQvNC10YA6INCh0LjRgdC60L4g0KLRgNC10LnQtCDQldCiXCIgcmVxdWlyZWQgYXV0b2NvbXBsZXRlPVwib2ZmXCI+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwibW9sXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0JzQntCbPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2wgYm9yZGVyLXByaW1hcnlcIiB0eXBlPVwidGV4dFwiIGlkPVwibW9sXCIgbmFtZT1cIm1vbFwiIC52YWx1ZT0ke2NvbXBhbnkgJiYgY29tcGFueS5tb2x9IHBsYWNlaG9sZGVyPVwi0L/RgNC40LzQtdGAOiDQmNCy0LDQvSDQmNCy0LDQvdC+0LJcIiByZXF1aXJlZCBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ2YXRcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QldCY0Jo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2wgYm9yZGVyLXByaW1hcnlcIiB0eXBlPVwidGV4dFwiIGlkPVwidmF0XCIgbmFtZT1cInZhdFwiIC52YWx1ZT0ke2NvbXBhbnkgJiYgY29tcGFueS52YXR9IHBsYWNlaG9sZGVyPVwiOSDRhtC40YTRgNC4XCIgcGF0dGVybj1cIlswLTldezl9XCIgaW5wdXRtb2RlPVwibnVtZXJpY1wiIG1heGxlbmd0aD1cIjlcIiByZXF1aXJlZCBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ0YXh2YXRcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QlNCU0KEg0JXQmNCaPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiBpZD1cInRheHZhdFwiIG5hbWU9XCJ0YXh2YXRcIiAudmFsdWU9JHtjb21wYW55Py50YXh2YXQgfHwgJyd9IHBsYWNlaG9sZGVyPVwi0L/RgNC40LzQtdGAOiBCRzEyMy4uLlwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS00XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInRheHZhdFwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCU0JTQoSAlPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cIm51bWJlclwiIHN0ZXA9XCIxXCIgbWluPVwiMFwiIG1heD1cIjEwMFwiIGlkPVwidGF4XCIgbmFtZT1cInRheFwiIGlucHV0bW9kZT1cIm51bWVyaWNcIiAudmFsdWU9JHtjb21wYW55Py50YXggfHwgMjB9IHBsYWNlaG9sZGVyPVwi0L/RgNC40LzQtdGAOiAyMCwgMCwgMTBcIiBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJhZGRyZXNzXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0JDQtNGA0LXRgTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sIGJvcmRlci1wcmltYXJ5XCIgdHlwZT1cInRleHRcIiBpZD1cImFkZHJlc3NcIiBuYW1lPVwiYWRkcmVzc1wiIHBsYWNlaG9sZGVyPVwi0L/RgNC40LzQtdGAOiDQs9GALiDQoNGD0YHQtSwg0YPQuy4g0KjQuNC/0LrQsCA0NFwiIC52YWx1ZT0ke2NvbXBhbnkgJiYgY29tcGFueS5hZGRyZXNzfSByZXF1aXJlZCBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJwaG9uZVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCi0LXQu9C10YTQvtC9PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwidGVsXCIgaWQ9XCJwaG9uZVwiIG5hbWU9XCJwaG9uZVwiIG1heGxlbmd0aD1cIjE1XCIgLnZhbHVlPSR7Y29tcGFueSAmJiBjb21wYW55LnBob25lfSBwbGFjZWhvbGRlcj1cItC/0YDQuNC80LXRgDogMDg5MTIzNDU2N1wiIGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS00XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImJhbmtOYW1lXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0JHQsNC90LrQsDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sIGJvcmRlci1wcmltYXJ5XCIgdHlwZT1cInRleHRcIiBpZD1cImJhbmtOYW1lXCIgbmFtZT1cImJhbmtOYW1lXCIgLnZhbHVlPSR7Y29tcGFueSAmJiBjb21wYW55LmJhbmsubmFtZX0gcGxhY2Vob2xkZXI9XCLQv9GA0LjQvNC10YA6INCg0LDQudGE0LDQudC30LXQvVwiIHJlcXVpcmVkIGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS00XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImJhbmtDb2RlXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0JrQvtC0INC90LAg0LHQsNC90LrQsNGC0LA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbCBib3JkZXItcHJpbWFyeVwiIHR5cGU9XCJ0ZXh0XCIgaWQ9XCJiYW5rQ29kZVwiIG5hbWU9XCJiYW5rQ29kZVwiIC52YWx1ZT0ke2NvbXBhbnkgJiYgY29tcGFueS5iYW5rLmNvZGV9IHBsYWNlaG9sZGVyPVwi0L/RgNC40LzQtdGAOiAxMjNcIiByZXF1aXJlZCBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJiYW5rSWJhblwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPklCQU48L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbCBib3JkZXItcHJpbWFyeVwiIHR5cGU9XCJ0ZXh0XCIgaWQ9XCJiYW5rSWJhblwiIG5hbWU9XCJiYW5rSWJhblwiIC52YWx1ZT0ke2NvbXBhbnkgJiYgY29tcGFueS5iYW5rLmliYW59IG1heGxlbmd0aD0zNCBwbGFjZWhvbGRlcj1cItC/0YDQuNC80LXRgDogQkcxMlJaQkI5MTU1MTAxMjM0NTY3OFwiIHJlcXVpcmVkIGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cImFsZXJ0XCIgY2xhc3M9XCJkLW5vbmUgYWxlcnRcIiByb2xlPVwiYWxlcnRcIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICR7c3VibWl0QnRuKHsgY2xhc3NlczogJ2QtYmxvY2sgbS1hdXRvIGNvbC1zbS0zIG10LTMnLCBpY29uOiAnYmktY2hlY2stbGcnIH0pfVxyXG4gICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIHJlbmRlcih0ZW1wbGF0ZSgpLCBjb250YWluZXIpO1xyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/views/admin/companies/createEdit.js\n");

/***/ }),

/***/ "./src/views/admin/companies/routes.js":
/*!*********************************************!*\
  !*** ./src/views/admin/companies/routes.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   companiesRoutes: () => (/* binding */ companiesRoutes)\n/* harmony export */ });\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _views_login__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/views/login */ \"./src/views/login.js\");\n/* harmony import */ var _views_admin_companies_companies__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/views/admin/companies//companies */ \"./src/views/admin/companies/companies.js\");\n/* harmony import */ var _views_admin_companies_createEdit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/views/admin/companies/createEdit */ \"./src/views/admin/companies/createEdit.js\");\n\r\n\r\n\r\n\r\n\r\nfunction companiesRoutes() {\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/admin/companies', _views_login__WEBPACK_IMPORTED_MODULE_1__.adminAuth, _views_admin_companies_companies__WEBPACK_IMPORTED_MODULE_2__.companiesPage);\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/admin/companies/create', _views_login__WEBPACK_IMPORTED_MODULE_1__.adminAuth, _views_admin_companies_createEdit__WEBPACK_IMPORTED_MODULE_3__.createEditCompanyPage);\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/admin/companies/:id', _views_login__WEBPACK_IMPORTED_MODULE_1__.adminAuth, _views_admin_companies_createEdit__WEBPACK_IMPORTED_MODULE_3__.createEditCompanyPage);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvYWRtaW4vY29tcGFuaWVzL3JvdXRlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3QjtBQUNrQjtBQUN5QjtBQUNRO0FBQzNFO0FBQ087QUFDUCxJQUFJLGlDQUFJLHFCQUFxQixtREFBUyxFQUFFLDJFQUFhO0FBQ3JELElBQUksaUNBQUksNEJBQTRCLG1EQUFTLEVBQUUsb0ZBQXFCO0FBQ3BFLElBQUksaUNBQUkseUJBQXlCLG1EQUFTLEVBQUUsb0ZBQXFCO0FBQ2pFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmFiYi5pdC8uL3NyYy92aWV3cy9hZG1pbi9jb21wYW5pZXMvcm91dGVzLmpzP2IwNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhZ2UgZnJvbSAncGFnZSc7XHJcbmltcG9ydCB7IGFkbWluQXV0aCB9IGZyb20gJ0Avdmlld3MvbG9naW4nO1xyXG5pbXBvcnQgeyBjb21wYW5pZXNQYWdlIH0gZnJvbSAnQC92aWV3cy9hZG1pbi9jb21wYW5pZXMvL2NvbXBhbmllcyc7XHJcbmltcG9ydCB7IGNyZWF0ZUVkaXRDb21wYW55UGFnZSB9IGZyb20gJ0Avdmlld3MvYWRtaW4vY29tcGFuaWVzL2NyZWF0ZUVkaXQnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhbmllc1JvdXRlcygpIHtcclxuICAgIHBhZ2UoJy9hZG1pbi9jb21wYW5pZXMnLCBhZG1pbkF1dGgsIGNvbXBhbmllc1BhZ2UpO1xyXG4gICAgcGFnZSgnL2FkbWluL2NvbXBhbmllcy9jcmVhdGUnLCBhZG1pbkF1dGgsIGNyZWF0ZUVkaXRDb21wYW55UGFnZSk7XHJcbiAgICBwYWdlKCcvYWRtaW4vY29tcGFuaWVzLzppZCcsIGFkbWluQXV0aCwgY3JlYXRlRWRpdENvbXBhbnlQYWdlKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/admin/companies/routes.js\n");

/***/ }),

/***/ "./src/views/admin/settings/routes.js":
/*!********************************************!*\
  !*** ./src/views/admin/settings/routes.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   settingsRoutes: () => (/* binding */ settingsRoutes)\n/* harmony export */ });\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _views_login__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/views/login */ \"./src/views/login.js\");\n/* harmony import */ var _views_admin_settings_settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/views/admin/settings/settings */ \"./src/views/admin/settings/settings.js\");\n\r\n\r\n\r\n\r\n\r\nfunction settingsRoutes() {\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/admin/settings', _views_login__WEBPACK_IMPORTED_MODULE_1__.adminAuth, _views_admin_settings_settings__WEBPACK_IMPORTED_MODULE_2__.settingsPage);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvYWRtaW4vc2V0dGluZ3Mvcm91dGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0I7QUFDa0I7QUFDcUI7QUFDL0Q7QUFDQTtBQUNPO0FBQ1AsSUFBSSxpQ0FBSSxvQkFBb0IsbURBQVMsRUFBRSx3RUFBWTtBQUNuRCIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvdmlld3MvYWRtaW4vc2V0dGluZ3Mvcm91dGVzLmpzPzMyZTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhZ2UgZnJvbSAncGFnZSc7XHJcbmltcG9ydCB7IGFkbWluQXV0aCB9IGZyb20gJ0Avdmlld3MvbG9naW4nO1xyXG5pbXBvcnQgeyBzZXR0aW5nc1BhZ2UgfSBmcm9tICdAL3ZpZXdzL2FkbWluL3NldHRpbmdzL3NldHRpbmdzJztcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0dGluZ3NSb3V0ZXMoKSB7XHJcbiAgICBwYWdlKCcvYWRtaW4vc2V0dGluZ3MnLCBhZG1pbkF1dGgsIHNldHRpbmdzUGFnZSk7XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/views/admin/settings/routes.js\n");

/***/ }),

/***/ "./src/views/admin/settings/settings.js":
/*!**********************************************!*\
  !*** ./src/views/admin/settings/settings.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   settingsPage: () => (/* binding */ settingsPage)\n/* harmony export */ });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _views_nav_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/views/nav.js */ \"./src/views/nav.js\");\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/api.js */ \"./src/api.js\");\n/* harmony import */ var _views_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/views/components */ \"./src/views/components.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nasync function saveSettings(e) {\r\n    e.preventDefault();\r\n    (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n\r\n    const form = e.target;\r\n    const formData = new FormData(form);\r\n    const data = Object.fromEntries(formData.entries());\r\n\r\n    const alertEl = document.getElementById('alert');\r\n    const invalidData = validateSettings(data);\r\n    if (invalidData) return (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n\r\n    form.classList.add('was-validated');\r\n    form.classList.remove('needs-validation');\r\n\r\n    try {\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_5__[\"default\"].put('/settings', data);\r\n\r\n        if (req.status === 201) {\r\n            (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n            form.classList.remove('was-validated');\r\n            form.classList.add('needs-validation');\r\n            alertEl.classList.remove('d-none', 'alert-danger');\r\n            alertEl.classList.add('alert-success');\r\n            alertEl.textContent = `Всичко е запаметено успешно.`;\r\n        }\r\n\r\n    } catch (err) {\r\n        (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n        if (err.response.status === 400) {\r\n            alertEl.classList.remove('d-none', 'alert-success');\r\n            alertEl.classList.add('alert-danger');\r\n            alertEl.textContent = err.response.data;\r\n            form.classList.remove('was-validated');\r\n            form.classList.add('needs-validation');\r\n\r\n            if (err.response.data.toLowerCase().includes('едро')) {\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('wholesaleMarkup');\r\n            }\r\n\r\n            if (err.response.data.toLowerCase().includes('дребно')) {\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('retailMarkup');\r\n            }\r\n        }\r\n        else if (err.response?.status === 500) {\r\n            alertEl.classList.remove('d-none', 'alert-success');\r\n            alertEl.classList.add('alert-danger');\r\n            alertEl.textContent = 'Грешка в сървъра';\r\n            console.error(err);\r\n        } else console.error(err)\r\n    }\r\n}\r\n\r\nfunction validateSettings(data) {\r\n    var invalidFlag = false;\r\n\r\n    if (!data.wholesaleMarkup)\r\n        invalidFlag = (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('wholesaleMarkup');\r\n    else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('wholesaleMarkup');\r\n\r\n    if (!data.retailMarkup)\r\n        invalidFlag = (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('retailMarkup');\r\n    else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('retailMarkup');\r\n\r\n    return invalidFlag;\r\n}\r\n\r\nasync function settingsPage() {\r\n    var settings, orderParams;\r\n    try {\r\n        settings = (await axios__WEBPACK_IMPORTED_MODULE_5__[\"default\"].get('/settings')).data;\r\n        orderParams = (await axios__WEBPACK_IMPORTED_MODULE_5__[\"default\"].get('/orders/params')).data;\r\n        console.log(orderParams)\r\n    } catch (error) {\r\n        console.error(error);\r\n        alert('Възникна грешка')\r\n    }\r\n\r\n    const template = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n        ${(0,_views_nav_js__WEBPACK_IMPORTED_MODULE_2__.nav)()}\r\n        <div class=\"container-fluid\">\r\n            <form novalidate @submit=${saveSettings} class=\"needs-validation\" autocomplete=\"off\">\r\n                <h3 class=\"mb-3\">Продукти</h3>\r\n                <div class=\"row align-items-end g-3\">\r\n                    <div class=\"col-6 col-sm-6\">\r\n                        <label for=\"wholesaleMarkup\" class=\"form-label\">Надценка на едро</label>\r\n                        <div class=\"input-group \">\r\n                            <input type=\"number\" min=\"0\" inputmode=\"numeric\" class=\"form-control\" .value=${settings.find(k => k.key == \"wholesaleMarkup\").value} id=\"wholesaleMarkup\" name=\"wholesaleMarkup\" required>\r\n                            <span class=\"input-group-text\">%</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"col-6 col-sm-6\">\r\n                        <label for=\"wholesaleMarkup\" class=\"form-label\">Надценка на дребно</label>\r\n                        <div class=\"input-group \">\r\n                            <input type=\"number\" min=\"0\" inputmode=\"numeric\" class=\"form-control\" .value=${settings.find(k => k.key == \"retailMarkup\").value} id=\"retailMarkup\" name=\"retailMarkup\" required>\r\n                            <span class=\"input-group-text\">%</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"col-sm-4\">\r\n                        <label for=\"deliveryPriceFields\" class=\"form-label\">При създаване на артикул ще са видими следните полета за доставна цена</label>\r\n                        <select class=\"form-select\" id=\"deliveryPriceFields\" name=\"deliveryPriceFields\" required>\r\n                            <option ?selected=${settings.find(k => k.key == \"deliveryPriceFields\").value == \"whole\"} value=\"whole\">Доставна цена</option>\r\n                            <option ?selected=${settings.find(k => k.key == \"deliveryPriceFields\").value == \"unit\"} value=\"unit\">Доставна цена за брой</option>\r\n                            <option ?selected=${settings.find(k => k.key == \"deliveryPriceFields\").value == \"both\"} value=\"both\">Доставна цена + доставна цена за брой</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div class=\"col-sm-4\">\r\n                        <label for=\"wholesalePriceFields\" class=\"form-label\">При създаване на артикул ще са видими следните полета за цена на едро</label>\r\n                        <select class=\"form-select\" id=\"wholesalePriceFields\" name=\"wholesalePriceFields\" required>\r\n                            <option ?selected=${settings.find(k => k.key == \"wholesalePriceFields\").value == \"whole\"} value=\"whole\">Цена на едро</option>\r\n                            <option ?selected=${settings.find(k => k.key == \"wholesalePriceFields\").value == \"unit\"} value=\"unit\">Цена на едро за брой</option>\r\n                            <option ?selected=${settings.find(k => k.key == \"wholesalePriceFields\").value == \"both\"} value=\"both\">Цена на едро + цена на едро за брой</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div class=\"col-sm-4\">\r\n                        <label for=\"deliveryPriceFields\" class=\"form-label\">При създаване на артикул, ще бъде ли видимо полето за цена на дребно?</label>\r\n                        <select class=\"form-select\" id=\"retailPriceField\" name=\"retailPriceField\" required>\r\n                            <option ?selected=${settings.find(k => k.key === \"retailPriceField\").value === \"true\"} value=\"true\">Да</option>\r\n                            <option ?selected=${settings.find(k => k.key === \"retailPriceField\").value === \"false\"} value=\"false\">Не</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <h3 class=\"mt-5\">Продажби</h3>\r\n                <div class=\"row align-items-end\">\r\n                    <div class=\"col-sm-3 g-3\">\r\n                        <label for=\"orderType\" class=\"form-label\">Тип на продажба по подразбиране</label>\r\n                        <select class=\"form-select\" id=\"orderType\" name=\"orderType\" required>\r\n                            ${Object.entries(orderParams.orderTypes).map(([key, value]) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<option value=${key} ?selected=${settings.find(k => k.key == \"orderType\").value == key}>${value}</option>`)}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div class=\"col-sm-3\">\r\n                        <label for=\"paymentType\" class=\"form-label\">Начин на плащане по подразбиране</label>\r\n                        <select class=\"form-select\" id=\"paymentType\" name=\"paymentType\" required>\r\n                            ${Object.entries(orderParams.paymentTypes).map(([key, value]) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<option value=${key} ?selected=${settings.find(k => k.key == \"paymentType\").value == key}>${value}</option>`)}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div class=\"col-sm-3\">\r\n                        <label for=\"documentType\" class=\"form-label\">Тип на документ по подразбиране</label>\r\n                        <select class=\"form-select\" id=\"documentType\" name=\"documentType\" required>\r\n                            ${Object.entries(orderParams.documentTypes).map(([key, value]) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<option value=${key} ?selected=${settings.find(k => k.key == \"documentType\").value == key}>${value}</option>`)}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div class=\"col-sm-3\">\r\n                        <label for=\"orderPrint\" class=\"form-label\">Принтиране на документ при продажба</label>\r\n                        <select class=\"form-select\" id=\"orderPrint\" name=\"orderPrint\" required>\r\n                            <option value=\"original\">Само оригинал</option>\r\n                            <option value=\"originalCopy\">Оригинал + Копие</option>\r\n                            <option value=\"originalCopyStokova\">Оригинал + Копие + Стокова</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <h3 class=\"mt-5\">WooCommerce</h3>\r\n                <div class=\"row gap-5\">\r\n                    <div class=\"col-sm-3\">\r\n                        <label for=\"documentType\" class=\"form-label\">Тип на продажба при прехвърляне от WooCommerce в приложението</label>\r\n                        <select class=\"form-select\" id=\"wooDocumentType\" name=\"wooDocumentType\" required>\r\n                            ${Object.entries(orderParams.documentTypes).map(([key, value]) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<option value=${key} ?selected=${settings.find(k => k.key == \"wooDocumentType\")?.value == key}>${value}</option>`)}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div id=\"alert\" class=\"d-none alert mb-2\" role=\"alert\"></div>\r\n                ${(0,_views_components__WEBPACK_IMPORTED_MODULE_4__.submitBtn)({ text: \"Запази всички настройки\", icon: \"bi-check-lg\", classes: \"d-block m-auto mt-3 col-sm-3\" })}\r\n            </form>\r\n        </div>\r\n    `;\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.render)(template(), _app_js__WEBPACK_IMPORTED_MODULE_0__.container);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvYWRtaW4vc2V0dGluZ3Mvc2V0dGluZ3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxQztBQUNNO0FBQ2pCO0FBQ1c7QUFDWTtBQUNlO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrRUFBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrRUFBZTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDZDQUFLO0FBQy9CO0FBQ0E7QUFDQSxZQUFZLGtFQUFlO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLFFBQVEsa0VBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvREFBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0RBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isb0RBQVc7QUFDakMsU0FBUyxrREFBUztBQUNsQjtBQUNBO0FBQ0Esc0JBQXNCLG9EQUFXO0FBQ2pDLFNBQVMsa0RBQVM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSwwQkFBMEIsNkNBQUs7QUFDL0IsNkJBQTZCLDZDQUFLO0FBQ2xDO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlEQUFJO0FBQy9CLFVBQVUsa0RBQUc7QUFDYjtBQUNBLHVDQUF1QyxjQUFjO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyR0FBMkcsc0RBQXNEO0FBQ2pLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkdBQTJHLG1EQUFtRDtBQUM5SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxxRUFBcUU7QUFDckgsZ0RBQWdELG9FQUFvRTtBQUNwSCxnREFBZ0Qsb0VBQW9FO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxzRUFBc0U7QUFDdEgsZ0RBQWdELHFFQUFxRTtBQUNySCxnREFBZ0QscUVBQXFFO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxtRUFBbUU7QUFDbkgsZ0RBQWdELG9FQUFvRTtBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw2REFBNkQsaURBQUksaUJBQWlCLEtBQUssWUFBWSxzREFBc0QsR0FBRyxNQUFNO0FBQ2hNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrREFBK0QsaURBQUksaUJBQWlCLEtBQUssWUFBWSx3REFBd0QsR0FBRyxNQUFNO0FBQ3BNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixnRUFBZ0UsaURBQUksaUJBQWlCLEtBQUssWUFBWSx5REFBeUQsR0FBRyxNQUFNO0FBQ3RNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixnRUFBZ0UsaURBQUksaUJBQWlCLEtBQUssWUFBWSw2REFBNkQsR0FBRyxNQUFNO0FBQzFNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNERBQVMsR0FBRywrRkFBK0Y7QUFDN0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLG1EQUFNLGFBQWEsOENBQVM7QUFDaEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWJiLml0Ly4vc3JjL3ZpZXdzL2FkbWluL3NldHRpbmdzL3NldHRpbmdzLmpzPzYwZTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29udGFpbmVyIH0gZnJvbSBcIkAvYXBwLmpzXCI7XHJcbmltcG9ydCB7IGh0bWwsIHJlbmRlciB9IGZyb20gJ2xpdC9odG1sLmpzJztcclxuaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xyXG5pbXBvcnQgeyBuYXYgfSBmcm9tICdAL3ZpZXdzL25hdi5qcyc7XHJcbmltcG9ydCB7IG1hcmtWYWxpZCwgbWFya0ludmFsaWQgfSBmcm9tICdAL2FwaS5qcydcclxuaW1wb3J0IHsgdG9nZ2xlU3VibWl0QnRuLCBzdWJtaXRCdG4gfSBmcm9tIFwiQC92aWV3cy9jb21wb25lbnRzXCI7XHJcblxyXG5cclxuYXN5bmMgZnVuY3Rpb24gc2F2ZVNldHRpbmdzKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRvZ2dsZVN1Ym1pdEJ0bigpO1xyXG5cclxuICAgIGNvbnN0IGZvcm0gPSBlLnRhcmdldDtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xyXG4gICAgY29uc3QgZGF0YSA9IE9iamVjdC5mcm9tRW50cmllcyhmb3JtRGF0YS5lbnRyaWVzKCkpO1xyXG5cclxuICAgIGNvbnN0IGFsZXJ0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxlcnQnKTtcclxuICAgIGNvbnN0IGludmFsaWREYXRhID0gdmFsaWRhdGVTZXR0aW5ncyhkYXRhKTtcclxuICAgIGlmIChpbnZhbGlkRGF0YSkgcmV0dXJuIHRvZ2dsZVN1Ym1pdEJ0bigpO1xyXG5cclxuICAgIGZvcm0uY2xhc3NMaXN0LmFkZCgnd2FzLXZhbGlkYXRlZCcpO1xyXG4gICAgZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCduZWVkcy12YWxpZGF0aW9uJyk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXEgPSBhd2FpdCBheGlvcy5wdXQoJy9zZXR0aW5ncycsIGRhdGEpO1xyXG5cclxuICAgICAgICBpZiAocmVxLnN0YXR1cyA9PT0gMjAxKSB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVN1Ym1pdEJ0bigpO1xyXG4gICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcy12YWxpZGF0ZWQnKTtcclxuICAgICAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKCduZWVkcy12YWxpZGF0aW9uJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJywgJ2FsZXJ0LWRhbmdlcicpO1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LXN1Y2Nlc3MnKTtcclxuICAgICAgICAgICAgYWxlcnRFbC50ZXh0Q29udGVudCA9IGDQktGB0LjRh9C60L4g0LUg0LfQsNC/0LDQvNC10YLQtdC90L4g0YPRgdC/0LXRiNC90L4uYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgdG9nZ2xlU3VibWl0QnRuKCk7XHJcbiAgICAgICAgaWYgKGVyci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMCkge1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScsICdhbGVydC1zdWNjZXNzJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LmFkZCgnYWxlcnQtZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwudGV4dENvbnRlbnQgPSBlcnIucmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgICAgZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCd3YXMtdmFsaWRhdGVkJyk7XHJcbiAgICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LmFkZCgnbmVlZHMtdmFsaWRhdGlvbicpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVyci5yZXNwb25zZS5kYXRhLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ9C10LTRgNC+JykpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtJbnZhbGlkKCd3aG9sZXNhbGVNYXJrdXAnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGVyci5yZXNwb25zZS5kYXRhLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ9C00YDQtdCx0L3QvicpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXJrSW52YWxpZCgncmV0YWlsTWFya3VwJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXJyLnJlc3BvbnNlPy5zdGF0dXMgPT09IDUwMCkge1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScsICdhbGVydC1zdWNjZXNzJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LmFkZCgnYWxlcnQtZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwudGV4dENvbnRlbnQgPSAn0JPRgNC10YjQutCwINCyINGB0YrRgNCy0YrRgNCwJztcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIH0gZWxzZSBjb25zb2xlLmVycm9yKGVycilcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGVTZXR0aW5ncyhkYXRhKSB7XHJcbiAgICB2YXIgaW52YWxpZEZsYWcgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAoIWRhdGEud2hvbGVzYWxlTWFya3VwKVxyXG4gICAgICAgIGludmFsaWRGbGFnID0gbWFya0ludmFsaWQoJ3dob2xlc2FsZU1hcmt1cCcpO1xyXG4gICAgZWxzZSBtYXJrVmFsaWQoJ3dob2xlc2FsZU1hcmt1cCcpO1xyXG5cclxuICAgIGlmICghZGF0YS5yZXRhaWxNYXJrdXApXHJcbiAgICAgICAgaW52YWxpZEZsYWcgPSBtYXJrSW52YWxpZCgncmV0YWlsTWFya3VwJyk7XHJcbiAgICBlbHNlIG1hcmtWYWxpZCgncmV0YWlsTWFya3VwJyk7XHJcblxyXG4gICAgcmV0dXJuIGludmFsaWRGbGFnO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0dGluZ3NQYWdlKCkge1xyXG4gICAgdmFyIHNldHRpbmdzLCBvcmRlclBhcmFtcztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgc2V0dGluZ3MgPSAoYXdhaXQgYXhpb3MuZ2V0KCcvc2V0dGluZ3MnKSkuZGF0YTtcclxuICAgICAgICBvcmRlclBhcmFtcyA9IChhd2FpdCBheGlvcy5nZXQoJy9vcmRlcnMvcGFyYW1zJykpLmRhdGE7XHJcbiAgICAgICAgY29uc29sZS5sb2cob3JkZXJQYXJhbXMpXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIGFsZXJ0KCfQktGK0LfQvdC40LrQvdCwINCz0YDQtdGI0LrQsCcpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdGVtcGxhdGUgPSAoKSA9PiBodG1sYFxyXG4gICAgICAgICR7bmF2KCl9XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lci1mbHVpZFwiPlxyXG4gICAgICAgICAgICA8Zm9ybSBub3ZhbGlkYXRlIEBzdWJtaXQ9JHtzYXZlU2V0dGluZ3N9IGNsYXNzPVwibmVlZHMtdmFsaWRhdGlvblwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwibWItM1wiPtCf0YDQvtC00YPQutGC0Lg8L2gzPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBhbGlnbi1pdGVtcy1lbmQgZy0zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC02IGNvbC1zbS02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ3aG9sZXNhbGVNYXJrdXBcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QndCw0LTRhtC10L3QutCwINC90LAg0LXQtNGA0L48L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAgXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG1pbj1cIjBcIiBpbnB1dG1vZGU9XCJudW1lcmljXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiAudmFsdWU9JHtzZXR0aW5ncy5maW5kKGsgPT4gay5rZXkgPT0gXCJ3aG9sZXNhbGVNYXJrdXBcIikudmFsdWV9IGlkPVwid2hvbGVzYWxlTWFya3VwXCIgbmFtZT1cIndob2xlc2FsZU1hcmt1cFwiIHJlcXVpcmVkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC10ZXh0XCI+JTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtNiBjb2wtc20tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwid2hvbGVzYWxlTWFya3VwXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0J3QsNC00YbQtdC90LrQsCDQvdCwINC00YDQtdCx0L3QvjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cCBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbWluPVwiMFwiIGlucHV0bW9kZT1cIm51bWVyaWNcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIC52YWx1ZT0ke3NldHRpbmdzLmZpbmQoayA9PiBrLmtleSA9PSBcInJldGFpbE1hcmt1cFwiKS52YWx1ZX0gaWQ9XCJyZXRhaWxNYXJrdXBcIiBuYW1lPVwicmV0YWlsTWFya3VwXCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLXRleHRcIj4lPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS00XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJkZWxpdmVyeVByaWNlRmllbGRzXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0J/RgNC4INGB0YrQt9C00LDQstCw0L3QtSDQvdCwINCw0YDRgtC40LrRg9C7INGJ0LUg0YHQsCDQstC40LTQuNC80Lgg0YHQu9C10LTQvdC40YLQtSDQv9C+0LvQtdGC0LAg0LfQsCDQtNC+0YHRgtCw0LLQvdCwINGG0LXQvdCwPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cImZvcm0tc2VsZWN0XCIgaWQ9XCJkZWxpdmVyeVByaWNlRmllbGRzXCIgbmFtZT1cImRlbGl2ZXJ5UHJpY2VGaWVsZHNcIiByZXF1aXJlZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gP3NlbGVjdGVkPSR7c2V0dGluZ3MuZmluZChrID0+IGsua2V5ID09IFwiZGVsaXZlcnlQcmljZUZpZWxkc1wiKS52YWx1ZSA9PSBcIndob2xlXCJ9IHZhbHVlPVwid2hvbGVcIj7QlNC+0YHRgtCw0LLQvdCwINGG0LXQvdCwPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uID9zZWxlY3RlZD0ke3NldHRpbmdzLmZpbmQoayA9PiBrLmtleSA9PSBcImRlbGl2ZXJ5UHJpY2VGaWVsZHNcIikudmFsdWUgPT0gXCJ1bml0XCJ9IHZhbHVlPVwidW5pdFwiPtCU0L7RgdGC0LDQstC90LAg0YbQtdC90LAg0LfQsCDQsdGA0L7QuTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiA/c2VsZWN0ZWQ9JHtzZXR0aW5ncy5maW5kKGsgPT4gay5rZXkgPT0gXCJkZWxpdmVyeVByaWNlRmllbGRzXCIpLnZhbHVlID09IFwiYm90aFwifSB2YWx1ZT1cImJvdGhcIj7QlNC+0YHRgtCw0LLQvdCwINGG0LXQvdCwICsg0LTQvtGB0YLQsNCy0L3QsCDRhtC10L3QsCDQt9CwINCx0YDQvtC5PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIndob2xlc2FsZVByaWNlRmllbGRzXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0J/RgNC4INGB0YrQt9C00LDQstCw0L3QtSDQvdCwINCw0YDRgtC40LrRg9C7INGJ0LUg0YHQsCDQstC40LTQuNC80Lgg0YHQu9C10LTQvdC40YLQtSDQv9C+0LvQtdGC0LAg0LfQsCDRhtC10L3QsCDQvdCwINC10LTRgNC+PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cImZvcm0tc2VsZWN0XCIgaWQ9XCJ3aG9sZXNhbGVQcmljZUZpZWxkc1wiIG5hbWU9XCJ3aG9sZXNhbGVQcmljZUZpZWxkc1wiIHJlcXVpcmVkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiA/c2VsZWN0ZWQ9JHtzZXR0aW5ncy5maW5kKGsgPT4gay5rZXkgPT0gXCJ3aG9sZXNhbGVQcmljZUZpZWxkc1wiKS52YWx1ZSA9PSBcIndob2xlXCJ9IHZhbHVlPVwid2hvbGVcIj7QptC10L3QsCDQvdCwINC10LTRgNC+PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uID9zZWxlY3RlZD0ke3NldHRpbmdzLmZpbmQoayA9PiBrLmtleSA9PSBcIndob2xlc2FsZVByaWNlRmllbGRzXCIpLnZhbHVlID09IFwidW5pdFwifSB2YWx1ZT1cInVuaXRcIj7QptC10L3QsCDQvdCwINC10LTRgNC+INC30LAg0LHRgNC+0Lk8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gP3NlbGVjdGVkPSR7c2V0dGluZ3MuZmluZChrID0+IGsua2V5ID09IFwid2hvbGVzYWxlUHJpY2VGaWVsZHNcIikudmFsdWUgPT0gXCJib3RoXCJ9IHZhbHVlPVwiYm90aFwiPtCm0LXQvdCwINC90LAg0LXQtNGA0L4gKyDRhtC10L3QsCDQvdCwINC10LTRgNC+INC30LAg0LHRgNC+0Lk8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZGVsaXZlcnlQcmljZUZpZWxkc1wiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCf0YDQuCDRgdGK0LfQtNCw0LLQsNC90LUg0L3QsCDQsNGA0YLQuNC60YPQuywg0YnQtSDQsdGK0LTQtSDQu9C4INCy0LjQtNC40LzQviDQv9C+0LvQtdGC0L4g0LfQsCDRhtC10L3QsCDQvdCwINC00YDQtdCx0L3Qvj88L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVwiZm9ybS1zZWxlY3RcIiBpZD1cInJldGFpbFByaWNlRmllbGRcIiBuYW1lPVwicmV0YWlsUHJpY2VGaWVsZFwiIHJlcXVpcmVkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiA/c2VsZWN0ZWQ9JHtzZXR0aW5ncy5maW5kKGsgPT4gay5rZXkgPT09IFwicmV0YWlsUHJpY2VGaWVsZFwiKS52YWx1ZSA9PT0gXCJ0cnVlXCJ9IHZhbHVlPVwidHJ1ZVwiPtCU0LA8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gP3NlbGVjdGVkPSR7c2V0dGluZ3MuZmluZChrID0+IGsua2V5ID09PSBcInJldGFpbFByaWNlRmllbGRcIikudmFsdWUgPT09IFwiZmFsc2VcIn0gdmFsdWU9XCJmYWxzZVwiPtCd0LU8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwibXQtNVwiPtCf0YDQvtC00LDQttCx0Lg8L2gzPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBhbGlnbi1pdGVtcy1lbmRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTMgZy0zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJvcmRlclR5cGVcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QotC40L8g0L3QsCDQv9GA0L7QtNCw0LbQsdCwINC/0L4g0L/QvtC00YDQsNC30LHQuNGA0LDQvdC1PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cImZvcm0tc2VsZWN0XCIgaWQ9XCJvcmRlclR5cGVcIiBuYW1lPVwib3JkZXJUeXBlXCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke09iamVjdC5lbnRyaWVzKG9yZGVyUGFyYW1zLm9yZGVyVHlwZXMpLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBodG1sYDxvcHRpb24gdmFsdWU9JHtrZXl9ID9zZWxlY3RlZD0ke3NldHRpbmdzLmZpbmQoayA9PiBrLmtleSA9PSBcIm9yZGVyVHlwZVwiKS52YWx1ZSA9PSBrZXl9PiR7dmFsdWV9PC9vcHRpb24+YCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInBheW1lbnRUeXBlXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0J3QsNGH0LjQvSDQvdCwINC/0LvQsNGJ0LDQvdC1INC/0L4g0L/QvtC00YDQsNC30LHQuNGA0LDQvdC1PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cImZvcm0tc2VsZWN0XCIgaWQ9XCJwYXltZW50VHlwZVwiIG5hbWU9XCJwYXltZW50VHlwZVwiIHJlcXVpcmVkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtPYmplY3QuZW50cmllcyhvcmRlclBhcmFtcy5wYXltZW50VHlwZXMpLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBodG1sYDxvcHRpb24gdmFsdWU9JHtrZXl9ID9zZWxlY3RlZD0ke3NldHRpbmdzLmZpbmQoayA9PiBrLmtleSA9PSBcInBheW1lbnRUeXBlXCIpLnZhbHVlID09IGtleX0+JHt2YWx1ZX08L29wdGlvbj5gKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tM1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZG9jdW1lbnRUeXBlXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0KLQuNC/INC90LAg0LTQvtC60YPQvNC10L3RgiDQv9C+INC/0L7QtNGA0LDQt9Cx0LjRgNCw0L3QtTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XCJmb3JtLXNlbGVjdFwiIGlkPVwiZG9jdW1lbnRUeXBlXCIgbmFtZT1cImRvY3VtZW50VHlwZVwiIHJlcXVpcmVkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtPYmplY3QuZW50cmllcyhvcmRlclBhcmFtcy5kb2N1bWVudFR5cGVzKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gaHRtbGA8b3B0aW9uIHZhbHVlPSR7a2V5fSA/c2VsZWN0ZWQ9JHtzZXR0aW5ncy5maW5kKGsgPT4gay5rZXkgPT0gXCJkb2N1bWVudFR5cGVcIikudmFsdWUgPT0ga2V5fT4ke3ZhbHVlfTwvb3B0aW9uPmApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS0zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJvcmRlclByaW50XCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0J/RgNC40L3RgtC40YDQsNC90LUg0L3QsCDQtNC+0LrRg9C80LXQvdGCINC/0YDQuCDQv9GA0L7QtNCw0LbQsdCwPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cImZvcm0tc2VsZWN0XCIgaWQ9XCJvcmRlclByaW50XCIgbmFtZT1cIm9yZGVyUHJpbnRcIiByZXF1aXJlZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJvcmlnaW5hbFwiPtCh0LDQvNC+INC+0YDQuNCz0LjQvdCw0Ls8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJvcmlnaW5hbENvcHlcIj7QntGA0LjQs9C40L3QsNC7ICsg0JrQvtC/0LjQtTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9yaWdpbmFsQ29weVN0b2tvdmFcIj7QntGA0LjQs9C40L3QsNC7ICsg0JrQvtC/0LjQtSArINCh0YLQvtC60L7QstCwPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwibXQtNVwiPldvb0NvbW1lcmNlPC9oMz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgZ2FwLTVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImRvY3VtZW50VHlwZVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCi0LjQvyDQvdCwINC/0YDQvtC00LDQttCx0LAg0L/RgNC4INC/0YDQtdGF0LLRitGA0LvRj9C90LUg0L7RgiBXb29Db21tZXJjZSDQsiDQv9GA0LjQu9C+0LbQtdC90LjQtdGC0L48L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVwiZm9ybS1zZWxlY3RcIiBpZD1cIndvb0RvY3VtZW50VHlwZVwiIG5hbWU9XCJ3b29Eb2N1bWVudFR5cGVcIiByZXF1aXJlZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7T2JqZWN0LmVudHJpZXMob3JkZXJQYXJhbXMuZG9jdW1lbnRUeXBlcykubWFwKChba2V5LCB2YWx1ZV0pID0+IGh0bWxgPG9wdGlvbiB2YWx1ZT0ke2tleX0gP3NlbGVjdGVkPSR7c2V0dGluZ3MuZmluZChrID0+IGsua2V5ID09IFwid29vRG9jdW1lbnRUeXBlXCIpPy52YWx1ZSA9PSBrZXl9PiR7dmFsdWV9PC9vcHRpb24+YCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cImFsZXJ0XCIgY2xhc3M9XCJkLW5vbmUgYWxlcnQgbWItMlwiIHJvbGU9XCJhbGVydFwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgJHtzdWJtaXRCdG4oeyB0ZXh0OiBcItCX0LDQv9Cw0LfQuCDQstGB0LjRh9C60Lgg0L3QsNGB0YLRgNC+0LnQutC4XCIsIGljb246IFwiYmktY2hlY2stbGdcIiwgY2xhc3NlczogXCJkLWJsb2NrIG0tYXV0byBtdC0zIGNvbC1zbS0zXCIgfSl9XHJcbiAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGA7XHJcblxyXG4gICAgcmVuZGVyKHRlbXBsYXRlKCksIGNvbnRhaW5lcik7XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/views/admin/settings/settings.js\n");

/***/ }),

/***/ "./src/views/admin/users/createEdit.js":
/*!*********************************************!*\
  !*** ./src/views/admin/users/createEdit.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEditUserPage: () => (/* binding */ createEditUserPage)\n/* harmony export */ });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _views_nav_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/views/nav.js */ \"./src/views/nav.js\");\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/api.js */ \"./src/api.js\");\n/* harmony import */ var _views_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/views/components */ \"./src/views/components.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar user = '', userRoles;\r\n\r\nfunction validateUser(data, user) {\r\n    var invalidFlag = false;\r\n\r\n    if (!data.username)\r\n        invalidFlag = (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('username');\r\n    else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('username');\r\n\r\n    if (user && !data.password && !data.password2) {\r\n        (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('password');\r\n        (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('password2');\r\n    } else {\r\n        if (!data.password || data.password.length < 6)\r\n            invalidFlag = (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('password');\r\n        else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('password');\r\n\r\n        if (!data.password2 || data.password !== data.password2)\r\n            invalidFlag = (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('password2');\r\n        else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('password2');\r\n    }\r\n\r\n    return invalidFlag;\r\n}\r\n\r\nasync function createEditUser(e) {\r\n    e.preventDefault();\r\n    (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n\r\n    const form = e.target;\r\n    const formData = new FormData(form);\r\n    const data = Object.fromEntries(formData.entries());\r\n\r\n    const alertEl = document.getElementById('alert');\r\n    const invalidData = validateUser(data, user);\r\n    if (invalidData) return (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();;\r\n\r\n    form.classList.add('was-validated');\r\n    form.classList.remove('needs-validation');\r\n\r\n    try {\r\n        const req = user ? await axios__WEBPACK_IMPORTED_MODULE_5__[\"default\"].put(`/users/${user._id}`, data) : await axios__WEBPACK_IMPORTED_MODULE_5__[\"default\"].post('/users', data);\r\n\r\n        if (req.status === 201) {\r\n            (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n            if (!user)\r\n                form.reset();\r\n\r\n            document.querySelectorAll('input').forEach(el => el.classList.remove('is-valid', 'is-invalid'));\r\n            form.classList.remove('was-validated');\r\n            form.classList.add('needs-validation');\r\n            alertEl.classList.remove('d-none', 'alert-danger');\r\n            alertEl.classList.add('alert-success');\r\n            alertEl.textContent = `Потребителят е ${user ? 'редактиран' : 'създаден'} успешно.`;\r\n        }\r\n\r\n    } catch (err) {\r\n        (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n        console.error(err);\r\n        if (err.response.status === 400) {\r\n            alertEl.classList.remove('d-none', 'alert-success');\r\n            alertEl.classList.add('alert-danger');\r\n            alertEl.textContent = err.response.data;\r\n            form.classList.remove('was-validated');\r\n            form.classList.add('needs-validation');\r\n\r\n            if (err.response.data.toLowerCase().includes('vat')) {\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('vat');\r\n            }\r\n\r\n            if (err.response.data.toLowerCase().includes('phone')) {\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('phone');\r\n            }\r\n\r\n            if (err.response.data.toLowerCase().includes('discount')) {\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('discount');\r\n            }\r\n        }\r\n        else if (err.response?.status === 500) {\r\n            alertEl.classList.remove('d-none', 'alert-success');\r\n            alertEl.classList.add('alert-danger');\r\n            alertEl.textContent = 'Грешка в сървъра';\r\n            console.error(err);\r\n        } else console.error(err)\r\n    }\r\n}\r\n\r\nasync function createEditUserPage(ctx, next) {\r\n    const id = ctx.params.id;\r\n    userRoles = (await axios__WEBPACK_IMPORTED_MODULE_5__[\"default\"].get('/users/roles')).data;\r\n    if (id) {\r\n        try {\r\n            const req = await axios__WEBPACK_IMPORTED_MODULE_5__[\"default\"].get(`/users/${id}`);\r\n            user = req.data;\r\n        } catch (err) {\r\n            console.error(err);\r\n            alert('Възникна грешка');\r\n        }\r\n    } else user = '';\r\n\r\n    const template = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n        ${(0,_views_nav_js__WEBPACK_IMPORTED_MODULE_2__.nav)()}\r\n        <div class=\"container-fluid\">\r\n            <form novalidate @submit=${createEditUser} class=\"needs-validation\" autocomplete=\"off\">\r\n                <div class=\"row justify-content-center mb-2\">\r\n                    <div class=\"col-sm-3\">\r\n                        <label for=\"username\" class=\"form-label\">Потребителско име</label>\r\n                        <input class=\"form-control\" type=\"text\" id=\"username\" name=\"username\" .value=${user && user.username} placeholder=\"пример: ivan12\" required autocomplete=\"off\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"row justify-content-center mb-2\">\r\n                    <div class=\"col-sm-3\">\r\n                        <label for=\"password\" class=\"form-label\">Парола (мин. 6 символа)</label>\r\n                        <input class=\"form-control\" type=\"password\" id=\"password\" name=\"password\" ?minlength=${!user || 6} ?required=${!user} autocomplete=\"off\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"row justify-content-center mb-2\">\r\n                    <div class=\"col-sm-3\">\r\n                        <label for=\"password2\" class=\"form-label\">Повтори парола</label>\r\n                        <input class=\"form-control\" type=\"password\" id=\"password2\" name=\"password2\" ?minlength=${!user || 6} ?required=${!user} autocomplete=\"off\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"row justify-content-center mb-2\">\r\n                    <div class=\"col-sm-3\">\r\n                        <label for=\"role\" class=\"form-label\">Роля</label>\r\n                        <select class=\"form-select\" id=\"role\" name=\"role\" required>\r\n                            ${Object.entries(userRoles).map(role => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<option value=${role[0]} ?selected=${user && user.role === role[0]}>${role[1]}</option>`)}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div id=\"alert\" class=\"d-none alert mb-2\" role=\"alert\"></div>\r\n                ${(0,_views_components__WEBPACK_IMPORTED_MODULE_4__.submitBtn)({ classes: 'd-block m-auto col-sm-3', icon: 'bi-check-lg' })}\r\n            </form>\r\n        </div>\r\n    `;\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.render)(template(), _app_js__WEBPACK_IMPORTED_MODULE_0__.container);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvYWRtaW4vdXNlcnMvY3JlYXRlRWRpdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFDO0FBQ007QUFDakI7QUFDVztBQUNhO0FBQ2M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isb0RBQVc7QUFDakMsU0FBUyxrREFBUztBQUNsQjtBQUNBO0FBQ0EsUUFBUSxrREFBUztBQUNqQixRQUFRLGtEQUFTO0FBQ2pCLE1BQU07QUFDTjtBQUNBLDBCQUEwQixvREFBVztBQUNyQyxhQUFhLGtEQUFTO0FBQ3RCO0FBQ0E7QUFDQSwwQkFBMEIsb0RBQVc7QUFDckMsYUFBYSxrREFBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksa0VBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0VBQWU7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw2Q0FBSyxlQUFlLFNBQVMsaUJBQWlCLDZDQUFLO0FBQ3BGO0FBQ0E7QUFDQSxZQUFZLGtFQUFlO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsa0NBQWtDO0FBQ3RGO0FBQ0E7QUFDQSxNQUFNO0FBQ04sUUFBUSxrRUFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0RBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG9EQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvREFBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsdUJBQXVCLDZDQUFLO0FBQzVCO0FBQ0E7QUFDQSw4QkFBOEIsNkNBQUssZUFBZSxHQUFHO0FBQ3JEO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLDJCQUEyQixpREFBSTtBQUMvQixVQUFVLGtEQUFHO0FBQ2I7QUFDQSx1Q0FBdUMsZ0JBQWdCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLHVHQUF1Ryx1QkFBdUI7QUFDOUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtHQUErRyxZQUFZLFlBQVksT0FBTztBQUM5STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUhBQWlILFlBQVksWUFBWSxPQUFPO0FBQ2hKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixzQ0FBc0MsaURBQUksaUJBQWlCLFNBQVMsWUFBWSw4QkFBOEIsR0FBRyxRQUFRO0FBQ3ZKO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDREQUFTLEdBQUcseURBQXlEO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxtREFBTSxhQUFhLDhDQUFTO0FBQ2hDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmFiYi5pdC8uL3NyYy92aWV3cy9hZG1pbi91c2Vycy9jcmVhdGVFZGl0LmpzPzM5OTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29udGFpbmVyIH0gZnJvbSBcIkAvYXBwLmpzXCI7XHJcbmltcG9ydCB7IGh0bWwsIHJlbmRlciB9IGZyb20gJ2xpdC9odG1sLmpzJztcclxuaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xyXG5pbXBvcnQgeyBuYXYgfSBmcm9tIFwiQC92aWV3cy9uYXYuanNcIjtcclxuaW1wb3J0IHsgbWFya1ZhbGlkLCBtYXJrSW52YWxpZCB9IGZyb20gXCJAL2FwaS5qc1wiO1xyXG5pbXBvcnQgeyB0b2dnbGVTdWJtaXRCdG4sIHN1Ym1pdEJ0biB9IGZyb20gXCJAL3ZpZXdzL2NvbXBvbmVudHNcIjtcclxuXHJcbnZhciB1c2VyID0gJycsIHVzZXJSb2xlcztcclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlVXNlcihkYXRhLCB1c2VyKSB7XHJcbiAgICB2YXIgaW52YWxpZEZsYWcgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAoIWRhdGEudXNlcm5hbWUpXHJcbiAgICAgICAgaW52YWxpZEZsYWcgPSBtYXJrSW52YWxpZCgndXNlcm5hbWUnKTtcclxuICAgIGVsc2UgbWFya1ZhbGlkKCd1c2VybmFtZScpO1xyXG5cclxuICAgIGlmICh1c2VyICYmICFkYXRhLnBhc3N3b3JkICYmICFkYXRhLnBhc3N3b3JkMikge1xyXG4gICAgICAgIG1hcmtWYWxpZCgncGFzc3dvcmQnKTtcclxuICAgICAgICBtYXJrVmFsaWQoJ3Bhc3N3b3JkMicpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIWRhdGEucGFzc3dvcmQgfHwgZGF0YS5wYXNzd29yZC5sZW5ndGggPCA2KVxyXG4gICAgICAgICAgICBpbnZhbGlkRmxhZyA9IG1hcmtJbnZhbGlkKCdwYXNzd29yZCcpO1xyXG4gICAgICAgIGVsc2UgbWFya1ZhbGlkKCdwYXNzd29yZCcpO1xyXG5cclxuICAgICAgICBpZiAoIWRhdGEucGFzc3dvcmQyIHx8IGRhdGEucGFzc3dvcmQgIT09IGRhdGEucGFzc3dvcmQyKVxyXG4gICAgICAgICAgICBpbnZhbGlkRmxhZyA9IG1hcmtJbnZhbGlkKCdwYXNzd29yZDInKTtcclxuICAgICAgICBlbHNlIG1hcmtWYWxpZCgncGFzc3dvcmQyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGludmFsaWRGbGFnO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVFZGl0VXNlcihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0b2dnbGVTdWJtaXRCdG4oKTtcclxuXHJcbiAgICBjb25zdCBmb3JtID0gZS50YXJnZXQ7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKTtcclxuICAgIGNvbnN0IGRhdGEgPSBPYmplY3QuZnJvbUVudHJpZXMoZm9ybURhdGEuZW50cmllcygpKTtcclxuXHJcbiAgICBjb25zdCBhbGVydEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsZXJ0Jyk7XHJcbiAgICBjb25zdCBpbnZhbGlkRGF0YSA9IHZhbGlkYXRlVXNlcihkYXRhLCB1c2VyKTtcclxuICAgIGlmIChpbnZhbGlkRGF0YSkgcmV0dXJuIHRvZ2dsZVN1Ym1pdEJ0bigpOztcclxuXHJcbiAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ3dhcy12YWxpZGF0ZWQnKTtcclxuICAgIGZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnbmVlZHMtdmFsaWRhdGlvbicpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVxID0gdXNlciA/IGF3YWl0IGF4aW9zLnB1dChgL3VzZXJzLyR7dXNlci5faWR9YCwgZGF0YSkgOiBhd2FpdCBheGlvcy5wb3N0KCcvdXNlcnMnLCBkYXRhKTtcclxuXHJcbiAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT09IDIwMSkge1xyXG4gICAgICAgICAgICB0b2dnbGVTdWJtaXRCdG4oKTtcclxuICAgICAgICAgICAgaWYgKCF1c2VyKVxyXG4gICAgICAgICAgICAgICAgZm9ybS5yZXNldCgpO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKS5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXZhbGlkJywgJ2lzLWludmFsaWQnKSk7XHJcbiAgICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnd2FzLXZhbGlkYXRlZCcpO1xyXG4gICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ25lZWRzLXZhbGlkYXRpb24nKTtcclxuICAgICAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnLCAnYWxlcnQtZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LmFkZCgnYWxlcnQtc3VjY2VzcycpO1xyXG4gICAgICAgICAgICBhbGVydEVsLnRleHRDb250ZW50ID0gYNCf0L7RgtGA0LXQsdC40YLQtdC70Y/RgiDQtSAke3VzZXIgPyAn0YDQtdC00LDQutGC0LjRgNCw0L0nIDogJ9GB0YrQt9C00LDQtNC10L0nfSDRg9GB0L/QtdGI0L3Qvi5gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICB0b2dnbGVTdWJtaXRCdG4oKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgaWYgKGVyci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMCkge1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScsICdhbGVydC1zdWNjZXNzJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LmFkZCgnYWxlcnQtZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwudGV4dENvbnRlbnQgPSBlcnIucmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgICAgZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCd3YXMtdmFsaWRhdGVkJyk7XHJcbiAgICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LmFkZCgnbmVlZHMtdmFsaWRhdGlvbicpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVyci5yZXNwb25zZS5kYXRhLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3ZhdCcpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXJrSW52YWxpZCgndmF0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlcnIucmVzcG9uc2UuZGF0YS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdwaG9uZScpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXJrSW52YWxpZCgncGhvbmUnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGVyci5yZXNwb25zZS5kYXRhLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2Rpc2NvdW50JykpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtJbnZhbGlkKCdkaXNjb3VudCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVyci5yZXNwb25zZT8uc3RhdHVzID09PSA1MDApIHtcclxuICAgICAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnLCAnYWxlcnQtc3VjY2VzcycpO1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LWRhbmdlcicpO1xyXG4gICAgICAgICAgICBhbGVydEVsLnRleHRDb250ZW50ID0gJ9CT0YDQtdGI0LrQsCDQsiDRgdGK0YDQstGK0YDQsCc7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICB9IGVsc2UgY29uc29sZS5lcnJvcihlcnIpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVFZGl0VXNlclBhZ2UoY3R4LCBuZXh0KSB7XHJcbiAgICBjb25zdCBpZCA9IGN0eC5wYXJhbXMuaWQ7XHJcbiAgICB1c2VyUm9sZXMgPSAoYXdhaXQgYXhpb3MuZ2V0KCcvdXNlcnMvcm9sZXMnKSkuZGF0YTtcclxuICAgIGlmIChpZCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcSA9IGF3YWl0IGF4aW9zLmdldChgL3VzZXJzLyR7aWR9YCk7XHJcbiAgICAgICAgICAgIHVzZXIgPSByZXEuZGF0YTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICBhbGVydCgn0JLRitC30L3QuNC60L3QsCDQs9GA0LXRiNC60LAnKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgdXNlciA9ICcnO1xyXG5cclxuICAgIGNvbnN0IHRlbXBsYXRlID0gKCkgPT4gaHRtbGBcclxuICAgICAgICAke25hdigpfVxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWRcIj5cclxuICAgICAgICAgICAgPGZvcm0gbm92YWxpZGF0ZSBAc3VibWl0PSR7Y3JlYXRlRWRpdFVzZXJ9IGNsYXNzPVwibmVlZHMtdmFsaWRhdGlvblwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIG1iLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInVzZXJuYW1lXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0J/QvtGC0YDQtdCx0LjRgtC10LvRgdC60L4g0LjQvNC1PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiBpZD1cInVzZXJuYW1lXCIgbmFtZT1cInVzZXJuYW1lXCIgLnZhbHVlPSR7dXNlciAmJiB1c2VyLnVzZXJuYW1lfSBwbGFjZWhvbGRlcj1cItC/0YDQuNC80LXRgDogaXZhbjEyXCIgcmVxdWlyZWQgYXV0b2NvbXBsZXRlPVwib2ZmXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cganVzdGlmeS1jb250ZW50LWNlbnRlciBtYi0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS0zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJwYXNzd29yZFwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCf0LDRgNC+0LvQsCAo0LzQuNC9LiA2INGB0LjQvNCy0L7Qu9CwKTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJwYXNzd29yZFwiIGlkPVwicGFzc3dvcmRcIiBuYW1lPVwicGFzc3dvcmRcIiA/bWlubGVuZ3RoPSR7IXVzZXIgfHwgNn0gP3JlcXVpcmVkPSR7IXVzZXJ9IGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IGp1c3RpZnktY29udGVudC1jZW50ZXIgbWItMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tM1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicGFzc3dvcmQyXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0J/QvtCy0YLQvtGA0Lgg0L/QsNGA0L7Qu9CwPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInBhc3N3b3JkXCIgaWQ9XCJwYXNzd29yZDJcIiBuYW1lPVwicGFzc3dvcmQyXCIgP21pbmxlbmd0aD0keyF1c2VyIHx8IDZ9ID9yZXF1aXJlZD0keyF1c2VyfSBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIG1iLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInJvbGVcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QoNC+0LvRjzwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XCJmb3JtLXNlbGVjdFwiIGlkPVwicm9sZVwiIG5hbWU9XCJyb2xlXCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke09iamVjdC5lbnRyaWVzKHVzZXJSb2xlcykubWFwKHJvbGUgPT4gaHRtbGA8b3B0aW9uIHZhbHVlPSR7cm9sZVswXX0gP3NlbGVjdGVkPSR7dXNlciAmJiB1c2VyLnJvbGUgPT09IHJvbGVbMF19PiR7cm9sZVsxXX08L29wdGlvbj5gKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJhbGVydFwiIGNsYXNzPVwiZC1ub25lIGFsZXJ0IG1iLTJcIiByb2xlPVwiYWxlcnRcIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICR7c3VibWl0QnRuKHsgY2xhc3NlczogJ2QtYmxvY2sgbS1hdXRvIGNvbC1zbS0zJywgaWNvbjogJ2JpLWNoZWNrLWxnJyB9KX1cclxuICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICByZW5kZXIodGVtcGxhdGUoKSwgY29udGFpbmVyKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/admin/users/createEdit.js\n");

/***/ }),

/***/ "./src/views/admin/users/routes.js":
/*!*****************************************!*\
  !*** ./src/views/admin/users/routes.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usersRoutes: () => (/* binding */ usersRoutes)\n/* harmony export */ });\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _views_admin_users_users__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/views/admin/users/users */ \"./src/views/admin/users/users.js\");\n/* harmony import */ var _views_admin_users_createEdit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/views/admin/users/createEdit */ \"./src/views/admin/users/createEdit.js\");\n/* harmony import */ var _views_login__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/views/login */ \"./src/views/login.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nfunction usersRoutes() {\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/admin/users', _views_login__WEBPACK_IMPORTED_MODULE_3__.adminAuth, _views_admin_users_users__WEBPACK_IMPORTED_MODULE_1__.usersPage);\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/admin/users/create', _views_login__WEBPACK_IMPORTED_MODULE_3__.adminAuth, _views_admin_users_createEdit__WEBPACK_IMPORTED_MODULE_2__.createEditUserPage);\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/admin/users/:id', _views_login__WEBPACK_IMPORTED_MODULE_3__.adminAuth, _views_admin_users_createEdit__WEBPACK_IMPORTED_MODULE_2__.createEditUserPage);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvYWRtaW4vdXNlcnMvcm91dGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdCO0FBQzhCO0FBQ2M7QUFDMUI7QUFDMUM7QUFDQTtBQUNPO0FBQ1AsSUFBSSxpQ0FBSSxpQkFBaUIsbURBQVMsRUFBRSwrREFBUztBQUM3QyxJQUFJLGlDQUFJLHdCQUF3QixtREFBUyxFQUFFLDZFQUFrQjtBQUM3RCxJQUFJLGlDQUFJLHFCQUFxQixtREFBUyxFQUFFLDZFQUFrQjtBQUMxRCIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvdmlld3MvYWRtaW4vdXNlcnMvcm91dGVzLmpzPzhmMDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhZ2UgZnJvbSAncGFnZSc7XHJcbmltcG9ydCB7IHVzZXJzUGFnZSB9IGZyb20gJ0Avdmlld3MvYWRtaW4vdXNlcnMvdXNlcnMnO1xyXG5pbXBvcnQgeyBjcmVhdGVFZGl0VXNlclBhZ2UgfSBmcm9tICdAL3ZpZXdzL2FkbWluL3VzZXJzL2NyZWF0ZUVkaXQnO1xyXG5pbXBvcnQgeyBhZG1pbkF1dGggfSBmcm9tICdAL3ZpZXdzL2xvZ2luJztcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlcnNSb3V0ZXMoKSB7XHJcbiAgICBwYWdlKCcvYWRtaW4vdXNlcnMnLCBhZG1pbkF1dGgsIHVzZXJzUGFnZSk7XHJcbiAgICBwYWdlKCcvYWRtaW4vdXNlcnMvY3JlYXRlJywgYWRtaW5BdXRoLCBjcmVhdGVFZGl0VXNlclBhZ2UpO1xyXG4gICAgcGFnZSgnL2FkbWluL3VzZXJzLzppZCcsIGFkbWluQXV0aCwgY3JlYXRlRWRpdFVzZXJQYWdlKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/admin/users/routes.js\n");

/***/ }),

/***/ "./src/views/admin/users/users.js":
/*!****************************************!*\
  !*** ./src/views/admin/users/users.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usersPage: () => (/* binding */ usersPage)\n/* harmony export */ });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var _css_categories_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/css/categories.css */ \"./src/css/categories.css\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _views_nav_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/views/nav.js */ \"./src/views/nav.js\");\n/* harmony import */ var lit_directives_until_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lit/directives/until.js */ \"./node_modules/lit/directives/until.js\");\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _views_login_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/views/login.js */ \"./src/views/login.js\");\n/* harmony import */ var _views_components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/views/components */ \"./src/views/components.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nasync function deleteUser(_id) {\r\n    if (_id === _views_login_js__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.id)\r\n        return alert('Не може да изтриете собствения си акаунт');\r\n\r\n    try {\r\n        await axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"].delete(`/users/${_id}`);\r\n        page__WEBPACK_IMPORTED_MODULE_5__();\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert('Възникна грешка');\r\n    }\r\n}\r\n\r\nconst table = (users) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <table class=\"table table-striped table-hover\">\r\n        <thead>\r\n            <tr>\r\n                <th>Потребителско име</th>\r\n                <th>Роля</th>\r\n                <th>Действия</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            ${users.map(user => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n                <tr>\r\n                    <td>${user.username}</td>\r\n                    <td>${user.role}</td>\r\n                    <td class=\"text-nowrap\">\r\n                        <a href=\"/admin/users/${user._id}\" class=\"btn btn-primary\"><i class=\"bi bi-pencil\"></i><span class=\"d-none d-sm-inline\"> Редактирай</span></a>\r\n                        <button @click=${() => deleteUser(user._id)} class=\"btn btn-danger\"><i class=\"bi bi-trash\"></i><span class=\"d-none d-sm-inline\"> Изтрий</span></button>\r\n                    </td>\r\n                </tr>\r\n            `)}\r\n        </tbody>\r\n    </table>\r\n`;\r\n\r\nasync function loadUsers() {\r\n    const req = await axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"].get('/users');\r\n\r\n    return table(req.data);\r\n}\r\n\r\nfunction usersPage() {\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)((0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        ${(0,_views_nav_js__WEBPACK_IMPORTED_MODULE_3__.nav)()}\r\n        <div class=\"container-fluid\">\r\n            <a href='/admin/users/create' class=\"btn btn-primary\"><i class=\"bi bi-plus\"></i> Създай потребител</a>\r\n            ${(0,lit_directives_until_js__WEBPACK_IMPORTED_MODULE_4__.until)(loadUsers(), _views_components__WEBPACK_IMPORTED_MODULE_7__.spinner)}\r\n        </div>\r\n    `, _app_js__WEBPACK_IMPORTED_MODULE_0__.container);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvYWRtaW4vdXNlcnMvdXNlcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFxQztBQUNQO0FBQ2E7QUFDakI7QUFDVztBQUNXO0FBQ3hCO0FBQ3dCO0FBQ0g7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHlEQUFZO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkNBQUssa0JBQWtCLElBQUk7QUFDekMsUUFBUSxpQ0FBSTtBQUNaLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGlEQUFJO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsa0JBQWtCLGlEQUFJO0FBQ3BDO0FBQ0EsMEJBQTBCLGNBQWM7QUFDeEMsMEJBQTBCLFVBQVU7QUFDcEM7QUFDQSxnREFBZ0QsU0FBUztBQUN6RCx5Q0FBeUMsNEJBQTRCO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkNBQUs7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLElBQUksbURBQU0sQ0FBQyxpREFBSTtBQUNmLFVBQVUsa0RBQUc7QUFDYjtBQUNBO0FBQ0EsY0FBYyw4REFBSyxjQUFjLHNEQUFPO0FBQ3hDO0FBQ0EsT0FBTyw4Q0FBUztBQUNoQiIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvdmlld3MvYWRtaW4vdXNlcnMvdXNlcnMuanM/NjI3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb250YWluZXIgfSBmcm9tIFwiQC9hcHAuanNcIjtcclxuaW1wb3J0ICdAL2Nzcy9jYXRlZ29yaWVzLmNzcyc7XHJcbmltcG9ydCB7IGh0bWwsIHJlbmRlciB9IGZyb20gJ2xpdC9odG1sLmpzJztcclxuaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xyXG5pbXBvcnQgeyBuYXYgfSBmcm9tICdAL3ZpZXdzL25hdi5qcyc7XHJcbmltcG9ydCB7IHVudGlsIH0gZnJvbSAnbGl0L2RpcmVjdGl2ZXMvdW50aWwuanMnO1xyXG5pbXBvcnQgcGFnZSBmcm9tICdwYWdlJztcclxuaW1wb3J0IHsgbG9nZ2VkSW5Vc2VyIH0gZnJvbSBcIkAvdmlld3MvbG9naW4uanNcIjtcclxuaW1wb3J0IHsgc3Bpbm5lciB9IGZyb20gXCJAL3ZpZXdzL2NvbXBvbmVudHNcIjtcclxuXHJcblxyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVVc2VyKF9pZCkge1xyXG4gICAgaWYgKF9pZCA9PT0gbG9nZ2VkSW5Vc2VyLmlkKVxyXG4gICAgICAgIHJldHVybiBhbGVydCgn0J3QtSDQvNC+0LbQtSDQtNCwINC40LfRgtGA0LjQtdGC0LUg0YHQvtCx0YHRgtCy0LXQvdC40Y8g0YHQuCDQsNC60LDRg9C90YInKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGF4aW9zLmRlbGV0ZShgL3VzZXJzLyR7X2lkfWApO1xyXG4gICAgICAgIHBhZ2UoKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICBhbGVydCgn0JLRitC30L3QuNC60L3QsCDQs9GA0LXRiNC60LAnKTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgdGFibGUgPSAodXNlcnMpID0+IGh0bWxgXHJcbiAgICA8dGFibGUgY2xhc3M9XCJ0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWhvdmVyXCI+XHJcbiAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICA8dGg+0J/QvtGC0YDQtdCx0LjRgtC10LvRgdC60L4g0LjQvNC1PC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD7QoNC+0LvRjzwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGg+0JTQtdC50YHRgtCy0LjRjzwvdGg+XHJcbiAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgPC90aGVhZD5cclxuICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICR7dXNlcnMubWFwKHVzZXIgPT4gaHRtbGBcclxuICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHt1c2VyLnVzZXJuYW1lfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7dXNlci5yb2xlfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwidGV4dC1ub3dyYXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9hZG1pbi91c2Vycy8ke3VzZXIuX2lkfVwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+PGkgY2xhc3M9XCJiaSBiaS1wZW5jaWxcIj48L2k+PHNwYW4gY2xhc3M9XCJkLW5vbmUgZC1zbS1pbmxpbmVcIj4g0KDQtdC00LDQutGC0LjRgNCw0Lk8L3NwYW4+PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIEBjbGljaz0keygpID0+IGRlbGV0ZVVzZXIodXNlci5faWQpfSBjbGFzcz1cImJ0biBidG4tZGFuZ2VyXCI+PGkgY2xhc3M9XCJiaSBiaS10cmFzaFwiPjwvaT48c3BhbiBjbGFzcz1cImQtbm9uZSBkLXNtLWlubGluZVwiPiDQmNC30YLRgNC40Lk8L3NwYW4+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgIGApfVxyXG4gICAgICAgIDwvdGJvZHk+XHJcbiAgICA8L3RhYmxlPlxyXG5gO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gbG9hZFVzZXJzKCkge1xyXG4gICAgY29uc3QgcmVxID0gYXdhaXQgYXhpb3MuZ2V0KCcvdXNlcnMnKTtcclxuXHJcbiAgICByZXR1cm4gdGFibGUocmVxLmRhdGEpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlcnNQYWdlKCkge1xyXG4gICAgcmVuZGVyKGh0bWxgXHJcbiAgICAgICAgJHtuYXYoKX1cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkXCI+XHJcbiAgICAgICAgICAgIDxhIGhyZWY9Jy9hZG1pbi91c2Vycy9jcmVhdGUnIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+PGkgY2xhc3M9XCJiaSBiaS1wbHVzXCI+PC9pPiDQodGK0LfQtNCw0Lkg0L/QvtGC0YDQtdCx0LjRgtC10Ls8L2E+XHJcbiAgICAgICAgICAgICR7dW50aWwobG9hZFVzZXJzKCksIHNwaW5uZXIpfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYCwgY29udGFpbmVyKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/admin/users/users.js\n");

/***/ }),

/***/ "./src/views/categories/categories.js":
/*!********************************************!*\
  !*** ./src/views/categories/categories.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   categoriesOptions: () => (/* binding */ categoriesOptions),\n/* harmony export */   categoriesPage: () => (/* binding */ categoriesPage)\n/* harmony export */ });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var _css_categories_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/css/categories.css */ \"./src/css/categories.css\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _views_nav_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/views/nav.js */ \"./src/views/nav.js\");\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/api.js */ \"./src/api.js\");\n/* harmony import */ var lit_directives_until_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lit/directives/until.js */ \"./node_modules/lit/directives/until.js\");\n/* harmony import */ var _views_components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/views/components */ \"./src/views/components.js\");\n/* harmony import */ var _views_login__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/views/login */ \"./src/views/login.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar selectedCategoryId;\r\nvar formOptions;\r\n\r\nfunction renderCategories(categories) {\r\n    // add depth value\r\n    for (let category of categories)\r\n        category.depth = category.path ? category.path.split(',').filter(function (el) {\r\n            return el != \"\";\r\n        }) : [];\r\n\r\n    const parentCategories = categories.filter(cat => !cat.path);\r\n\r\n    const categoryTemplate = (category) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        <div class=\"list-group\">\r\n            <div class=\"list-group-item depth depth-${category.depth.length}\" slug=\"${category.slug}\" path=\"${category.path}\" order=\"${category.order}\">\r\n                ${['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_8__.loggedInUser.role) ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<button class=\"btn\" data-bs-toggle=\"modal\" data-bs-target=\"#createEditModal\" @click=${() => renderForm(category)}>${category.name}</button>` : (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<button class=\"btn\" >${category.name}</button>`}\r\n                ${categories.filter(cat => cat.path == `${category.path}${category.slug},` || cat.path == `,${category.slug},`).map(child => categoryTemplate(child))}\r\n            </div>\r\n        </div>`;\r\n\r\n    const allParentHTML = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        ${parentCategories.map(cat => categoryTemplate(cat))}\r\n    `;\r\n\r\n    return allParentHTML();\r\n}\r\n\r\nfunction validateCategory(data) {\r\n    var invalidFlag = false;\r\n\r\n    if (!data.name)\r\n        invalidFlag = (0,_api_js__WEBPACK_IMPORTED_MODULE_5__.markInvalid)('name');\r\n    else (0,_api_js__WEBPACK_IMPORTED_MODULE_5__.markValid)('name');\r\n\r\n    // if data.order, check if its a whole number (ex. 1,5,55 but not 1.5, 0.5)\r\n    if (data.order && data.order.match(/^\\d+$/) === null)\r\n        invalidFlag = (0,_api_js__WEBPACK_IMPORTED_MODULE_5__.markInvalid)('order');\r\n    else (0,_api_js__WEBPACK_IMPORTED_MODULE_5__.markValid)('order');\r\n\r\n    return invalidFlag;\r\n}\r\n\r\nfunction resetForm() {\r\n    const form = document.querySelector('#createEditModal form');\r\n    const alertEl = document.getElementById('alert');\r\n    form.reset();\r\n    form.querySelectorAll('input').forEach(el => el.classList.remove('is-valid', 'is-invalid'));\r\n    form.querySelectorAll('select').forEach(el => el.classList.remove('is-valid', 'is-invalid'));\r\n    form.classList.remove('was-validated');\r\n    form.classList.add('needs-validation');\r\n    alertEl.classList.remove('alert-danger');\r\n    alertEl.classList.add('d-none');\r\n    alertEl.textContent = '';\r\n\r\n}\r\n\r\nasync function createEditDeleteCategory(e) {\r\n    e.preventDefault();\r\n    const form = document.querySelector('#createEditModal form');\r\n    e.target.disabled = true;\r\n    const action = e.target.getAttribute('action');\r\n\r\n    form.classList.add('was-validated');\r\n    form.classList.remove('needs-validation')\r\n    const formData = new FormData(form);\r\n    const data = Object.fromEntries(formData.entries());\r\n\r\n    const invalidData = validateCategory(data);\r\n    if (invalidData) return e.target.disabled = false;\r\n\r\n    const alertEl = document.getElementById('alert');\r\n    try {\r\n        var req;\r\n        if (action === 'delete')\r\n            req = await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].delete(`/categories/${selectedCategoryId}`);\r\n        else if (action === 'edit')\r\n            req = await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].put(`/categories/${selectedCategoryId}`, formData);\r\n        else\r\n            req = await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].post('/categories', formData);\r\n\r\n        if ([201, 204].includes(req.status)) {\r\n            renderForm();\r\n            resetForm();\r\n            document.querySelector('#createEditModal [data-bs-dismiss=\"modal\"]').click();\r\n            e.target.disabled = false;\r\n            return page__WEBPACK_IMPORTED_MODULE_3__('/categories');\r\n        }\r\n    } catch (err) {\r\n        e.target.disabled = false;\r\n        console.error(err);\r\n        if (err.response.status === 400) {\r\n            alertEl.classList.remove('d-none');\r\n            alertEl.classList.add('alert-danger');\r\n            alertEl.textContent = err.response.data;\r\n            form.classList.remove('was-validated');\r\n            form.classList.add('needs-validation');\r\n\r\n            if (err.response.data.toLowerCase().includes('name'))\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_5__.markInvalid)('name');\r\n            if (err.response.data.toLowerCase().includes('parent'))\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_5__.markInvalid)('parent');\r\n            if (err.response.data.toLowerCase().includes('order'))\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_5__.markInvalid)('order');\r\n        }\r\n        else if (err.response.status === 500) {\r\n            alertEl.classList.remove('d-none');\r\n            alertEl.classList.add('alert-danger');\r\n            alertEl.textContent = 'Грешка в сървъра';\r\n            console.error(err);\r\n        }\r\n    }\r\n}\r\n\r\nconst createEditModal = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <div class=\"modal fade\" id =\"createEditModal\" tabindex=\"-1\" aria-labelledby=\"createEditModalLabel\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h1 class=\"modal-title fs-5\" id=\"createEditModalLabel\">Създай/Редактирай категория</h1>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                </div>\r\n                <form enctype=\"multipart/form-data\" novalidate class=\"needs-validation\">\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>`;\r\n\r\nconst modalForm = (category) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <div class=\"modal-body\">\r\n        <div class=\"mb-3\">\r\n            <label for=\"name\" class=\"form-label\">Име</label>\r\n            <input type=\"text\" class=\"form-control\" name=\"name\" .value=${category && category.name} id=\"name\" autocomplete=\"off\" required>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n            <label for=\"parent\" class=\"form-label\">Родителска категория</label>\r\n            <select class=\"form-select\" name=\"parent\" id=\"parent\">\r\n                ${formOptions}\r\n            </select>\r\n        </div>\r\n        <div class=\"row mb-3\">\r\n            <label for=\"image\" class=\"form-label\">Снимка</label>\r\n            <input @change=${_api_js__WEBPACK_IMPORTED_MODULE_5__.loadPreviewImage} name=\"image\" class=\"form-control\" type=\"file\" id=\"image\" accept=\"capture=camera,image/*\">\r\n            <img id=\"imagePreview\" class=\"${category?.image ? '' : 'd-none'} img-thumbnail\" .src=${category?.image?.url} alt=\"\">\r\n        </div>\r\n        <div class=\"mb-3\">\r\n            <label for=\"order\" class=\"form-label\">Подредба</label>\r\n            <input type=\"number\" min=\"0\" step=\"1\" inputmode=\"numeric\" value=${category && category.order} class=\"form-control\" name=\"order\" id=\"order\" placeholder=\"0\" autocomplete=\"off\">\r\n        </div>\r\n        <div id=\"alert\" class=\"d-none alert\" role=\"alert\"></div>\r\n    </div>\r\n    <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Откажи</button>\r\n        ${category && _views_login__WEBPACK_IMPORTED_MODULE_8__.loggedInUser.role === 'admin' ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<button type=\"submit\" action=\"delete\" @click=${createEditDeleteCategory} class=\"btn btn-danger\">Изтрий</button>` : ''}\r\n        <button type=\"submit\" action=${category ? \"edit\" : \"create\"} @click=${createEditDeleteCategory} class=\"btn btn-primary\"><i class=\"bi bi-check-lg\"></i> Запази</button>\r\n    </div>\r\n`;\r\n\r\nfunction categoriesOptions(params) {\r\n    const { categories, selected, showNoParent = true, disableWithChilden = false } = params;\r\n    // disableWithChilden - disable category if it has children (for selection in product creation)\r\n\r\n    // add depth value\r\n    for (let category of categories)\r\n        category.depth = category.path ? category.path.split(',').filter(function (el) {\r\n            return el != \"\";\r\n        }) : [];\r\n\r\n    const parentCategories = categories.filter(cat => !cat.path);\r\n\r\n    var options = showNoParent ? [(0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option value=\"\">Без категория</option>`] : [];\r\n    const option = (category) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option ?disabled=${disableWithChilden && categories.some(cat => cat.path?.includes(category.slug))} .selected=${selected && selected == category._id} slug=\"${category.slug}\" value=\"${category._id}\">${category.depth.map(() => '-').join(' ')}${category.name}</option>`;\r\n\r\n    function recursion(category) {\r\n        options.push(option(category));\r\n        const children = categories.filter(cat => cat.path == `${category.path}${category.slug},` || cat.path == `,${category.slug},`);\r\n\r\n        if (children)\r\n            children.forEach(child => recursion(child));\r\n    }\r\n    parentCategories.forEach(category => {\r\n        recursion(category);\r\n    });\r\n\r\n    return options;\r\n}\r\n\r\nfunction renderForm(category) {\r\n    selectedCategoryId = category ? category._id : null;\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(modalForm(category ? category : null), document.querySelector('#createEditModal form'))\r\n\r\n    if (!category)\r\n        return;\r\n\r\n    // Find currently selected category and disable option element\r\n    const optionEl = document.querySelector(`#parent option[value=\"${category._id}\"]`);\r\n    optionEl.disabled = true;\r\n\r\n    // Select parent category in options\r\n    if (!category.path) // Category is parent\r\n        return document.querySelector('#parent option').selected = true;\r\n\r\n    // find parent category to select in options\r\n    const parentSlug = category.path.split(',').filter(el => el != '').slice(-1)[0];\r\n    document.querySelector(`#parent [slug=${parentSlug}]`).selected = true;\r\n\r\n}\r\n\r\nasync function categoriesPage() {\r\n    var categories;\r\n    selectedCategoryId = null;\r\n    async function loadCategories() {\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].get('/categories');\r\n        categories = req.data;\r\n\r\n        formOptions = categoriesOptions({ categories });\r\n        return renderCategories(categories);\r\n    }\r\n\r\n    const template = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        <div class=\"container-responsive\">\r\n            ${createEditModal()}\r\n            ${(0,_views_nav_js__WEBPACK_IMPORTED_MODULE_4__.nav)()}\r\n            ${['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_8__.loggedInUser.role) ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<button data-bs-toggle=\"modal\" data-bs-target=\"#createEditModal\" @click=${() => renderForm()} class=\"btn btn-primary\"><i class=\"bi bi-plus\"></i> Създай категория</button>` : ''}\r\n            <div id=\"categories\" class=\"container-fluid mt-2\">\r\n                ${(0,lit_directives_until_js__WEBPACK_IMPORTED_MODULE_6__.until)(loadCategories(), _views_components__WEBPACK_IMPORTED_MODULE_7__.spinner)}\r\n            </div>\r\n        </div>\r\n    `;\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(template(), _app_js__WEBPACK_IMPORTED_MODULE_0__.container);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxtREFBTTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsYUFBYTtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFdBQVc7QUFDdkQ7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNkNBQUs7QUFDL0I7QUFDQTtBQUNBLDBDQUEwQyxZQUFZO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixpREFBSTtBQUMvQjtBQUNBLGNBQWM7QUFDZCxjQUFjLGtEQUFHO0FBQ2pCLGNBQWMsOEJBQThCLHNEQUFZLFNBQVMsaURBQUksMkVBQTJFLG9CQUFvQjtBQUNwSztBQUNBLGtCQUFrQiw4REFBSyxtQkFBbUIsc0RBQU87QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLG1EQUFNLGFBQWEsOENBQVM7QUFDaEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWJiLml0Ly4vc3JjL3ZpZXdzL2NhdGVnb3JpZXMvY2F0ZWdvcmllcy5qcz81ZTAyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbnRhaW5lciB9IGZyb20gXCJAL2FwcC5qc1wiO1xyXG5pbXBvcnQgJ0AvY3NzL2NhdGVnb3JpZXMuY3NzJztcclxuaW1wb3J0IHsgaHRtbCwgcmVuZGVyIH0gZnJvbSAnbGl0L2h0bWwuanMnO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XHJcbmltcG9ydCBwYWdlIGZyb20gJ3BhZ2UnO1xyXG5pbXBvcnQgeyBuYXYgfSBmcm9tICdAL3ZpZXdzL25hdi5qcyc7XHJcbmltcG9ydCB7IG1hcmtJbnZhbGlkLCBtYXJrVmFsaWQsIGxvYWRQcmV2aWV3SW1hZ2UgfSBmcm9tIFwiQC9hcGkuanNcIjtcclxuaW1wb3J0IHsgdW50aWwgfSBmcm9tICdsaXQvZGlyZWN0aXZlcy91bnRpbC5qcyc7XHJcbmltcG9ydCB7IHNwaW5uZXIgfSBmcm9tIFwiQC92aWV3cy9jb21wb25lbnRzXCI7XHJcbmltcG9ydCB7IGxvZ2dlZEluVXNlciB9IGZyb20gXCJAL3ZpZXdzL2xvZ2luXCI7XHJcblxyXG52YXIgc2VsZWN0ZWRDYXRlZ29yeUlkO1xyXG52YXIgZm9ybU9wdGlvbnM7XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXRlZ29yaWVzKGNhdGVnb3JpZXMpIHtcclxuICAgIC8vIGFkZCBkZXB0aCB2YWx1ZVxyXG4gICAgZm9yIChsZXQgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcylcclxuICAgICAgICBjYXRlZ29yeS5kZXB0aCA9IGNhdGVnb3J5LnBhdGggPyBjYXRlZ29yeS5wYXRoLnNwbGl0KCcsJykuZmlsdGVyKGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZWwgIT0gXCJcIjtcclxuICAgICAgICB9KSA6IFtdO1xyXG5cclxuICAgIGNvbnN0IHBhcmVudENhdGVnb3JpZXMgPSBjYXRlZ29yaWVzLmZpbHRlcihjYXQgPT4gIWNhdC5wYXRoKTtcclxuXHJcbiAgICBjb25zdCBjYXRlZ29yeVRlbXBsYXRlID0gKGNhdGVnb3J5KSA9PiBodG1sYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LWdyb3VwXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gZGVwdGggZGVwdGgtJHtjYXRlZ29yeS5kZXB0aC5sZW5ndGh9XCIgc2x1Zz1cIiR7Y2F0ZWdvcnkuc2x1Z31cIiBwYXRoPVwiJHtjYXRlZ29yeS5wYXRofVwiIG9yZGVyPVwiJHtjYXRlZ29yeS5vcmRlcn1cIj5cclxuICAgICAgICAgICAgICAgICR7WydtYW5hZ2VyJywgJ2FkbWluJ10uaW5jbHVkZXMobG9nZ2VkSW5Vc2VyLnJvbGUpID8gaHRtbGA8YnV0dG9uIGNsYXNzPVwiYnRuXCIgZGF0YS1icy10b2dnbGU9XCJtb2RhbFwiIGRhdGEtYnMtdGFyZ2V0PVwiI2NyZWF0ZUVkaXRNb2RhbFwiIEBjbGljaz0keygpID0+IHJlbmRlckZvcm0oY2F0ZWdvcnkpfT4ke2NhdGVnb3J5Lm5hbWV9PC9idXR0b24+YCA6IGh0bWxgPGJ1dHRvbiBjbGFzcz1cImJ0blwiID4ke2NhdGVnb3J5Lm5hbWV9PC9idXR0b24+YH1cclxuICAgICAgICAgICAgICAgICR7Y2F0ZWdvcmllcy5maWx0ZXIoY2F0ID0+IGNhdC5wYXRoID09IGAke2NhdGVnb3J5LnBhdGh9JHtjYXRlZ29yeS5zbHVnfSxgIHx8IGNhdC5wYXRoID09IGAsJHtjYXRlZ29yeS5zbHVnfSxgKS5tYXAoY2hpbGQgPT4gY2F0ZWdvcnlUZW1wbGF0ZShjaGlsZCkpfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5gO1xyXG5cclxuICAgIGNvbnN0IGFsbFBhcmVudEhUTUwgPSAoKSA9PiBodG1sYFxyXG4gICAgICAgICR7cGFyZW50Q2F0ZWdvcmllcy5tYXAoY2F0ID0+IGNhdGVnb3J5VGVtcGxhdGUoY2F0KSl9XHJcbiAgICBgO1xyXG5cclxuICAgIHJldHVybiBhbGxQYXJlbnRIVE1MKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ2F0ZWdvcnkoZGF0YSkge1xyXG4gICAgdmFyIGludmFsaWRGbGFnID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKCFkYXRhLm5hbWUpXHJcbiAgICAgICAgaW52YWxpZEZsYWcgPSBtYXJrSW52YWxpZCgnbmFtZScpO1xyXG4gICAgZWxzZSBtYXJrVmFsaWQoJ25hbWUnKTtcclxuXHJcbiAgICAvLyBpZiBkYXRhLm9yZGVyLCBjaGVjayBpZiBpdHMgYSB3aG9sZSBudW1iZXIgKGV4LiAxLDUsNTUgYnV0IG5vdCAxLjUsIDAuNSlcclxuICAgIGlmIChkYXRhLm9yZGVyICYmIGRhdGEub3JkZXIubWF0Y2goL15cXGQrJC8pID09PSBudWxsKVxyXG4gICAgICAgIGludmFsaWRGbGFnID0gbWFya0ludmFsaWQoJ29yZGVyJyk7XHJcbiAgICBlbHNlIG1hcmtWYWxpZCgnb3JkZXInKTtcclxuXHJcbiAgICByZXR1cm4gaW52YWxpZEZsYWc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHtcclxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3JlYXRlRWRpdE1vZGFsIGZvcm0nKTtcclxuICAgIGNvbnN0IGFsZXJ0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxlcnQnKTtcclxuICAgIGZvcm0ucmVzZXQoKTtcclxuICAgIGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKS5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXZhbGlkJywgJ2lzLWludmFsaWQnKSk7XHJcbiAgICBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NlbGVjdCcpLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtdmFsaWQnLCAnaXMtaW52YWxpZCcpKTtcclxuICAgIGZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnd2FzLXZhbGlkYXRlZCcpO1xyXG4gICAgZm9ybS5jbGFzc0xpc3QuYWRkKCduZWVkcy12YWxpZGF0aW9uJyk7XHJcbiAgICBhbGVydEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FsZXJ0LWRhbmdlcicpO1xyXG4gICAgYWxlcnRFbC5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTtcclxuICAgIGFsZXJ0RWwudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUVkaXREZWxldGVDYXRlZ29yeShlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NyZWF0ZUVkaXRNb2RhbCBmb3JtJyk7XHJcbiAgICBlLnRhcmdldC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpO1xyXG5cclxuICAgIGZvcm0uY2xhc3NMaXN0LmFkZCgnd2FzLXZhbGlkYXRlZCcpO1xyXG4gICAgZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCduZWVkcy12YWxpZGF0aW9uJylcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xyXG4gICAgY29uc3QgZGF0YSA9IE9iamVjdC5mcm9tRW50cmllcyhmb3JtRGF0YS5lbnRyaWVzKCkpO1xyXG5cclxuICAgIGNvbnN0IGludmFsaWREYXRhID0gdmFsaWRhdGVDYXRlZ29yeShkYXRhKTtcclxuICAgIGlmIChpbnZhbGlkRGF0YSkgcmV0dXJuIGUudGFyZ2V0LmRpc2FibGVkID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3QgYWxlcnRFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGVydCcpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB2YXIgcmVxO1xyXG4gICAgICAgIGlmIChhY3Rpb24gPT09ICdkZWxldGUnKVxyXG4gICAgICAgICAgICByZXEgPSBhd2FpdCBheGlvcy5kZWxldGUoYC9jYXRlZ29yaWVzLyR7c2VsZWN0ZWRDYXRlZ29yeUlkfWApO1xyXG4gICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2VkaXQnKVxyXG4gICAgICAgICAgICByZXEgPSBhd2FpdCBheGlvcy5wdXQoYC9jYXRlZ29yaWVzLyR7c2VsZWN0ZWRDYXRlZ29yeUlkfWAsIGZvcm1EYXRhKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJlcSA9IGF3YWl0IGF4aW9zLnBvc3QoJy9jYXRlZ29yaWVzJywgZm9ybURhdGEpO1xyXG5cclxuICAgICAgICBpZiAoWzIwMSwgMjA0XS5pbmNsdWRlcyhyZXEuc3RhdHVzKSkge1xyXG4gICAgICAgICAgICByZW5kZXJGb3JtKCk7XHJcbiAgICAgICAgICAgIHJlc2V0Rm9ybSgpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3JlYXRlRWRpdE1vZGFsIFtkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiXScpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiBwYWdlKCcvY2F0ZWdvcmllcycpO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGUudGFyZ2V0LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIGlmIChlcnIucmVzcG9uc2Uuc3RhdHVzID09PSA0MDApIHtcclxuICAgICAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTtcclxuICAgICAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QuYWRkKCdhbGVydC1kYW5nZXInKTtcclxuICAgICAgICAgICAgYWxlcnRFbC50ZXh0Q29udGVudCA9IGVyci5yZXNwb25zZS5kYXRhO1xyXG4gICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcy12YWxpZGF0ZWQnKTtcclxuICAgICAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKCduZWVkcy12YWxpZGF0aW9uJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlLmRhdGEudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnbmFtZScpKVxyXG4gICAgICAgICAgICAgICAgbWFya0ludmFsaWQoJ25hbWUnKTtcclxuICAgICAgICAgICAgaWYgKGVyci5yZXNwb25zZS5kYXRhLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3BhcmVudCcpKVxyXG4gICAgICAgICAgICAgICAgbWFya0ludmFsaWQoJ3BhcmVudCcpO1xyXG4gICAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlLmRhdGEudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnb3JkZXInKSlcclxuICAgICAgICAgICAgICAgIG1hcmtJbnZhbGlkKCdvcmRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlcnIucmVzcG9uc2Uuc3RhdHVzID09PSA1MDApIHtcclxuICAgICAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTtcclxuICAgICAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QuYWRkKCdhbGVydC1kYW5nZXInKTtcclxuICAgICAgICAgICAgYWxlcnRFbC50ZXh0Q29udGVudCA9ICfQk9GA0LXRiNC60LAg0LIg0YHRitGA0LLRitGA0LAnO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBjcmVhdGVFZGl0TW9kYWwgPSAoKSA9PiBodG1sYFxyXG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsIGZhZGVcIiBpZCA9XCJjcmVhdGVFZGl0TW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgYXJpYS1sYWJlbGxlZGJ5PVwiY3JlYXRlRWRpdE1vZGFsTGFiZWxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzPVwibW9kYWwtdGl0bGUgZnMtNVwiIGlkPVwiY3JlYXRlRWRpdE1vZGFsTGFiZWxcIj7QodGK0LfQtNCw0Lkv0KDQtdC00LDQutGC0LjRgNCw0Lkg0LrQsNGC0LXQs9C+0YDQuNGPPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0bi1jbG9zZVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxmb3JtIGVuY3R5cGU9XCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIgbm92YWxpZGF0ZSBjbGFzcz1cIm5lZWRzLXZhbGlkYXRpb25cIj5cclxuICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5gO1xyXG5cclxuY29uc3QgbW9kYWxGb3JtID0gKGNhdGVnb3J5KSA9PiBodG1sYFxyXG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibWItM1wiPlxyXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwibmFtZVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCY0LzQtTwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgbmFtZT1cIm5hbWVcIiAudmFsdWU9JHtjYXRlZ29yeSAmJiBjYXRlZ29yeS5uYW1lfSBpZD1cIm5hbWVcIiBhdXRvY29tcGxldGU9XCJvZmZcIiByZXF1aXJlZD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibWItM1wiPlxyXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwicGFyZW50XCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0KDQvtC00LjRgtC10LvRgdC60LAg0LrQsNGC0LXQs9C+0YDQuNGPPC9sYWJlbD5cclxuICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cImZvcm0tc2VsZWN0XCIgbmFtZT1cInBhcmVudFwiIGlkPVwicGFyZW50XCI+XHJcbiAgICAgICAgICAgICAgICAke2Zvcm1PcHRpb25zfVxyXG4gICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicm93IG1iLTNcIj5cclxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImltYWdlXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0KHQvdC40LzQutCwPC9sYWJlbD5cclxuICAgICAgICAgICAgPGlucHV0IEBjaGFuZ2U9JHtsb2FkUHJldmlld0ltYWdlfSBuYW1lPVwiaW1hZ2VcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJmaWxlXCIgaWQ9XCJpbWFnZVwiIGFjY2VwdD1cImNhcHR1cmU9Y2FtZXJhLGltYWdlLypcIj5cclxuICAgICAgICAgICAgPGltZyBpZD1cImltYWdlUHJldmlld1wiIGNsYXNzPVwiJHtjYXRlZ29yeT8uaW1hZ2UgPyAnJyA6ICdkLW5vbmUnfSBpbWctdGh1bWJuYWlsXCIgLnNyYz0ke2NhdGVnb3J5Py5pbWFnZT8udXJsfSBhbHQ9XCJcIj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibWItM1wiPlxyXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwib3JkZXJcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7Qn9C+0LTRgNC10LTQsdCwPC9sYWJlbD5cclxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBtaW49XCIwXCIgc3RlcD1cIjFcIiBpbnB1dG1vZGU9XCJudW1lcmljXCIgdmFsdWU9JHtjYXRlZ29yeSAmJiBjYXRlZ29yeS5vcmRlcn0gY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuYW1lPVwib3JkZXJcIiBpZD1cIm9yZGVyXCIgcGxhY2Vob2xkZXI9XCIwXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCI+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBpZD1cImFsZXJ0XCIgY2xhc3M9XCJkLW5vbmUgYWxlcnRcIiByb2xlPVwiYWxlcnRcIj48L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxyXG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnlcIiBkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiPtCe0YLQutCw0LbQuDwvYnV0dG9uPlxyXG4gICAgICAgICR7Y2F0ZWdvcnkgJiYgbG9nZ2VkSW5Vc2VyLnJvbGUgPT09ICdhZG1pbicgPyBodG1sYDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGFjdGlvbj1cImRlbGV0ZVwiIEBjbGljaz0ke2NyZWF0ZUVkaXREZWxldGVDYXRlZ29yeX0gY2xhc3M9XCJidG4gYnRuLWRhbmdlclwiPtCY0LfRgtGA0LjQuTwvYnV0dG9uPmAgOiAnJ31cclxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBhY3Rpb249JHtjYXRlZ29yeSA/IFwiZWRpdFwiIDogXCJjcmVhdGVcIn0gQGNsaWNrPSR7Y3JlYXRlRWRpdERlbGV0ZUNhdGVnb3J5fSBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPjxpIGNsYXNzPVwiYmkgYmktY2hlY2stbGdcIj48L2k+INCX0LDQv9Cw0LfQuDwvYnV0dG9uPlxyXG4gICAgPC9kaXY+XHJcbmA7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2F0ZWdvcmllc09wdGlvbnMocGFyYW1zKSB7XHJcbiAgICBjb25zdCB7IGNhdGVnb3JpZXMsIHNlbGVjdGVkLCBzaG93Tm9QYXJlbnQgPSB0cnVlLCBkaXNhYmxlV2l0aENoaWxkZW4gPSBmYWxzZSB9ID0gcGFyYW1zO1xyXG4gICAgLy8gZGlzYWJsZVdpdGhDaGlsZGVuIC0gZGlzYWJsZSBjYXRlZ29yeSBpZiBpdCBoYXMgY2hpbGRyZW4gKGZvciBzZWxlY3Rpb24gaW4gcHJvZHVjdCBjcmVhdGlvbilcclxuXHJcbiAgICAvLyBhZGQgZGVwdGggdmFsdWVcclxuICAgIGZvciAobGV0IGNhdGVnb3J5IG9mIGNhdGVnb3JpZXMpXHJcbiAgICAgICAgY2F0ZWdvcnkuZGVwdGggPSBjYXRlZ29yeS5wYXRoID8gY2F0ZWdvcnkucGF0aC5zcGxpdCgnLCcpLmZpbHRlcihmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsICE9IFwiXCI7XHJcbiAgICAgICAgfSkgOiBbXTtcclxuXHJcbiAgICBjb25zdCBwYXJlbnRDYXRlZ29yaWVzID0gY2F0ZWdvcmllcy5maWx0ZXIoY2F0ID0+ICFjYXQucGF0aCk7XHJcblxyXG4gICAgdmFyIG9wdGlvbnMgPSBzaG93Tm9QYXJlbnQgPyBbaHRtbGA8b3B0aW9uIHZhbHVlPVwiXCI+0JHQtdC3INC60LDRgtC10LPQvtGA0LjRjzwvb3B0aW9uPmBdIDogW107XHJcbiAgICBjb25zdCBvcHRpb24gPSAoY2F0ZWdvcnkpID0+IGh0bWxgPG9wdGlvbiA/ZGlzYWJsZWQ9JHtkaXNhYmxlV2l0aENoaWxkZW4gJiYgY2F0ZWdvcmllcy5zb21lKGNhdCA9PiBjYXQucGF0aD8uaW5jbHVkZXMoY2F0ZWdvcnkuc2x1ZykpfSAuc2VsZWN0ZWQ9JHtzZWxlY3RlZCAmJiBzZWxlY3RlZCA9PSBjYXRlZ29yeS5faWR9IHNsdWc9XCIke2NhdGVnb3J5LnNsdWd9XCIgdmFsdWU9XCIke2NhdGVnb3J5Ll9pZH1cIj4ke2NhdGVnb3J5LmRlcHRoLm1hcCgoKSA9PiAnLScpLmpvaW4oJyAnKX0ke2NhdGVnb3J5Lm5hbWV9PC9vcHRpb24+YDtcclxuXHJcbiAgICBmdW5jdGlvbiByZWN1cnNpb24oY2F0ZWdvcnkpIHtcclxuICAgICAgICBvcHRpb25zLnB1c2gob3B0aW9uKGNhdGVnb3J5KSk7XHJcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBjYXRlZ29yaWVzLmZpbHRlcihjYXQgPT4gY2F0LnBhdGggPT0gYCR7Y2F0ZWdvcnkucGF0aH0ke2NhdGVnb3J5LnNsdWd9LGAgfHwgY2F0LnBhdGggPT0gYCwke2NhdGVnb3J5LnNsdWd9LGApO1xyXG5cclxuICAgICAgICBpZiAoY2hpbGRyZW4pXHJcbiAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4gcmVjdXJzaW9uKGNoaWxkKSk7XHJcbiAgICB9XHJcbiAgICBwYXJlbnRDYXRlZ29yaWVzLmZvckVhY2goY2F0ZWdvcnkgPT4ge1xyXG4gICAgICAgIHJlY3Vyc2lvbihjYXRlZ29yeSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gb3B0aW9ucztcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyRm9ybShjYXRlZ29yeSkge1xyXG4gICAgc2VsZWN0ZWRDYXRlZ29yeUlkID0gY2F0ZWdvcnkgPyBjYXRlZ29yeS5faWQgOiBudWxsO1xyXG4gICAgcmVuZGVyKG1vZGFsRm9ybShjYXRlZ29yeSA/IGNhdGVnb3J5IDogbnVsbCksIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjcmVhdGVFZGl0TW9kYWwgZm9ybScpKVxyXG5cclxuICAgIGlmICghY2F0ZWdvcnkpXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgIC8vIEZpbmQgY3VycmVudGx5IHNlbGVjdGVkIGNhdGVnb3J5IGFuZCBkaXNhYmxlIG9wdGlvbiBlbGVtZW50XHJcbiAgICBjb25zdCBvcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNwYXJlbnQgb3B0aW9uW3ZhbHVlPVwiJHtjYXRlZ29yeS5faWR9XCJdYCk7XHJcbiAgICBvcHRpb25FbC5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgLy8gU2VsZWN0IHBhcmVudCBjYXRlZ29yeSBpbiBvcHRpb25zXHJcbiAgICBpZiAoIWNhdGVnb3J5LnBhdGgpIC8vIENhdGVnb3J5IGlzIHBhcmVudFxyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGFyZW50IG9wdGlvbicpLnNlbGVjdGVkID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBmaW5kIHBhcmVudCBjYXRlZ29yeSB0byBzZWxlY3QgaW4gb3B0aW9uc1xyXG4gICAgY29uc3QgcGFyZW50U2x1ZyA9IGNhdGVnb3J5LnBhdGguc3BsaXQoJywnKS5maWx0ZXIoZWwgPT4gZWwgIT0gJycpLnNsaWNlKC0xKVswXTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNwYXJlbnQgW3NsdWc9JHtwYXJlbnRTbHVnfV1gKS5zZWxlY3RlZCA9IHRydWU7XHJcblxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2F0ZWdvcmllc1BhZ2UoKSB7XHJcbiAgICB2YXIgY2F0ZWdvcmllcztcclxuICAgIHNlbGVjdGVkQ2F0ZWdvcnlJZCA9IG51bGw7XHJcbiAgICBhc3luYyBmdW5jdGlvbiBsb2FkQ2F0ZWdvcmllcygpIHtcclxuICAgICAgICBjb25zdCByZXEgPSBhd2FpdCBheGlvcy5nZXQoJy9jYXRlZ29yaWVzJyk7XHJcbiAgICAgICAgY2F0ZWdvcmllcyA9IHJlcS5kYXRhO1xyXG5cclxuICAgICAgICBmb3JtT3B0aW9ucyA9IGNhdGVnb3JpZXNPcHRpb25zKHsgY2F0ZWdvcmllcyB9KTtcclxuICAgICAgICByZXR1cm4gcmVuZGVyQ2F0ZWdvcmllcyhjYXRlZ29yaWVzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICgpID0+IGh0bWxgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lci1yZXNwb25zaXZlXCI+XHJcbiAgICAgICAgICAgICR7Y3JlYXRlRWRpdE1vZGFsKCl9XHJcbiAgICAgICAgICAgICR7bmF2KCl9XHJcbiAgICAgICAgICAgICR7WydtYW5hZ2VyJywgJ2FkbWluJ10uaW5jbHVkZXMobG9nZ2VkSW5Vc2VyLnJvbGUpID8gaHRtbGA8YnV0dG9uIGRhdGEtYnMtdG9nZ2xlPVwibW9kYWxcIiBkYXRhLWJzLXRhcmdldD1cIiNjcmVhdGVFZGl0TW9kYWxcIiBAY2xpY2s9JHsoKSA9PiByZW5kZXJGb3JtKCl9IGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+PGkgY2xhc3M9XCJiaSBiaS1wbHVzXCI+PC9pPiDQodGK0LfQtNCw0Lkg0LrQsNGC0LXQs9C+0YDQuNGPPC9idXR0b24+YCA6ICcnfVxyXG4gICAgICAgICAgICA8ZGl2IGlkPVwiY2F0ZWdvcmllc1wiIGNsYXNzPVwiY29udGFpbmVyLWZsdWlkIG10LTJcIj5cclxuICAgICAgICAgICAgICAgICR7dW50aWwobG9hZENhdGVnb3JpZXMoKSwgc3Bpbm5lcil9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICByZW5kZXIodGVtcGxhdGUoKSwgY29udGFpbmVyKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/categories/categories.js\n");

/***/ }),

/***/ "./src/views/categories/routes.js":
/*!****************************************!*\
  !*** ./src/views/categories/routes.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   categoriesRoutes: () => (/* binding */ categoriesRoutes)\n/* harmony export */ });\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _views_categories_categories__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/views/categories/categories */ \"./src/views/categories/categories.js\");\n\r\n\r\n\r\nfunction categoriesRoutes(auth) {\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/categories', auth, _views_categories_categories__WEBPACK_IMPORTED_MODULE_1__.categoriesPage);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvY2F0ZWdvcmllcy9yb3V0ZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXdCO0FBQ3VDO0FBQy9EO0FBQ087QUFDUCxJQUFJLGlDQUFJLHNCQUFzQix3RUFBYztBQUM1QyIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvdmlld3MvY2F0ZWdvcmllcy9yb3V0ZXMuanM/ZjQ4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFnZSBmcm9tICdwYWdlJztcclxuaW1wb3J0IHsgY2F0ZWdvcmllc1BhZ2UgfSBmcm9tICdAL3ZpZXdzL2NhdGVnb3JpZXMvY2F0ZWdvcmllcyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2F0ZWdvcmllc1JvdXRlcyhhdXRoKSB7XHJcbiAgICBwYWdlKCcvY2F0ZWdvcmllcycsIGF1dGgsIGNhdGVnb3JpZXNQYWdlKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/categories/routes.js\n");

/***/ }),

/***/ "./src/views/components.js":
/*!*********************************!*\
  !*** ./src/views/components.js ***!
  \*********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   spinner: () => (/* binding */ spinner),\n/* harmony export */   submitBtn: () => (/* binding */ submitBtn),\n/* harmony export */   toggleSubmitBtn: () => (/* binding */ toggleSubmitBtn)\n/* harmony export */ });\n/* harmony import */ var lit_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit-html */ \"./node_modules/lit-html/development/lit-html.js\");\n\r\n\r\nconst spinner = (0,lit_html__WEBPACK_IMPORTED_MODULE_0__.html)`\r\n    <div class=\"position-absolute top-50 start-50 translate-middle\">\r\n        <div class=\"spinner-border text-primary\" role=\"status\" style=\"width: 5rem; height: 5rem;\"><span class=\"visually-hidden\">Зареждане...</span></div>\r\n    </div>\r\n`;\r\n\r\nconst btnSpinner = (0,lit_html__WEBPACK_IMPORTED_MODULE_0__.html)`\r\n    <div id=\"btnSpinner\"  class=\"d-none position-absolute top-50 start-50 translate-middle\">\r\n        <div class=\"spinner-border\" role=\"status\"></div>\r\n    </div>\r\n`;\r\n\r\nfunction toggleSubmitBtn() {\r\n    const submitBtn = document.getElementById('submitBtn');\r\n    const submitBtnText = document.querySelector('#submitBtn span');\r\n    const submitBtnSpinner = document.getElementById('btnSpinner');\r\n\r\n    if (submitBtn.disabled === false) {\r\n        submitBtn.disabled = true;\r\n        submitBtnText.classList.add('opacity-0');\r\n        submitBtnSpinner.classList.remove('d-none');\r\n    } else {\r\n        submitBtn.disabled = false;\r\n        submitBtnText.classList.remove('opacity-0');\r\n        submitBtnSpinner.classList.add('d-none');\r\n    }\r\n}\r\n\r\nconst submitBtn = ({ func, classes, icon, text = 'Запази', type = 'submit' }) => (0,lit_html__WEBPACK_IMPORTED_MODULE_0__.html)`\r\n    <button id=\"submitBtn\" @click=${func} type=${type} class=\"btn btn-primary position-relative ${classes}\">${btnSpinner}<span>${icon ? (0,lit_html__WEBPACK_IMPORTED_MODULE_0__.html)`<i class=\"bi ${icon}\"></i> ` : ''}${text}</span></button>\r\n`;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvY29tcG9uZW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWdDO0FBQ2hDO0FBQ08sZ0JBQWdCLDhDQUFJO0FBQzNCO0FBQ0EsbUZBQW1GLGFBQWE7QUFDaEc7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDhDQUFJO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08scUJBQXFCLHVEQUF1RCxLQUFLLDhDQUFJO0FBQzVGLG9DQUFvQyxNQUFNLE9BQU8sTUFBTSwyQ0FBMkMsUUFBUSxJQUFJLFdBQVcsUUFBUSxPQUFPLDhDQUFJLGdCQUFnQixLQUFLLGNBQWMsRUFBRSxLQUFLO0FBQ3RMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmFiYi5pdC8uL3NyYy92aWV3cy9jb21wb25lbnRzLmpzPzRlNWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaHRtbCB9IGZyb20gJ2xpdC1odG1sJztcclxuXHJcbmV4cG9ydCBjb25zdCBzcGlubmVyID0gaHRtbGBcclxuICAgIDxkaXYgY2xhc3M9XCJwb3NpdGlvbi1hYnNvbHV0ZSB0b3AtNTAgc3RhcnQtNTAgdHJhbnNsYXRlLW1pZGRsZVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzcGlubmVyLWJvcmRlciB0ZXh0LXByaW1hcnlcIiByb2xlPVwic3RhdHVzXCIgc3R5bGU9XCJ3aWR0aDogNXJlbTsgaGVpZ2h0OiA1cmVtO1wiPjxzcGFuIGNsYXNzPVwidmlzdWFsbHktaGlkZGVuXCI+0JfQsNGA0LXQttC00LDQvdC1Li4uPC9zcGFuPjwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbmA7XHJcblxyXG5jb25zdCBidG5TcGlubmVyID0gaHRtbGBcclxuICAgIDxkaXYgaWQ9XCJidG5TcGlubmVyXCIgIGNsYXNzPVwiZC1ub25lIHBvc2l0aW9uLWFic29sdXRlIHRvcC01MCBzdGFydC01MCB0cmFuc2xhdGUtbWlkZGxlXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInNwaW5uZXItYm9yZGVyXCIgcm9sZT1cInN0YXR1c1wiPjwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbmA7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlU3VibWl0QnRuKCkge1xyXG4gICAgY29uc3Qgc3VibWl0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1Ym1pdEJ0bicpO1xyXG4gICAgY29uc3Qgc3VibWl0QnRuVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdWJtaXRCdG4gc3BhbicpO1xyXG4gICAgY29uc3Qgc3VibWl0QnRuU3Bpbm5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5TcGlubmVyJyk7XHJcblxyXG4gICAgaWYgKHN1Ym1pdEJ0bi5kaXNhYmxlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICBzdWJtaXRCdG4uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIHN1Ym1pdEJ0blRleHQuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS0wJyk7XHJcbiAgICAgICAgc3VibWl0QnRuU3Bpbm5lci5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3VibWl0QnRuLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgc3VibWl0QnRuVGV4dC5jbGFzc0xpc3QucmVtb3ZlKCdvcGFjaXR5LTAnKTtcclxuICAgICAgICBzdWJtaXRCdG5TcGlubmVyLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3Qgc3VibWl0QnRuID0gKHsgZnVuYywgY2xhc3NlcywgaWNvbiwgdGV4dCA9ICfQl9Cw0L/QsNC30LgnLCB0eXBlID0gJ3N1Ym1pdCcgfSkgPT4gaHRtbGBcclxuICAgIDxidXR0b24gaWQ9XCJzdWJtaXRCdG5cIiBAY2xpY2s9JHtmdW5jfSB0eXBlPSR7dHlwZX0gY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgcG9zaXRpb24tcmVsYXRpdmUgJHtjbGFzc2VzfVwiPiR7YnRuU3Bpbm5lcn08c3Bhbj4ke2ljb24gPyBodG1sYDxpIGNsYXNzPVwiYmkgJHtpY29ufVwiPjwvaT4gYCA6ICcnfSR7dGV4dH08L3NwYW4+PC9idXR0b24+XHJcbmA7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/views/components.js\n");

/***/ }),

/***/ "./src/views/customers/createEdit.js":
/*!*******************************************!*\
  !*** ./src/views/customers/createEdit.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEditCustomerPage: () => (/* binding */ createEditCustomerPage)\n/* harmony export */ });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/api */ \"./src/api.js\");\n/* harmony import */ var _views_nav__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/views/nav */ \"./src/views/nav.js\");\n/* harmony import */ var _views_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/views/components */ \"./src/views/components.js\");\n/* harmony import */ var _views_login__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/views/login */ \"./src/views/login.js\");\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar customer = '';\r\n\r\nfunction validateCustomer(data) {\r\n    var invalidFlag = false;\r\n\r\n    if (!data.name)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_2__.markInvalid)('name');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_2__.markValid)('name');\r\n\r\n    if (!data.mol)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_2__.markInvalid)('mol');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_2__.markValid)('mol');\r\n\r\n    if (!data.vat || data.vat.length > 10 || data.vat.length < 9)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_2__.markInvalid)('vat');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_2__.markValid)('vat');\r\n\r\n    if (!data.address)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_2__.markInvalid)('address');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_2__.markValid)('address');\r\n\r\n    // if discount entered, check if format is X or X.Y or XY.Z (ex. 1 or 1.5 or 12.5)\r\n    if (data.discount && (data.discount < 0 || data.discount > 100 || !_api__WEBPACK_IMPORTED_MODULE_2__.priceRegex.test(data.discount)))\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_2__.markInvalid)('discount');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_2__.markValid)('discount');\r\n\r\n    return invalidFlag;\r\n}\r\n\r\nasync function createEditCustomer(e) {\r\n    e.preventDefault();\r\n    (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n\r\n    const form = e.target;\r\n    form.classList.add('was-validated');\r\n    form.classList.remove('needs-validation')\r\n    const formData = new FormData(form);\r\n    const data = Object.fromEntries(formData.entries());\r\n\r\n    const invalidData = validateCustomer(data);\r\n    if (invalidData)\r\n        return (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n\r\n    const alertEl = document.getElementById('alert');\r\n    try {\r\n        const req = customer ? await axios__WEBPACK_IMPORTED_MODULE_7__[\"default\"].put(`/customers/${customer._id}`, data) : await axios__WEBPACK_IMPORTED_MODULE_7__[\"default\"].post('/customers', data);\r\n        if (req.status === 201) {\r\n            (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n\r\n            if (!customer)\r\n                form.reset();\r\n            document.querySelectorAll('input').forEach(el => el.classList.remove('is-valid', 'is-invalid'));\r\n\r\n            form.classList.remove('was-validated');\r\n            form.classList.add('needs-validation');\r\n            alertEl.classList.remove('d-none', 'alert-danger');\r\n            alertEl.classList.add('alert-success');\r\n            alertEl.textContent = `Клиентът е ${customer ? 'редактиран' : 'създаден'} успешно.`;\r\n        }\r\n\r\n    } catch (err) {\r\n        (0,_views_components__WEBPACK_IMPORTED_MODULE_4__.toggleSubmitBtn)();\r\n        if (err.response.status === 400) {\r\n            alertEl.classList.remove('d-none', 'alert-success');\r\n            alertEl.classList.add('alert-danger');\r\n            alertEl.textContent = err.response.data;\r\n            form.classList.remove('was-validated');\r\n            form.classList.add('needs-validation');\r\n\r\n            if (err.response.data.toLowerCase().includes('ддс еик')) {\r\n                (0,_api__WEBPACK_IMPORTED_MODULE_2__.markInvalid)('taxvat');\r\n            } else if (err.response.data.toLowerCase().includes('еик')) {\r\n                (0,_api__WEBPACK_IMPORTED_MODULE_2__.markInvalid)('vat');\r\n            }\r\n\r\n            if (err.response.data.toLowerCase().includes('телефон')) {\r\n                (0,_api__WEBPACK_IMPORTED_MODULE_2__.markInvalid)('phone');\r\n            }\r\n\r\n            if (err.response.data.toLowerCase().includes('отстъпка')) {\r\n                (0,_api__WEBPACK_IMPORTED_MODULE_2__.markInvalid)('discount');\r\n            }\r\n        }\r\n        else if (err.response?.status === 500) {\r\n            alertEl.classList.remove('d-none', 'alert-success');\r\n            alertEl.classList.add('alert-danger');\r\n            alertEl.textContent = 'Грешка в сървъра';\r\n            console.error(err);\r\n        } else console.error(err)\r\n    }\r\n}\r\n\r\nasync function createEditCustomerPage(ctx, next) {\r\n    const id = ctx.params.id;\r\n    if (id) {\r\n        if (!['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_5__.loggedInUser.role))\r\n            return page__WEBPACK_IMPORTED_MODULE_6__('/');\r\n\r\n        try {\r\n            const req = await axios__WEBPACK_IMPORTED_MODULE_7__[\"default\"].get(`/customers/${id}`);\r\n            customer = req.data;\r\n        } catch (err) {\r\n            console.error(err);\r\n            alert('Възникна грешка');\r\n        }\r\n    } else customer = '';\r\n\r\n    const template = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n        ${(0,_views_nav__WEBPACK_IMPORTED_MODULE_3__.nav)()}\r\n        <div class=\"container-fluid\">\r\n            <form novalidate @submit=${createEditCustomer} class=\"row g-3 needs-validation\">\r\n                <div class=\"col-sm-6\">\r\n                    <label for=\"name\" class=\"form-label\">Фирма/Име</label>\r\n                    <input class=\"form-control border-primary\" type=\"text\" id=\"name\" name=\"name\" .value=${customer && customer.name} placeholder=\"пример: Сиско Трейд ЕТ\" required autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div class=\"col-sm-6\">\r\n                    <label for=\"mol\" class=\"form-label\">МОЛ/Име</label>\r\n                    <input class=\"form-control border-primary\" type=\"text\" id=\"mol\" name=\"mol\" .value=${customer && customer.mol} placeholder=\"пример: Иван Иванов\" required autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div class=\"col-sm-6\">\r\n                    <label for=\"vat\" class=\"form-label\">ЕИК/ЕГН</label>\r\n                    <div class=\"input-group\">\r\n                        <input class=\"form-control border-primary\" type=\"text\" id=\"vat\" name=\"vat\" .value=${customer && customer.vat} placeholder=\"9/10 цифри\" pattern=\"[0-9]{9,10}\" inputmode=\"numeric\" maxlength=\"10\" required autocomplete=\"off\">\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-sm-6\">\r\n                    <label for=\"taxvat\" class=\"form-label\">ДДС ЕИК</label>\r\n                    <div class=\"input-group\">\r\n                        <input class=\"form-control\" type=\"text\" id=\"taxvat\" name=\"taxvat\" placeholder=\"пример: BG117....\" .value=${customer?.taxvat || ''} autocomplete=\"off\">\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col-sm-6\">\r\n                    <label for=\"address\" class=\"form-label\">Адрес</label>\r\n                    <input class=\"form-control border-primary\" type=\"text\" id=\"address\" name=\"address\" placeholder=\"пример: гр. Русе, ул. Шипка 44\" .value=${customer && customer.address} required autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div class=\"col-sm-6\">\r\n                    <label for=\"deliveryAddress\" class=\"form-label\">Адрес за доставка</label>\r\n                    <input class=\"form-control\" type=\"text\" id=\"deliveryAddress\" name=\"deliveryAddress\" placeholder=\"пример: гр. Русе, ул. Шипка 44, офис на Спиди\" .value=${customer?.deliveryAddress || ''} autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div class=\"col-sm-6\">\r\n                    <label for=\"phone\" class=\"form-label\">Телефон</label>\r\n                    <input class=\"form-control\" type=\"tel\" id=\"phone\" name=\"phone\" maxlength=\"15\" .value=${customer?.phone || ''} placeholder=\"пример: 0891234567\" autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div class=\"col-sm-6\">\r\n                    <label for=\"email\" class=\"form-label\">Имейл</label>\r\n                    <input class=\"form-control\" type=\"email\" id=\"email\" name=\"email\" maxlength=\"15\" .value=${customer?.email || ''} placeholder=\"пример: rado@abv.bg\" autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div class=\"mb-3\">\r\n                    <label for=\"discount\" class=\"form-label\">Отстъпка %</label>\r\n                    <input @keyup=${(e) => (0,_api__WEBPACK_IMPORTED_MODULE_2__.fixInputPrice)(e.target)} class=\"form-control\" type=\"text\" id=\"discount\" name=\"discount\" inputmode=\"decimal\" .value=${customer.discount ? customer.discount : ''} autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div id=\"alert\" class=\"d-none alert\" role=\"alert\"></div>\r\n                ${(0,_views_components__WEBPACK_IMPORTED_MODULE_4__.submitBtn)({ classes: 'd-block m-auto col-sm-3', icon: 'bi-check-lg', type: \"submit\" })}\r\n            </form>\r\n        </div>\r\n    `;\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.render)(template(), _app_js__WEBPACK_IMPORTED_MODULE_0__.container);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvY3VzdG9tZXJzL2NyZWF0ZUVkaXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXFDO0FBQ007QUFDakI7QUFDZ0Q7QUFDeEM7QUFDOEI7QUFDbkI7QUFDckI7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlEQUFXO0FBQ2pDLFNBQVMsK0NBQVM7QUFDbEI7QUFDQTtBQUNBLHNCQUFzQixpREFBVztBQUNqQyxTQUFTLCtDQUFTO0FBQ2xCO0FBQ0E7QUFDQSxzQkFBc0IsaURBQVc7QUFDakMsU0FBUywrQ0FBUztBQUNsQjtBQUNBO0FBQ0Esc0JBQXNCLGlEQUFXO0FBQ2pDLFNBQVMsK0NBQVM7QUFDbEI7QUFDQTtBQUNBLHVFQUF1RSw0Q0FBVTtBQUNqRixzQkFBc0IsaURBQVc7QUFDakMsU0FBUywrQ0FBUztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtFQUFlO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsa0VBQWU7QUFDOUI7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDZDQUFLLG1CQUFtQixhQUFhLGlCQUFpQiw2Q0FBSztBQUNoRztBQUNBLFlBQVksa0VBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELHNDQUFzQztBQUN0RjtBQUNBO0FBQ0EsTUFBTTtBQUNOLFFBQVEsa0VBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixpREFBVztBQUMzQixjQUFjO0FBQ2QsZ0JBQWdCLGlEQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixpREFBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaURBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsMkNBQTJDLHNEQUFZO0FBQ3ZELG1CQUFtQixpQ0FBSTtBQUN2QjtBQUNBO0FBQ0EsOEJBQThCLDZDQUFLLG1CQUFtQixHQUFHO0FBQ3pEO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLDJCQUEyQixpREFBSTtBQUMvQixVQUFVLCtDQUFHO0FBQ2I7QUFDQSx1Q0FBdUMsb0JBQW9CO0FBQzNEO0FBQ0E7QUFDQSwwR0FBMEcsMkJBQTJCO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0dBQXdHLDBCQUEwQjtBQUNsSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEdBQTRHLDBCQUEwQix3Q0FBd0MsS0FBSztBQUNuTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtSUFBbUksd0JBQXdCO0FBQzNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2SkFBNkosOEJBQThCO0FBQzNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNktBQTZLLGlDQUFpQztBQUM5TTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJHQUEyRyx1QkFBdUI7QUFDbEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2R0FBNkcsdUJBQXVCO0FBQ3BJO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLE9BQU8sbURBQWEsWUFBWSw0RkFBNEYsNENBQTRDO0FBQzVNO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw0REFBUyxHQUFHLHlFQUF5RTtBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksbURBQU0sYUFBYSw4Q0FBUztBQUNoQyIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvdmlld3MvY3VzdG9tZXJzL2NyZWF0ZUVkaXQuanM/MzM1NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb250YWluZXIgfSBmcm9tIFwiQC9hcHAuanNcIjtcclxuaW1wb3J0IHsgaHRtbCwgcmVuZGVyIH0gZnJvbSAnbGl0L2h0bWwuanMnO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XHJcbmltcG9ydCB7IG1hcmtJbnZhbGlkLCBtYXJrVmFsaWQsIHByaWNlUmVnZXgsIGZpeElucHV0UHJpY2UgfSBmcm9tIFwiQC9hcGlcIjtcclxuaW1wb3J0IHsgbmF2IH0gZnJvbSBcIkAvdmlld3MvbmF2XCI7XHJcbmltcG9ydCB7IHRvZ2dsZVN1Ym1pdEJ0biwgc3VibWl0QnRuIH0gZnJvbSBcIkAvdmlld3MvY29tcG9uZW50c1wiO1xyXG5pbXBvcnQgeyBsb2dnZWRJblVzZXIgfSBmcm9tIFwiQC92aWV3cy9sb2dpblwiO1xyXG5pbXBvcnQgcGFnZSBmcm9tICdwYWdlJztcclxudmFyIGN1c3RvbWVyID0gJyc7XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZUN1c3RvbWVyKGRhdGEpIHtcclxuICAgIHZhciBpbnZhbGlkRmxhZyA9IGZhbHNlO1xyXG5cclxuICAgIGlmICghZGF0YS5uYW1lKVxyXG4gICAgICAgIGludmFsaWRGbGFnID0gbWFya0ludmFsaWQoJ25hbWUnKTtcclxuICAgIGVsc2UgbWFya1ZhbGlkKCduYW1lJyk7XHJcblxyXG4gICAgaWYgKCFkYXRhLm1vbClcclxuICAgICAgICBpbnZhbGlkRmxhZyA9IG1hcmtJbnZhbGlkKCdtb2wnKTtcclxuICAgIGVsc2UgbWFya1ZhbGlkKCdtb2wnKTtcclxuXHJcbiAgICBpZiAoIWRhdGEudmF0IHx8IGRhdGEudmF0Lmxlbmd0aCA+IDEwIHx8IGRhdGEudmF0Lmxlbmd0aCA8IDkpXHJcbiAgICAgICAgaW52YWxpZEZsYWcgPSBtYXJrSW52YWxpZCgndmF0Jyk7XHJcbiAgICBlbHNlIG1hcmtWYWxpZCgndmF0Jyk7XHJcblxyXG4gICAgaWYgKCFkYXRhLmFkZHJlc3MpXHJcbiAgICAgICAgaW52YWxpZEZsYWcgPSBtYXJrSW52YWxpZCgnYWRkcmVzcycpO1xyXG4gICAgZWxzZSBtYXJrVmFsaWQoJ2FkZHJlc3MnKTtcclxuXHJcbiAgICAvLyBpZiBkaXNjb3VudCBlbnRlcmVkLCBjaGVjayBpZiBmb3JtYXQgaXMgWCBvciBYLlkgb3IgWFkuWiAoZXguIDEgb3IgMS41IG9yIDEyLjUpXHJcbiAgICBpZiAoZGF0YS5kaXNjb3VudCAmJiAoZGF0YS5kaXNjb3VudCA8IDAgfHwgZGF0YS5kaXNjb3VudCA+IDEwMCB8fCAhcHJpY2VSZWdleC50ZXN0KGRhdGEuZGlzY291bnQpKSlcclxuICAgICAgICBpbnZhbGlkRmxhZyA9IG1hcmtJbnZhbGlkKCdkaXNjb3VudCcpO1xyXG4gICAgZWxzZSBtYXJrVmFsaWQoJ2Rpc2NvdW50Jyk7XHJcblxyXG4gICAgcmV0dXJuIGludmFsaWRGbGFnO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVFZGl0Q3VzdG9tZXIoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdG9nZ2xlU3VibWl0QnRuKCk7XHJcblxyXG4gICAgY29uc3QgZm9ybSA9IGUudGFyZ2V0O1xyXG4gICAgZm9ybS5jbGFzc0xpc3QuYWRkKCd3YXMtdmFsaWRhdGVkJyk7XHJcbiAgICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ25lZWRzLXZhbGlkYXRpb24nKVxyXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XHJcbiAgICBjb25zdCBkYXRhID0gT2JqZWN0LmZyb21FbnRyaWVzKGZvcm1EYXRhLmVudHJpZXMoKSk7XHJcblxyXG4gICAgY29uc3QgaW52YWxpZERhdGEgPSB2YWxpZGF0ZUN1c3RvbWVyKGRhdGEpO1xyXG4gICAgaWYgKGludmFsaWREYXRhKVxyXG4gICAgICAgIHJldHVybiB0b2dnbGVTdWJtaXRCdG4oKTtcclxuXHJcbiAgICBjb25zdCBhbGVydEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsZXJ0Jyk7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlcSA9IGN1c3RvbWVyID8gYXdhaXQgYXhpb3MucHV0KGAvY3VzdG9tZXJzLyR7Y3VzdG9tZXIuX2lkfWAsIGRhdGEpIDogYXdhaXQgYXhpb3MucG9zdCgnL2N1c3RvbWVycycsIGRhdGEpO1xyXG4gICAgICAgIGlmIChyZXEuc3RhdHVzID09PSAyMDEpIHtcclxuICAgICAgICAgICAgdG9nZ2xlU3VibWl0QnRuKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWN1c3RvbWVyKVxyXG4gICAgICAgICAgICAgICAgZm9ybS5yZXNldCgpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtdmFsaWQnLCAnaXMtaW52YWxpZCcpKTtcclxuXHJcbiAgICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnd2FzLXZhbGlkYXRlZCcpO1xyXG4gICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ25lZWRzLXZhbGlkYXRpb24nKTtcclxuICAgICAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnLCAnYWxlcnQtZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LmFkZCgnYWxlcnQtc3VjY2VzcycpO1xyXG4gICAgICAgICAgICBhbGVydEVsLnRleHRDb250ZW50ID0gYNCa0LvQuNC10L3RgtGK0YIg0LUgJHtjdXN0b21lciA/ICfRgNC10LTQsNC60YLQuNGA0LDQvScgOiAn0YHRitC30LTQsNC00LXQvSd9INGD0YHQv9C10YjQvdC+LmA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHRvZ2dsZVN1Ym1pdEJ0bigpO1xyXG4gICAgICAgIGlmIChlcnIucmVzcG9uc2Uuc3RhdHVzID09PSA0MDApIHtcclxuICAgICAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnLCAnYWxlcnQtc3VjY2VzcycpO1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LWRhbmdlcicpO1xyXG4gICAgICAgICAgICBhbGVydEVsLnRleHRDb250ZW50ID0gZXJyLnJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnd2FzLXZhbGlkYXRlZCcpO1xyXG4gICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ25lZWRzLXZhbGlkYXRpb24nKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlcnIucmVzcG9uc2UuZGF0YS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCfQtNC00YEg0LXQuNC6JykpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtJbnZhbGlkKCd0YXh2YXQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlcnIucmVzcG9uc2UuZGF0YS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCfQtdC40LonKSkge1xyXG4gICAgICAgICAgICAgICAgbWFya0ludmFsaWQoJ3ZhdCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlLmRhdGEudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygn0YLQtdC70LXRhNC+0L0nKSkge1xyXG4gICAgICAgICAgICAgICAgbWFya0ludmFsaWQoJ3Bob25lJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlcnIucmVzcG9uc2UuZGF0YS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCfQvtGC0YHRgtGK0L/QutCwJykpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtJbnZhbGlkKCdkaXNjb3VudCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVyci5yZXNwb25zZT8uc3RhdHVzID09PSA1MDApIHtcclxuICAgICAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnLCAnYWxlcnQtc3VjY2VzcycpO1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LWRhbmdlcicpO1xyXG4gICAgICAgICAgICBhbGVydEVsLnRleHRDb250ZW50ID0gJ9CT0YDQtdGI0LrQsCDQsiDRgdGK0YDQstGK0YDQsCc7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICB9IGVsc2UgY29uc29sZS5lcnJvcihlcnIpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVFZGl0Q3VzdG9tZXJQYWdlKGN0eCwgbmV4dCkge1xyXG4gICAgY29uc3QgaWQgPSBjdHgucGFyYW1zLmlkO1xyXG4gICAgaWYgKGlkKSB7XHJcbiAgICAgICAgaWYgKCFbJ21hbmFnZXInLCAnYWRtaW4nXS5pbmNsdWRlcyhsb2dnZWRJblVzZXIucm9sZSkpXHJcbiAgICAgICAgICAgIHJldHVybiBwYWdlKCcvJyk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcSA9IGF3YWl0IGF4aW9zLmdldChgL2N1c3RvbWVycy8ke2lkfWApO1xyXG4gICAgICAgICAgICBjdXN0b21lciA9IHJlcS5kYXRhO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgIGFsZXJ0KCfQktGK0LfQvdC40LrQvdCwINCz0YDQtdGI0LrQsCcpO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBjdXN0b21lciA9ICcnO1xyXG5cclxuICAgIGNvbnN0IHRlbXBsYXRlID0gKCkgPT4gaHRtbGBcclxuICAgICAgICAke25hdigpfVxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWRcIj5cclxuICAgICAgICAgICAgPGZvcm0gbm92YWxpZGF0ZSBAc3VibWl0PSR7Y3JlYXRlRWRpdEN1c3RvbWVyfSBjbGFzcz1cInJvdyBnLTMgbmVlZHMtdmFsaWRhdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIm5hbWVcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QpNC40YDQvNCwL9CY0LzQtTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sIGJvcmRlci1wcmltYXJ5XCIgdHlwZT1cInRleHRcIiBpZD1cIm5hbWVcIiBuYW1lPVwibmFtZVwiIC52YWx1ZT0ke2N1c3RvbWVyICYmIGN1c3RvbWVyLm5hbWV9IHBsYWNlaG9sZGVyPVwi0L/RgNC40LzQtdGAOiDQodC40YHQutC+INCi0YDQtdC50LQg0JXQolwiIHJlcXVpcmVkIGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIm1vbFwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCc0J7Qmy/QmNC80LU8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbCBib3JkZXItcHJpbWFyeVwiIHR5cGU9XCJ0ZXh0XCIgaWQ9XCJtb2xcIiBuYW1lPVwibW9sXCIgLnZhbHVlPSR7Y3VzdG9tZXIgJiYgY3VzdG9tZXIubW9sfSBwbGFjZWhvbGRlcj1cItC/0YDQuNC80LXRgDog0JjQstCw0L0g0JjQstCw0L3QvtCyXCIgcmVxdWlyZWQgYXV0b2NvbXBsZXRlPVwib2ZmXCI+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwidmF0XCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0JXQmNCaL9CV0JPQnTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbCBib3JkZXItcHJpbWFyeVwiIHR5cGU9XCJ0ZXh0XCIgaWQ9XCJ2YXRcIiBuYW1lPVwidmF0XCIgLnZhbHVlPSR7Y3VzdG9tZXIgJiYgY3VzdG9tZXIudmF0fSBwbGFjZWhvbGRlcj1cIjkvMTAg0YbQuNGE0YDQuFwiIHBhdHRlcm49XCJbMC05XXs5LDEwfVwiIGlucHV0bW9kZT1cIm51bWVyaWNcIiBtYXhsZW5ndGg9XCIxMFwiIHJlcXVpcmVkIGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInRheHZhdFwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCU0JTQoSDQldCY0Jo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwidGV4dFwiIGlkPVwidGF4dmF0XCIgbmFtZT1cInRheHZhdFwiIHBsYWNlaG9sZGVyPVwi0L/RgNC40LzQtdGAOiBCRzExNy4uLi5cIiAudmFsdWU9JHtjdXN0b21lcj8udGF4dmF0IHx8ICcnfSBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJhZGRyZXNzXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0JDQtNGA0LXRgTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sIGJvcmRlci1wcmltYXJ5XCIgdHlwZT1cInRleHRcIiBpZD1cImFkZHJlc3NcIiBuYW1lPVwiYWRkcmVzc1wiIHBsYWNlaG9sZGVyPVwi0L/RgNC40LzQtdGAOiDQs9GALiDQoNGD0YHQtSwg0YPQuy4g0KjQuNC/0LrQsCA0NFwiIC52YWx1ZT0ke2N1c3RvbWVyICYmIGN1c3RvbWVyLmFkZHJlc3N9IHJlcXVpcmVkIGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImRlbGl2ZXJ5QWRkcmVzc1wiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCQ0LTRgNC10YEg0LfQsCDQtNC+0YHRgtCw0LLQutCwPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwidGV4dFwiIGlkPVwiZGVsaXZlcnlBZGRyZXNzXCIgbmFtZT1cImRlbGl2ZXJ5QWRkcmVzc1wiIHBsYWNlaG9sZGVyPVwi0L/RgNC40LzQtdGAOiDQs9GALiDQoNGD0YHQtSwg0YPQuy4g0KjQuNC/0LrQsCA0NCwg0L7RhNC40YEg0L3QsCDQodC/0LjQtNC4XCIgLnZhbHVlPSR7Y3VzdG9tZXI/LmRlbGl2ZXJ5QWRkcmVzcyB8fCAnJ30gYXV0b2NvbXBsZXRlPVwib2ZmXCI+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicGhvbmVcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QotC10LvQtdGE0L7QvTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRlbFwiIGlkPVwicGhvbmVcIiBuYW1lPVwicGhvbmVcIiBtYXhsZW5ndGg9XCIxNVwiIC52YWx1ZT0ke2N1c3RvbWVyPy5waG9uZSB8fCAnJ30gcGxhY2Vob2xkZXI9XCLQv9GA0LjQvNC10YA6IDA4OTEyMzQ1NjdcIiBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJlbWFpbFwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCY0LzQtdC50Ls8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJlbWFpbFwiIGlkPVwiZW1haWxcIiBuYW1lPVwiZW1haWxcIiBtYXhsZW5ndGg9XCIxNVwiIC52YWx1ZT0ke2N1c3RvbWVyPy5lbWFpbCB8fCAnJ30gcGxhY2Vob2xkZXI9XCLQv9GA0LjQvNC10YA6IHJhZG9AYWJ2LmJnXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCI+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWItM1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJkaXNjb3VudFwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCe0YLRgdGC0YrQv9C60LAgJTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IEBrZXl1cD0keyhlKSA9PiBmaXhJbnB1dFByaWNlKGUudGFyZ2V0KX0gY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwidGV4dFwiIGlkPVwiZGlzY291bnRcIiBuYW1lPVwiZGlzY291bnRcIiBpbnB1dG1vZGU9XCJkZWNpbWFsXCIgLnZhbHVlPSR7Y3VzdG9tZXIuZGlzY291bnQgPyBjdXN0b21lci5kaXNjb3VudCA6ICcnfSBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJhbGVydFwiIGNsYXNzPVwiZC1ub25lIGFsZXJ0XCIgcm9sZT1cImFsZXJ0XCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAke3N1Ym1pdEJ0bih7IGNsYXNzZXM6ICdkLWJsb2NrIG0tYXV0byBjb2wtc20tMycsIGljb246ICdiaS1jaGVjay1sZycsIHR5cGU6IFwic3VibWl0XCIgfSl9XHJcbiAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGA7XHJcblxyXG4gICAgcmVuZGVyKHRlbXBsYXRlKCksIGNvbnRhaW5lcik7XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/views/customers/createEdit.js\n");

/***/ }),

/***/ "./src/views/customers/customers.js":
/*!******************************************!*\
  !*** ./src/views/customers/customers.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   customersPage: () => (/* binding */ customersPage)\n/* harmony export */ });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/api */ \"./src/api.js\");\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _nav_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../nav.js */ \"./src/views/nav.js\");\n/* harmony import */ var lit_directives_until_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lit/directives/until.js */ \"./node_modules/lit/directives/until.js\");\n/* harmony import */ var _components_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components.js */ \"./src/views/components.js\");\n/* harmony import */ var _login_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../login.js */ \"./src/views/login.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar selectedCustomer, path, pageCtx;\r\n\r\nasync function deleteCustomer() {\r\n    try {\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"].delete(`/customers/${selectedCustomer}`);\r\n\r\n        if (req.status === 204) {\r\n            page__WEBPACK_IMPORTED_MODULE_3__(path);\r\n        }\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert('Възникна грешка');\r\n    }\r\n}\r\n\r\nasync function unhideCustomer(_id) {\r\n    try {\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"].put(`/customers/${_id}/unhide`);\r\n\r\n        if (req.status === 201)\r\n            page__WEBPACK_IMPORTED_MODULE_3__(path);\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert('Възникна грешка');\r\n    }\r\n}\r\n\r\nconst quickViewRow = (name, value) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n    <div class=\"row col-6 mb-2\">\r\n        <b class=\"d-block\">${name}:</b>\r\n        <span>${value}</span>\r\n    </div>`;\r\n\r\nconst quickViewTemplate = (customer) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n<div class=\"row g-3\">\r\n    ${quickViewRow('Фирма', customer.name)}\r\n    ${quickViewRow('МОЛ', customer.mol)}\r\n    ${quickViewRow('ЕИК', customer.vat)}\r\n    ${quickViewRow('ДДС ЕИК', customer.taxvat)}\r\n    ${quickViewRow('Отстъпка', customer.discount ? `${customer.discount}%` : 'Няма')}\r\n    ${quickViewRow('Телефон', customer.phone ? customer.phone : 'Няма')}\r\n    ${quickViewRow('Имейл', customer.email ? customer.email : 'Няма')}\r\n    ${quickViewRow('Адрес', customer.address)}\r\n    ${quickViewRow('Адрес за доставка', customer.deliveryAddress ? customer.deliveryAddress : 'Няма')}\r\n    ${quickViewRow('Скрит', customer.deleted ? 'Да' : 'Не')}\r\n</div>\r\n`;\r\n\r\nasync function loadQuickView(_id) {\r\n    if (!_id) return;\r\n    try {\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"].get(`/customers/${_id}`);\r\n        const customer = req.data;\r\n        const modal = document.querySelector('#quickViewModal .modal-body');\r\n\r\n\r\n\r\n        (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.render)(quickViewTemplate(customer), modal);\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert('Възникна грешка');\r\n    }\r\n}\r\n\r\nconst customerRow = (customer) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n    <tr .id=${customer._id}>\r\n        <td>${customer.name}</td>\r\n        <td>${customer.vat}</td>\r\n        <td>${customer.phone}</td>\r\n        <td>${customer.discount}</td>\r\n        <td class=\"text-nowrap\">\r\n            <button data-bs-toggle=\"modal\" data-bs-target=\"#quickViewModal\" class=\"btn btn-primary\" @click=${() => loadQuickView(customer._id)}><i class=\"bi bi-eye\"></i><span class=\"d-none d-sm-inline\"> Преглед</span></button>\r\n            ${['manager', 'admin'].includes(_login_js__WEBPACK_IMPORTED_MODULE_7__.loggedInUser.role) ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<a class=\"btn btn-secondary\" href=${`/customers/${customer._id}`}><i class=\"bi bi-pencil\"></i><span class=\"d-none d-sm-inline\"> Редактирай</span></a>` : ''}\r\n            ${_login_js__WEBPACK_IMPORTED_MODULE_7__.loggedInUser.role === 'admin' ? (customer.deleted ?\r\n        (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<button @click=${() => unhideCustomer(customer._id)} class=\"btn btn-success\"><i class=\"bi bi-arrow-clockwise\"></i><span class=\"d-none d-sm-inline\"> Възстанови</span></button>` : (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<button @click=${() => selectedCustomer = customer._id} class=\"btn btn-danger\" data-bs-toggle=\"modal\" data-bs-target=\"#deleteModal\"><i class=\"bi bi-trash\"></i><span class=\"d-none d-sm-inline\"> Изтрий</span></button>`) : ''}\r\n        </td>\r\n    </tr>\r\n`;\r\n\r\nconst table = (customers, prevCursor, nextCursor) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n    <div class=\"table-responsive\">\r\n        <table class=\"mt-3 table table-striped table-hover text-center\">\r\n            <thead>\r\n                <tr>\r\n                    <th scope=\"col\">Фирма</th>\r\n                    <th scope=\"col\">ЕИК</th>\r\n                    <th scope=\"col\">Телефон</th>\r\n                    <th scope=\"col\">Отстъпка %</th>\r\n                    <th scope=\"col\">Действия</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                ${customers ? customers.map(customerRow) : (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<div class=\"spinner-border text-primary\" role=\"status\"><span class=\"visually-hidden\">Loading...</span></div>`}\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <div class=\"d-flex justify-content-center\">\r\n        ${prevCursor ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<button @click=${() => switchPage(prevCursor)} class=\"btn btn-primary\"><i class=\"bi bi-arrow-left\"></i> Предишна страница</button>` : ''}\r\n        ${nextCursor ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<button @click=${() => switchPage(nextCursor)} class=\"btn btn-primary\">Следваща страница <i class=\"bi bi-arrow-right\"></i></button>` : ''}\r\n    </div>\r\n`;\r\n\r\nfunction switchPage(cursor) {\r\n    var uri;\r\n\r\n    uri = (0,_api__WEBPACK_IMPORTED_MODULE_2__.addQuery)(pageCtx, 'cursor', cursor);\r\n\r\n    page__WEBPACK_IMPORTED_MODULE_3__(uri);\r\n}\r\n\r\nasync function loadCustomers() {\r\n    try {\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"].get(path)\r\n        const customers = req.data.customers;\r\n        const prevCursor = req.data.prevCursor;\r\n        const nextCursor = req.data.nextCursor;\r\n\r\n        return table(customers, prevCursor, nextCursor);\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert('Възникна грешка');\r\n    }\r\n}\r\n\r\nasync function customersPage(ctx, next) {\r\n    path = ctx.path;\r\n    pageCtx = ctx;\r\n\r\n    function findCustomer(e) {\r\n        const search = e.target.value;\r\n        const lastSearch = ctx.querystring.split('search=')[1]?.split('&')[0];\r\n\r\n        if (lastSearch === search) // Skip\r\n            return;\r\n\r\n        var uri;\r\n        if (search.length == 0) // Remove from query\r\n            uri = (0,_api__WEBPACK_IMPORTED_MODULE_2__.removeQuery)(ctx, 'search');\r\n        else\r\n            uri = (0,_api__WEBPACK_IMPORTED_MODULE_2__.addQuery)(ctx, 'search', search);\r\n\r\n        page__WEBPACK_IMPORTED_MODULE_3__(uri);\r\n    }\r\n\r\n    function toggleDeleted(e) {\r\n        const showDeleted = e.target.checked;\r\n        var uri;\r\n\r\n        if (showDeleted)\r\n            uri = (0,_api__WEBPACK_IMPORTED_MODULE_2__.addQuery)(ctx, 'showDeleted', true);\r\n        else\r\n            uri = (0,_api__WEBPACK_IMPORTED_MODULE_2__.removeQuery)(ctx, 'showDeleted');\r\n\r\n        page__WEBPACK_IMPORTED_MODULE_3__(uri);\r\n    }\r\n\r\n    const quickViewModal = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n    <div class=\"modal fade\" id=\"quickViewModal\" tabindex=\"-1\" aria-labelledby=\"quickViewModalLabel\" aria-hidden=\"true\" >\r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h1 class=\"modal-title fs-5\" id=\"quickViewModalLabel\">Бърз преглед</h1>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>`;\r\n\r\n    const deleteModal = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n    <div class=\"modal fade\" id = \"deleteModal\" tabindex=\"-1\" aria-labelledby=\"deleteModalLabel\" aria-hidden=\"true\" >\r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h1 class=\"modal-title fs-5\" id=\"deleteModalLabel\">Изтрий клиент</h1>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    Ако клиентът има документи обвързани с него, той ще бъде само скрит. Сигурни ли сте че изкате да изтриете този клиент? Това действие не може да бъде отменено.\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Откажи</button>\r\n                    <button @click=${deleteCustomer} type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\">Изтрий</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>`;\r\n\r\n    const filters = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n        <div class=\"col-9 col-sm\">\r\n            <label for=\"customer\">Клиент:</label>\r\n            <input @keyup=${(0,_api__WEBPACK_IMPORTED_MODULE_2__.delay)(findCustomer, 300)} list=\"customersList\" placeholder=\"Въведи име, булстат или телефон\" id=\"customer\" class=\"form-control\" autocomplete=\"off\">\r\n        </div>\r\n        <div class=\"col-3 col-sm\">\r\n            <div class=\"form-check form-switch p-0\">\r\n                <label class=\"form-check-label d-block\" for=\"showHidden\">Покажи изтрити:</label>\r\n                <input @change=${toggleDeleted} class=\"form-check-input ms-0 fs-4 pe-cursor\" type=\"checkbox\" role=\"switch\" name=\"showDeleted\" id=\"showDeleted\">\r\n            </div>\r\n        </div>\r\n    `;\r\n\r\n    const template = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n        ${deleteModal()}\r\n        ${quickViewModal()}\r\n        ${(0,_nav_js__WEBPACK_IMPORTED_MODULE_4__.nav)()}\r\n        <div class=\"container-fluid\">\r\n            <a href='/customers/create' class=\"btn btn-primary\"><i class=\"bi bi-plus\"></i> Създай партньор</a>\r\n            <div id=\"filters\" class=\"row align-items-end w-100\">\r\n                ${filters()}\r\n            </div>\r\n            ${(0,lit_directives_until_js__WEBPACK_IMPORTED_MODULE_5__.until)(loadCustomers(), _components_js__WEBPACK_IMPORTED_MODULE_6__.spinner)}\r\n        </div>\r\n    `;\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.render)(template(), _app_js__WEBPACK_IMPORTED_MODULE_0__.container);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTtBQUNBLDBCQUEwQixpREFBSTtBQUM5QjtBQUNBO0FBQ0EsNEJBQTRCLDJDQUFLLHFCQUFxQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlEQUFJO0FBQy9CLFVBQVU7QUFDVixVQUFVO0FBQ1YsVUFBVSw0Q0FBRztBQUNiO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGNBQWMsOERBQUssa0JBQWtCLG1EQUFPO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLElBQUksbURBQU0sYUFBYSw4Q0FBUztBQUNoQyIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvdmlld3MvY3VzdG9tZXJzL2N1c3RvbWVycy5qcz8zMTVlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbnRhaW5lciB9IGZyb20gXCJAL2FwcC5qc1wiO1xyXG5pbXBvcnQgeyBodG1sLCByZW5kZXIgfSBmcm9tICdsaXQvaHRtbC5qcyc7XHJcbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcclxuaW1wb3J0IHsgYWRkUXVlcnksIGRlbGF5LCByZW1vdmVRdWVyeSB9IGZyb20gXCJAL2FwaVwiO1xyXG5pbXBvcnQgcGFnZSBmcm9tICdwYWdlJztcclxuaW1wb3J0IHsgbmF2IH0gZnJvbSAnLi4vbmF2LmpzJztcclxuaW1wb3J0IHsgdW50aWwgfSBmcm9tIFwibGl0L2RpcmVjdGl2ZXMvdW50aWwuanNcIjtcclxuaW1wb3J0IHsgc3Bpbm5lciB9IGZyb20gXCIuLi9jb21wb25lbnRzLmpzXCI7XHJcbmltcG9ydCB7IGxvZ2dlZEluVXNlciB9IGZyb20gXCIuLi9sb2dpbi5qc1wiO1xyXG5cclxuXHJcbnZhciBzZWxlY3RlZEN1c3RvbWVyLCBwYXRoLCBwYWdlQ3R4O1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ3VzdG9tZXIoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlcSA9IGF3YWl0IGF4aW9zLmRlbGV0ZShgL2N1c3RvbWVycy8ke3NlbGVjdGVkQ3VzdG9tZXJ9YCk7XHJcblxyXG4gICAgICAgIGlmIChyZXEuc3RhdHVzID09PSAyMDQpIHtcclxuICAgICAgICAgICAgcGFnZShwYXRoKTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgYWxlcnQoJ9CS0YrQt9C90LjQutC90LAg0LPRgNC10YjQutCwJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHVuaGlkZUN1c3RvbWVyKF9pZCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXEgPSBhd2FpdCBheGlvcy5wdXQoYC9jdXN0b21lcnMvJHtfaWR9L3VuaGlkZWApO1xyXG5cclxuICAgICAgICBpZiAocmVxLnN0YXR1cyA9PT0gMjAxKVxyXG4gICAgICAgICAgICBwYWdlKHBhdGgpO1xyXG5cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICBhbGVydCgn0JLRitC30L3QuNC60L3QsCDQs9GA0LXRiNC60LAnKTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgcXVpY2tWaWV3Um93ID0gKG5hbWUsIHZhbHVlKSA9PiBodG1sYFxyXG4gICAgPGRpdiBjbGFzcz1cInJvdyBjb2wtNiBtYi0yXCI+XHJcbiAgICAgICAgPGIgY2xhc3M9XCJkLWJsb2NrXCI+JHtuYW1lfTo8L2I+XHJcbiAgICAgICAgPHNwYW4+JHt2YWx1ZX08L3NwYW4+XHJcbiAgICA8L2Rpdj5gO1xyXG5cclxuY29uc3QgcXVpY2tWaWV3VGVtcGxhdGUgPSAoY3VzdG9tZXIpID0+IGh0bWxgXHJcbjxkaXYgY2xhc3M9XCJyb3cgZy0zXCI+XHJcbiAgICAke3F1aWNrVmlld1Jvdygn0KTQuNGA0LzQsCcsIGN1c3RvbWVyLm5hbWUpfVxyXG4gICAgJHtxdWlja1ZpZXdSb3coJ9Cc0J7QmycsIGN1c3RvbWVyLm1vbCl9XHJcbiAgICAke3F1aWNrVmlld1Jvdygn0JXQmNCaJywgY3VzdG9tZXIudmF0KX1cclxuICAgICR7cXVpY2tWaWV3Um93KCfQlNCU0KEg0JXQmNCaJywgY3VzdG9tZXIudGF4dmF0KX1cclxuICAgICR7cXVpY2tWaWV3Um93KCfQntGC0YHRgtGK0L/QutCwJywgY3VzdG9tZXIuZGlzY291bnQgPyBgJHtjdXN0b21lci5kaXNjb3VudH0lYCA6ICfQndGP0LzQsCcpfVxyXG4gICAgJHtxdWlja1ZpZXdSb3coJ9Ci0LXQu9C10YTQvtC9JywgY3VzdG9tZXIucGhvbmUgPyBjdXN0b21lci5waG9uZSA6ICfQndGP0LzQsCcpfVxyXG4gICAgJHtxdWlja1ZpZXdSb3coJ9CY0LzQtdC50LsnLCBjdXN0b21lci5lbWFpbCA/IGN1c3RvbWVyLmVtYWlsIDogJ9Cd0Y/QvNCwJyl9XHJcbiAgICAke3F1aWNrVmlld1Jvdygn0JDQtNGA0LXRgScsIGN1c3RvbWVyLmFkZHJlc3MpfVxyXG4gICAgJHtxdWlja1ZpZXdSb3coJ9CQ0LTRgNC10YEg0LfQsCDQtNC+0YHRgtCw0LLQutCwJywgY3VzdG9tZXIuZGVsaXZlcnlBZGRyZXNzID8gY3VzdG9tZXIuZGVsaXZlcnlBZGRyZXNzIDogJ9Cd0Y/QvNCwJyl9XHJcbiAgICAke3F1aWNrVmlld1Jvdygn0KHQutGA0LjRgicsIGN1c3RvbWVyLmRlbGV0ZWQgPyAn0JTQsCcgOiAn0J3QtScpfVxyXG48L2Rpdj5cclxuYDtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRRdWlja1ZpZXcoX2lkKSB7XHJcbiAgICBpZiAoIV9pZCkgcmV0dXJuO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXEgPSBhd2FpdCBheGlvcy5nZXQoYC9jdXN0b21lcnMvJHtfaWR9YCk7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tZXIgPSByZXEuZGF0YTtcclxuICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNxdWlja1ZpZXdNb2RhbCAubW9kYWwtYm9keScpO1xyXG5cclxuXHJcblxyXG4gICAgICAgIHJlbmRlcihxdWlja1ZpZXdUZW1wbGF0ZShjdXN0b21lciksIG1vZGFsKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICBhbGVydCgn0JLRitC30L3QuNC60L3QsCDQs9GA0LXRiNC60LAnKTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgY3VzdG9tZXJSb3cgPSAoY3VzdG9tZXIpID0+IGh0bWxgXHJcbiAgICA8dHIgLmlkPSR7Y3VzdG9tZXIuX2lkfT5cclxuICAgICAgICA8dGQ+JHtjdXN0b21lci5uYW1lfTwvdGQ+XHJcbiAgICAgICAgPHRkPiR7Y3VzdG9tZXIudmF0fTwvdGQ+XHJcbiAgICAgICAgPHRkPiR7Y3VzdG9tZXIucGhvbmV9PC90ZD5cclxuICAgICAgICA8dGQ+JHtjdXN0b21lci5kaXNjb3VudH08L3RkPlxyXG4gICAgICAgIDx0ZCBjbGFzcz1cInRleHQtbm93cmFwXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gZGF0YS1icy10b2dnbGU9XCJtb2RhbFwiIGRhdGEtYnMtdGFyZ2V0PVwiI3F1aWNrVmlld01vZGFsXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIiBAY2xpY2s9JHsoKSA9PiBsb2FkUXVpY2tWaWV3KGN1c3RvbWVyLl9pZCl9PjxpIGNsYXNzPVwiYmkgYmktZXllXCI+PC9pPjxzcGFuIGNsYXNzPVwiZC1ub25lIGQtc20taW5saW5lXCI+INCf0YDQtdCz0LvQtdC0PC9zcGFuPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAke1snbWFuYWdlcicsICdhZG1pbiddLmluY2x1ZGVzKGxvZ2dlZEluVXNlci5yb2xlKSA/IGh0bWxgPGEgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeVwiIGhyZWY9JHtgL2N1c3RvbWVycy8ke2N1c3RvbWVyLl9pZH1gfT48aSBjbGFzcz1cImJpIGJpLXBlbmNpbFwiPjwvaT48c3BhbiBjbGFzcz1cImQtbm9uZSBkLXNtLWlubGluZVwiPiDQoNC10LTQsNC60YLQuNGA0LDQuTwvc3Bhbj48L2E+YCA6ICcnfVxyXG4gICAgICAgICAgICAke2xvZ2dlZEluVXNlci5yb2xlID09PSAnYWRtaW4nID8gKGN1c3RvbWVyLmRlbGV0ZWQgP1xyXG4gICAgICAgIGh0bWxgPGJ1dHRvbiBAY2xpY2s9JHsoKSA9PiB1bmhpZGVDdXN0b21lcihjdXN0b21lci5faWQpfSBjbGFzcz1cImJ0biBidG4tc3VjY2Vzc1wiPjxpIGNsYXNzPVwiYmkgYmktYXJyb3ctY2xvY2t3aXNlXCI+PC9pPjxzcGFuIGNsYXNzPVwiZC1ub25lIGQtc20taW5saW5lXCI+INCS0YrQt9GB0YLQsNC90L7QstC4PC9zcGFuPjwvYnV0dG9uPmAgOiBodG1sYDxidXR0b24gQGNsaWNrPSR7KCkgPT4gc2VsZWN0ZWRDdXN0b21lciA9IGN1c3RvbWVyLl9pZH0gY2xhc3M9XCJidG4gYnRuLWRhbmdlclwiIGRhdGEtYnMtdG9nZ2xlPVwibW9kYWxcIiBkYXRhLWJzLXRhcmdldD1cIiNkZWxldGVNb2RhbFwiPjxpIGNsYXNzPVwiYmkgYmktdHJhc2hcIj48L2k+PHNwYW4gY2xhc3M9XCJkLW5vbmUgZC1zbS1pbmxpbmVcIj4g0JjQt9GC0YDQuNC5PC9zcGFuPjwvYnV0dG9uPmApIDogJyd9XHJcbiAgICAgICAgPC90ZD5cclxuICAgIDwvdHI+XHJcbmA7XHJcblxyXG5jb25zdCB0YWJsZSA9IChjdXN0b21lcnMsIHByZXZDdXJzb3IsIG5leHRDdXJzb3IpID0+IGh0bWxgXHJcbiAgICA8ZGl2IGNsYXNzPVwidGFibGUtcmVzcG9uc2l2ZVwiPlxyXG4gICAgICAgIDx0YWJsZSBjbGFzcz1cIm10LTMgdGFibGUgdGFibGUtc3RyaXBlZCB0YWJsZS1ob3ZlciB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0KTQuNGA0LzQsDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0JXQmNCaPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj7QotC10LvQtdGE0L7QvTwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0J7RgtGB0YLRitC/0LrQsCAlPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj7QlNC10LnRgdGC0LLQuNGPPC90aD5cclxuICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICR7Y3VzdG9tZXJzID8gY3VzdG9tZXJzLm1hcChjdXN0b21lclJvdykgOiBodG1sYDxkaXYgY2xhc3M9XCJzcGlubmVyLWJvcmRlciB0ZXh0LXByaW1hcnlcIiByb2xlPVwic3RhdHVzXCI+PHNwYW4gY2xhc3M9XCJ2aXN1YWxseS1oaWRkZW5cIj5Mb2FkaW5nLi4uPC9zcGFuPjwvZGl2PmB9XHJcbiAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgPC90YWJsZT5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cImQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCI+XHJcbiAgICAgICAgJHtwcmV2Q3Vyc29yID8gaHRtbGA8YnV0dG9uIEBjbGljaz0keygpID0+IHN3aXRjaFBhZ2UocHJldkN1cnNvcil9IGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+PGkgY2xhc3M9XCJiaSBiaS1hcnJvdy1sZWZ0XCI+PC9pPiDQn9GA0LXQtNC40YjQvdCwINGB0YLRgNCw0L3QuNGG0LA8L2J1dHRvbj5gIDogJyd9XHJcbiAgICAgICAgJHtuZXh0Q3Vyc29yID8gaHRtbGA8YnV0dG9uIEBjbGljaz0keygpID0+IHN3aXRjaFBhZ2UobmV4dEN1cnNvcil9IGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+0KHQu9C10LTQstCw0YnQsCDRgdGC0YDQsNC90LjRhtCwIDxpIGNsYXNzPVwiYmkgYmktYXJyb3ctcmlnaHRcIj48L2k+PC9idXR0b24+YCA6ICcnfVxyXG4gICAgPC9kaXY+XHJcbmA7XHJcblxyXG5mdW5jdGlvbiBzd2l0Y2hQYWdlKGN1cnNvcikge1xyXG4gICAgdmFyIHVyaTtcclxuXHJcbiAgICB1cmkgPSBhZGRRdWVyeShwYWdlQ3R4LCAnY3Vyc29yJywgY3Vyc29yKTtcclxuXHJcbiAgICBwYWdlKHVyaSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRDdXN0b21lcnMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlcSA9IGF3YWl0IGF4aW9zLmdldChwYXRoKVxyXG4gICAgICAgIGNvbnN0IGN1c3RvbWVycyA9IHJlcS5kYXRhLmN1c3RvbWVycztcclxuICAgICAgICBjb25zdCBwcmV2Q3Vyc29yID0gcmVxLmRhdGEucHJldkN1cnNvcjtcclxuICAgICAgICBjb25zdCBuZXh0Q3Vyc29yID0gcmVxLmRhdGEubmV4dEN1cnNvcjtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRhYmxlKGN1c3RvbWVycywgcHJldkN1cnNvciwgbmV4dEN1cnNvcik7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgYWxlcnQoJ9CS0YrQt9C90LjQutC90LAg0LPRgNC10YjQutCwJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjdXN0b21lcnNQYWdlKGN0eCwgbmV4dCkge1xyXG4gICAgcGF0aCA9IGN0eC5wYXRoO1xyXG4gICAgcGFnZUN0eCA9IGN0eDtcclxuXHJcbiAgICBmdW5jdGlvbiBmaW5kQ3VzdG9tZXIoZSkge1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaCA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGxhc3RTZWFyY2ggPSBjdHgucXVlcnlzdHJpbmcuc3BsaXQoJ3NlYXJjaD0nKVsxXT8uc3BsaXQoJyYnKVswXTtcclxuXHJcbiAgICAgICAgaWYgKGxhc3RTZWFyY2ggPT09IHNlYXJjaCkgLy8gU2tpcFxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciB1cmk7XHJcbiAgICAgICAgaWYgKHNlYXJjaC5sZW5ndGggPT0gMCkgLy8gUmVtb3ZlIGZyb20gcXVlcnlcclxuICAgICAgICAgICAgdXJpID0gcmVtb3ZlUXVlcnkoY3R4LCAnc2VhcmNoJyk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB1cmkgPSBhZGRRdWVyeShjdHgsICdzZWFyY2gnLCBzZWFyY2gpO1xyXG5cclxuICAgICAgICBwYWdlKHVyaSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdG9nZ2xlRGVsZXRlZChlKSB7XHJcbiAgICAgICAgY29uc3Qgc2hvd0RlbGV0ZWQgPSBlLnRhcmdldC5jaGVja2VkO1xyXG4gICAgICAgIHZhciB1cmk7XHJcblxyXG4gICAgICAgIGlmIChzaG93RGVsZXRlZClcclxuICAgICAgICAgICAgdXJpID0gYWRkUXVlcnkoY3R4LCAnc2hvd0RlbGV0ZWQnLCB0cnVlKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHVyaSA9IHJlbW92ZVF1ZXJ5KGN0eCwgJ3Nob3dEZWxldGVkJyk7XHJcblxyXG4gICAgICAgIHBhZ2UodXJpKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBxdWlja1ZpZXdNb2RhbCA9ICgpID0+IGh0bWxgXHJcbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIGlkPVwicXVpY2tWaWV3TW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgYXJpYS1sYWJlbGxlZGJ5PVwicXVpY2tWaWV3TW9kYWxMYWJlbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiID5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzPVwibW9kYWwtdGl0bGUgZnMtNVwiIGlkPVwicXVpY2tWaWV3TW9kYWxMYWJlbFwiPtCR0YrRgNC3INC/0YDQtdCz0LvQtdC0PC9oMT5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0bi1jbG9zZVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5gO1xyXG5cclxuICAgIGNvbnN0IGRlbGV0ZU1vZGFsID0gKCkgPT4gaHRtbGBcclxuICAgIDxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlXCIgaWQgPSBcImRlbGV0ZU1vZGFsXCIgdGFiaW5kZXg9XCItMVwiIGFyaWEtbGFiZWxsZWRieT1cImRlbGV0ZU1vZGFsTGFiZWxcIiBhcmlhLWhpZGRlbj1cInRydWVcIiA+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzcz1cIm1vZGFsLXRpdGxlIGZzLTVcIiBpZD1cImRlbGV0ZU1vZGFsTGFiZWxcIj7QmNC30YLRgNC40Lkg0LrQu9C40LXQvdGCPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0bi1jbG9zZVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAg0JDQutC+INC60LvQuNC10L3RgtGK0YIg0LjQvNCwINC00L7QutGD0LzQtdC90YLQuCDQvtCx0LLRitGA0LfQsNC90Lgg0YEg0L3QtdCz0L4sINGC0L7QuSDRidC1INCx0YrQtNC1INGB0LDQvNC+INGB0LrRgNC40YIuINCh0LjQs9GD0YDQvdC4INC70Lgg0YHRgtC1INGH0LUg0LjQt9C60LDRgtC1INC00LAg0LjQt9GC0YDQuNC10YLQtSDRgtC+0LfQuCDQutC70LjQtdC90YI/INCi0L7QstCwINC00LXQudGB0YLQstC40LUg0L3QtSDQvNC+0LbQtSDQtNCwINCx0YrQtNC1INC+0YLQvNC10L3QtdC90L4uXHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5XCIgZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIj7QntGC0LrQsNC20Lg8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIEBjbGljaz0ke2RlbGV0ZUN1c3RvbWVyfSB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRhbmdlclwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCI+0JjQt9GC0YDQuNC5PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5gO1xyXG5cclxuICAgIGNvbnN0IGZpbHRlcnMgPSAoKSA9PiBodG1sYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtOSBjb2wtc21cIj5cclxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImN1c3RvbWVyXCI+0JrQu9C40LXQvdGCOjwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxpbnB1dCBAa2V5dXA9JHtkZWxheShmaW5kQ3VzdG9tZXIsIDMwMCl9IGxpc3Q9XCJjdXN0b21lcnNMaXN0XCIgcGxhY2Vob2xkZXI9XCLQktGK0LLQtdC00Lgg0LjQvNC1LCDQsdGD0LvRgdGC0LDRgiDQuNC70Lgg0YLQtdC70LXRhNC+0L1cIiBpZD1cImN1c3RvbWVyXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTMgY29sLXNtXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNoZWNrIGZvcm0tc3dpdGNoIHAtMFwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1jaGVjay1sYWJlbCBkLWJsb2NrXCIgZm9yPVwic2hvd0hpZGRlblwiPtCf0L7QutCw0LbQuCDQuNC30YLRgNC40YLQuDo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IEBjaGFuZ2U9JHt0b2dnbGVEZWxldGVkfSBjbGFzcz1cImZvcm0tY2hlY2staW5wdXQgbXMtMCBmcy00IHBlLWN1cnNvclwiIHR5cGU9XCJjaGVja2JveFwiIHJvbGU9XCJzd2l0Y2hcIiBuYW1lPVwic2hvd0RlbGV0ZWRcIiBpZD1cInNob3dEZWxldGVkXCI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICgpID0+IGh0bWxgXHJcbiAgICAgICAgJHtkZWxldGVNb2RhbCgpfVxyXG4gICAgICAgICR7cXVpY2tWaWV3TW9kYWwoKX1cclxuICAgICAgICAke25hdigpfVxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWRcIj5cclxuICAgICAgICAgICAgPGEgaHJlZj0nL2N1c3RvbWVycy9jcmVhdGUnIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+PGkgY2xhc3M9XCJiaSBiaS1wbHVzXCI+PC9pPiDQodGK0LfQtNCw0Lkg0L/QsNGA0YLQvdGM0L7RgDwvYT5cclxuICAgICAgICAgICAgPGRpdiBpZD1cImZpbHRlcnNcIiBjbGFzcz1cInJvdyBhbGlnbi1pdGVtcy1lbmQgdy0xMDBcIj5cclxuICAgICAgICAgICAgICAgICR7ZmlsdGVycygpfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgJHt1bnRpbChsb2FkQ3VzdG9tZXJzKCksIHNwaW5uZXIpfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICByZW5kZXIodGVtcGxhdGUoKSwgY29udGFpbmVyKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/customers/customers.js\n");

/***/ }),

/***/ "./src/views/customers/routes.js":
/*!***************************************!*\
  !*** ./src/views/customers/routes.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   customersRoutes: () => (/* binding */ customersRoutes)\n/* harmony export */ });\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _views_customers_customers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/views/customers/customers */ \"./src/views/customers/customers.js\");\n/* harmony import */ var _views_customers_createEdit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/views/customers/createEdit */ \"./src/views/customers/createEdit.js\");\n\r\n\r\n\r\n\r\nfunction customersRoutes(auth) {\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/customers', auth, _views_customers_customers__WEBPACK_IMPORTED_MODULE_1__.customersPage);\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/customers/create', auth, _views_customers_createEdit__WEBPACK_IMPORTED_MODULE_2__.createEditCustomerPage);\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/customers/:id', auth, _views_customers_createEdit__WEBPACK_IMPORTED_MODULE_2__.createEditCustomerPage);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvY3VzdG9tZXJzL3JvdXRlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdCO0FBQ29DO0FBQ1U7QUFDdEU7QUFDTztBQUNQLElBQUksaUNBQUkscUJBQXFCLHFFQUFhO0FBQzFDLElBQUksaUNBQUksNEJBQTRCLCtFQUFzQjtBQUMxRCxJQUFJLGlDQUFJLHlCQUF5QiwrRUFBc0I7QUFDdkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWJiLml0Ly4vc3JjL3ZpZXdzL2N1c3RvbWVycy9yb3V0ZXMuanM/NDZhMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFnZSBmcm9tICdwYWdlJztcclxuaW1wb3J0IHsgY3VzdG9tZXJzUGFnZSB9IGZyb20gJ0Avdmlld3MvY3VzdG9tZXJzL2N1c3RvbWVycyc7XHJcbmltcG9ydCB7IGNyZWF0ZUVkaXRDdXN0b21lclBhZ2UgfSBmcm9tICdAL3ZpZXdzL2N1c3RvbWVycy9jcmVhdGVFZGl0JztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjdXN0b21lcnNSb3V0ZXMoYXV0aCkge1xyXG4gICAgcGFnZSgnL2N1c3RvbWVycycsIGF1dGgsIGN1c3RvbWVyc1BhZ2UpO1xyXG4gICAgcGFnZSgnL2N1c3RvbWVycy9jcmVhdGUnLCBhdXRoLCBjcmVhdGVFZGl0Q3VzdG9tZXJQYWdlKTtcclxuICAgIHBhZ2UoJy9jdXN0b21lcnMvOmlkJywgYXV0aCwgY3JlYXRlRWRpdEN1c3RvbWVyUGFnZSk7XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/views/customers/routes.js\n");

/***/ }),

/***/ "./src/views/login.js":
/*!****************************!*\
  !*** ./src/views/login.js ***!
  \****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminAuth: () => (/* binding */ adminAuth),\n/* harmony export */   loggedInUser: () => (/* binding */ loggedInUser),\n/* harmony export */   loginPage: () => (/* binding */ loginPage),\n/* harmony export */   logout: () => (/* binding */ logout)\n/* harmony export */ });\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _printer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/printer */ \"./src/printer.js\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/api */ \"./src/api.js\");\n/* harmony import */ var _views_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/views/components */ \"./src/views/components.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar loggedInUser = document.cookie.includes('user=') ? JSON.parse(document.cookie.split('; ').find(row => row.startsWith('user=')).split('=')[1]) : null\r\n\r\n\r\nfunction adminAuth(ctx, next) {\r\n    if (!loggedInUser || loggedInUser.role != 'admin')\r\n        return page__WEBPACK_IMPORTED_MODULE_0__('/');\r\n\r\n    next();\r\n}\r\n\r\nasync function logout() {\r\n    await axios__WEBPACK_IMPORTED_MODULE_6__[\"default\"].get('/logout').then(() => {\r\n        document.cookie = \"user=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\r\n        loggedInUser = null;\r\n        _api__WEBPACK_IMPORTED_MODULE_4__.socket.disconnect();\r\n        // full page refresh\r\n        window.location.replace(location.origin);\r\n    }).catch(err => {\r\n        console.error(err);\r\n    });\r\n}\r\n\r\nasync function login(e) {\r\n    e.preventDefault();\r\n    (0,_views_components__WEBPACK_IMPORTED_MODULE_5__.toggleSubmitBtn)();\r\n\r\n    const formData = new FormData(e.target);\r\n    const username = formData.get('username');\r\n    const password = formData.get('password');\r\n    const alertEl = document.getElementById('alert');\r\n\r\n    await axios__WEBPACK_IMPORTED_MODULE_6__[\"default\"].post('/login', {\r\n        username,\r\n        password\r\n    }).then(res => {\r\n        // Create cookie with user data\r\n        const { user, maxAge } = res.data;\r\n        const date = new Date();\r\n        date.setTime(date.getTime() + maxAge * 1000);\r\n        const cookie = `user=${JSON.stringify(user)};expires=${date.toUTCString()};path=/`\r\n        document.cookie = cookie;\r\n        loggedInUser = user;\r\n\r\n        (0,_views_components__WEBPACK_IMPORTED_MODULE_5__.toggleSubmitBtn)();\r\n        alertEl.classList.add('d-none');\r\n        alertEl.textContent = '';\r\n        page__WEBPACK_IMPORTED_MODULE_0__('/');\r\n\r\n        // initialize socket.io\r\n        (0,_api__WEBPACK_IMPORTED_MODULE_4__.initSocket)();\r\n        // initialize printer\r\n        (0,_printer__WEBPACK_IMPORTED_MODULE_3__.printerSetup)();\r\n    }).catch(err => {\r\n        (0,_views_components__WEBPACK_IMPORTED_MODULE_5__.toggleSubmitBtn)();\r\n        console.error(err);\r\n        alertEl.classList.remove('d-none');\r\n        if (err.response?.data)\r\n            alertEl.textContent = err.response.data;\r\n        else alertEl.textContent = 'Няма връзка със сървъра. Моля опитайте отново.'\r\n    });\r\n}\r\n\r\nfunction loginPage() {\r\n    // If user is already logged in, redirect to home page\r\n    if (loggedInUser)\r\n        return page__WEBPACK_IMPORTED_MODULE_0__('/');\r\n\r\n    const loginForm = (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <div class=\"container position-absolute top-50 start-50 translate-middle\" style=\"max-width: 600px\">\r\n        <form @submit=${login} class=\"d-flex flex-column gap-3 m-auto\">\r\n            <div>\r\n                <label for=\"username\" class=\"form-label\">Име</label>\r\n                <input class=\"form-control\" type=\"text\" id=\"username\" name=\"username\" required autocomplete=\"off\" autocapitalize=\"off\">\r\n            </div>\r\n            <div>\r\n                <label for=\"password\" class=\"form-label\">Парола</label>\r\n                <input class=\"form-control\" type=\"password\" id=\"password\" name=\"password\" minlength=\"6\" required autocomplete=\"off\">\r\n            </div>\r\n            ${(0,_views_components__WEBPACK_IMPORTED_MODULE_5__.submitBtn)({ text: \"Вход\", classes: \"w-50 m-auto\" })}\r\n        </form>\r\n        <div id=\"alert\" class=\"alert alert-danger mt-3 d-none\"></div>\r\n    </div>\r\n    `;\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(loginForm, _app_js__WEBPACK_IMPORTED_MODULE_1__.container);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvbG9naW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBd0I7QUFDYTtBQUNNO0FBQ2pCO0FBQ2U7QUFDRTtBQUNvQjtBQUMvRDtBQUNPLDJGQUEyRjtBQUNsRztBQUNBO0FBQ087QUFDUDtBQUNBLGVBQWUsaUNBQUk7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFVBQVUsNkNBQUs7QUFDZixrQ0FBa0MsdUNBQXVDLE9BQU87QUFDaEY7QUFDQSxRQUFRLHdDQUFNO0FBQ2Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksa0VBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSw2Q0FBSztBQUNmO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxnQkFBZ0IsZUFBZTtBQUMvQjtBQUNBO0FBQ0EsK0JBQStCLHNCQUFzQixVQUFVLG9CQUFvQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQSxRQUFRLGtFQUFlO0FBQ3ZCO0FBQ0E7QUFDQSxRQUFRLGlDQUFJO0FBQ1o7QUFDQTtBQUNBLFFBQVEsZ0RBQVU7QUFDbEI7QUFDQSxRQUFRLHNEQUFZO0FBQ3BCLEtBQUs7QUFDTCxRQUFRLGtFQUFlO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLGVBQWUsaUNBQUk7QUFDbkI7QUFDQSxzQkFBc0IsaURBQUk7QUFDMUI7QUFDQSx3QkFBd0IsT0FBTztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw0REFBUyxHQUFHLHNDQUFzQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxtREFBTSxZQUFZLDhDQUFTO0FBQy9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmFiYi5pdC8uL3NyYy92aWV3cy9sb2dpbi5qcz9lZDlhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYWdlIGZyb20gJ3BhZ2UnO1xyXG5pbXBvcnQgeyBjb250YWluZXIgfSBmcm9tIFwiQC9hcHAuanNcIjtcclxuaW1wb3J0IHsgaHRtbCwgcmVuZGVyIH0gZnJvbSAnbGl0L2h0bWwuanMnO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XHJcbmltcG9ydCB7IHByaW50ZXJTZXR1cCB9IGZyb20gJ0AvcHJpbnRlcic7XHJcbmltcG9ydCB7IGluaXRTb2NrZXQsIHNvY2tldCB9IGZyb20gJ0AvYXBpJztcclxuaW1wb3J0IHsgc3VibWl0QnRuLCB0b2dnbGVTdWJtaXRCdG4gfSBmcm9tICdAL3ZpZXdzL2NvbXBvbmVudHMnXHJcblxyXG5leHBvcnQgdmFyIGxvZ2dlZEluVXNlciA9IGRvY3VtZW50LmNvb2tpZS5pbmNsdWRlcygndXNlcj0nKSA/IEpTT04ucGFyc2UoZG9jdW1lbnQuY29va2llLnNwbGl0KCc7ICcpLmZpbmQocm93ID0+IHJvdy5zdGFydHNXaXRoKCd1c2VyPScpKS5zcGxpdCgnPScpWzFdKSA6IG51bGxcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRtaW5BdXRoKGN0eCwgbmV4dCkge1xyXG4gICAgaWYgKCFsb2dnZWRJblVzZXIgfHwgbG9nZ2VkSW5Vc2VyLnJvbGUgIT0gJ2FkbWluJylcclxuICAgICAgICByZXR1cm4gcGFnZSgnLycpO1xyXG5cclxuICAgIG5leHQoKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ291dCgpIHtcclxuICAgIGF3YWl0IGF4aW9zLmdldCgnL2xvZ291dCcpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IFwidXNlcj07IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBVVEM7IHBhdGg9LztcIjtcclxuICAgICAgICBsb2dnZWRJblVzZXIgPSBudWxsO1xyXG4gICAgICAgIHNvY2tldC5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgLy8gZnVsbCBwYWdlIHJlZnJlc2hcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShsb2NhdGlvbi5vcmlnaW4pO1xyXG4gICAgfSkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gbG9naW4oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdG9nZ2xlU3VibWl0QnRuKCk7XHJcblxyXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZS50YXJnZXQpO1xyXG4gICAgY29uc3QgdXNlcm5hbWUgPSBmb3JtRGF0YS5nZXQoJ3VzZXJuYW1lJyk7XHJcbiAgICBjb25zdCBwYXNzd29yZCA9IGZvcm1EYXRhLmdldCgncGFzc3dvcmQnKTtcclxuICAgIGNvbnN0IGFsZXJ0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxlcnQnKTtcclxuXHJcbiAgICBhd2FpdCBheGlvcy5wb3N0KCcvbG9naW4nLCB7XHJcbiAgICAgICAgdXNlcm5hbWUsXHJcbiAgICAgICAgcGFzc3dvcmRcclxuICAgIH0pLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAvLyBDcmVhdGUgY29va2llIHdpdGggdXNlciBkYXRhXHJcbiAgICAgICAgY29uc3QgeyB1c2VyLCBtYXhBZ2UgfSA9IHJlcy5kYXRhO1xyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIG1heEFnZSAqIDEwMDApO1xyXG4gICAgICAgIGNvbnN0IGNvb2tpZSA9IGB1c2VyPSR7SlNPTi5zdHJpbmdpZnkodXNlcil9O2V4cGlyZXM9JHtkYXRlLnRvVVRDU3RyaW5nKCl9O3BhdGg9L2BcclxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWU7XHJcbiAgICAgICAgbG9nZ2VkSW5Vc2VyID0gdXNlcjtcclxuXHJcbiAgICAgICAgdG9nZ2xlU3VibWl0QnRuKCk7XHJcbiAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTtcclxuICAgICAgICBhbGVydEVsLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgcGFnZSgnLycpO1xyXG5cclxuICAgICAgICAvLyBpbml0aWFsaXplIHNvY2tldC5pb1xyXG4gICAgICAgIGluaXRTb2NrZXQoKTtcclxuICAgICAgICAvLyBpbml0aWFsaXplIHByaW50ZXJcclxuICAgICAgICBwcmludGVyU2V0dXAoKTtcclxuICAgIH0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgdG9nZ2xlU3VibWl0QnRuKCk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcbiAgICAgICAgaWYgKGVyci5yZXNwb25zZT8uZGF0YSlcclxuICAgICAgICAgICAgYWxlcnRFbC50ZXh0Q29udGVudCA9IGVyci5yZXNwb25zZS5kYXRhO1xyXG4gICAgICAgIGVsc2UgYWxlcnRFbC50ZXh0Q29udGVudCA9ICfQndGP0LzQsCDQstGA0YrQt9C60LAg0YHRitGBINGB0YrRgNCy0YrRgNCwLiDQnNC+0LvRjyDQvtC/0LjRgtCw0LnRgtC1INC+0YLQvdC+0LLQvi4nXHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxvZ2luUGFnZSgpIHtcclxuICAgIC8vIElmIHVzZXIgaXMgYWxyZWFkeSBsb2dnZWQgaW4sIHJlZGlyZWN0IHRvIGhvbWUgcGFnZVxyXG4gICAgaWYgKGxvZ2dlZEluVXNlcilcclxuICAgICAgICByZXR1cm4gcGFnZSgnLycpO1xyXG5cclxuICAgIGNvbnN0IGxvZ2luRm9ybSA9IGh0bWxgXHJcbiAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyIHBvc2l0aW9uLWFic29sdXRlIHRvcC01MCBzdGFydC01MCB0cmFuc2xhdGUtbWlkZGxlXCIgc3R5bGU9XCJtYXgtd2lkdGg6IDYwMHB4XCI+XHJcbiAgICAgICAgPGZvcm0gQHN1Ym1pdD0ke2xvZ2lufSBjbGFzcz1cImQtZmxleCBmbGV4LWNvbHVtbiBnYXAtMyBtLWF1dG9cIj5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ1c2VybmFtZVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCY0LzQtTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwidGV4dFwiIGlkPVwidXNlcm5hbWVcIiBuYW1lPVwidXNlcm5hbWVcIiByZXF1aXJlZCBhdXRvY29tcGxldGU9XCJvZmZcIiBhdXRvY2FwaXRhbGl6ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJwYXNzd29yZFwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCf0LDRgNC+0LvQsDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwicGFzc3dvcmRcIiBpZD1cInBhc3N3b3JkXCIgbmFtZT1cInBhc3N3b3JkXCIgbWlubGVuZ3RoPVwiNlwiIHJlcXVpcmVkIGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgJHtzdWJtaXRCdG4oeyB0ZXh0OiBcItCS0YXQvtC0XCIsIGNsYXNzZXM6IFwidy01MCBtLWF1dG9cIiB9KX1cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPGRpdiBpZD1cImFsZXJ0XCIgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXIgbXQtMyBkLW5vbmVcIj48L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICByZW5kZXIobG9naW5Gb3JtLCBjb250YWluZXIpO1xyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/views/login.js\n");

/***/ }),

/***/ "./src/views/main/main.js":
/*!********************************!*\
  !*** ./src/views/main/main.js ***!
  \********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mainPage: () => (/* binding */ mainPage)\n/* harmony export */ });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var _views_nav_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/views/nav.js */ \"./src/views/nav.js\");\n/* harmony import */ var _views_login__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/views/login */ \"./src/views/login.js\");\n\r\n\r\n\r\n\r\n\r\nfunction mainPage() {\r\n    const template = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n        ${(0,_views_nav_js__WEBPACK_IMPORTED_MODULE_2__.nav)()}\r\n        <div id=\"mainDiv\" class=\"d-flex gap-3 mb-3 p-3 align-items-center flex-wrap\">\r\n            <a href=\"/products\" class=\"btn btn-warning fs-2\"><i class=\"bi bi-box-seam\"></i> Стоки</a>\r\n            <a href=\"/orders\" class=\"btn btn-warning fs-2\"><i class=\"bi bi-cart\"></i> Продажби</a>\r\n            <a href=\"/customers\" class=\"btn btn-warning fs-2\"><i class=\"bi bi-people\"></i> Партньори</a>\r\n            <a href=\"/categories\" class=\"btn btn-warning fs-2\"><i class=\"bi bi-tags\"></i> Категории</a>\r\n            ${_views_login__WEBPACK_IMPORTED_MODULE_3__.loggedInUser && ['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_3__.loggedInUser.role) ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<a href=\"/references/orders\" class=\"btn btn-warning fs-2\"><i class=\"bi bi-file-earmark-text\"></i> Справки</a>` : ''}\r\n            ${_views_login__WEBPACK_IMPORTED_MODULE_3__.loggedInUser && _views_login__WEBPACK_IMPORTED_MODULE_3__.loggedInUser.role === 'admin' ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<a href=\"/admin/users\" class=\"btn btn-primary fs-2\"><i class=\"bi bi-people\"></i> Потребители</a>` : ''}\r\n            ${_views_login__WEBPACK_IMPORTED_MODULE_3__.loggedInUser && _views_login__WEBPACK_IMPORTED_MODULE_3__.loggedInUser.role === 'admin' ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<a href=\"/admin/companies\" class=\"btn btn-primary fs-2\"><i class=\"bi bi-building\"></i> Обекти</a>` : ''}\r\n            ${_views_login__WEBPACK_IMPORTED_MODULE_3__.loggedInUser && _views_login__WEBPACK_IMPORTED_MODULE_3__.loggedInUser.role === 'admin' ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<a href=\"/admin/settings\" class=\"btn btn-primary fs-2\"><i class=\"bi bi-gear\"></i> Настройки</a>` : ''}\r\n        </div>\r\n    `;\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.render)(template(), _app_js__WEBPACK_IMPORTED_MODULE_0__.container);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvbWFpbi9tYWluLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFDO0FBQ007QUFDTjtBQUNRO0FBQzdDO0FBQ087QUFDUCwyQkFBMkIsaURBQUk7QUFDL0IsVUFBVSxrREFBRztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHNEQUFZLGtDQUFrQyxzREFBWSxTQUFTLGlEQUFJO0FBQ3JGLGNBQWMsc0RBQVksSUFBSSxzREFBWSxvQkFBb0IsaURBQUk7QUFDbEUsY0FBYyxzREFBWSxJQUFJLHNEQUFZLG9CQUFvQixpREFBSTtBQUNsRSxjQUFjLHNEQUFZLElBQUksc0RBQVksb0JBQW9CLGlEQUFJO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBLElBQUksbURBQU0sYUFBYSw4Q0FBUztBQUNoQyIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvdmlld3MvbWFpbi9tYWluLmpzPzQyOGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29udGFpbmVyIH0gZnJvbSBcIkAvYXBwLmpzXCI7XHJcbmltcG9ydCB7IGh0bWwsIHJlbmRlciB9IGZyb20gJ2xpdC9odG1sLmpzJztcclxuaW1wb3J0IHsgbmF2IH0gZnJvbSBcIkAvdmlld3MvbmF2LmpzXCI7XHJcbmltcG9ydCB7IGxvZ2dlZEluVXNlciB9IGZyb20gXCJAL3ZpZXdzL2xvZ2luXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFpblBhZ2UoKSB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICgpID0+IGh0bWxgXHJcbiAgICAgICAgJHtuYXYoKX1cclxuICAgICAgICA8ZGl2IGlkPVwibWFpbkRpdlwiIGNsYXNzPVwiZC1mbGV4IGdhcC0zIG1iLTMgcC0zIGFsaWduLWl0ZW1zLWNlbnRlciBmbGV4LXdyYXBcIj5cclxuICAgICAgICAgICAgPGEgaHJlZj1cIi9wcm9kdWN0c1wiIGNsYXNzPVwiYnRuIGJ0bi13YXJuaW5nIGZzLTJcIj48aSBjbGFzcz1cImJpIGJpLWJveC1zZWFtXCI+PC9pPiDQodGC0L7QutC4PC9hPlxyXG4gICAgICAgICAgICA8YSBocmVmPVwiL29yZGVyc1wiIGNsYXNzPVwiYnRuIGJ0bi13YXJuaW5nIGZzLTJcIj48aSBjbGFzcz1cImJpIGJpLWNhcnRcIj48L2k+INCf0YDQvtC00LDQttCx0Lg8L2E+XHJcbiAgICAgICAgICAgIDxhIGhyZWY9XCIvY3VzdG9tZXJzXCIgY2xhc3M9XCJidG4gYnRuLXdhcm5pbmcgZnMtMlwiPjxpIGNsYXNzPVwiYmkgYmktcGVvcGxlXCI+PC9pPiDQn9Cw0YDRgtC90YzQvtGA0Lg8L2E+XHJcbiAgICAgICAgICAgIDxhIGhyZWY9XCIvY2F0ZWdvcmllc1wiIGNsYXNzPVwiYnRuIGJ0bi13YXJuaW5nIGZzLTJcIj48aSBjbGFzcz1cImJpIGJpLXRhZ3NcIj48L2k+INCa0LDRgtC10LPQvtGA0LjQuDwvYT5cclxuICAgICAgICAgICAgJHtsb2dnZWRJblVzZXIgJiYgWydtYW5hZ2VyJywgJ2FkbWluJ10uaW5jbHVkZXMobG9nZ2VkSW5Vc2VyLnJvbGUpID8gaHRtbGA8YSBocmVmPVwiL3JlZmVyZW5jZXMvb3JkZXJzXCIgY2xhc3M9XCJidG4gYnRuLXdhcm5pbmcgZnMtMlwiPjxpIGNsYXNzPVwiYmkgYmktZmlsZS1lYXJtYXJrLXRleHRcIj48L2k+INCh0L/RgNCw0LLQutC4PC9hPmAgOiAnJ31cclxuICAgICAgICAgICAgJHtsb2dnZWRJblVzZXIgJiYgbG9nZ2VkSW5Vc2VyLnJvbGUgPT09ICdhZG1pbicgPyBodG1sYDxhIGhyZWY9XCIvYWRtaW4vdXNlcnNcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBmcy0yXCI+PGkgY2xhc3M9XCJiaSBiaS1wZW9wbGVcIj48L2k+INCf0L7RgtGA0LXQsdC40YLQtdC70Lg8L2E+YCA6ICcnfVxyXG4gICAgICAgICAgICAke2xvZ2dlZEluVXNlciAmJiBsb2dnZWRJblVzZXIucm9sZSA9PT0gJ2FkbWluJyA/IGh0bWxgPGEgaHJlZj1cIi9hZG1pbi9jb21wYW5pZXNcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBmcy0yXCI+PGkgY2xhc3M9XCJiaSBiaS1idWlsZGluZ1wiPjwvaT4g0J7QsdC10LrRgtC4PC9hPmAgOiAnJ31cclxuICAgICAgICAgICAgJHtsb2dnZWRJblVzZXIgJiYgbG9nZ2VkSW5Vc2VyLnJvbGUgPT09ICdhZG1pbicgPyBodG1sYDxhIGhyZWY9XCIvYWRtaW4vc2V0dGluZ3NcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBmcy0yXCI+PGkgY2xhc3M9XCJiaSBiaS1nZWFyXCI+PC9pPiDQndCw0YHRgtGA0L7QudC60Lg8L2E+YCA6ICcnfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICByZW5kZXIodGVtcGxhdGUoKSwgY29udGFpbmVyKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/main/main.js\n");

/***/ }),

/***/ "./src/views/nav.js":
/*!**************************!*\
  !*** ./src/views/nav.js ***!
  \**************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   nav: () => (/* binding */ nav)\n/* harmony export */ });\n/* harmony import */ var lit_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit-html */ \"./node_modules/lit-html/development/lit-html.js\");\n/* harmony import */ var _views_login__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/views/login */ \"./src/views/login.js\");\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/api.js */ \"./src/api.js\");\n/* harmony import */ var _printer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/printer */ \"./src/printer.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst printerModalDiv = document.getElementById('selectPrinterModalDiv');\r\n\r\nif (printerModalDiv)\r\n    (0,lit_html__WEBPACK_IMPORTED_MODULE_0__.render)((0,_printer__WEBPACK_IMPORTED_MODULE_3__.printerModal)(_printer__WEBPACK_IMPORTED_MODULE_3__.availablePrinters), printerModalDiv);\r\n\r\nasync function downloadProductsURLS(e) {\r\n    e.target.disabled = true;\r\n    const response = await axios__WEBPACK_IMPORTED_MODULE_4__[\"default\"].get('/products/woourls')\r\n\r\n    if (response.status === 200) {\r\n        // download file\r\n        const link = document.createElement(\"a\");\r\n        link.href = 'urls.txt';\r\n        link.download = 'urls.txt';\r\n        link.click();\r\n    } else if (response.status === 204)\r\n        alert('Сървърът не е свързан с WooCommerce!')\r\n\r\n    e.target.disabled = false;\r\n}\r\n\r\nconst nav = () => (0,lit_html__WEBPACK_IMPORTED_MODULE_0__.html)`\r\n    <div id=\"selectPrinterModalDiv\"></div>\r\n    <nav class=\"navbar sticky-top navbar-expand-md bg-body-tertiary mb-2 d-print-none\">\r\n        <div class=\"container-fluid gap-4\">\r\n            <a class=\"navbar-brand\" href=\"/\">\r\n                <img src=\"favicon/favicon-32x32.png\" alt=\"Logo\" width=\"30\" height=\"24\" class=\"d-inline-block align-text-top d-none\">Rabb.it <span class=\"fw-light fs-6\">(${_views_login__WEBPACK_IMPORTED_MODULE_1__.loggedInUser && _views_login__WEBPACK_IMPORTED_MODULE_1__.loggedInUser.username})</span> <i id=\"printerIconNav\" data-bs-toggle=\"modal\" data-bs-target=\"#selectPrinterModal\" class=\"bi bi-printer ${_printer__WEBPACK_IMPORTED_MODULE_3__.printerFound === undefined ? 'text-warning' : _printer__WEBPACK_IMPORTED_MODULE_3__.printerFound ? 'text-success' : 'text-danger'}\"></i> <i class=\"bi bi-wordpress\"></i></a>\r\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbar\" aria-controls=\"navbar\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                <span class=\"navbar-toggler-icon\"></span>\r\n            </button>\r\n            <div class=\"collapse navbar-collapse justify-content-end\" id=\"navbar\">\r\n                <ul class=\"navbar-nav gap-1 text-center mb-lg-0 align-items-md-end\">\r\n                    ${_views_login__WEBPACK_IMPORTED_MODULE_1__.loggedInUser && _views_login__WEBPACK_IMPORTED_MODULE_1__.loggedInUser.role === 'admin' ? (0,lit_html__WEBPACK_IMPORTED_MODULE_0__.html)`<li class=\"nav-item dropdown\">\r\n                        <a class=\"nav-link link-primary dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\"><i class=\"bi bi-shield-lock\"></i> Админ</a>\r\n                        <ul class=\"dropdown-menu dropdown-menu-md-end\">\r\n                            <li><a class=\"dropdown-item link-primary\" href=\"/admin/users\"><i class=\"bi bi-people\"></i> Потребители</a></li>\r\n                            <li><a class=\"dropdown-item link-primary\" href=\"/admin/companies\"><i class=\"bi bi-building\"></i> Обекти</a></li>\r\n                            <li><a class=\"dropdown-item link-primary\" href=\"/admin/settings\"><i class=\"bi bi-gear\"></i> Настройки</a></li>\r\n                        </ul>\r\n                    </li>` : ''}\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link\" href=\"/products\"><i class=\"bi bi-box-seam\"></i> Стоки</a>\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link\" href=\"/orders/create\"><i class=\"bi bi-plus\"></i> Създай продажба</a>\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link\" href=\"/orders\"><i class=\"bi bi-cart\"></i> Продажби</a>\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link\" href=\"/customers\"><i class=\"bi bi-people\"></i> Партньори</a>\r\n                    </li>\r\n                    ${_views_login__WEBPACK_IMPORTED_MODULE_1__.loggedInUser && ['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_1__.loggedInUser.role) ? (0,lit_html__WEBPACK_IMPORTED_MODULE_0__.html)`\r\n                        <li class=\"nav-item dropdown\">\r\n                        <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                            <i class=\"bi bi-file-earmark-text\"></i> Справки\r\n                        </a>\r\n                        <ul class=\"dropdown-menu dropdown-menu-md-end\">\r\n                            <li><a class=\"dropdown-item\" href=\"/references/orders\"><i class=\"bi bi-file-earmark-text\"></i> Справка по продажби</a></li>\r\n                        </ul>\r\n                    </li>` : ''}\r\n                    <li class=\"nav-item dropdown\">\r\n                        <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                            Други\r\n                        </a>\r\n                        <ul class=\"dropdown-menu dropdown-menu-md-end\">\r\n                            <li><button class=\"dropdown-item\" @click=${_api_js__WEBPACK_IMPORTED_MODULE_2__.toggleDarkMode}><i class=\"bi bi-moon\"></i> Тъмен режим</button></li>\r\n                            <li><a class=\"dropdown-item\" href=\"/categories\"><i class=\"bi bi-tags\"></i> Категории</a></li>\r\n                            ${_views_login__WEBPACK_IMPORTED_MODULE_1__.loggedInUser && ['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_1__.loggedInUser.role) ? (0,lit_html__WEBPACK_IMPORTED_MODULE_0__.html)`<li><button class=\"dropdown-item\" @click=${downloadProductsURLS}><i class=\"bi bi-download\"></i> Линкове за продуктите</button></li>` : ''}\r\n                        </ul>\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                        <a class=\"nav-link link-danger\" @click=${_views_login__WEBPACK_IMPORTED_MODULE_1__.logout} href=\"#\"><i class=\"bi bi-box-arrow-left\"></i> Изход</a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </nav>\r\n`;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvbmF2LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3QztBQUNhO0FBQ1g7QUFDZ0M7QUFDaEQ7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdEQUFNLENBQUMsc0RBQVksQ0FBQyx1REFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDZDQUFLO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxrQkFBa0IsOENBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyS0FBMkssc0RBQVksSUFBSSxzREFBWSxVQUFVLG1IQUFtSCxrREFBWSxrQ0FBa0Msa0RBQVksa0NBQWtDO0FBQ2hhO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0RBQVksSUFBSSxzREFBWSxvQkFBb0IsOENBQUk7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0RBQVksa0NBQWtDLHNEQUFZLFNBQVMsOENBQUk7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsbURBQWMsQ0FBQztBQUN0RjtBQUNBLDhCQUE4QixzREFBWSxrQ0FBa0Msc0RBQVksU0FBUyw4Q0FBSSw0Q0FBNEMscUJBQXFCO0FBQ3RLO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxnREFBTSxFQUFFO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvdmlld3MvbmF2LmpzP2I3OGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaHRtbCwgcmVuZGVyIH0gZnJvbSAnbGl0LWh0bWwnO1xyXG5pbXBvcnQgeyBsb2dvdXQsIGxvZ2dlZEluVXNlciB9IGZyb20gJ0Avdmlld3MvbG9naW4nO1xyXG5pbXBvcnQgeyB0b2dnbGVEYXJrTW9kZSB9IGZyb20gJ0AvYXBpLmpzJztcclxuaW1wb3J0IHsgcHJpbnRlckZvdW5kLCBwcmludGVyTW9kYWwsIGF2YWlsYWJsZVByaW50ZXJzIH0gZnJvbSAnQC9wcmludGVyJztcclxuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcclxuXHJcbmNvbnN0IHByaW50ZXJNb2RhbERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3RQcmludGVyTW9kYWxEaXYnKTtcclxuXHJcbmlmIChwcmludGVyTW9kYWxEaXYpXHJcbiAgICByZW5kZXIocHJpbnRlck1vZGFsKGF2YWlsYWJsZVByaW50ZXJzKSwgcHJpbnRlck1vZGFsRGl2KTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGRvd25sb2FkUHJvZHVjdHNVUkxTKGUpIHtcclxuICAgIGUudGFyZ2V0LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCcvcHJvZHVjdHMvd29vdXJscycpXHJcblxyXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgLy8gZG93bmxvYWQgZmlsZVxyXG4gICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgICAgICBsaW5rLmhyZWYgPSAndXJscy50eHQnO1xyXG4gICAgICAgIGxpbmsuZG93bmxvYWQgPSAndXJscy50eHQnO1xyXG4gICAgICAgIGxpbmsuY2xpY2soKTtcclxuICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpXHJcbiAgICAgICAgYWxlcnQoJ9Ch0YrRgNCy0YrRgNGK0YIg0L3QtSDQtSDRgdCy0YrRgNC30LDQvSDRgSBXb29Db21tZXJjZSEnKVxyXG5cclxuICAgIGUudGFyZ2V0LmRpc2FibGVkID0gZmFsc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBuYXYgPSAoKSA9PiBodG1sYFxyXG4gICAgPGRpdiBpZD1cInNlbGVjdFByaW50ZXJNb2RhbERpdlwiPjwvZGl2PlxyXG4gICAgPG5hdiBjbGFzcz1cIm5hdmJhciBzdGlja3ktdG9wIG5hdmJhci1leHBhbmQtbWQgYmctYm9keS10ZXJ0aWFyeSBtYi0yIGQtcHJpbnQtbm9uZVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWQgZ2FwLTRcIj5cclxuICAgICAgICAgICAgPGEgY2xhc3M9XCJuYXZiYXItYnJhbmRcIiBocmVmPVwiL1wiPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJmYXZpY29uL2Zhdmljb24tMzJ4MzIucG5nXCIgYWx0PVwiTG9nb1wiIHdpZHRoPVwiMzBcIiBoZWlnaHQ9XCIyNFwiIGNsYXNzPVwiZC1pbmxpbmUtYmxvY2sgYWxpZ24tdGV4dC10b3AgZC1ub25lXCI+UmFiYi5pdCA8c3BhbiBjbGFzcz1cImZ3LWxpZ2h0IGZzLTZcIj4oJHtsb2dnZWRJblVzZXIgJiYgbG9nZ2VkSW5Vc2VyLnVzZXJuYW1lfSk8L3NwYW4+IDxpIGlkPVwicHJpbnRlckljb25OYXZcIiBkYXRhLWJzLXRvZ2dsZT1cIm1vZGFsXCIgZGF0YS1icy10YXJnZXQ9XCIjc2VsZWN0UHJpbnRlck1vZGFsXCIgY2xhc3M9XCJiaSBiaS1wcmludGVyICR7cHJpbnRlckZvdW5kID09PSB1bmRlZmluZWQgPyAndGV4dC13YXJuaW5nJyA6IHByaW50ZXJGb3VuZCA/ICd0ZXh0LXN1Y2Nlc3MnIDogJ3RleHQtZGFuZ2VyJ31cIj48L2k+IDxpIGNsYXNzPVwiYmkgYmktd29yZHByZXNzXCI+PC9pPjwvYT5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm5hdmJhci10b2dnbGVyXCIgdHlwZT1cImJ1dHRvblwiIGRhdGEtYnMtdG9nZ2xlPVwiY29sbGFwc2VcIiBkYXRhLWJzLXRhcmdldD1cIiNuYXZiYXJcIiBhcmlhLWNvbnRyb2xzPVwibmF2YmFyXCIgYXJpYS1leHBhbmRlZD1cImZhbHNlXCIgYXJpYS1sYWJlbD1cIlRvZ2dsZSBuYXZpZ2F0aW9uXCI+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm5hdmJhci10b2dnbGVyLWljb25cIj48L3NwYW4+XHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sbGFwc2UgbmF2YmFyLWNvbGxhcHNlIGp1c3RpZnktY29udGVudC1lbmRcIiBpZD1cIm5hdmJhclwiPlxyXG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwibmF2YmFyLW5hdiBnYXAtMSB0ZXh0LWNlbnRlciBtYi1sZy0wIGFsaWduLWl0ZW1zLW1kLWVuZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICR7bG9nZ2VkSW5Vc2VyICYmIGxvZ2dlZEluVXNlci5yb2xlID09PSAnYWRtaW4nID8gaHRtbGA8bGkgY2xhc3M9XCJuYXYtaXRlbSBkcm9wZG93blwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cIm5hdi1saW5rIGxpbmstcHJpbWFyeSBkcm9wZG93bi10b2dnbGVcIiBocmVmPVwiI1wiIHJvbGU9XCJidXR0b25cIiBkYXRhLWJzLXRvZ2dsZT1cImRyb3Bkb3duXCIgYXJpYS1leHBhbmRlZD1cImZhbHNlXCI+PGkgY2xhc3M9XCJiaSBiaS1zaGllbGQtbG9ja1wiPjwvaT4g0JDQtNC80LjQvTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudSBkcm9wZG93bi1tZW51LW1kLWVuZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxhIGNsYXNzPVwiZHJvcGRvd24taXRlbSBsaW5rLXByaW1hcnlcIiBocmVmPVwiL2FkbWluL3VzZXJzXCI+PGkgY2xhc3M9XCJiaSBiaS1wZW9wbGVcIj48L2k+INCf0L7RgtGA0LXQsdC40YLQtdC70Lg8L2E+PC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW0gbGluay1wcmltYXJ5XCIgaHJlZj1cIi9hZG1pbi9jb21wYW5pZXNcIj48aSBjbGFzcz1cImJpIGJpLWJ1aWxkaW5nXCI+PC9pPiDQntCx0LXQutGC0Lg8L2E+PC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW0gbGluay1wcmltYXJ5XCIgaHJlZj1cIi9hZG1pbi9zZXR0aW5nc1wiPjxpIGNsYXNzPVwiYmkgYmktZ2VhclwiPjwvaT4g0J3QsNGB0YLRgNC+0LnQutC4PC9hPjwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5gIDogJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibmF2LWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJuYXYtbGlua1wiIGhyZWY9XCIvcHJvZHVjdHNcIj48aSBjbGFzcz1cImJpIGJpLWJveC1zZWFtXCI+PC9pPiDQodGC0L7QutC4PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibmF2LWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJuYXYtbGlua1wiIGhyZWY9XCIvb3JkZXJzL2NyZWF0ZVwiPjxpIGNsYXNzPVwiYmkgYmktcGx1c1wiPjwvaT4g0KHRitC30LTQsNC5INC/0YDQvtC00LDQttCx0LA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJuYXYtaXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cIm5hdi1saW5rXCIgaHJlZj1cIi9vcmRlcnNcIj48aSBjbGFzcz1cImJpIGJpLWNhcnRcIj48L2k+INCf0YDQvtC00LDQttCx0Lg8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJuYXYtaXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cIm5hdi1saW5rXCIgaHJlZj1cIi9jdXN0b21lcnNcIj48aSBjbGFzcz1cImJpIGJpLXBlb3BsZVwiPjwvaT4g0J/QsNGA0YLQvdGM0L7RgNC4PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgJHtsb2dnZWRJblVzZXIgJiYgWydtYW5hZ2VyJywgJ2FkbWluJ10uaW5jbHVkZXMobG9nZ2VkSW5Vc2VyLnJvbGUpID8gaHRtbGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibmF2LWl0ZW0gZHJvcGRvd25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJuYXYtbGluayBkcm9wZG93bi10b2dnbGVcIiBocmVmPVwiI1wiIHJvbGU9XCJidXR0b25cIiBkYXRhLWJzLXRvZ2dsZT1cImRyb3Bkb3duXCIgYXJpYS1leHBhbmRlZD1cImZhbHNlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImJpIGJpLWZpbGUtZWFybWFyay10ZXh0XCI+PC9pPiDQodC/0YDQsNCy0LrQuFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUgZHJvcGRvd24tbWVudS1tZC1lbmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBocmVmPVwiL3JlZmVyZW5jZXMvb3JkZXJzXCI+PGkgY2xhc3M9XCJiaSBiaS1maWxlLWVhcm1hcmstdGV4dFwiPjwvaT4g0KHQv9GA0LDQstC60LAg0L/QviDQv9GA0L7QtNCw0LbQsdC4PC9hPjwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5gIDogJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibmF2LWl0ZW0gZHJvcGRvd25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJuYXYtbGluayBkcm9wZG93bi10b2dnbGVcIiBocmVmPVwiI1wiIHJvbGU9XCJidXR0b25cIiBkYXRhLWJzLXRvZ2dsZT1cImRyb3Bkb3duXCIgYXJpYS1leHBhbmRlZD1cImZhbHNlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICDQlNGA0YPQs9C4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudSBkcm9wZG93bi1tZW51LW1kLWVuZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxidXR0b24gY2xhc3M9XCJkcm9wZG93bi1pdGVtXCIgQGNsaWNrPSR7dG9nZ2xlRGFya01vZGV9PjxpIGNsYXNzPVwiYmkgYmktbW9vblwiPjwvaT4g0KLRitC80LXQvSDRgNC10LbQuNC8PC9idXR0b24+PC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBocmVmPVwiL2NhdGVnb3JpZXNcIj48aSBjbGFzcz1cImJpIGJpLXRhZ3NcIj48L2k+INCa0LDRgtC10LPQvtGA0LjQuDwvYT48L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtsb2dnZWRJblVzZXIgJiYgWydtYW5hZ2VyJywgJ2FkbWluJ10uaW5jbHVkZXMobG9nZ2VkSW5Vc2VyLnJvbGUpID8gaHRtbGA8bGk+PGJ1dHRvbiBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBAY2xpY2s9JHtkb3dubG9hZFByb2R1Y3RzVVJMU30+PGkgY2xhc3M9XCJiaSBiaS1kb3dubG9hZFwiPjwvaT4g0JvQuNC90LrQvtCy0LUg0LfQsCDQv9GA0L7QtNGD0LrRgtC40YLQtTwvYnV0dG9uPjwvbGk+YCA6ICcnfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibmF2LWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJuYXYtbGluayBsaW5rLWRhbmdlclwiIEBjbGljaz0ke2xvZ291dH0gaHJlZj1cIiNcIj48aSBjbGFzcz1cImJpIGJpLWJveC1hcnJvdy1sZWZ0XCI+PC9pPiDQmNC30YXQvtC0PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvbmF2PlxyXG5gOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/nav.js\n");

/***/ }),

/***/ "./src/views/orders/createEdit.js":
/*!****************************************!*\
  !*** ./src/views/orders/createEdit.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEditOrderPage: () => (/* binding */ createEditOrderPage)\n/* harmony export */ });\n/* harmony import */ var _css_orders_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/css/orders.css */ \"./src/css/orders.css\");\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/api */ \"./src/api.js\");\n/* harmony import */ var _views_nav__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/views/nav */ \"./src/views/nav.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _views_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/views/components */ \"./src/views/components.js\");\n/* harmony import */ var _views_login__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/views/login */ \"./src/views/login.js\");\n/* harmony import */ var quagga__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! quagga */ \"./node_modules/quagga/dist/quagga.js\");\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar order, defaultValues, params, companies, documentType, orderType, products, selectedCustomer, selectedCompany, customers, addedProductsIndex = 0, addedProducts = [];\r\n\r\nfunction changeOrderType(e) {\r\n    orderType = e.target.value;\r\n\r\n    // recalculate price for every added product\r\n    addedProducts.forEach(product => {\r\n        if (product.product)\r\n            product.price = orderType === 'wholesale' ? product.product.wholesalePrice : product.product.retailPrice;\r\n    })\r\n    rerenderTable();\r\n}\r\n\r\nfunction selectDocumentType(e) {\r\n    documentType = e.target.value;\r\n    rerenderTable();\r\n}\r\n\r\nfunction rerenderTable() {\r\n    orderType === 'wholesale' ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(wholesaleProductsTable(addedProducts), document.getElementById('table')) : (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(retailProductsTable(addedProducts), document.getElementById('table'));\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(bottomRow(params, companies), document.getElementById('bottomRow'));\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(woocommerceTemplate(), document.getElementById('woocommerce'));\r\n\r\n    // update total in bottom row\r\n    const total = addedProducts.reduce((acc, product) => acc + (product.price * product.quantity) * (1 - product.discount / 100), 0);\r\n    document.getElementById('total').textContent = (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPrice)(total);\r\n}\r\n\r\nfunction selectCustomer(e) {\r\n    if (e.target.value.split('[').length < 2) return;\r\n    const selectedVat = e.target.value.split('[')[1].split(']')[0];\r\n\r\n    selectedCustomer = customers.find(customer => customer.vat === selectedVat);\r\n\r\n    addedProducts.forEach(product => product.discount = selectedCustomer.discount || 0);\r\n    rerenderTable();\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(receiverTemplate(selectedCustomer.receivers), document.getElementById('receiverDiv'));\r\n}\r\n\r\nfunction selectCompany(e) {\r\n    const company = e.target.value;\r\n    selectedCompany = companies.find(c => c._id === company);\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(senderTemplate(), document.getElementById('senderDiv'));\r\n}\r\n\r\nfunction setDiscount() {\r\n    if (!selectedCustomer)\r\n        return alert('Първо избери партньор!');\r\n    let discount = prompt('Въведи обща отстъпка в %', selectedCustomer?.discount || 0);\r\n\r\n    if (discount < 0 || isNaN(discount))\r\n        discount = 0;\r\n    else if (discount > 100)\r\n        discount = 100;\r\n\r\n    selectedCustomer.discount = discount;\r\n    addedProducts.forEach(product => product.discount = discount);\r\n    rerenderTable();\r\n}\r\n\r\nconst topRow = (params, customers) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <div class=\"row align-items-end g-3\">\r\n        <div class=\"col-6 col-sm\">\r\n            <label for=\"customer\" class=\"form-label\">Партньор:</label>\r\n            <input @change=${selectCustomer} .value=${order ? `${order.customer.name} [${order.customer.vat}] ${order.customer.phone ? `(${order.customer.phone})` : ''}` : ''} list=\"customersList\" placeholder=\"Въведи име или булстат\" name=\"customer\" id=\"customer\" class=\"form-control\" autocomplete=\"off\" ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)} required>\r\n            <datalist id=\"customersList\">\r\n                ${customers && customers.map(customer => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option value=${`${customer.name} [${customer.vat}] ${customer.phone ? `(${customer.phone})` : ''}`}></option>`)};\r\n            </datalist>\r\n        </div>\r\n        <div class=\"col-6 col-sm\">\r\n            <label for=\"type\" class=\"form-label\">Тип на документ:</label>\r\n            <select name=\"type\" @change=${selectDocumentType} id=\"type\" class=\"form-control\" required ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)}>\r\n                ${Object.entries(params.documentTypes).map(type => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option ?selected=${(order && type[0] == order.type) || (!order && type[0] === documentType)} value=${type[0]}>${type[1]}</option>`)}\r\n            </select>\r\n        </div>\r\n        <div class=\"col-6 col-sm\">\r\n            <label for=\"date\" class=\"form-label\">Дата:</label>\r\n            <input type=\"date\" name=\"date\" id=\"date\" class=\"form-control\" ?disabled=${!['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)} required>\r\n        </div>\r\n        <div class=\"col-6 col-sm\">\r\n            <label for=\"number\" class=\"form-label\">Документ номер:</label>\r\n            <input type=\"text\" name=\"number\" id=\"number\" inputmode=\"numeric\" class=\"form-control\" autocomplete=\"off\" value=${order && order.number} disabled placeholder=\"Автоматично\">\r\n        </div>\r\n        <div class=\"col-6 col-sm\">\r\n            <label for=\"orderType\" class=\"form-label\">Тип на продажба:</label>\r\n            <select ?disabled=${order} @change=${changeOrderType} name=\"orderType\" id=\"orderType\" class=\"form-control\" required>\r\n                ${Object.entries(params.orderTypes).map(type => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option ?selected=${(order && type[0] == order.orderType) || (!order && type[0] === defaultValues.find(d => d.key === 'orderType').value)} value=${type[0]}>${type[1]}</option>`)}\r\n            </select>\r\n        </div>\r\n        <div class=\"col-6 col-sm\">\r\n            <button @click=${setDiscount} type=\"button\" class=\"btn btn-secondary\" ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)}>Задай обща отстъпка</button>\r\n        </div>\r\n    </div>\r\n`;\r\n\r\nconst senderTemplate = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <label for=\"sender\" class=\"form-label\">Предал:</label>\r\n    <input list=\"sendersList\" class=\"form-control\" name=\"sender\" id=\"sender\" type=\"text\" .value=${order?.sender || selectedCompany?.senders?.slice(-1)[0] || ''} ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)} autocomplete=\"off\" required/>\r\n    <datalist id=\"sendersList\">\r\n        ${selectedCompany && selectedCompany?.senders?.map(sender => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option value=${sender}></option>`)}\r\n    </datalist>\r\n`;\r\n\r\nconst receiverTemplate = (receivers) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <label for=\"receiver\" class=\"form-label\">Получил:</label>\r\n    <input list=\"receiversList\" class=\"form-control\" name=\"receiver\" id=\"receiver\" type=\"text\" .value=${order?.receiver || receivers?.slice(-1)[0] || ''} autocomplete=\"off\" ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)} required/>\r\n    <datalist id=\"receiversList\">\r\n        ${receivers?.map(receiver => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option value=${receiver}></option>`)}\r\n    </datalist>\r\n`;\r\n\r\nconst bottomRow = (params, companies) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <div class=\"col-6 col-sm\">\r\n        <label for=\"company\" class=\"form-label\">Обект:</label>\r\n        <select @change=${selectCompany} name=\"company\" id=\"company\" class=\"form-control\" ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)} required>\r\n            ${companies && companies.map(company => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option ?selected=${order && company._id == order.company._id} value=${company._id}>${company.name}</option>`)}\r\n        </select>\r\n    </div>\r\n\r\n    <div id=\"receiverDiv\" class=\"col-6 col-sm\"></div>\r\n\r\n    <div id=\"senderDiv\" class=\"col-6 col-sm\"></div>\r\n\r\n    <div class=\"col-6 col-sm\">\r\n        <label for=\"paymentType\" class=\"form-label\">Начин на плащане:</label>\r\n        <select name=\"paymentType\" id=\"paymentType\" class=\"form-control\" ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)} required>\r\n            ${Object.entries(params.paymentTypes).map(type => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option ?selected=${(order && type[0] == order.paymentType) || (!order && type[0] === defaultValues.find(d => d.key === 'paymentType').value)} value=${type[0]}>${type[1]}</option>`)}\r\n        </select>\r\n    </div>\r\n\r\n    <div class=\"col-12 col-sm\">\r\n        <label for=\"paidAmount\" class=\"form-label\">Платена сума:</label>\r\n        <input class=\"form-control\" name=\"paidAmount\" id=\"paidAmount\" type=\"text\" .value=${order ? order.paidAmount : 0} autocomplete=\"off\" inputmode=\"decimal\" required ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)}/>\r\n    </div>\r\n\r\n    ${documentType === 'invoice' ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        <div class=\"col-12 col-sm\">\r\n        <div class=\"form-check\">\r\n            <input class=\"form-check-input\" type=\"checkbox\" id=\"printCopy\" ?checked=${['originalCopy', 'originalCopyStokova'].includes(defaultValues.find(d => d.key === 'orderPrint').value)}>\r\n            <label class=\"form-check-label\" for=\"printCopy\">\r\n                Копие на фактура\r\n            </label>\r\n        </div>\r\n\r\n        <div class=\"form-check\">\r\n            <input class=\"form-check-input\" type=\"checkbox\" id=\"printStokova\" ?checked=${'originalCopyStokova' === defaultValues.find(d => d.key === 'orderPrint').value}>\r\n            <label class=\"form-check-label\" for=\"printStokova\">\r\n                Стокова разписка\r\n            </label>\r\n        </div>\r\n    </div>` : ''}\r\n\r\n    <div class=\"col-12 col-sm text-center\">\r\n        <div >Общо: <span id=\"total\"></span></div>\r\n        ${(0,_views_components__WEBPACK_IMPORTED_MODULE_5__.submitBtn)({ func: createEditOrder, text: \"Запази и принтирай\", type: \"button\" })}\r\n    </div>\r\n`;\r\n\r\nconst speedyTemplate = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <div>Доставка до: ${order.woocommerce.speedy.office ? \"Офис\" : \"Адрес\"}</div>\r\n    <div>Държава: ${order.woocommerce.speedy.country}</div>\r\n    <div>Град: ${order.woocommerce.speedy.locality}</div>\r\n    ${order.woocommerce.speedy.office ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<div>Офис: ${order.woocommerce.speedy.office}</div>` : ''}\r\n    ${order.woocommerce.speedy.street ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        <div>Улица: ${order.woocommerce.speedy.street} ${order.woocommerce.speedy.number ? `№ ${order.woocommerce.speedy.number}` : ''} ${order.woocommerce.speedy.entrance ? `вх. ${order.woocommerce.speedy.entrance}` : ''} ${order.woocommerce.speedy.floor ? `ет. ${order.woocommerce.speedy.floor}` : ''} ${order.woocommerce.speedy.apartment ? `ап. ${order.woocommerce.speedy.apartment}` : ''}</div>\r\n        ${order.woocommerce.speedy.note ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<div>Бележка: ${order.woocommerce.speedy.note}</div>` : ''}\r\n` : ''}\r\n    <div>Сума: ${(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPrice)(order.woocommerce.speedy.total)}</div>\r\n`;\r\n\r\nconst econtTemplate = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <div>Доставка до: ${order.woocommerce.econt.ship_to}</div>\r\n    <div>Град: ${order.woocommerce.econt.city}</div>\r\n    <div>Пощенски код: ${order.woocommerce.econt.postal_code}</div>\r\n    ${order.woocommerce.econt.office ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<div>${order.woocommerce.econt.office}</div>` : (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`Адрес: ${order.woocommerce.econt.street} ${order.woocommerce.econt.number ? '№ ' + order.woocommerce.econt.number : ''} ${order.woocommerce.econt.entrance ? 'вх. ' + order.woocommerce.econt.entrance : ''} ${order.woocommerce.econt.floor ? 'ет. ' + order.woocommerce.econt.floor : ''} ${order.woocommerce.econt.apartment ? 'ап. ' + order.woocommerce.econt.apartment : ''}</div>`}\r\n    <div>Сума: ${(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPrice)(order.woocommerce.econt.total)}</div>\r\n    ${order.woocommerce.econt.note ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<div>Бележка: ${order.woocommerce.econt.note}</div>` : ''}\r\n`;\r\n\r\nconst shippingTemplate = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)``;\r\n\r\nconst woocommerceTemplate = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <!-- ID -->\r\n     <div class=\"col-3\">\r\n        <div>WooCommerce ID: ${order && order.woocommerce.id}</div>\r\n     </div>\r\n    <!-- Status -->\r\n    <div class=\"col-3\">\r\n        <label for=\"status\" class=\"form-label\">Статус:</label>\r\n        <select name=\"status\" id=\"status\" class=\"form-control\" required>\r\n            ${Object.entries(params.woocommerce.status).map(type => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option ?selected=${order && type[0] == order.status} value=${type[0]}>${type[1]}</option>`)}\r\n        </select>\r\n    </div>\r\n    <div class=\"col-3\">\r\n        <div>Доставка: ${order && (order.woocommerce.speedy ? 'Speedy' : order.woocommerce.econt ? 'Еконт' : order.woocommerce.shipping)}</div>\r\n        ${order && order.woocommerce.speedy ? speedyTemplate() : order && order.woocommerce.econt ? econtTemplate() : shippingTemplate()}\r\n    </div>\r\n        <!-- Note -->\r\n`;\r\n\r\nfunction updateQuantity(e) {\r\n    const index = e.target.closest('tr').getAttribute('addedProductsIndex');\r\n    // find actual index in the array of addedProducts\r\n    const arrayIndex = addedProducts.indexOf(addedProducts.find(product => product.index == index));\r\n\r\n    e.target.value = parseInt(e.target.value);\r\n\r\n    if (orderType === 'wholesale') {\r\n        if (order)\r\n            addedProducts[arrayIndex].quantity = e.target.value;\r\n        else if (e.target.max !== '' && +e.target.value > +e.target.max) {\r\n            e.target.value = e.target.max;\r\n            addedProducts[arrayIndex].quantity = e.target.max;\r\n        }\r\n        else\r\n            addedProducts[arrayIndex].quantity = e.target.value;\r\n    } else if (orderType === 'retail') {\r\n        if (order) {\r\n            addedProducts[arrayIndex].quantity = e.target.value;\r\n        }\r\n        else if (e.target.max !== '' && +e.target.value > +e.target.max) {\r\n            e.target.value = e.target.max;\r\n            addedProducts[arrayIndex].quantity = e.target.max;\r\n        }\r\n        else\r\n            addedProducts[arrayIndex].quantity = e.target.value;\r\n    }\r\n\r\n    rerenderTable();\r\n}\r\n\r\nfunction updateSize(e) {\r\n    const index = e.target.closest('tr').getAttribute('addedProductsIndex');\r\n    // find actual index in the array of addedProducts\r\n    const arrayIndex = addedProducts.indexOf(addedProducts.find(product => product.index == index));\r\n    addedProducts[arrayIndex].size = e.target.value;\r\n\r\n    if (orderType === 'retail' && !order) {// if order retail, compare current qty with newly selected size available qty\r\n        const maxQtyForSize = addedProducts[arrayIndex].product?.sizes.find(s => s.size == addedProducts[arrayIndex].size).quantity\r\n        addedProducts[arrayIndex].quantity = addedProducts[arrayIndex].quantity > maxQtyForSize ? parseInt(maxQtyForSize) : addedProducts[arrayIndex].quantity;\r\n    }\r\n\r\n    rerenderTable();\r\n}\r\n\r\nfunction updateDiscount(e) {\r\n    const target = e.target;\r\n    (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.fixInputPrice)(target);\r\n    let value = target.value;\r\n\r\n    const index = e.target.closest('tr').getAttribute('addedProductsIndex');\r\n    // find actual index in the array of addedProducts\r\n    const arrayIndex = addedProducts.indexOf(addedProducts.find(product => product.index == index));\r\n\r\n    if (value > 100)\r\n        target.value = 100;\r\n    else if (value < 0)\r\n        target.value = 0;\r\n\r\n    value = target.value\r\n\r\n    addedProducts[arrayIndex].discount = value;\r\n    rerenderTable();\r\n}\r\n\r\nfunction updatePrice(e) {\r\n    const target = e.target;\r\n    (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.fixInputPrice)(target, true);\r\n    const value = target.value;\r\n\r\n    const index = e.target.closest('tr').getAttribute('addedProductsIndex');\r\n    // find actual index in the array of addedProducts\r\n    const arrayIndex = addedProducts.indexOf(addedProducts.find(product => product.index == index));\r\n\r\n    addedProducts[arrayIndex].price = value;\r\n    rerenderTable();\r\n}\r\n\r\nfunction updateQtyInPackage(e) {\r\n    const index = e.target.closest('tr').getAttribute('addedProductsIndex');\r\n    // find actual index in the array of addedProducts\r\n    const arrayIndex = addedProducts.indexOf(addedProducts.find(product => product.index == index));\r\n    e.target.value ? addedProducts[arrayIndex].qtyInPackage = parseInt(e.target.value) : delete addedProducts[arrayIndex].qtyInPackage;\r\n    rerenderTable();\r\n}\r\n\r\nfunction updateUnitOfMeasure(e) {\r\n    const index = e.target.closest('tr').getAttribute('addedProductsIndex');\r\n    // find actual index in the array of addedProducts\r\n    const arrayIndex = addedProducts.indexOf(addedProducts.find(product => product.index == index));\r\n    addedProducts[arrayIndex].unitOfMeasure = e.target.value;\r\n    rerenderTable();\r\n}\r\n\r\nfunction removeProduct(e) {\r\n    const index = e.target.closest('tr').getAttribute('addedProductsIndex');\r\n    addedProducts = addedProducts.filter(product => product.index != index);\r\n    rerenderTable();\r\n}\r\n\r\nconst addProductRow = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n<tr id=\"addNewProduct\">\r\n    <td colspan=\"3\">\r\n        <div class=\"input-group\">\r\n            <input @keyup=${addProduct} placeholder=\"Баркод/код\" class=\"form-control\" type=\"text\" name=\"product\" id=\"product\" autocomplete=\"off\">\r\n            <button @click=${scanBarcode} class=\"btn btn-primary\" type=\"button\" id=\"scanBarcode\"><i class=\"bi bi-camera\"></i> Сканирай</button>\r\n            <button @click=${stopBarcode} class=\"btn btn-primary d-none\" type=\"button\" id=\"stopBarcode\"><i class=\"bi bi-camera\"></i> Затвори</button>\r\n        </div>\r\n    </td>\r\n    <td colspan=\"6\">\r\n        <div id=\"barcodeVideo\"></div>\r\n    </td>\r\n</tr>\r\n`;\r\n\r\nfunction updateSelectedSizes(e) {\r\n    const index = e.target.closest('tr').getAttribute('addedProductsIndex');\r\n    // find actual index in the array of addedProducts\r\n    const arrayIndex = addedProducts.indexOf(addedProducts.find(product => product.index == index));\r\n\r\n    if (!e.target.checked) addedProducts[arrayIndex].selectedSizes = addedProducts[arrayIndex].selectedSizes.filter(size => size !== e.target.value);\r\n    else addedProducts[arrayIndex].selectedSizes.push(e.target.value);\r\n\r\n    // Update price based on selected sizes length\r\n    if (addedProducts[arrayIndex].selectedSizes.length > 0) {\r\n        const unitPrice = addedProducts[arrayIndex].product.wholesalePrice / addedProducts[arrayIndex].product.sizes.length;\r\n        addedProducts[arrayIndex].price = (unitPrice * addedProducts[arrayIndex].selectedSizes.length).toFixed(2);\r\n    } else addedProducts[arrayIndex].price = 0;\r\n\r\n    rerenderTable();\r\n}\r\n\r\nconst checkboxSizes = (product) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    ${product?.product?.sizes?.map(size => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        <div class=\"form-check\">\r\n            <input class=\"form-check-input\" @change=${updateSelectedSizes} name=\"${product.index}-${size.size}\" type=\"checkbox\" value=${size.size} ?checked=${product?.selectedSizes?.includes(size.size)} ?disabled=${!order && product.product.sizes.find(s => s.size === size.size).quantity === 0} id=\"${product.index}-${size.size}\">\r\n            <label class=\"form-check-label\" for=\"${product.index}-${size.size}\">\r\n                ${size.size}\r\n            </label>\r\n        </div>`)\r\n    }`;\r\n\r\nconst wholesaleProductsTable = (products) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <table id=\"orders\" class=\"table mt-3 table-striped\">\r\n        <thead>\r\n            <tr>\r\n                <th>Продукт</th>\r\n                <th>Брой в пакет</th>\r\n                <th>Цена за брой</th>\r\n                <th>Мярка</th>\r\n                <th>Количество</th>\r\n                <th>Цена</th>\r\n                <th>Отстъпка %</th>\r\n                <th>Сума</th>\r\n                <th>Действия</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody class=\"table-group-divider\">\r\n            ${products?.map(product => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n                <tr addedProductsIndex=${product.index}>\r\n                    <td>${product?.product?.name || product.name} ${product.product && '[#' + product.product.code + ']'}</td>\r\n                    ${product.product ?\r\n        (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<td>${product.product.sizes.length ? checkboxSizes(product) : ''}</td>`\r\n        : (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<td><input @change=${updateQtyInPackage} name=\"qtyInPackage\" class= \"form-control\" .value=${product.qtyInPackage || \"\"} type=\"number\" step=\"1\" min=\"0\" inputmode=\"numeric\" ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)}/></td>`}\r\n\r\n                    <td>${product?.product?.sizes?.length ? (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPrice)(product.product.wholesalePrice / product.product.sizes.length) : product.qtyInPackage ? (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPrice)(product.price / product.qtyInPackage) : ''}</td>\r\n\r\n                    <td>${product?.product?.unitOfMeasure || (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<input @change=${updateUnitOfMeasure} type=\"text\" class=\"form-control\" required name=\"unitOfMeasure\" ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)} .value=${product.unitOfMeasure}/>`}</td>\r\n\r\n                    <td>\r\n                        <div class=\"input-group\">\r\n                            <input @change=${updateQuantity} @keyup=${updateQuantity} name=\"quantity\" class=\"form-control\" type=\"number\" .value=${product.quantity} step=\"1\" min=\"1\" inputmode=\"numeric\" required ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)}/>\r\n                            ${product?.product?.quantity ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<span class=\"input-group-text\">/${product?.product?.quantity}</span>` : ''}\r\n                        </div>\r\n                    </td>\r\n\r\n                    <td><input @change=${updatePrice} @keyup=${updatePrice} name=\"price\" class=\"form-control\" type=\"text\" .value=${product.price} inputmode=\"decimal\" required ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)}/></td>\r\n\r\n                    <td><input @change=${updateDiscount} @keyup=${updateDiscount} name=\"discount\" class=\"form-control\" type=\"text\" inputmode=\"decimal\" .value=${product.discount} required ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)}/></td>\r\n                    <td name=\"subtotal\">${(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPrice)((product.price * product.quantity) * (1 - product.discount / 100))}</td>\r\n                    <td style=\"text-align: end\">\r\n                        ${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role) ? '' : (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<button @click=${removeProduct} type=\"button\" class=\"btn btn-danger\">X</button>`}</td>\r\n                </tr>\r\n                `)}\r\n\r\n            ${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role) ? '' : addProductRow()}\r\n        </tbody>\r\n    </table>\r\n`;\r\n\r\nconst retailProductsTable = (products) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <table class=\"table mt-3 table-striped\">\r\n        <thead>\r\n            <tr>\r\n                <th>Продукт</th>\r\n                <th>Размер</th>\r\n                <th>Мярка</th>\r\n                <th>Количество</th>\r\n                <th>Цена</th>\r\n                <th>Отстъпка %</th>\r\n                <th>Сума</th>\r\n                <th>Действия</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            ${products?.map(product => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n                <tr addedProductsIndex=${product.index}>\r\n                    <td>${product?.product?.name || product.name} ${product.product && '[#' + product.product.code + ']'}</td>\r\n\r\n                    <td>\r\n                        ${product.product && product.product.sizes.length ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n                            <select @change=${updateSize} name=\"size\" class=\"form-control\" required ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)}>\r\n                                <option ?selected=${!product?.size} disabled>Избери</option>\r\n                                ${product.product.sizes.map(size => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option value=${size.size} ?selected=${size.size === product.size} ?disabled=${size.quantity < 1}>${size.size}</option>`)}\r\n                            </select>` : product.product ? '' : (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<input @change=${updateSize} name=\"size\" class=\"form-control\" type=\"text\" .value=${product?.size || ''} ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)} />`}\r\n                    </td>\r\n\r\n\r\n                    <td>${product?.product?.unitOfMeasure === 'пакет' ? ' бр.' : product?.product?.unitOfMeasure || (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<input @change=${updateUnitOfMeasure} type=\"text\" class=\"form-control\" required name=\"unitOfMeasure\" ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)} .value=${product.unitOfMeasure}/>`}</td>\r\n\r\n                    <td>\r\n                        <div class=\"input-group\">\r\n                            <input @change=${updateQuantity} name=\"quantity\" class=\"form-control\" type=\"number\" .value=${product.quantity} step=\"1\" min=\"1\" inputmode=\"numeric\" .max=${!order && product.size && product?.product?.sizes?.find(s => s.size == product.size)?.quantity}  required ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)}/>\r\n                            <span class=\"input-group-text\" id=\"basic-addon2\">/${product.size ? product?.product?.sizes.find(s => s.size == product.size).quantity : product?.product?.quantity || ''}</span>\r\n                        </div>\r\n                    </td>\r\n\r\n                    <td><input @change=${updatePrice} name=\"price\" class=\"form-control\" type=\"text\" .value=${product.price} inputmode=\"decimal\" required ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)}/></td>\r\n\r\n                    <td><input @change=${updateDiscount} name=\"discount\" class=\"form-control\" type=\"number\" step=\"0.1\" inputmode=\"numeric\" .value=${product.discount} required ?disabled=${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)}/></td>\r\n\r\n                    <td name=\"subtotal\">${(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPrice)((product.price * product.quantity) * (1 - product.discount / 100))}</td>\r\n\r\n                    <td>\r\n                        ${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role) ? '' : (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<button @click=${removeProduct} type=\"button\" class=\"btn btn-danger\">X</button>`}</td>\r\n                </tr>`)}\r\n            ${order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role) ? '' : addProductRow()}\r\n        </tbody>\r\n    </table>\r\n`;\r\n\r\nvar lastScanTime;\r\nfunction scanBarcode() {\r\n    const videoEl = document.getElementById('barcodeVideo');\r\n    const scanBarcodeBtn = document.getElementById('scanBarcode');\r\n    const cancelBarcodeBtn = document.getElementById('stopBarcode');\r\n    scanBarcodeBtn.classList.add('d-none');\r\n    cancelBarcodeBtn.classList.remove('d-none');\r\n\r\n    const config = {\r\n        inputStream: {\r\n            name: \"Live\",\r\n            type: \"LiveStream\",\r\n            target: videoEl,\r\n            constraints: {\r\n                facingMode: \"environment\",\r\n            },\r\n        },\r\n        decoder: {\r\n            readers: [\"ean_reader\", \"code_128_reader\"],\r\n        },\r\n    };\r\n\r\n    quagga__WEBPACK_IMPORTED_MODULE_7__.init(config, function (err) {\r\n        if (err) return console.error(err);\r\n        quagga__WEBPACK_IMPORTED_MODULE_7__.start();\r\n\r\n        quagga__WEBPACK_IMPORTED_MODULE_7__.onDetected(data => {\r\n            const barcode = data.codeResult.code;\r\n            const now = new Date().getTime();\r\n\r\n            // pause scanning for 1 second to skip duplicates\r\n            if (now < lastScanTime + 1000)\r\n                return;\r\n\r\n            lastScanTime = now;\r\n\r\n            const input = document.getElementById('product');\r\n            input.value += barcode;\r\n\r\n            // simulate Enter key pressed on input field to activate addProduct function\r\n            const event = new KeyboardEvent('keyup', {\r\n                key: 'Enter',\r\n                code: 'Enter',\r\n                which: 13,\r\n                keyCode: 13,\r\n            });\r\n\r\n            // dispatch the event on some DOM element\r\n            input.dispatchEvent(event);\r\n        });\r\n    });\r\n}\r\n\r\nfunction stopBarcode() {\r\n    const videoEl = document.getElementById('barcodeVideo');\r\n    const scanBarcodeBtn = document.getElementById('scanBarcode');\r\n    const cancelBarcodeBtn = document.getElementById('stopBarcode');\r\n\r\n    scanBarcodeBtn.classList.remove('d-none');\r\n    cancelBarcodeBtn.classList.add('d-none');\r\n    videoEl.innerHTML = '';\r\n    quagga__WEBPACK_IMPORTED_MODULE_7__.stop();\r\n    quagga__WEBPACK_IMPORTED_MODULE_7__.offDetected();\r\n}\r\n\r\nfunction addProduct(e) {\r\n    e.preventDefault();\r\n\r\n    if (e.target.value === '') return;\r\n\r\n    // return if not any of the key combinations below (CTRL+V, MAC+V, ENTER, NUM ENTER)\r\n    if ((e.ctrlKey && e.key !== 'v' || e.code !== 'MetaLeft') && e.code !== 'Enter' && e.code !== 'NumpadEnter') return;\r\n\r\n    var product, quantity = 1;\r\n\r\n    // check if quantity was entered in input field\r\n    if (e.target.value.split('*').length === 1)\r\n        product = e.target.value;\r\n    else {\r\n        quantity = parseInt(e.target.value.split('*')[0]);\r\n        quantity = !isNaN(quantity) && quantity > 0 ? quantity : 1;\r\n        product = e.target.value.split('*')[1];\r\n    }\r\n\r\n    // check if product exists in db by code, barcode (13 digit) or barcode (minus the first digit because its skipped by the scanner)\r\n    const productInDB = products.find(p => p.code === product || p.barcode === product || p.barcode.slice(1) === product);\r\n\r\n    // Wholesale + IN DB + variable\r\n    if (orderType === 'wholesale' && productInDB && productInDB.sizes?.length > 0) {\r\n        // Check if already in addedProducts and if all sizes are selected\r\n        const inArray = addedProducts.find(p => p.product._id === productInDB._id && p.selectedSizes.length === p.sizes.length);\r\n\r\n        if (inArray) inArray.quantity += quantity;\r\n        else {\r\n            const temp = {\r\n                index: addedProductsIndex++,\r\n                product: productInDB,\r\n                selectedSizes: productInDB.sizes.filter(s => s.quantity > 0).map(s => s.size), // selected (checked) sizes\r\n                sizes: productInDB.sizes.map(s => s.size), // all available sizes to select\r\n                quantity: quantity > productInDB.quantity ? productInDB.quantity || 1 : quantity, // if qty in db is 0, set to 1. if qty is more than in db, set it as max\r\n                price: productInDB.wholesalePrice,\r\n                unitPrice: productInDB.wholesalePrice / productInDB.sizes.length, // only used to display the price per unit in column\r\n                discount: selectedCustomer?.discount || 0\r\n            };\r\n\r\n            if (temp.selectedSizes.length !== productInDB.sizes.length) {\r\n                const unitPrice = productInDB.wholesalePrice / productInDB.sizes.length;\r\n                temp.price = (unitPrice * temp.selectedSizes.length).toFixed(2);\r\n            }\r\n\r\n            addedProducts.push(temp);\r\n        }\r\n    }\r\n    // Wholesale + IN DB + simple\r\n    else if (orderType === 'wholesale' && productInDB && productInDB.sizes?.length === 0) {\r\n        const inArray = addedProducts.find(p => p.product._id === productInDB._id);\r\n        // Check if product is already in addedProducts\r\n        if (inArray) {\r\n            inArray.quantity += quantity;\r\n            // if qty is more than in db, set it as max\r\n            if (inArray.quantity > productInDB.quantity)\r\n                inArray.quantity = productInDB.quantity;\r\n        }\r\n        else\r\n            addedProducts.push({\r\n                index: addedProductsIndex++,\r\n                product: productInDB,\r\n                unitOfMeasure: productInDB.unitOfMeasure,\r\n                quantity: quantity > productInDB.quantity ? productInDB.quantity : quantity,\r\n                price: productInDB.wholesalePrice,\r\n                discount: selectedCustomer?.discount || 0\r\n            });\r\n    }\r\n\r\n    // Retail + IN DB + variable\r\n    else if (orderType === 'retail' && productInDB && productInDB.sizes?.length > 0) {\r\n        const inArray = addedProducts.find(p => p.product._id === productInDB._id && !p.size);\r\n        // Check if already in addedProducts and NO size is selected\r\n        if (inArray) {\r\n            inArray.quantity += quantity;\r\n        } else\r\n            addedProducts.push({\r\n                index: addedProductsIndex++,\r\n                product: productInDB,\r\n                unitOfMeasure: productInDB.unitOfMeasure,\r\n                quantity,\r\n                price: productInDB.retailPrice,\r\n                discount: selectedCustomer?.discount || 0\r\n            });\r\n    }\r\n\r\n    // Retail + IN DB + simple\r\n    else if (orderType === 'retail' && productInDB && productInDB.sizes?.length === 0) {\r\n        const inArray = addedProducts.find(p => p.product._id === productInDB._id);\r\n        // Check if already in addedProducts\r\n        if (inArray) {\r\n            inArray.quantity += quantity;\r\n            // if qty is more than qty in db, set it as max\r\n            if (inArray.quantity > productInDB.quantity)\r\n                inArray.quantity = productInDB.quantity;\r\n        }\r\n        else\r\n            addedProducts.push({\r\n                index: addedProductsIndex++,\r\n                product: productInDB,\r\n                quantity: quantity > productInDB.quantity ? productInDB.quantity : quantity,\r\n                price: productInDB.retailPrice,\r\n                unitOfMeasure: productInDB.unitOfMeasure === 'пакет' ? 'бр.' : productInDB.unitOfMeasure,\r\n                discount: selectedCustomer?.discount || 0\r\n            });\r\n    }\r\n\r\n    // Wholesale and NOT in DB\r\n    else if (orderType === 'wholesale' && !productInDB)\r\n        addedProducts.push({\r\n            index: addedProductsIndex++,\r\n            name: product,\r\n            quantity,\r\n            price: 0,\r\n            qtyInPackage: 0,\r\n            unitOfMeasure: 'пакет',\r\n            discount: selectedCustomer?.discount || 0\r\n        });\r\n\r\n    // Retail and NOT in DB\r\n    else if (orderType === 'retail' && !productInDB)\r\n        addedProducts.push({\r\n            index: addedProductsIndex++,\r\n            name: product,\r\n            quantity,\r\n            price: 0,\r\n            unitOfMeasure: 'бр.',\r\n            discount: selectedCustomer?.discount || 0\r\n        });\r\n\r\n    (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.successScan)(e.target);\r\n    rerenderTable();\r\n\r\n    e.target.value = '';\r\n    e.target.focus();\r\n}\r\n\r\nfunction validateOrder(data) {\r\n    var invalidFlag = false;\r\n\r\n    if (!data.customer) {\r\n        (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('customer');\r\n        invalidFlag = true;\r\n    } else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('customer');\r\n\r\n    if (!data.type) {\r\n        (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('type');\r\n        invalidFlag = true;\r\n    } else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('type');\r\n\r\n    if (!data.date) {\r\n        (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('date');\r\n        invalidFlag = true;\r\n    } else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('date');\r\n\r\n    if (!data.orderType) {\r\n        (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('orderType');\r\n        invalidFlag = true;\r\n    } else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('orderType');\r\n\r\n    if (!data.paymentType) {\r\n        (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('paymentType');\r\n        invalidFlag = true;\r\n    } else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('paymentType');\r\n\r\n    if (data.paidAmount < 0) {\r\n        (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('paidAmount');\r\n        invalidFlag = true;\r\n    } else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('paidAmount');\r\n\r\n    if (!data.company) {\r\n        (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('company');\r\n        invalidFlag = true;\r\n    } else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('company');\r\n\r\n    if (!data.receiver) {\r\n        (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('receiver');\r\n        invalidFlag = true;\r\n    } else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('receiver');\r\n\r\n    if (!data.sender) {\r\n        (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('sender');\r\n        invalidFlag = true;\r\n    } else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValid)('sender');\r\n\r\n    if (data.products.length === 0)\r\n        invalidFlag = true;\r\n\r\n    data.products.forEach(product => {\r\n        const row = document.querySelector(`tr[addedProductsIndex=\"${product.index}\"]`);\r\n\r\n        if (!product.name && !product.product)\r\n            invalidFlag = true;\r\n\r\n        if (product.name && orderType === 'wholesale') {\r\n            if (product.qtyInPackage < 0) {\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalidEl)(row.querySelector('input[name=\"qtyInPackage\"]'));\r\n                invalidFlag = true;\r\n            } else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValidEl)(row.querySelector('input[name=\"qtyInPackage\"]'));\r\n        }\r\n\r\n        // Variable existing product\r\n        if (orderType === 'wholesale' && product.product && product.selectedSizes?.length === 0) {\r\n            // atleast 1 size must be selected\r\n            row.querySelectorAll('input[name=\"size\"]').forEach(el => {\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalidEl)(el);\r\n            });\r\n\r\n            invalidFlag = true;\r\n        } else {\r\n            row.querySelectorAll('select[name=\"size\"]').forEach(el => {\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValidEl)(el);\r\n            });\r\n        }\r\n\r\n        if (product.product && orderType === 'retail') {\r\n            const sizeEl = row.querySelector('select[name=\"size\"]');\r\n\r\n            if (sizeEl && !product.size) {\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalidEl)(sizeEl);\r\n                invalidFlag = true;\r\n            } else if (sizeEl && product.size) (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValidEl)(sizeEl);\r\n        }\r\n\r\n        if (!product.quantity || product.quantity < 1) {\r\n            (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalidEl)(row.querySelector('input[name=\"quantity\"]'));\r\n            invalidFlag = true;\r\n        } else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValidEl)(row.querySelector('input[name=\"quantity\"]'));\r\n\r\n        const discountRegex = /^\\d{1,}(\\.\\d{1})?$/; // good: 0.1, 2; bad: 0.01\r\n\r\n        if (product.discount < 0 || product.discount > 100 || !discountRegex.test(product.discount)) {\r\n            (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalidEl)(row.querySelector('input[name=\"discount\"]'));\r\n            invalidFlag = true;\r\n        } else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValidEl)(row.querySelector('input[name=\"discount\"]'));\r\n\r\n        if (!product.price || product.price < 0.01 || !_api_js__WEBPACK_IMPORTED_MODULE_3__.priceRegex.test(product.price)) {\r\n            (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalidEl)(row.querySelector('input[name=\"price\"]'));\r\n            invalidFlag = true;\r\n        } else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValidEl)(row.querySelector('input[name=\"price\"]'));\r\n\r\n        // Only check if quantity exists on retail or wholesale but product is simple\r\n        if (orderType === 'retail' || (orderType === 'wholesale' && !row.querySelector('input[name=\"size\"]'))) {\r\n            if (!product.quantity || product.quantity < 1) {\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalidEl)(row.querySelector('input[name=\"quantity\"]'));\r\n                invalidFlag = true;\r\n            } else (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValidEl)(row.querySelector('input[name=\"quantity\"]'));\r\n        }\r\n\r\n        if (!product.unitOfMeasure) {\r\n            (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalidEl)(row.querySelector('input[name=\"unitOfMeasure\"]'));\r\n            invalidFlag = true;\r\n        } else if (product.unitOfMeasure && !product.product) (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markValidEl)(row.querySelector('input[name=\"unitOfMeasure\"]'));\r\n    });\r\n\r\n    return invalidFlag;\r\n}\r\n\r\nasync function createEditOrder() {\r\n    if (order && !['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_6__.loggedInUser.role)) // normal user editing, just print because they cant edit anything\r\n        return printSale(order);\r\n\r\n    (0,_views_components__WEBPACK_IMPORTED_MODULE_5__.toggleSubmitBtn)();\r\n\r\n    const form = document.querySelector('form');\r\n    const formData = new FormData(form);\r\n    var filteredProducts = [];\r\n\r\n\r\n    // transform addedProducts to the type used in backend\r\n    if (orderType === 'wholesale') {\r\n        addedProducts.forEach(product => {\r\n            if (product.product) {\r\n                // Variable Product\r\n                if (product.selectedSizes?.length > 0) {\r\n                    filteredProducts.push({\r\n                        index: product.index,\r\n                        product: product.product._id,\r\n                        quantity: product.quantity,\r\n                        price: product.price,\r\n                        discount: product.discount,\r\n                        selectedSizes: product.selectedSizes,\r\n                        unitOfMeasure: product.product.unitOfMeasure\r\n                    });\r\n                }\r\n\r\n                // Simple product\r\n                if (!product.selectedSizes?.length)\r\n                    filteredProducts.push({\r\n                        index: product.index,\r\n                        product: product.product._id,\r\n                        quantity: product.quantity,\r\n                        price: product.price,\r\n                        discount: product.discount,\r\n                        unitOfMeasure: product.product.unitOfMeasure\r\n                    });\r\n            }\r\n            else\r\n                filteredProducts.push({\r\n                    index: product.index,\r\n                    name: product.name,\r\n                    quantity: product.quantity,\r\n                    price: product.price,\r\n                    ...(product.qtyInPackage > 0 && { qtyInPackage: product.qtyInPackage }),\r\n                    discount: product.discount,\r\n                    unitOfMeasure: product.unitOfMeasure\r\n                });\r\n        });\r\n    } else if (orderType === 'retail') {\r\n        addedProducts.forEach(product => {\r\n            if (product.product)\r\n                filteredProducts.push({\r\n                    index: product.index,\r\n                    product: product.product._id,\r\n                    quantity: product.quantity,\r\n                    price: product.price,\r\n                    ...(product.size && { size: product.size }),\r\n                    discount: product.discount,\r\n                    unitOfMeasure: product.unitOfMeasure\r\n                });\r\n            else\r\n                filteredProducts.push({\r\n                    index: product.index,\r\n                    name: product.name,\r\n                    quantity: product.quantity,\r\n                    price: product.price,\r\n                    size: product.size,\r\n                    discount: product.discount,\r\n                    unitOfMeasure: product.unitOfMeasure\r\n                });\r\n        });\r\n    }\r\n\r\n    const data = {\r\n        date: document.getElementById('date').value,\r\n        type: document.getElementById('type').value,\r\n        customer: selectedCustomer?._id,\r\n        orderType: document.getElementById('orderType').value,\r\n        products: filteredProducts,\r\n        paymentType: document.getElementById('paymentType').value,\r\n        paidAmount: +(formData.get('paidAmount').replace(',', '.')),\r\n        company: document.getElementById('company').value,\r\n        receiver: document.getElementById('receiver').value,\r\n        sender: document.getElementById('sender').value\r\n    }\r\n\r\n    const invalidData = validateOrder(data);\r\n\r\n    if (invalidData) {\r\n        form.classList.remove('was-validated');\r\n        return (0,_views_components__WEBPACK_IMPORTED_MODULE_5__.toggleSubmitBtn)();\r\n    }\r\n\r\n    form.classList.add('was-validated');\r\n    form.classList.remove('needs-validation')\r\n\r\n    const alertEl = document.getElementById('alert');\r\n    try {\r\n        const req = order ? await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].put(`/orders/${order._id}`, data) : await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].post('/orders', data);\r\n\r\n        if (req.status === 201) {\r\n            (0,_views_components__WEBPACK_IMPORTED_MODULE_5__.toggleSubmitBtn)();\r\n\r\n            page__WEBPACK_IMPORTED_MODULE_8__(`/orders/${req.data}?print`);\r\n        }\r\n    } catch (err) {\r\n        (0,_views_components__WEBPACK_IMPORTED_MODULE_5__.toggleSubmitBtn)();\r\n        console.error(err);\r\n        if (err.response.status === 400) {\r\n            alertEl.classList.remove('d-none', 'alert-success');\r\n            alertEl.classList.add('alert-danger');\r\n            alertEl.textContent = err.response.data;\r\n            form.classList.remove('was-validated');\r\n            form.classList.add('needs-validation');\r\n\r\n            if (err.response.data.toLowerCase().includes('vat')) {\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('vat');\r\n            }\r\n\r\n            if (err.response.data.toLowerCase().includes('phone')) {\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('phone');\r\n            }\r\n\r\n            if (err.response.data.toLowerCase().includes('discount')) {\r\n                (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('discount');\r\n            }\r\n        }\r\n        else if (err.response?.status === 500) {\r\n            alertEl.classList.remove('d-none', 'alert-success');\r\n            alertEl.classList.add('alert-danger');\r\n            alertEl.textContent = 'Грешка в сървъра';\r\n            console.error(err);\r\n        } else console.error(err)\r\n    }\r\n}\r\n\r\nasync function printSale(data) {\r\n    const printCopy = document.getElementById('printCopy')?.checked || false;\r\n    const printStokova = document.getElementById('printStokova')?.checked || false;\r\n    let flags = {};\r\n\r\n    // Check if any product has discount, if none - dont show column\r\n    flags.tableShowDiscounts = data.products.some(product => product.discount > 0);\r\n\r\n    // Check if any product has qtyInPackage, if none - dont show column\r\n    flags.tableShowQtyInPackage = data.products.some(product => product.qtyInPackage > 0);\r\n\r\n    // Check if any product has size, if none - dont show column\r\n    flags.tableShowSizes = data.products.some(product => product.size);\r\n\r\n    // should print something like this: invoice original, invoice copy, etc etc depending on whats selected as type\r\n    const printPages = [];\r\n    printPages.push(printContainer({ data, flags }));\r\n    if (printCopy === true) // print a copy of the invoice\r\n        printPages.push(printContainer({ data, param: { copy: true }, flags }));\r\n\r\n    if (printStokova === true) // print stokova of the invoice\r\n        printPages.push(printContainer({ data, param: { stokova: true }, flags }));\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(printPages, document.getElementById('printContainer'));\r\n    window.print();\r\n}\r\n\r\n// invoice should have deducted tax in product price and shown as sum at the end\r\n// stokova should have all products with tax included in price and shown as sum at the end\r\nconst printContainer = ({ data, param, flags }) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <div style=\"break-after:page; padding: 1rem\">\r\n        <h1 class=\"text-center fw-bold\">${param?.stokova ? 'Стокова разписка' : params.documentTypes[data.type]}</h1>\r\n        <div class=\"text-center fs-5\">${param?.copy ? 'Копие' : 'Оригинал'}</div>\r\n        <div class=\"d-flex justify-content-between\">\r\n            ${param?.stokova ? '' : (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<div>Документ №: <span class=\"fw-bold\">${data.number}</span></div>`}\r\n            <div>Дата: <span class=\"fw-bold\">${new Date(data.date).toLocaleDateString('bg')}</span></div>\r\n        </div>\r\n\r\n        <div class=\"row gap-3 p-3\">\r\n            <table id=\"customerInfoTable\" class=\"col border rounded\">\r\n                <tbody>\r\n                    <tr><td>Получател</td> <td>${data.customer.name}</td></tr>\r\n                    <tr>${data.customer?.taxvat ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<td>ДДС №</td> <td>${data.customer.taxvat}</td>` : ''}</tr>\r\n                    <tr><td>Идент. № <td>${data.customer.vat}</td></tr>\r\n                    <tr><td>Адрес</td> <td>${data.customer.address}</td></tr>\r\n                    <tr><td>МОЛ</td> <td>${data.customer.mol}</td></tr>\r\n                    ${data.customer?.phone ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<tr><td>Телефон</td> <td>${data.customer.phone}</td></tr>` : ''}\r\n                </tbody>\r\n            </table>\r\n\r\n            <table id=\"companyInfoTable\" class=\"col border rounded\">\r\n                <tbody>\r\n                    <tr><td>Доставчик</td> <td>${data.company.name}</td></tr>\r\n                    <tr>${data.company?.taxvat ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<td>ДДС №</td> <td>${data.company.taxvat}</td>` : ''}</tr>\r\n                    <tr><td>Идент. № <td>${data.company.vat}</td></tr>\r\n                    <tr><td>Адрес</td> <td>${data.company.address}</td></tr>\r\n                    <tr><td>МОЛ</td> <td>${data.company.mol}</td></tr>\r\n                    ${data.company?.phone ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<tr><td>Телефон</td> <td>${data.company.phone}</td></tr>` : ''}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n        ${data.orderType === 'wholesale' ? printTableWholesale({ tax: data.company.tax, products: data.products, type: param?.stokova ? 'stokova' : data.type, flags }) : printTableRetail({ tax: data.company.tax, products: data.products, type: param?.stokova ? 'stokova' : data.type, flags })}\r\n        <div style=\"font-size: 1rem\">\r\n            Словом: ${(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.numberToBGText)(data.total)}\r\n        </div>\r\n\r\n        <div class=\"d-flex flex-column text-end\">\r\n            ${param?.stokova || data.type === 'stokova' ? '' : (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<div>Данъчна основа ${data.company.tax}%: ${(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPrice)((0,_api_js__WEBPACK_IMPORTED_MODULE_3__.deductVat)(data.total, data.company.tax))}</div>`}\r\n            ${param?.stokova || data.type === 'stokova' ? '' : (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<div>ДДС ${data.company.tax}%: ${(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPrice)(data.total - (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.deductVat)(data.total, data.company.tax))}</div>`}\r\n            <div class=\"fw-bold\">Сума за плащане: ${(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPrice)(data.total)}</div>\r\n        </div>\r\n\r\n        <div>\r\n            <div>Плащане: ${params.paymentTypes[data.paymentType]}</div>\r\n            ${data.paymentType === 'bank' ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n                <div>IBAN: ${data.company.bank.iban}</div>\r\n                <div>Банка: ${data.company.bank.name}</div>\r\n                <div>Банков код: ${data.company.bank.code}</div>` : ''}\r\n        </div>\r\n        <div class=\"d-flex justify-content-between\">\r\n            <div>Получил: ${data.receiver}</div>\r\n            <div>Съставил: ${data.sender}</div>\r\n        </div>\r\n    </div>\r\n`;\r\n\r\nconst printTableWholesale = ({ tax, products, type, flags }) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <table id=\"printProductWholesaleTable\" class=\"table table-bordered table-striped\">\r\n        <thead>\r\n            <tr class=\"fw-bold text-center\">\r\n                <td>№</td>\r\n                <td>Код</td>\r\n                <td>Стока</td>\r\n                <td>Мярка</td>\r\n                <td>Пакети</td>\r\n                <td>Брой в пакет</td>\r\n                <td>${flags.tableShowDiscounts ? 'Цена за брой след ТО%' : 'Цена за брой'}</td>\r\n                <td>Цена</td>\r\n                ${flags.tableShowDiscounts ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<td>Отстъпка</td>` : ''}\r\n                ${flags.tableShowDiscounts ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<td>Цена след ТО%</td>` : ''}\r\n                <td>Сума</td>\r\n            </tr>\r\n        </thead>\r\n        <tbody class=\"table-group-divider\">\r\n            ${products.map((product, index) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n                <tr class=\"text-center\">\r\n                    <td>${++index}</td>\r\n\r\n                    <td>${product?.product?.code || ''}</td>\r\n\r\n                    <td>${product?.product?.name || product.name}</td>\r\n\r\n                    <td>${product?.product?.unitOfMeasure || product.unitOfMeasure}</td>\r\n\r\n                    <td class=\"text-nowrap\">${product.quantity}</td>\r\n\r\n                    <td>${product?.selectedSizes?.length || product.qtyInPackage}</td>\r\n\r\n                    <td>${product.qtyInPackage || product?.selectedSizes?.length ? (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPriceNoCurrency)(type === 'stokova' ? (product.price / (product?.selectedSizes?.length || product.qtyInPackage) * (1 - product.discount / 100)) : (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.deductVat)((product.price / (product?.selectedSizes?.length || product.qtyInPackage) * (1 - product.discount / 100)), tax)) : ''}</td>\r\n\r\n                    <td class=\"text-nowrap\">${(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPriceNoCurrency)(type === 'stokova' ? product.price : (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.deductVat)(product.price, tax))}</td>\r\n\r\n                    ${flags.tableShowDiscounts ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<td>${product?.discount > 0 ? product.discount + '%' : '0%'}</td>` : ''}\r\n\r\n                    ${flags.tableShowDiscounts ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<td class=\"text-nowrap\">${product?.discount ? (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPriceNoCurrency)(type === 'stokova' ? product.price * (1 - product.discount / 100) : (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.deductVat)(product.price * (1 - product.discount / 100), tax)) : (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPriceNoCurrency)(type === 'stokova' ? product.price : (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.deductVat)(product.price, tax))}</td>` : ''}\r\n\r\n                    <td class=\"text-nowrap\">${(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPriceNoCurrency)(type === 'stokova' ? ((product.price * product.quantity) * (1 - product.discount / 100)) : (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.deductVat)((product.price * product.quantity) * (1 - product.discount / 100), tax))}</td>\r\n                </tr>\r\n            `)}\r\n        </tbody>\r\n    </table>\r\n`;\r\n\r\n// Add same styling as wholesale table\r\nconst printTableRetail = ({ tax, products, type, flags }) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n<table id=\"printProductRetailTable\" class=\"table table-bordered table-striped\">\r\n        <thead>\r\n            <tr class=\"fw-bold text-center\">\r\n                <td>№</td>\r\n                <td>Код</td>\r\n                <td>Стока</td>\r\n                <td>Мярка</td>\r\n                ${flags.tableShowSizes ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<td>Размер</td>` : ''}\r\n                <td>Брой</td>\r\n                <td>Цена</td>\r\n                ${flags.tableShowDiscounts ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<td>Отстъпка</td>` : ''}\r\n                ${flags.tableShowDiscounts ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<td>Цена след ТО%</td>` : ''}\r\n                <td>Сума</td>\r\n            </tr>\r\n        </thead>\r\n        <tbody class=\"table-group-divider\">\r\n            ${products.map((product, index) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n                <tr class=\"text-center\">\r\n                    <td>${++index}</td>\r\n                    <td>${product?.product?.code || ''}</td>\r\n                    <td>${product?.product?.name || product.name}</td>\r\n                    <!-- if product with sizes, its probably \"брой\", else its \"пакет\" -->\r\n                    <td>${product?.product?.unitOfMeasure === 'пакет' ? 'бр.' : product?.product?.unitOfMeasure || product.unitOfMeasure}</td>\r\n                    ${flags.tableShowSizes ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<td>${product?.size}</td>` : ''}\r\n                    <td class=\"text-nowrap\">${product.quantity}</td>\r\n                    <td class=\"text-nowrap\">${(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPriceNoCurrency)(type === 'stokova' ? product.price : (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.deductVat)(product.price, tax))}</td>\r\n                    ${flags.tableShowDiscounts ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<td>${product?.discount > 0 ? product.discount + '%' : '0%'}</td>` : ''}\r\n                    ${flags.tableShowDiscounts ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<td class=\"text-nowrap\">${product?.discount ? (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPriceNoCurrency)(type === 'stokova' ? product.price * (1 - product.discount / 100) : (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.deductVat)((product.price * (1 - product.discount / 100)), tax)) : ''}</td>` : ''}\r\n\r\n                    <td class=\"text-nowrap\">${(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPriceNoCurrency)(type === 'stokova' ? ((product.price * product.quantity) * (1 - product.discount / 100)) : (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.deductVat)((product.price * product.quantity) * (1 - product.discount / 100), tax))}</td>\r\n                </tr>\r\n            `)}\r\n        </tbody>\r\n    </table>\r\n`;\r\n\r\nconst template = (params, customers) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    ${(0,_views_nav__WEBPACK_IMPORTED_MODULE_4__.nav)()}\r\n    <div class=\"container-fluid d-print-none\">\r\n        <form novalidate class=\"mt-3\">\r\n            ${topRow(params, customers)}\r\n            <div id=\"table\" class=\"table-responsive\"></div>\r\n            <div id=\"bottomRow\" class=\"row g-3 align-items-end\"></div>\r\n            <div id=\"woocommerce\" class=\"row g-3 align-items-end mt-1\"></div>\r\n        </form>\r\n        <div id=\"alert\" class=\"alert d-none\"></div>\r\n    </div>\r\n    <div id=\"printContainer\" class=\"d-none d-print-block\"></div>`;\r\n\r\nasync function createEditOrderPage(ctx, next) {\r\n    try {\r\n        //TODO When all routes are converted to controllers, create single routes for this kind of requests. Instead of using 4 seperate requests to get companies, products, etc. do one single request to for example \"/ordersInfo\" and use the controllers to get all the info.\r\n        params = (await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].get('/orders/params')).data;\r\n        companies = (await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].get('/companies')).data;\r\n        customers = (await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].get('/customers', { params: { page: 'createOrder' } })).data.customers;\r\n        products = (await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].get('/products', { params: { page: 'orders' } })).data.products;\r\n        defaultValues = (await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].get('/settings', { params: { keys: ['orderType', 'paymentType', 'documentType', 'orderPrint'], } })).data;\r\n        addedProductsIndex = 0;\r\n\r\n        if (ctx.params.id) {\r\n            const req = await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].get(`/orders/${ctx.params.id}`);\r\n            order = req.data;\r\n            orderType = order.orderType;\r\n            addedProducts = order.products;\r\n            addedProducts.map(product => product.index = addedProductsIndex++);\r\n            selectedCustomer = order.customer;\r\n            selectedCompany = companies.filter(c => c._id === order.company)[0];\r\n\r\n            // if order was just created and print was requested\r\n            if (ctx.querystring.includes('print')) {\r\n                printSale(order);\r\n                return page__WEBPACK_IMPORTED_MODULE_8__(`/orders/${ctx.params.id}`);\r\n            }\r\n        } else {\r\n            order = undefined;\r\n            documentType = defaultValues.find(o => o.key === 'documentType').value;\r\n            orderType = defaultValues.find(o => o.key === 'orderType').value;\r\n            selectedCompany = companies[0];\r\n            selectedCustomer = undefined;\r\n            addedProducts = [];\r\n        }\r\n\r\n        console.log(order)\r\n        // reset form\r\n        const form = document.querySelector('form');\r\n        const alertEl = document.getElementById('alert');\r\n        if (form && alertEl) {\r\n            // form.reset();\r\n            form.classList.remove('was-validated');\r\n            form.classList.add('needs-validation');\r\n            alertEl.classList.add('d-none');\r\n            document.querySelectorAll('.is-invalid').forEach(el => el.classList.remove('is-invalid'));\r\n            document.querySelectorAll('.is-valid').forEach(el => el.classList.remove('is-valid'));\r\n        }\r\n\r\n        (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(template(params, customers), _app_js__WEBPACK_IMPORTED_MODULE_1__.container);\r\n        rerenderTable();\r\n        (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(senderTemplate(), document.getElementById('senderDiv'));\r\n        (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(receiverTemplate(), document.getElementById('receiverDiv'));\r\n\r\n        // Set date in field\r\n        document.getElementById('date').valueAsDate = order ? new Date(order.date) : new Date();\r\n\r\n        // Add listener for barcode scanner\r\n        const barcodeInput = document.getElementById('product');\r\n        barcodeInput.addEventListener('textInput', function (e) {\r\n            if (e.data.length >= 10) {\r\n                e.preventDefault();\r\n                // Entered text with more than 10 characters at once (either by scanner or by copy-pasting value in field)\r\n                // simulate Enter key pressed on input field to activate addProduct function\r\n                const event = new KeyboardEvent('keyup', {\r\n                    key: 'Enter',\r\n                    code: 'Enter',\r\n                    which: 13,\r\n                    keyCode: 13,\r\n                });\r\n\r\n                barcodeInput.value += e.data;\r\n                barcodeInput.dispatchEvent(event);\r\n            }\r\n        });\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert('Възникна грешка')\r\n    }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3Mvb3JkZXJzL2NyZWF0ZUVkaXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBMEI7QUFDVztBQUNNO0FBQytGO0FBQ3hHO0FBQ1I7QUFDc0M7QUFDbkI7QUFDakI7QUFDSjtBQUMwQztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsbURBQU0sNEVBQTRFLG1EQUFNO0FBQ3hIO0FBQ0EsSUFBSSxtREFBTTtBQUNWO0FBQ0EsSUFBSSxtREFBTTtBQUNWO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxvREFBVztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksbURBQU07QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxtREFBTTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsaURBQUk7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGdCQUFnQixTQUFTLFdBQVcscUJBQXFCLEdBQUcsbUJBQW1CLElBQUksMkJBQTJCLHFCQUFxQixRQUFRLFFBQVEsNElBQTRJLHdDQUF3QyxzREFBWSxRQUFRO0FBQ3hYO0FBQ0Esa0JBQWtCLHVDQUF1QyxpREFBSSxpQkFBaUIsR0FBRyxlQUFlLEdBQUcsYUFBYSxJQUFJLHFCQUFxQixlQUFlLFFBQVEsRUFBRTtBQUNsSztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxvQkFBb0Isb0RBQW9ELHdDQUF3QyxzREFBWSxPQUFPO0FBQzdLLGtCQUFrQixpREFBaUQsaURBQUkscUJBQXFCLDBFQUEwRSxRQUFRLFFBQVEsR0FBRyxRQUFRO0FBQ2pNO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0ZBQXNGLCtCQUErQixzREFBWSxRQUFRO0FBQ3pJO0FBQ0E7QUFDQTtBQUNBLDZIQUE2SCx1QkFBdUI7QUFDcEo7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLE9BQU8sVUFBVSxpQkFBaUI7QUFDbEUsa0JBQWtCLDhDQUE4QyxpREFBSSxxQkFBcUIsdUhBQXVILFFBQVEsUUFBUSxHQUFHLFFBQVE7QUFDM087QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGFBQWEsb0RBQW9ELHdDQUF3QyxzREFBWSxPQUFPO0FBQ3pKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGlEQUFJO0FBQ2pDO0FBQ0Esa0dBQWtHLCtEQUErRCxZQUFZLHdDQUF3QyxzREFBWSxRQUFRO0FBQ3pPO0FBQ0EsVUFBVSwyREFBMkQsaURBQUksaUJBQWlCLE9BQU87QUFDakc7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGlEQUFJO0FBQzVDO0FBQ0Esd0dBQXdHLGtEQUFrRCwrQkFBK0Isd0NBQXdDLHNEQUFZLFFBQVE7QUFDclA7QUFDQSxVQUFVLDJCQUEyQixpREFBSSxpQkFBaUIsU0FBUztBQUNuRTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsaURBQUk7QUFDN0M7QUFDQTtBQUNBLDBCQUEwQixlQUFlLDZEQUE2RCx3Q0FBd0Msc0RBQVksUUFBUTtBQUNsSyxjQUFjLHNDQUFzQyxpREFBSSxxQkFBcUIsMkNBQTJDLFFBQVEsWUFBWSxHQUFHLGFBQWE7QUFDNUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUZBQXFGLHdDQUF3QyxzREFBWSxRQUFRO0FBQ2pKLGNBQWMsZ0RBQWdELGlEQUFJLHFCQUFxQiwySEFBMkgsUUFBUSxRQUFRLEdBQUcsUUFBUTtBQUM3TztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkZBQTJGLDhCQUE4Qiw0REFBNEQsd0NBQXdDLHNEQUFZLE9BQU87QUFDaFA7QUFDQTtBQUNBLE1BQU0sNkJBQTZCLGlEQUFJO0FBQ3ZDO0FBQ0E7QUFDQSxzRkFBc0Ysd0dBQXdHO0FBQzlMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlGQUF5RixnRkFBZ0Y7QUFDeks7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsNERBQVMsR0FBRyxtRUFBbUU7QUFDekY7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGlEQUFJO0FBQ2pDLHdCQUF3QixtREFBbUQ7QUFDM0Usb0JBQW9CLGlDQUFpQztBQUNyRCxpQkFBaUIsa0NBQWtDO0FBQ25ELE1BQU0sa0NBQWtDLGlEQUFJLGNBQWMsZ0NBQWdDO0FBQzFGLE1BQU0sa0NBQWtDLGlEQUFJO0FBQzVDLHNCQUFzQixpQ0FBaUMsRUFBRSx1Q0FBdUMsZ0NBQWdDLFFBQVEsRUFBRSwyQ0FBMkMsa0NBQWtDLFFBQVEsRUFBRSx3Q0FBd0MsK0JBQStCLFFBQVEsRUFBRSw0Q0FBNEMsbUNBQW1DLE9BQU87QUFDeFksVUFBVSxnQ0FBZ0MsaURBQUksaUJBQWlCLDhCQUE4QjtBQUM3RjtBQUNBLGlCQUFpQixvREFBVyxpQ0FBaUM7QUFDN0Q7QUFDQTtBQUNBLDRCQUE0QixpREFBSTtBQUNoQyx3QkFBd0IsZ0NBQWdDO0FBQ3hELGlCQUFpQiw2QkFBNkI7QUFDOUMseUJBQXlCLG9DQUFvQztBQUM3RCxNQUFNLGlDQUFpQyxpREFBSSxRQUFRLCtCQUErQixVQUFVLGlEQUFJLFVBQVUsZ0NBQWdDLEVBQUUsNkVBQTZFLEVBQUUsbUZBQW1GLEVBQUUsNkVBQTZFLEVBQUUsb0ZBQW9GO0FBQ25kLGlCQUFpQixvREFBVyxnQ0FBZ0M7QUFDNUQsTUFBTSwrQkFBK0IsaURBQUksaUJBQWlCLDZCQUE2QjtBQUN2RjtBQUNBO0FBQ0EsK0JBQStCLGlEQUFJO0FBQ25DO0FBQ0Esa0NBQWtDLGlEQUFJO0FBQ3RDO0FBQ0E7QUFDQSwrQkFBK0IsOEJBQThCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHNEQUFzRCxpREFBSSxxQkFBcUIsa0NBQWtDLFFBQVEsUUFBUSxHQUFHLFFBQVE7QUFDMUo7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGdIQUFnSDtBQUN6SSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksc0RBQWE7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNEQUFhO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsaURBQUk7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLFlBQVk7QUFDeEMsNkJBQTZCLGFBQWE7QUFDMUMsNkJBQTZCLGFBQWE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxpREFBSTtBQUN2QyxNQUFNLHFDQUFxQyxpREFBSTtBQUMvQztBQUNBLHNEQUFzRCxxQkFBcUIsUUFBUSxjQUFjLEdBQUcsVUFBVSwwQkFBMEIsV0FBVyxXQUFXLDZDQUE2QyxZQUFZLGdGQUFnRixNQUFNLGNBQWMsR0FBRyxVQUFVO0FBQ3hVLG1EQUFtRCxjQUFjLEdBQUcsVUFBVTtBQUM5RSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDZDQUE2QyxpREFBSTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHlCQUF5QixpREFBSTtBQUMzQyx5Q0FBeUMsY0FBYztBQUN2RCwwQkFBMEIsd0NBQXdDLEVBQUUscURBQXFEO0FBQ3pILHNCQUFzQjtBQUN0QixRQUFRLGlEQUFJLE9BQU8sMkRBQTJEO0FBQzlFLFVBQVUsaURBQUksc0JBQXNCLG9CQUFvQixtREFBbUQsNEJBQTRCLCtEQUErRCx3Q0FBd0Msc0RBQVksT0FBTztBQUNqUTtBQUNBLDBCQUEwQixrQ0FBa0Msb0RBQVcseUZBQXlGLG9EQUFXLDRDQUE0QztBQUN2TjtBQUNBLDBCQUEwQixtQ0FBbUMsaURBQUksa0JBQWtCLHFCQUFxQiwyRUFBMkUsd0NBQXdDLHNEQUFZLFFBQVEsU0FBUyxzQkFBc0IsSUFBSTtBQUNsUjtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsZ0JBQWdCLFNBQVMsZ0JBQWdCLDREQUE0RCxrQkFBa0IsMERBQTBELHdDQUF3QyxzREFBWSxPQUFPO0FBQ3pSLDhCQUE4Qiw2QkFBNkIsaURBQUksbUNBQW1DLDJCQUEyQjtBQUM3SDtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsYUFBYSxTQUFTLGFBQWEsdURBQXVELGVBQWUseUNBQXlDLHdDQUF3QyxzREFBWSxPQUFPO0FBQ3RQO0FBQ0EseUNBQXlDLGdCQUFnQixTQUFTLGdCQUFnQiw4RUFBOEUsa0JBQWtCLHFCQUFxQix3Q0FBd0Msc0RBQVksT0FBTztBQUNsUSwwQ0FBMEMsb0RBQVcsb0VBQW9FO0FBQ3pIO0FBQ0EsMEJBQTBCLHdDQUF3QyxzREFBWSxjQUFjLGlEQUFJLGtCQUFrQixlQUFlLGlEQUFpRDtBQUNsTDtBQUNBO0FBQ0E7QUFDQSxjQUFjLHdDQUF3QyxzREFBWTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxpREFBSTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx5QkFBeUIsaURBQUk7QUFDM0MseUNBQXlDLGNBQWM7QUFDdkQsMEJBQTBCLHdDQUF3QyxFQUFFLHFEQUFxRDtBQUN6SDtBQUNBO0FBQ0EsMEJBQTBCLGtEQUFrRCxpREFBSTtBQUNoRiw4Q0FBOEMsWUFBWSxzREFBc0Qsd0NBQXdDLHNEQUFZLE9BQU87QUFDM0ssb0RBQW9ELGdCQUFnQjtBQUNwRSxrQ0FBa0Msa0NBQWtDLGlEQUFJLGlCQUFpQixXQUFXLFlBQVksNEJBQTRCLFlBQVksa0JBQWtCLEdBQUcsVUFBVTtBQUN2TCxnRUFBZ0UsaURBQUksa0JBQWtCLFlBQVksc0RBQXNELHFCQUFxQixZQUFZLHdDQUF3QyxzREFBWSxRQUFRO0FBQ3JQO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwwRkFBMEYsaURBQUksa0JBQWtCLHFCQUFxQiwyRUFBMkUsd0NBQXdDLHNEQUFZLFFBQVEsU0FBUyxzQkFBc0IsSUFBSTtBQUN6VTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsZ0JBQWdCLDREQUE0RCxrQkFBa0IsNENBQTRDLGlHQUFpRyxxQkFBcUIsd0NBQXdDLHNEQUFZLE9BQU87QUFDeFcsZ0ZBQWdGLHFIQUFxSDtBQUNyTTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsYUFBYSx1REFBdUQsZUFBZSx5Q0FBeUMsd0NBQXdDLHNEQUFZLE9BQU87QUFDaE87QUFDQSx5Q0FBeUMsZ0JBQWdCLDJGQUEyRixrQkFBa0IscUJBQXFCLHdDQUF3QyxzREFBWSxPQUFPO0FBQ3RQO0FBQ0EsMENBQTBDLG9EQUFXLG9FQUFvRTtBQUN6SDtBQUNBO0FBQ0EsMEJBQTBCLHdDQUF3QyxzREFBWSxjQUFjLGlEQUFJLGtCQUFrQixlQUFlLGlEQUFpRDtBQUNsTDtBQUNBLGNBQWMsd0NBQXdDLHNEQUFZO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxJQUFJLHdDQUFXO0FBQ2Y7QUFDQSxRQUFRLHlDQUFZO0FBQ3BCO0FBQ0EsUUFBUSw4Q0FBaUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHdDQUFXO0FBQ2YsSUFBSSwrQ0FBa0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsSUFBSSxvREFBVztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvREFBVztBQUNuQjtBQUNBLE1BQU0sS0FBSyxrREFBUztBQUNwQjtBQUNBO0FBQ0EsUUFBUSxvREFBVztBQUNuQjtBQUNBLE1BQU0sS0FBSyxrREFBUztBQUNwQjtBQUNBO0FBQ0EsUUFBUSxvREFBVztBQUNuQjtBQUNBLE1BQU0sS0FBSyxrREFBUztBQUNwQjtBQUNBO0FBQ0EsUUFBUSxvREFBVztBQUNuQjtBQUNBLE1BQU0sS0FBSyxrREFBUztBQUNwQjtBQUNBO0FBQ0EsUUFBUSxvREFBVztBQUNuQjtBQUNBLE1BQU0sS0FBSyxrREFBUztBQUNwQjtBQUNBO0FBQ0EsUUFBUSxvREFBVztBQUNuQjtBQUNBLE1BQU0sS0FBSyxrREFBUztBQUNwQjtBQUNBO0FBQ0EsUUFBUSxvREFBVztBQUNuQjtBQUNBLE1BQU0sS0FBSyxrREFBUztBQUNwQjtBQUNBO0FBQ0EsUUFBUSxvREFBVztBQUNuQjtBQUNBLE1BQU0sS0FBSyxrREFBUztBQUNwQjtBQUNBO0FBQ0EsUUFBUSxvREFBVztBQUNuQjtBQUNBLE1BQU0sS0FBSyxrREFBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLGNBQWM7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNEQUFhO0FBQzdCO0FBQ0EsY0FBYyxLQUFLLG9EQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzREFBYTtBQUM3QixhQUFhO0FBQ2I7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLGdCQUFnQixvREFBVztBQUMzQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNEQUFhO0FBQzdCO0FBQ0EsY0FBYyxpQ0FBaUMsb0RBQVc7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzREFBYTtBQUN6QjtBQUNBLFVBQVUsS0FBSyxvREFBVztBQUMxQjtBQUNBLG1DQUFtQyxHQUFHLE1BQU0sRUFBRSxNQUFNLGlCQUFpQjtBQUNyRTtBQUNBO0FBQ0EsWUFBWSxzREFBYTtBQUN6QjtBQUNBLFVBQVUsS0FBSyxvREFBVztBQUMxQjtBQUNBLHVEQUF1RCwrQ0FBVTtBQUNqRSxZQUFZLHNEQUFhO0FBQ3pCO0FBQ0EsVUFBVSxLQUFLLG9EQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNEQUFhO0FBQzdCO0FBQ0EsY0FBYyxLQUFLLG9EQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0RBQWE7QUFDekI7QUFDQSxVQUFVLG9EQUFvRCxvREFBVztBQUN6RSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxzREFBWTtBQUM1RDtBQUNBO0FBQ0EsSUFBSSxrRUFBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsb0NBQW9DO0FBQzFGO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsU0FBUztBQUNULE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxvQkFBb0I7QUFDOUQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrRUFBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw2Q0FBSyxnQkFBZ0IsVUFBVSxpQkFBaUIsNkNBQUs7QUFDdkY7QUFDQTtBQUNBLFlBQVksa0VBQWU7QUFDM0I7QUFDQSxZQUFZLGlDQUFJLFlBQVksU0FBUztBQUNyQztBQUNBLE1BQU07QUFDTixRQUFRLGtFQUFlO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvREFBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0RBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG9EQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGFBQWE7QUFDbEQ7QUFDQSx5Q0FBeUMsZUFBZSxZQUFZLFNBQVM7QUFDN0U7QUFDQTtBQUNBLHlDQUF5QyxlQUFlLGVBQWUsU0FBUztBQUNoRjtBQUNBLElBQUksbURBQU07QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG9CQUFvQixLQUFLLGlEQUFJO0FBQ3ZELGtDQUFrQztBQUNsQywwQ0FBMEMsc0VBQXNFO0FBQ2hILHdDQUF3QyxtQ0FBbUM7QUFDM0U7QUFDQSxjQUFjLHNCQUFzQixpREFBSSwwQ0FBMEMsWUFBWTtBQUM5RiwrQ0FBK0MsNkNBQTZDO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsbUJBQW1CO0FBQ3BFLDBCQUEwQix3QkFBd0IsaURBQUksc0JBQXNCLHFCQUFxQixZQUFZO0FBQzdHLDJDQUEyQyxrQkFBa0I7QUFDN0QsNkNBQTZDLHNCQUFzQjtBQUNuRSwyQ0FBMkMsa0JBQWtCO0FBQzdELHNCQUFzQix1QkFBdUIsaURBQUksNEJBQTRCLG9CQUFvQjtBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELGtCQUFrQjtBQUNuRSwwQkFBMEIsdUJBQXVCLGlEQUFJLHNCQUFzQixvQkFBb0IsWUFBWTtBQUMzRywyQ0FBMkMsaUJBQWlCO0FBQzVELDZDQUE2QyxxQkFBcUI7QUFDbEUsMkNBQTJDLGlCQUFpQjtBQUM1RCxzQkFBc0Isc0JBQXNCLGlEQUFJLDRCQUE0QixtQkFBbUI7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHVEQUF1RCxxR0FBcUcsdUJBQXVCLHFHQUFxRztBQUNsUztBQUNBLHNCQUFzQix1REFBYztBQUNwQztBQUNBO0FBQ0E7QUFDQSxjQUFjLGlEQUFpRCxpREFBSSx1QkFBdUIsaUJBQWlCLEtBQUssb0RBQVcsQ0FBQyxrREFBUyxnQ0FBZ0M7QUFDckssY0FBYyxpREFBaUQsaURBQUksWUFBWSxpQkFBaUIsS0FBSyxvREFBVyxjQUFjLGtEQUFTLGdDQUFnQztBQUN2SyxvREFBb0Qsb0RBQVcsYUFBYTtBQUM1RTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsc0NBQXNDO0FBQ2xFLGNBQWMsOEJBQThCLGlEQUFJO0FBQ2hELDZCQUE2Qix1QkFBdUI7QUFDcEQsOEJBQThCLHVCQUF1QjtBQUNyRCxtQ0FBbUMsdUJBQXVCO0FBQzFEO0FBQ0E7QUFDQSw0QkFBNEIsY0FBYztBQUMxQyw2QkFBNkIsWUFBWTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw0QkFBNEIsS0FBSyxpREFBSTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isb0VBQW9FO0FBQzFGO0FBQ0Esa0JBQWtCLDJCQUEyQixpREFBSTtBQUNqRCxrQkFBa0IsMkJBQTJCLGlEQUFJO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxpQ0FBaUMsaURBQUk7QUFDbkQ7QUFDQSwwQkFBMEIsUUFBUTtBQUNsQztBQUNBLDBCQUEwQiw2QkFBNkI7QUFDdkQ7QUFDQSwwQkFBMEIsdUNBQXVDO0FBQ2pFO0FBQ0EsMEJBQTBCLHlEQUF5RDtBQUNuRjtBQUNBLDhDQUE4QyxpQkFBaUI7QUFDL0Q7QUFDQSwwQkFBMEIsdURBQXVEO0FBQ2pGO0FBQ0EsMEJBQTBCLHlEQUF5RCw4REFBcUIsa0lBQWtJLGtEQUFTLHVIQUF1SDtBQUMxVztBQUNBLDhDQUE4Qyw4REFBcUIsc0NBQXNDLGtEQUFTLHNCQUFzQjtBQUN4STtBQUNBLHNCQUFzQiwyQkFBMkIsaURBQUksT0FBTyxzREFBc0Q7QUFDbEg7QUFDQSxzQkFBc0IsMkJBQTJCLGlEQUFJLDJCQUEyQixvQkFBb0IsOERBQXFCLHFFQUFxRSxrREFBUyx1REFBdUQsOERBQXFCLHNDQUFzQyxrREFBUyxzQkFBc0I7QUFDeFY7QUFDQSw4Q0FBOEMsOERBQXFCLDRGQUE0RixrREFBUywwRUFBMEU7QUFDbFA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNEJBQTRCLEtBQUssaURBQUk7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUJBQXVCLGlEQUFJO0FBQzdDO0FBQ0E7QUFDQSxrQkFBa0IsMkJBQTJCLGlEQUFJO0FBQ2pELGtCQUFrQiwyQkFBMkIsaURBQUk7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGlDQUFpQyxpREFBSTtBQUNuRDtBQUNBLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQiw2QkFBNkI7QUFDdkQsMEJBQTBCLHVDQUF1QztBQUNqRTtBQUNBLDBCQUEwQiwrR0FBK0c7QUFDekksc0JBQXNCLHVCQUF1QixpREFBSSxPQUFPLGNBQWM7QUFDdEUsOENBQThDLGlCQUFpQjtBQUMvRCw4Q0FBOEMsOERBQXFCLHNDQUFzQyxrREFBUyxzQkFBc0I7QUFDeEksc0JBQXNCLDJCQUEyQixpREFBSSxPQUFPLHNEQUFzRDtBQUNsSCxzQkFBc0IsMkJBQTJCLGlEQUFJLDJCQUEyQixvQkFBb0IsOERBQXFCLHFFQUFxRSxrREFBUyw0REFBNEQ7QUFDblE7QUFDQSw4Q0FBOEMsOERBQXFCLDRGQUE0RixrREFBUywwRUFBMEU7QUFDbFA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGlEQUFJO0FBQzVDLE1BQU0sK0NBQUc7QUFDVDtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSx3QkFBd0IsNkNBQUs7QUFDN0IsMkJBQTJCLDZDQUFLO0FBQ2hDLDJCQUEyQiw2Q0FBSyxxQkFBcUIsVUFBVSx1QkFBdUI7QUFDdEYsMEJBQTBCLDZDQUFLLG9CQUFvQixVQUFVLGtCQUFrQjtBQUMvRSwrQkFBK0IsNkNBQUssb0JBQW9CLFVBQVUscUVBQXFFO0FBQ3ZJO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw2Q0FBSyxnQkFBZ0IsY0FBYztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixpQ0FBSSxZQUFZLGNBQWM7QUFDckQ7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtREFBTSw4QkFBOEIsOENBQVM7QUFDckQ7QUFDQSxRQUFRLG1EQUFNO0FBQ2QsUUFBUSxtREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvdmlld3Mvb3JkZXJzL2NyZWF0ZUVkaXQuanM/MmRhNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ0AvY3NzL29yZGVycy5jc3MnO1xyXG5pbXBvcnQgeyBjb250YWluZXIgfSBmcm9tIFwiQC9hcHAuanNcIjtcclxuaW1wb3J0IHsgaHRtbCwgcmVuZGVyIH0gZnJvbSAnbGl0L2h0bWwuanMnO1xyXG5pbXBvcnQgeyBmb3JtYXRQcmljZSwgZm9ybWF0UHJpY2VOb0N1cnJlbmN5LCBkZWR1Y3RWYXQsIG1hcmtWYWxpZCwgbWFya0ludmFsaWQsIG1hcmtJbnZhbGlkRWwsIG1hcmtWYWxpZEVsLCBzdWNjZXNzU2NhbiB9IGZyb20gJ0AvYXBpLmpzJztcclxuaW1wb3J0IHsgbmF2IH0gZnJvbSBcIkAvdmlld3MvbmF2XCI7XHJcbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcclxuaW1wb3J0IHsgc3VibWl0QnRuLCB0b2dnbGVTdWJtaXRCdG4gfSBmcm9tIFwiQC92aWV3cy9jb21wb25lbnRzXCI7XHJcbmltcG9ydCB7IGxvZ2dlZEluVXNlciB9IGZyb20gXCJAL3ZpZXdzL2xvZ2luXCI7XHJcbmltcG9ydCBRdWFnZ2EgZnJvbSAncXVhZ2dhJztcclxuaW1wb3J0IHBhZ2UgZnJvbSAncGFnZSc7XHJcbmltcG9ydCB7IG51bWJlclRvQkdUZXh0LCBwcmljZVJlZ2V4LCBmaXhJbnB1dFByaWNlIH0gZnJvbSBcIkAvYXBpXCI7XHJcblxyXG52YXIgb3JkZXIsIGRlZmF1bHRWYWx1ZXMsIHBhcmFtcywgY29tcGFuaWVzLCBkb2N1bWVudFR5cGUsIG9yZGVyVHlwZSwgcHJvZHVjdHMsIHNlbGVjdGVkQ3VzdG9tZXIsIHNlbGVjdGVkQ29tcGFueSwgY3VzdG9tZXJzLCBhZGRlZFByb2R1Y3RzSW5kZXggPSAwLCBhZGRlZFByb2R1Y3RzID0gW107XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VPcmRlclR5cGUoZSkge1xyXG4gICAgb3JkZXJUeXBlID0gZS50YXJnZXQudmFsdWU7XHJcblxyXG4gICAgLy8gcmVjYWxjdWxhdGUgcHJpY2UgZm9yIGV2ZXJ5IGFkZGVkIHByb2R1Y3RcclxuICAgIGFkZGVkUHJvZHVjdHMuZm9yRWFjaChwcm9kdWN0ID0+IHtcclxuICAgICAgICBpZiAocHJvZHVjdC5wcm9kdWN0KVxyXG4gICAgICAgICAgICBwcm9kdWN0LnByaWNlID0gb3JkZXJUeXBlID09PSAnd2hvbGVzYWxlJyA/IHByb2R1Y3QucHJvZHVjdC53aG9sZXNhbGVQcmljZSA6IHByb2R1Y3QucHJvZHVjdC5yZXRhaWxQcmljZTtcclxuICAgIH0pXHJcbiAgICByZXJlbmRlclRhYmxlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlbGVjdERvY3VtZW50VHlwZShlKSB7XHJcbiAgICBkb2N1bWVudFR5cGUgPSBlLnRhcmdldC52YWx1ZTtcclxuICAgIHJlcmVuZGVyVGFibGUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVyZW5kZXJUYWJsZSgpIHtcclxuICAgIG9yZGVyVHlwZSA9PT0gJ3dob2xlc2FsZScgPyByZW5kZXIod2hvbGVzYWxlUHJvZHVjdHNUYWJsZShhZGRlZFByb2R1Y3RzKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYmxlJykpIDogcmVuZGVyKHJldGFpbFByb2R1Y3RzVGFibGUoYWRkZWRQcm9kdWN0cyksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJsZScpKTtcclxuXHJcbiAgICByZW5kZXIoYm90dG9tUm93KHBhcmFtcywgY29tcGFuaWVzKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvdHRvbVJvdycpKTtcclxuXHJcbiAgICByZW5kZXIod29vY29tbWVyY2VUZW1wbGF0ZSgpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd29vY29tbWVyY2UnKSk7XHJcblxyXG4gICAgLy8gdXBkYXRlIHRvdGFsIGluIGJvdHRvbSByb3dcclxuICAgIGNvbnN0IHRvdGFsID0gYWRkZWRQcm9kdWN0cy5yZWR1Y2UoKGFjYywgcHJvZHVjdCkgPT4gYWNjICsgKHByb2R1Y3QucHJpY2UgKiBwcm9kdWN0LnF1YW50aXR5KSAqICgxIC0gcHJvZHVjdC5kaXNjb3VudCAvIDEwMCksIDApO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvdGFsJykudGV4dENvbnRlbnQgPSBmb3JtYXRQcmljZSh0b3RhbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlbGVjdEN1c3RvbWVyKGUpIHtcclxuICAgIGlmIChlLnRhcmdldC52YWx1ZS5zcGxpdCgnWycpLmxlbmd0aCA8IDIpIHJldHVybjtcclxuICAgIGNvbnN0IHNlbGVjdGVkVmF0ID0gZS50YXJnZXQudmFsdWUuc3BsaXQoJ1snKVsxXS5zcGxpdCgnXScpWzBdO1xyXG5cclxuICAgIHNlbGVjdGVkQ3VzdG9tZXIgPSBjdXN0b21lcnMuZmluZChjdXN0b21lciA9PiBjdXN0b21lci52YXQgPT09IHNlbGVjdGVkVmF0KTtcclxuXHJcbiAgICBhZGRlZFByb2R1Y3RzLmZvckVhY2gocHJvZHVjdCA9PiBwcm9kdWN0LmRpc2NvdW50ID0gc2VsZWN0ZWRDdXN0b21lci5kaXNjb3VudCB8fCAwKTtcclxuICAgIHJlcmVuZGVyVGFibGUoKTtcclxuICAgIHJlbmRlcihyZWNlaXZlclRlbXBsYXRlKHNlbGVjdGVkQ3VzdG9tZXIucmVjZWl2ZXJzKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2VpdmVyRGl2JykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZWxlY3RDb21wYW55KGUpIHtcclxuICAgIGNvbnN0IGNvbXBhbnkgPSBlLnRhcmdldC52YWx1ZTtcclxuICAgIHNlbGVjdGVkQ29tcGFueSA9IGNvbXBhbmllcy5maW5kKGMgPT4gYy5faWQgPT09IGNvbXBhbnkpO1xyXG4gICAgcmVuZGVyKHNlbmRlclRlbXBsYXRlKCksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kZXJEaXYnKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldERpc2NvdW50KCkge1xyXG4gICAgaWYgKCFzZWxlY3RlZEN1c3RvbWVyKVxyXG4gICAgICAgIHJldHVybiBhbGVydCgn0J/RitGA0LLQviDQuNC30LHQtdGA0Lgg0L/QsNGA0YLQvdGM0L7RgCEnKTtcclxuICAgIGxldCBkaXNjb3VudCA9IHByb21wdCgn0JLRitCy0LXQtNC4INC+0LHRidCwINC+0YLRgdGC0YrQv9C60LAg0LIgJScsIHNlbGVjdGVkQ3VzdG9tZXI/LmRpc2NvdW50IHx8IDApO1xyXG5cclxuICAgIGlmIChkaXNjb3VudCA8IDAgfHwgaXNOYU4oZGlzY291bnQpKVxyXG4gICAgICAgIGRpc2NvdW50ID0gMDtcclxuICAgIGVsc2UgaWYgKGRpc2NvdW50ID4gMTAwKVxyXG4gICAgICAgIGRpc2NvdW50ID0gMTAwO1xyXG5cclxuICAgIHNlbGVjdGVkQ3VzdG9tZXIuZGlzY291bnQgPSBkaXNjb3VudDtcclxuICAgIGFkZGVkUHJvZHVjdHMuZm9yRWFjaChwcm9kdWN0ID0+IHByb2R1Y3QuZGlzY291bnQgPSBkaXNjb3VudCk7XHJcbiAgICByZXJlbmRlclRhYmxlKCk7XHJcbn1cclxuXHJcbmNvbnN0IHRvcFJvdyA9IChwYXJhbXMsIGN1c3RvbWVycykgPT4gaHRtbGBcclxuICAgIDxkaXYgY2xhc3M9XCJyb3cgYWxpZ24taXRlbXMtZW5kIGctM1wiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtNiBjb2wtc21cIj5cclxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImN1c3RvbWVyXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0J/QsNGA0YLQvdGM0L7RgDo8L2xhYmVsPlxyXG4gICAgICAgICAgICA8aW5wdXQgQGNoYW5nZT0ke3NlbGVjdEN1c3RvbWVyfSAudmFsdWU9JHtvcmRlciA/IGAke29yZGVyLmN1c3RvbWVyLm5hbWV9IFske29yZGVyLmN1c3RvbWVyLnZhdH1dICR7b3JkZXIuY3VzdG9tZXIucGhvbmUgPyBgKCR7b3JkZXIuY3VzdG9tZXIucGhvbmV9KWAgOiAnJ31gIDogJyd9IGxpc3Q9XCJjdXN0b21lcnNMaXN0XCIgcGxhY2Vob2xkZXI9XCLQktGK0LLQtdC00Lgg0LjQvNC1INC40LvQuCDQsdGD0LvRgdGC0LDRglwiIG5hbWU9XCJjdXN0b21lclwiIGlkPVwiY3VzdG9tZXJcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiID9kaXNhYmxlZD0ke29yZGVyICYmICFbJ21hbmFnZXInLCAnYWRtaW4nXS5pbmNsdWRlcyhsb2dnZWRJblVzZXIucm9sZSl9IHJlcXVpcmVkPlxyXG4gICAgICAgICAgICA8ZGF0YWxpc3QgaWQ9XCJjdXN0b21lcnNMaXN0XCI+XHJcbiAgICAgICAgICAgICAgICAke2N1c3RvbWVycyAmJiBjdXN0b21lcnMubWFwKGN1c3RvbWVyID0+IGh0bWxgPG9wdGlvbiB2YWx1ZT0ke2Ake2N1c3RvbWVyLm5hbWV9IFske2N1c3RvbWVyLnZhdH1dICR7Y3VzdG9tZXIucGhvbmUgPyBgKCR7Y3VzdG9tZXIucGhvbmV9KWAgOiAnJ31gfT48L29wdGlvbj5gKX07XHJcbiAgICAgICAgICAgIDwvZGF0YWxpc3Q+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbC02IGNvbC1zbVwiPlxyXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwidHlwZVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCi0LjQvyDQvdCwINC00L7QutGD0LzQtdC90YI6PC9sYWJlbD5cclxuICAgICAgICAgICAgPHNlbGVjdCBuYW1lPVwidHlwZVwiIEBjaGFuZ2U9JHtzZWxlY3REb2N1bWVudFR5cGV9IGlkPVwidHlwZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcmVxdWlyZWQgP2Rpc2FibGVkPSR7b3JkZXIgJiYgIVsnbWFuYWdlcicsICdhZG1pbiddLmluY2x1ZGVzKGxvZ2dlZEluVXNlci5yb2xlKX0+XHJcbiAgICAgICAgICAgICAgICAke09iamVjdC5lbnRyaWVzKHBhcmFtcy5kb2N1bWVudFR5cGVzKS5tYXAodHlwZSA9PiBodG1sYDxvcHRpb24gP3NlbGVjdGVkPSR7KG9yZGVyICYmIHR5cGVbMF0gPT0gb3JkZXIudHlwZSkgfHwgKCFvcmRlciAmJiB0eXBlWzBdID09PSBkb2N1bWVudFR5cGUpfSB2YWx1ZT0ke3R5cGVbMF19PiR7dHlwZVsxXX08L29wdGlvbj5gKX1cclxuICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbC02IGNvbC1zbVwiPlxyXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwiZGF0ZVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCU0LDRgtCwOjwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZVwiIG5hbWU9XCJkYXRlXCIgaWQ9XCJkYXRlXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiA/ZGlzYWJsZWQ9JHshWydtYW5hZ2VyJywgJ2FkbWluJ10uaW5jbHVkZXMobG9nZ2VkSW5Vc2VyLnJvbGUpfSByZXF1aXJlZD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgY29sLXNtXCI+XHJcbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJudW1iZXJcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QlNC+0LrRg9C80LXQvdGCINC90L7QvNC10YA6PC9sYWJlbD5cclxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cIm51bWJlclwiIGlkPVwibnVtYmVyXCIgaW5wdXRtb2RlPVwibnVtZXJpY1wiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgdmFsdWU9JHtvcmRlciAmJiBvcmRlci5udW1iZXJ9IGRpc2FibGVkIHBsYWNlaG9sZGVyPVwi0JDQstGC0L7QvNCw0YLQuNGH0L3QvlwiPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtNiBjb2wtc21cIj5cclxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cIm9yZGVyVHlwZVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCi0LjQvyDQvdCwINC/0YDQvtC00LDQttCx0LA6PC9sYWJlbD5cclxuICAgICAgICAgICAgPHNlbGVjdCA/ZGlzYWJsZWQ9JHtvcmRlcn0gQGNoYW5nZT0ke2NoYW5nZU9yZGVyVHlwZX0gbmFtZT1cIm9yZGVyVHlwZVwiIGlkPVwib3JkZXJUeXBlXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiByZXF1aXJlZD5cclxuICAgICAgICAgICAgICAgICR7T2JqZWN0LmVudHJpZXMocGFyYW1zLm9yZGVyVHlwZXMpLm1hcCh0eXBlID0+IGh0bWxgPG9wdGlvbiA/c2VsZWN0ZWQ9JHsob3JkZXIgJiYgdHlwZVswXSA9PSBvcmRlci5vcmRlclR5cGUpIHx8ICghb3JkZXIgJiYgdHlwZVswXSA9PT0gZGVmYXVsdFZhbHVlcy5maW5kKGQgPT4gZC5rZXkgPT09ICdvcmRlclR5cGUnKS52YWx1ZSl9IHZhbHVlPSR7dHlwZVswXX0+JHt0eXBlWzFdfTwvb3B0aW9uPmApfVxyXG4gICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgY29sLXNtXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gQGNsaWNrPSR7c2V0RGlzY291bnR9IHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5XCIgP2Rpc2FibGVkPSR7b3JkZXIgJiYgIVsnbWFuYWdlcicsICdhZG1pbiddLmluY2x1ZGVzKGxvZ2dlZEluVXNlci5yb2xlKX0+0JfQsNC00LDQuSDQvtCx0YnQsCDQvtGC0YHRgtGK0L/QutCwPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuYDtcclxuXHJcbmNvbnN0IHNlbmRlclRlbXBsYXRlID0gKCkgPT4gaHRtbGBcclxuICAgIDxsYWJlbCBmb3I9XCJzZW5kZXJcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7Qn9GA0LXQtNCw0Ls6PC9sYWJlbD5cclxuICAgIDxpbnB1dCBsaXN0PVwic2VuZGVyc0xpc3RcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIG5hbWU9XCJzZW5kZXJcIiBpZD1cInNlbmRlclwiIHR5cGU9XCJ0ZXh0XCIgLnZhbHVlPSR7b3JkZXI/LnNlbmRlciB8fCBzZWxlY3RlZENvbXBhbnk/LnNlbmRlcnM/LnNsaWNlKC0xKVswXSB8fCAnJ30gP2Rpc2FibGVkPSR7b3JkZXIgJiYgIVsnbWFuYWdlcicsICdhZG1pbiddLmluY2x1ZGVzKGxvZ2dlZEluVXNlci5yb2xlKX0gYXV0b2NvbXBsZXRlPVwib2ZmXCIgcmVxdWlyZWQvPlxyXG4gICAgPGRhdGFsaXN0IGlkPVwic2VuZGVyc0xpc3RcIj5cclxuICAgICAgICAke3NlbGVjdGVkQ29tcGFueSAmJiBzZWxlY3RlZENvbXBhbnk/LnNlbmRlcnM/Lm1hcChzZW5kZXIgPT4gaHRtbGA8b3B0aW9uIHZhbHVlPSR7c2VuZGVyfT48L29wdGlvbj5gKX1cclxuICAgIDwvZGF0YWxpc3Q+XHJcbmA7XHJcblxyXG5jb25zdCByZWNlaXZlclRlbXBsYXRlID0gKHJlY2VpdmVycykgPT4gaHRtbGBcclxuICAgIDxsYWJlbCBmb3I9XCJyZWNlaXZlclwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCf0L7Qu9GD0YfQuNC7OjwvbGFiZWw+XHJcbiAgICA8aW5wdXQgbGlzdD1cInJlY2VpdmVyc0xpc3RcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIG5hbWU9XCJyZWNlaXZlclwiIGlkPVwicmVjZWl2ZXJcIiB0eXBlPVwidGV4dFwiIC52YWx1ZT0ke29yZGVyPy5yZWNlaXZlciB8fCByZWNlaXZlcnM/LnNsaWNlKC0xKVswXSB8fCAnJ30gYXV0b2NvbXBsZXRlPVwib2ZmXCIgP2Rpc2FibGVkPSR7b3JkZXIgJiYgIVsnbWFuYWdlcicsICdhZG1pbiddLmluY2x1ZGVzKGxvZ2dlZEluVXNlci5yb2xlKX0gcmVxdWlyZWQvPlxyXG4gICAgPGRhdGFsaXN0IGlkPVwicmVjZWl2ZXJzTGlzdFwiPlxyXG4gICAgICAgICR7cmVjZWl2ZXJzPy5tYXAocmVjZWl2ZXIgPT4gaHRtbGA8b3B0aW9uIHZhbHVlPSR7cmVjZWl2ZXJ9Pjwvb3B0aW9uPmApfVxyXG4gICAgPC9kYXRhbGlzdD5cclxuYDtcclxuXHJcbmNvbnN0IGJvdHRvbVJvdyA9IChwYXJhbXMsIGNvbXBhbmllcykgPT4gaHRtbGBcclxuICAgIDxkaXYgY2xhc3M9XCJjb2wtNiBjb2wtc21cIj5cclxuICAgICAgICA8bGFiZWwgZm9yPVwiY29tcGFueVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCe0LHQtdC60YI6PC9sYWJlbD5cclxuICAgICAgICA8c2VsZWN0IEBjaGFuZ2U9JHtzZWxlY3RDb21wYW55fSBuYW1lPVwiY29tcGFueVwiIGlkPVwiY29tcGFueVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgP2Rpc2FibGVkPSR7b3JkZXIgJiYgIVsnbWFuYWdlcicsICdhZG1pbiddLmluY2x1ZGVzKGxvZ2dlZEluVXNlci5yb2xlKX0gcmVxdWlyZWQ+XHJcbiAgICAgICAgICAgICR7Y29tcGFuaWVzICYmIGNvbXBhbmllcy5tYXAoY29tcGFueSA9PiBodG1sYDxvcHRpb24gP3NlbGVjdGVkPSR7b3JkZXIgJiYgY29tcGFueS5faWQgPT0gb3JkZXIuY29tcGFueS5faWR9IHZhbHVlPSR7Y29tcGFueS5faWR9PiR7Y29tcGFueS5uYW1lfTwvb3B0aW9uPmApfVxyXG4gICAgICAgIDwvc2VsZWN0PlxyXG4gICAgPC9kaXY+XHJcblxyXG4gICAgPGRpdiBpZD1cInJlY2VpdmVyRGl2XCIgY2xhc3M9XCJjb2wtNiBjb2wtc21cIj48L2Rpdj5cclxuXHJcbiAgICA8ZGl2IGlkPVwic2VuZGVyRGl2XCIgY2xhc3M9XCJjb2wtNiBjb2wtc21cIj48L2Rpdj5cclxuXHJcbiAgICA8ZGl2IGNsYXNzPVwiY29sLTYgY29sLXNtXCI+XHJcbiAgICAgICAgPGxhYmVsIGZvcj1cInBheW1lbnRUeXBlXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0J3QsNGH0LjQvSDQvdCwINC/0LvQsNGJ0LDQvdC1OjwvbGFiZWw+XHJcbiAgICAgICAgPHNlbGVjdCBuYW1lPVwicGF5bWVudFR5cGVcIiBpZD1cInBheW1lbnRUeXBlXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiA/ZGlzYWJsZWQ9JHtvcmRlciAmJiAhWydtYW5hZ2VyJywgJ2FkbWluJ10uaW5jbHVkZXMobG9nZ2VkSW5Vc2VyLnJvbGUpfSByZXF1aXJlZD5cclxuICAgICAgICAgICAgJHtPYmplY3QuZW50cmllcyhwYXJhbXMucGF5bWVudFR5cGVzKS5tYXAodHlwZSA9PiBodG1sYDxvcHRpb24gP3NlbGVjdGVkPSR7KG9yZGVyICYmIHR5cGVbMF0gPT0gb3JkZXIucGF5bWVudFR5cGUpIHx8ICghb3JkZXIgJiYgdHlwZVswXSA9PT0gZGVmYXVsdFZhbHVlcy5maW5kKGQgPT4gZC5rZXkgPT09ICdwYXltZW50VHlwZScpLnZhbHVlKX0gdmFsdWU9JHt0eXBlWzBdfT4ke3R5cGVbMV19PC9vcHRpb24+YCl9XHJcbiAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICA8L2Rpdj5cclxuXHJcbiAgICA8ZGl2IGNsYXNzPVwiY29sLTEyIGNvbC1zbVwiPlxyXG4gICAgICAgIDxsYWJlbCBmb3I9XCJwYWlkQW1vdW50XCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0J/Qu9Cw0YLQtdC90LAg0YHRg9C80LA6PC9sYWJlbD5cclxuICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuYW1lPVwicGFpZEFtb3VudFwiIGlkPVwicGFpZEFtb3VudFwiIHR5cGU9XCJ0ZXh0XCIgLnZhbHVlPSR7b3JkZXIgPyBvcmRlci5wYWlkQW1vdW50IDogMH0gYXV0b2NvbXBsZXRlPVwib2ZmXCIgaW5wdXRtb2RlPVwiZGVjaW1hbFwiIHJlcXVpcmVkID9kaXNhYmxlZD0ke29yZGVyICYmICFbJ21hbmFnZXInLCAnYWRtaW4nXS5pbmNsdWRlcyhsb2dnZWRJblVzZXIucm9sZSl9Lz5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgICR7ZG9jdW1lbnRUeXBlID09PSAnaW52b2ljZScgPyBodG1sYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtMTIgY29sLXNtXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tY2hlY2tcIj5cclxuICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jaGVjay1pbnB1dFwiIHR5cGU9XCJjaGVja2JveFwiIGlkPVwicHJpbnRDb3B5XCIgP2NoZWNrZWQ9JHtbJ29yaWdpbmFsQ29weScsICdvcmlnaW5hbENvcHlTdG9rb3ZhJ10uaW5jbHVkZXMoZGVmYXVsdFZhbHVlcy5maW5kKGQgPT4gZC5rZXkgPT09ICdvcmRlclByaW50JykudmFsdWUpfT5cclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1jaGVjay1sYWJlbFwiIGZvcj1cInByaW50Q29weVwiPlxyXG4gICAgICAgICAgICAgICAg0JrQvtC/0LjQtSDQvdCwINGE0LDQutGC0YPRgNCwXHJcbiAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNoZWNrXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY2hlY2staW5wdXRcIiB0eXBlPVwiY2hlY2tib3hcIiBpZD1cInByaW50U3Rva292YVwiID9jaGVja2VkPSR7J29yaWdpbmFsQ29weVN0b2tvdmEnID09PSBkZWZhdWx0VmFsdWVzLmZpbmQoZCA9PiBkLmtleSA9PT0gJ29yZGVyUHJpbnQnKS52YWx1ZX0+XHJcbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tY2hlY2stbGFiZWxcIiBmb3I9XCJwcmludFN0b2tvdmFcIj5cclxuICAgICAgICAgICAgICAgINCh0YLQvtC60L7QstCwINGA0LDQt9C/0LjRgdC60LBcclxuICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PmAgOiAnJ31cclxuXHJcbiAgICA8ZGl2IGNsYXNzPVwiY29sLTEyIGNvbC1zbSB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgIDxkaXYgPtCe0LHRidC+OiA8c3BhbiBpZD1cInRvdGFsXCI+PC9zcGFuPjwvZGl2PlxyXG4gICAgICAgICR7c3VibWl0QnRuKHsgZnVuYzogY3JlYXRlRWRpdE9yZGVyLCB0ZXh0OiBcItCX0LDQv9Cw0LfQuCDQuCDQv9GA0LjQvdGC0LjRgNCw0LlcIiwgdHlwZTogXCJidXR0b25cIiB9KX1cclxuICAgIDwvZGl2PlxyXG5gO1xyXG5cclxuY29uc3Qgc3BlZWR5VGVtcGxhdGUgPSAoKSA9PiBodG1sYFxyXG4gICAgPGRpdj7QlNC+0YHRgtCw0LLQutCwINC00L46ICR7b3JkZXIud29vY29tbWVyY2Uuc3BlZWR5Lm9mZmljZSA/IFwi0J7RhNC40YFcIiA6IFwi0JDQtNGA0LXRgVwifTwvZGl2PlxyXG4gICAgPGRpdj7QlNGK0YDQttCw0LLQsDogJHtvcmRlci53b29jb21tZXJjZS5zcGVlZHkuY291bnRyeX08L2Rpdj5cclxuICAgIDxkaXY+0JPRgNCw0LQ6ICR7b3JkZXIud29vY29tbWVyY2Uuc3BlZWR5LmxvY2FsaXR5fTwvZGl2PlxyXG4gICAgJHtvcmRlci53b29jb21tZXJjZS5zcGVlZHkub2ZmaWNlID8gaHRtbGA8ZGl2PtCe0YTQuNGBOiAke29yZGVyLndvb2NvbW1lcmNlLnNwZWVkeS5vZmZpY2V9PC9kaXY+YCA6ICcnfVxyXG4gICAgJHtvcmRlci53b29jb21tZXJjZS5zcGVlZHkuc3RyZWV0ID8gaHRtbGBcclxuICAgICAgICA8ZGl2PtCj0LvQuNGG0LA6ICR7b3JkZXIud29vY29tbWVyY2Uuc3BlZWR5LnN0cmVldH0gJHtvcmRlci53b29jb21tZXJjZS5zcGVlZHkubnVtYmVyID8gYOKEliAke29yZGVyLndvb2NvbW1lcmNlLnNwZWVkeS5udW1iZXJ9YCA6ICcnfSAke29yZGVyLndvb2NvbW1lcmNlLnNwZWVkeS5lbnRyYW5jZSA/IGDQstGFLiAke29yZGVyLndvb2NvbW1lcmNlLnNwZWVkeS5lbnRyYW5jZX1gIDogJyd9ICR7b3JkZXIud29vY29tbWVyY2Uuc3BlZWR5LmZsb29yID8gYNC10YIuICR7b3JkZXIud29vY29tbWVyY2Uuc3BlZWR5LmZsb29yfWAgOiAnJ30gJHtvcmRlci53b29jb21tZXJjZS5zcGVlZHkuYXBhcnRtZW50ID8gYNCw0L8uICR7b3JkZXIud29vY29tbWVyY2Uuc3BlZWR5LmFwYXJ0bWVudH1gIDogJyd9PC9kaXY+XHJcbiAgICAgICAgJHtvcmRlci53b29jb21tZXJjZS5zcGVlZHkubm90ZSA/IGh0bWxgPGRpdj7QkdC10LvQtdC20LrQsDogJHtvcmRlci53b29jb21tZXJjZS5zcGVlZHkubm90ZX08L2Rpdj5gIDogJyd9XHJcbmAgOiAnJ31cclxuICAgIDxkaXY+0KHRg9C80LA6ICR7Zm9ybWF0UHJpY2Uob3JkZXIud29vY29tbWVyY2Uuc3BlZWR5LnRvdGFsKX08L2Rpdj5cclxuYDtcclxuXHJcbmNvbnN0IGVjb250VGVtcGxhdGUgPSAoKSA9PiBodG1sYFxyXG4gICAgPGRpdj7QlNC+0YHRgtCw0LLQutCwINC00L46ICR7b3JkZXIud29vY29tbWVyY2UuZWNvbnQuc2hpcF90b308L2Rpdj5cclxuICAgIDxkaXY+0JPRgNCw0LQ6ICR7b3JkZXIud29vY29tbWVyY2UuZWNvbnQuY2l0eX08L2Rpdj5cclxuICAgIDxkaXY+0J/QvtGJ0LXQvdGB0LrQuCDQutC+0LQ6ICR7b3JkZXIud29vY29tbWVyY2UuZWNvbnQucG9zdGFsX2NvZGV9PC9kaXY+XHJcbiAgICAke29yZGVyLndvb2NvbW1lcmNlLmVjb250Lm9mZmljZSA/IGh0bWxgPGRpdj4ke29yZGVyLndvb2NvbW1lcmNlLmVjb250Lm9mZmljZX08L2Rpdj5gIDogaHRtbGDQkNC00YDQtdGBOiAke29yZGVyLndvb2NvbW1lcmNlLmVjb250LnN0cmVldH0gJHtvcmRlci53b29jb21tZXJjZS5lY29udC5udW1iZXIgPyAn4oSWICcgKyBvcmRlci53b29jb21tZXJjZS5lY29udC5udW1iZXIgOiAnJ30gJHtvcmRlci53b29jb21tZXJjZS5lY29udC5lbnRyYW5jZSA/ICfQstGFLiAnICsgb3JkZXIud29vY29tbWVyY2UuZWNvbnQuZW50cmFuY2UgOiAnJ30gJHtvcmRlci53b29jb21tZXJjZS5lY29udC5mbG9vciA/ICfQtdGCLiAnICsgb3JkZXIud29vY29tbWVyY2UuZWNvbnQuZmxvb3IgOiAnJ30gJHtvcmRlci53b29jb21tZXJjZS5lY29udC5hcGFydG1lbnQgPyAn0LDQvy4gJyArIG9yZGVyLndvb2NvbW1lcmNlLmVjb250LmFwYXJ0bWVudCA6ICcnfTwvZGl2PmB9XHJcbiAgICA8ZGl2PtCh0YPQvNCwOiAke2Zvcm1hdFByaWNlKG9yZGVyLndvb2NvbW1lcmNlLmVjb250LnRvdGFsKX08L2Rpdj5cclxuICAgICR7b3JkZXIud29vY29tbWVyY2UuZWNvbnQubm90ZSA/IGh0bWxgPGRpdj7QkdC10LvQtdC20LrQsDogJHtvcmRlci53b29jb21tZXJjZS5lY29udC5ub3RlfTwvZGl2PmAgOiAnJ31cclxuYDtcclxuXHJcbmNvbnN0IHNoaXBwaW5nVGVtcGxhdGUgPSAoKSA9PiBodG1sYGA7XHJcblxyXG5jb25zdCB3b29jb21tZXJjZVRlbXBsYXRlID0gKCkgPT4gaHRtbGBcclxuICAgIDwhLS0gSUQgLS0+XHJcbiAgICAgPGRpdiBjbGFzcz1cImNvbC0zXCI+XHJcbiAgICAgICAgPGRpdj5Xb29Db21tZXJjZSBJRDogJHtvcmRlciAmJiBvcmRlci53b29jb21tZXJjZS5pZH08L2Rpdj5cclxuICAgICA8L2Rpdj5cclxuICAgIDwhLS0gU3RhdHVzIC0tPlxyXG4gICAgPGRpdiBjbGFzcz1cImNvbC0zXCI+XHJcbiAgICAgICAgPGxhYmVsIGZvcj1cInN0YXR1c1wiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCh0YLQsNGC0YPRgTo8L2xhYmVsPlxyXG4gICAgICAgIDxzZWxlY3QgbmFtZT1cInN0YXR1c1wiIGlkPVwic3RhdHVzXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiByZXF1aXJlZD5cclxuICAgICAgICAgICAgJHtPYmplY3QuZW50cmllcyhwYXJhbXMud29vY29tbWVyY2Uuc3RhdHVzKS5tYXAodHlwZSA9PiBodG1sYDxvcHRpb24gP3NlbGVjdGVkPSR7b3JkZXIgJiYgdHlwZVswXSA9PSBvcmRlci5zdGF0dXN9IHZhbHVlPSR7dHlwZVswXX0+JHt0eXBlWzFdfTwvb3B0aW9uPmApfVxyXG4gICAgICAgIDwvc2VsZWN0PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzPVwiY29sLTNcIj5cclxuICAgICAgICA8ZGl2PtCU0L7RgdGC0LDQstC60LA6ICR7b3JkZXIgJiYgKG9yZGVyLndvb2NvbW1lcmNlLnNwZWVkeSA/ICdTcGVlZHknIDogb3JkZXIud29vY29tbWVyY2UuZWNvbnQgPyAn0JXQutC+0L3RgicgOiBvcmRlci53b29jb21tZXJjZS5zaGlwcGluZyl9PC9kaXY+XHJcbiAgICAgICAgJHtvcmRlciAmJiBvcmRlci53b29jb21tZXJjZS5zcGVlZHkgPyBzcGVlZHlUZW1wbGF0ZSgpIDogb3JkZXIgJiYgb3JkZXIud29vY29tbWVyY2UuZWNvbnQgPyBlY29udFRlbXBsYXRlKCkgOiBzaGlwcGluZ1RlbXBsYXRlKCl9XHJcbiAgICA8L2Rpdj5cclxuICAgICAgICA8IS0tIE5vdGUgLS0+XHJcbmA7XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVRdWFudGl0eShlKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuZ2V0QXR0cmlidXRlKCdhZGRlZFByb2R1Y3RzSW5kZXgnKTtcclxuICAgIC8vIGZpbmQgYWN0dWFsIGluZGV4IGluIHRoZSBhcnJheSBvZiBhZGRlZFByb2R1Y3RzXHJcbiAgICBjb25zdCBhcnJheUluZGV4ID0gYWRkZWRQcm9kdWN0cy5pbmRleE9mKGFkZGVkUHJvZHVjdHMuZmluZChwcm9kdWN0ID0+IHByb2R1Y3QuaW5kZXggPT0gaW5kZXgpKTtcclxuXHJcbiAgICBlLnRhcmdldC52YWx1ZSA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKTtcclxuXHJcbiAgICBpZiAob3JkZXJUeXBlID09PSAnd2hvbGVzYWxlJykge1xyXG4gICAgICAgIGlmIChvcmRlcilcclxuICAgICAgICAgICAgYWRkZWRQcm9kdWN0c1thcnJheUluZGV4XS5xdWFudGl0eSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIGVsc2UgaWYgKGUudGFyZ2V0Lm1heCAhPT0gJycgJiYgK2UudGFyZ2V0LnZhbHVlID4gK2UudGFyZ2V0Lm1heCkge1xyXG4gICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9IGUudGFyZ2V0Lm1heDtcclxuICAgICAgICAgICAgYWRkZWRQcm9kdWN0c1thcnJheUluZGV4XS5xdWFudGl0eSA9IGUudGFyZ2V0Lm1heDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBhZGRlZFByb2R1Y3RzW2FycmF5SW5kZXhdLnF1YW50aXR5ID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICB9IGVsc2UgaWYgKG9yZGVyVHlwZSA9PT0gJ3JldGFpbCcpIHtcclxuICAgICAgICBpZiAob3JkZXIpIHtcclxuICAgICAgICAgICAgYWRkZWRQcm9kdWN0c1thcnJheUluZGV4XS5xdWFudGl0eSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlLnRhcmdldC5tYXggIT09ICcnICYmICtlLnRhcmdldC52YWx1ZSA+ICtlLnRhcmdldC5tYXgpIHtcclxuICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPSBlLnRhcmdldC5tYXg7XHJcbiAgICAgICAgICAgIGFkZGVkUHJvZHVjdHNbYXJyYXlJbmRleF0ucXVhbnRpdHkgPSBlLnRhcmdldC5tYXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgYWRkZWRQcm9kdWN0c1thcnJheUluZGV4XS5xdWFudGl0eSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcmVuZGVyVGFibGUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlU2l6ZShlKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuZ2V0QXR0cmlidXRlKCdhZGRlZFByb2R1Y3RzSW5kZXgnKTtcclxuICAgIC8vIGZpbmQgYWN0dWFsIGluZGV4IGluIHRoZSBhcnJheSBvZiBhZGRlZFByb2R1Y3RzXHJcbiAgICBjb25zdCBhcnJheUluZGV4ID0gYWRkZWRQcm9kdWN0cy5pbmRleE9mKGFkZGVkUHJvZHVjdHMuZmluZChwcm9kdWN0ID0+IHByb2R1Y3QuaW5kZXggPT0gaW5kZXgpKTtcclxuICAgIGFkZGVkUHJvZHVjdHNbYXJyYXlJbmRleF0uc2l6ZSA9IGUudGFyZ2V0LnZhbHVlO1xyXG5cclxuICAgIGlmIChvcmRlclR5cGUgPT09ICdyZXRhaWwnICYmICFvcmRlcikgey8vIGlmIG9yZGVyIHJldGFpbCwgY29tcGFyZSBjdXJyZW50IHF0eSB3aXRoIG5ld2x5IHNlbGVjdGVkIHNpemUgYXZhaWxhYmxlIHF0eVxyXG4gICAgICAgIGNvbnN0IG1heFF0eUZvclNpemUgPSBhZGRlZFByb2R1Y3RzW2FycmF5SW5kZXhdLnByb2R1Y3Q/LnNpemVzLmZpbmQocyA9PiBzLnNpemUgPT0gYWRkZWRQcm9kdWN0c1thcnJheUluZGV4XS5zaXplKS5xdWFudGl0eVxyXG4gICAgICAgIGFkZGVkUHJvZHVjdHNbYXJyYXlJbmRleF0ucXVhbnRpdHkgPSBhZGRlZFByb2R1Y3RzW2FycmF5SW5kZXhdLnF1YW50aXR5ID4gbWF4UXR5Rm9yU2l6ZSA/IHBhcnNlSW50KG1heFF0eUZvclNpemUpIDogYWRkZWRQcm9kdWN0c1thcnJheUluZGV4XS5xdWFudGl0eTtcclxuICAgIH1cclxuXHJcbiAgICByZXJlbmRlclRhYmxlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZURpc2NvdW50KGUpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xyXG4gICAgZml4SW5wdXRQcmljZSh0YXJnZXQpO1xyXG4gICAgbGV0IHZhbHVlID0gdGFyZ2V0LnZhbHVlO1xyXG5cclxuICAgIGNvbnN0IGluZGV4ID0gZS50YXJnZXQuY2xvc2VzdCgndHInKS5nZXRBdHRyaWJ1dGUoJ2FkZGVkUHJvZHVjdHNJbmRleCcpO1xyXG4gICAgLy8gZmluZCBhY3R1YWwgaW5kZXggaW4gdGhlIGFycmF5IG9mIGFkZGVkUHJvZHVjdHNcclxuICAgIGNvbnN0IGFycmF5SW5kZXggPSBhZGRlZFByb2R1Y3RzLmluZGV4T2YoYWRkZWRQcm9kdWN0cy5maW5kKHByb2R1Y3QgPT4gcHJvZHVjdC5pbmRleCA9PSBpbmRleCkpO1xyXG5cclxuICAgIGlmICh2YWx1ZSA+IDEwMClcclxuICAgICAgICB0YXJnZXQudmFsdWUgPSAxMDA7XHJcbiAgICBlbHNlIGlmICh2YWx1ZSA8IDApXHJcbiAgICAgICAgdGFyZ2V0LnZhbHVlID0gMDtcclxuXHJcbiAgICB2YWx1ZSA9IHRhcmdldC52YWx1ZVxyXG5cclxuICAgIGFkZGVkUHJvZHVjdHNbYXJyYXlJbmRleF0uZGlzY291bnQgPSB2YWx1ZTtcclxuICAgIHJlcmVuZGVyVGFibGUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlUHJpY2UoZSkge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XHJcbiAgICBmaXhJbnB1dFByaWNlKHRhcmdldCwgdHJ1ZSk7XHJcbiAgICBjb25zdCB2YWx1ZSA9IHRhcmdldC52YWx1ZTtcclxuXHJcbiAgICBjb25zdCBpbmRleCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuZ2V0QXR0cmlidXRlKCdhZGRlZFByb2R1Y3RzSW5kZXgnKTtcclxuICAgIC8vIGZpbmQgYWN0dWFsIGluZGV4IGluIHRoZSBhcnJheSBvZiBhZGRlZFByb2R1Y3RzXHJcbiAgICBjb25zdCBhcnJheUluZGV4ID0gYWRkZWRQcm9kdWN0cy5pbmRleE9mKGFkZGVkUHJvZHVjdHMuZmluZChwcm9kdWN0ID0+IHByb2R1Y3QuaW5kZXggPT0gaW5kZXgpKTtcclxuXHJcbiAgICBhZGRlZFByb2R1Y3RzW2FycmF5SW5kZXhdLnByaWNlID0gdmFsdWU7XHJcbiAgICByZXJlbmRlclRhYmxlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVF0eUluUGFja2FnZShlKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuZ2V0QXR0cmlidXRlKCdhZGRlZFByb2R1Y3RzSW5kZXgnKTtcclxuICAgIC8vIGZpbmQgYWN0dWFsIGluZGV4IGluIHRoZSBhcnJheSBvZiBhZGRlZFByb2R1Y3RzXHJcbiAgICBjb25zdCBhcnJheUluZGV4ID0gYWRkZWRQcm9kdWN0cy5pbmRleE9mKGFkZGVkUHJvZHVjdHMuZmluZChwcm9kdWN0ID0+IHByb2R1Y3QuaW5kZXggPT0gaW5kZXgpKTtcclxuICAgIGUudGFyZ2V0LnZhbHVlID8gYWRkZWRQcm9kdWN0c1thcnJheUluZGV4XS5xdHlJblBhY2thZ2UgPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSkgOiBkZWxldGUgYWRkZWRQcm9kdWN0c1thcnJheUluZGV4XS5xdHlJblBhY2thZ2U7XHJcbiAgICByZXJlbmRlclRhYmxlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVVuaXRPZk1lYXN1cmUoZSkge1xyXG4gICAgY29uc3QgaW5kZXggPSBlLnRhcmdldC5jbG9zZXN0KCd0cicpLmdldEF0dHJpYnV0ZSgnYWRkZWRQcm9kdWN0c0luZGV4Jyk7XHJcbiAgICAvLyBmaW5kIGFjdHVhbCBpbmRleCBpbiB0aGUgYXJyYXkgb2YgYWRkZWRQcm9kdWN0c1xyXG4gICAgY29uc3QgYXJyYXlJbmRleCA9IGFkZGVkUHJvZHVjdHMuaW5kZXhPZihhZGRlZFByb2R1Y3RzLmZpbmQocHJvZHVjdCA9PiBwcm9kdWN0LmluZGV4ID09IGluZGV4KSk7XHJcbiAgICBhZGRlZFByb2R1Y3RzW2FycmF5SW5kZXhdLnVuaXRPZk1lYXN1cmUgPSBlLnRhcmdldC52YWx1ZTtcclxuICAgIHJlcmVuZGVyVGFibGUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlUHJvZHVjdChlKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuZ2V0QXR0cmlidXRlKCdhZGRlZFByb2R1Y3RzSW5kZXgnKTtcclxuICAgIGFkZGVkUHJvZHVjdHMgPSBhZGRlZFByb2R1Y3RzLmZpbHRlcihwcm9kdWN0ID0+IHByb2R1Y3QuaW5kZXggIT0gaW5kZXgpO1xyXG4gICAgcmVyZW5kZXJUYWJsZSgpO1xyXG59XHJcblxyXG5jb25zdCBhZGRQcm9kdWN0Um93ID0gKCkgPT4gaHRtbGBcclxuPHRyIGlkPVwiYWRkTmV3UHJvZHVjdFwiPlxyXG4gICAgPHRkIGNvbHNwYW49XCIzXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dCBAa2V5dXA9JHthZGRQcm9kdWN0fSBwbGFjZWhvbGRlcj1cItCR0LDRgNC60L7QtC/QutC+0LRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInByb2R1Y3RcIiBpZD1cInByb2R1Y3RcIiBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBAY2xpY2s9JHtzY2FuQmFyY29kZX0gY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIiB0eXBlPVwiYnV0dG9uXCIgaWQ9XCJzY2FuQmFyY29kZVwiPjxpIGNsYXNzPVwiYmkgYmktY2FtZXJhXCI+PC9pPiDQodC60LDQvdC40YDQsNC5PC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gQGNsaWNrPSR7c3RvcEJhcmNvZGV9IGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGQtbm9uZVwiIHR5cGU9XCJidXR0b25cIiBpZD1cInN0b3BCYXJjb2RlXCI+PGkgY2xhc3M9XCJiaSBiaS1jYW1lcmFcIj48L2k+INCX0LDRgtCy0L7RgNC4PC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L3RkPlxyXG4gICAgPHRkIGNvbHNwYW49XCI2XCI+XHJcbiAgICAgICAgPGRpdiBpZD1cImJhcmNvZGVWaWRlb1wiPjwvZGl2PlxyXG4gICAgPC90ZD5cclxuPC90cj5cclxuYDtcclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkU2l6ZXMoZSkge1xyXG4gICAgY29uc3QgaW5kZXggPSBlLnRhcmdldC5jbG9zZXN0KCd0cicpLmdldEF0dHJpYnV0ZSgnYWRkZWRQcm9kdWN0c0luZGV4Jyk7XHJcbiAgICAvLyBmaW5kIGFjdHVhbCBpbmRleCBpbiB0aGUgYXJyYXkgb2YgYWRkZWRQcm9kdWN0c1xyXG4gICAgY29uc3QgYXJyYXlJbmRleCA9IGFkZGVkUHJvZHVjdHMuaW5kZXhPZihhZGRlZFByb2R1Y3RzLmZpbmQocHJvZHVjdCA9PiBwcm9kdWN0LmluZGV4ID09IGluZGV4KSk7XHJcblxyXG4gICAgaWYgKCFlLnRhcmdldC5jaGVja2VkKSBhZGRlZFByb2R1Y3RzW2FycmF5SW5kZXhdLnNlbGVjdGVkU2l6ZXMgPSBhZGRlZFByb2R1Y3RzW2FycmF5SW5kZXhdLnNlbGVjdGVkU2l6ZXMuZmlsdGVyKHNpemUgPT4gc2l6ZSAhPT0gZS50YXJnZXQudmFsdWUpO1xyXG4gICAgZWxzZSBhZGRlZFByb2R1Y3RzW2FycmF5SW5kZXhdLnNlbGVjdGVkU2l6ZXMucHVzaChlLnRhcmdldC52YWx1ZSk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHByaWNlIGJhc2VkIG9uIHNlbGVjdGVkIHNpemVzIGxlbmd0aFxyXG4gICAgaWYgKGFkZGVkUHJvZHVjdHNbYXJyYXlJbmRleF0uc2VsZWN0ZWRTaXplcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgdW5pdFByaWNlID0gYWRkZWRQcm9kdWN0c1thcnJheUluZGV4XS5wcm9kdWN0Lndob2xlc2FsZVByaWNlIC8gYWRkZWRQcm9kdWN0c1thcnJheUluZGV4XS5wcm9kdWN0LnNpemVzLmxlbmd0aDtcclxuICAgICAgICBhZGRlZFByb2R1Y3RzW2FycmF5SW5kZXhdLnByaWNlID0gKHVuaXRQcmljZSAqIGFkZGVkUHJvZHVjdHNbYXJyYXlJbmRleF0uc2VsZWN0ZWRTaXplcy5sZW5ndGgpLnRvRml4ZWQoMik7XHJcbiAgICB9IGVsc2UgYWRkZWRQcm9kdWN0c1thcnJheUluZGV4XS5wcmljZSA9IDA7XHJcblxyXG4gICAgcmVyZW5kZXJUYWJsZSgpO1xyXG59XHJcblxyXG5jb25zdCBjaGVja2JveFNpemVzID0gKHByb2R1Y3QpID0+IGh0bWxgXHJcbiAgICAke3Byb2R1Y3Q/LnByb2R1Y3Q/LnNpemVzPy5tYXAoc2l6ZSA9PiBodG1sYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNoZWNrXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY2hlY2staW5wdXRcIiBAY2hhbmdlPSR7dXBkYXRlU2VsZWN0ZWRTaXplc30gbmFtZT1cIiR7cHJvZHVjdC5pbmRleH0tJHtzaXplLnNpemV9XCIgdHlwZT1cImNoZWNrYm94XCIgdmFsdWU9JHtzaXplLnNpemV9ID9jaGVja2VkPSR7cHJvZHVjdD8uc2VsZWN0ZWRTaXplcz8uaW5jbHVkZXMoc2l6ZS5zaXplKX0gP2Rpc2FibGVkPSR7IW9yZGVyICYmIHByb2R1Y3QucHJvZHVjdC5zaXplcy5maW5kKHMgPT4gcy5zaXplID09PSBzaXplLnNpemUpLnF1YW50aXR5ID09PSAwfSBpZD1cIiR7cHJvZHVjdC5pbmRleH0tJHtzaXplLnNpemV9XCI+XHJcbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tY2hlY2stbGFiZWxcIiBmb3I9XCIke3Byb2R1Y3QuaW5kZXh9LSR7c2l6ZS5zaXplfVwiPlxyXG4gICAgICAgICAgICAgICAgJHtzaXplLnNpemV9XHJcbiAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgPC9kaXY+YClcclxuICAgIH1gO1xyXG5cclxuY29uc3Qgd2hvbGVzYWxlUHJvZHVjdHNUYWJsZSA9IChwcm9kdWN0cykgPT4gaHRtbGBcclxuICAgIDx0YWJsZSBpZD1cIm9yZGVyc1wiIGNsYXNzPVwidGFibGUgbXQtMyB0YWJsZS1zdHJpcGVkXCI+XHJcbiAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICA8dGg+0J/RgNC+0LTRg9C60YI8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPtCR0YDQvtC5INCyINC/0LDQutC10YI8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPtCm0LXQvdCwINC30LAg0LHRgNC+0Lk8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPtCc0Y/RgNC60LA8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPtCa0L7Qu9C40YfQtdGB0YLQstC+PC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD7QptC10L3QsDwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGg+0J7RgtGB0YLRitC/0LrQsCAlPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD7QodGD0LzQsDwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGg+0JTQtdC50YHRgtCy0LjRjzwvdGg+XHJcbiAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgPC90aGVhZD5cclxuICAgICAgICA8dGJvZHkgY2xhc3M9XCJ0YWJsZS1ncm91cC1kaXZpZGVyXCI+XHJcbiAgICAgICAgICAgICR7cHJvZHVjdHM/Lm1hcChwcm9kdWN0ID0+IGh0bWxgXHJcbiAgICAgICAgICAgICAgICA8dHIgYWRkZWRQcm9kdWN0c0luZGV4PSR7cHJvZHVjdC5pbmRleH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7cHJvZHVjdD8ucHJvZHVjdD8ubmFtZSB8fCBwcm9kdWN0Lm5hbWV9ICR7cHJvZHVjdC5wcm9kdWN0ICYmICdbIycgKyBwcm9kdWN0LnByb2R1Y3QuY29kZSArICddJ308L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICR7cHJvZHVjdC5wcm9kdWN0ID9cclxuICAgICAgICBodG1sYDx0ZD4ke3Byb2R1Y3QucHJvZHVjdC5zaXplcy5sZW5ndGggPyBjaGVja2JveFNpemVzKHByb2R1Y3QpIDogJyd9PC90ZD5gXHJcbiAgICAgICAgOiBodG1sYDx0ZD48aW5wdXQgQGNoYW5nZT0ke3VwZGF0ZVF0eUluUGFja2FnZX0gbmFtZT1cInF0eUluUGFja2FnZVwiIGNsYXNzPSBcImZvcm0tY29udHJvbFwiIC52YWx1ZT0ke3Byb2R1Y3QucXR5SW5QYWNrYWdlIHx8IFwiXCJ9IHR5cGU9XCJudW1iZXJcIiBzdGVwPVwiMVwiIG1pbj1cIjBcIiBpbnB1dG1vZGU9XCJudW1lcmljXCIgP2Rpc2FibGVkPSR7b3JkZXIgJiYgIVsnbWFuYWdlcicsICdhZG1pbiddLmluY2x1ZGVzKGxvZ2dlZEluVXNlci5yb2xlKX0vPjwvdGQ+YH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7cHJvZHVjdD8ucHJvZHVjdD8uc2l6ZXM/Lmxlbmd0aCA/IGZvcm1hdFByaWNlKHByb2R1Y3QucHJvZHVjdC53aG9sZXNhbGVQcmljZSAvIHByb2R1Y3QucHJvZHVjdC5zaXplcy5sZW5ndGgpIDogcHJvZHVjdC5xdHlJblBhY2thZ2UgPyBmb3JtYXRQcmljZShwcm9kdWN0LnByaWNlIC8gcHJvZHVjdC5xdHlJblBhY2thZ2UpIDogJyd9PC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7cHJvZHVjdD8ucHJvZHVjdD8udW5pdE9mTWVhc3VyZSB8fCBodG1sYDxpbnB1dCBAY2hhbmdlPSR7dXBkYXRlVW5pdE9mTWVhc3VyZX0gdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHJlcXVpcmVkIG5hbWU9XCJ1bml0T2ZNZWFzdXJlXCIgP2Rpc2FibGVkPSR7b3JkZXIgJiYgIVsnbWFuYWdlcicsICdhZG1pbiddLmluY2x1ZGVzKGxvZ2dlZEluVXNlci5yb2xlKX0gLnZhbHVlPSR7cHJvZHVjdC51bml0T2ZNZWFzdXJlfS8+YH08L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IEBjaGFuZ2U9JHt1cGRhdGVRdWFudGl0eX0gQGtleXVwPSR7dXBkYXRlUXVhbnRpdHl9IG5hbWU9XCJxdWFudGl0eVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cIm51bWJlclwiIC52YWx1ZT0ke3Byb2R1Y3QucXVhbnRpdHl9IHN0ZXA9XCIxXCIgbWluPVwiMVwiIGlucHV0bW9kZT1cIm51bWVyaWNcIiByZXF1aXJlZCA/ZGlzYWJsZWQ9JHtvcmRlciAmJiAhWydtYW5hZ2VyJywgJ2FkbWluJ10uaW5jbHVkZXMobG9nZ2VkSW5Vc2VyLnJvbGUpfS8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3Byb2R1Y3Q/LnByb2R1Y3Q/LnF1YW50aXR5ID8gaHRtbGA8c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLXRleHRcIj4vJHtwcm9kdWN0Py5wcm9kdWN0Py5xdWFudGl0eX08L3NwYW4+YCA6ICcnfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IEBjaGFuZ2U9JHt1cGRhdGVQcmljZX0gQGtleXVwPSR7dXBkYXRlUHJpY2V9IG5hbWU9XCJwcmljZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiAudmFsdWU9JHtwcm9kdWN0LnByaWNlfSBpbnB1dG1vZGU9XCJkZWNpbWFsXCIgcmVxdWlyZWQgP2Rpc2FibGVkPSR7b3JkZXIgJiYgIVsnbWFuYWdlcicsICdhZG1pbiddLmluY2x1ZGVzKGxvZ2dlZEluVXNlci5yb2xlKX0vPjwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD48aW5wdXQgQGNoYW5nZT0ke3VwZGF0ZURpc2NvdW50fSBAa2V5dXA9JHt1cGRhdGVEaXNjb3VudH0gbmFtZT1cImRpc2NvdW50XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwidGV4dFwiIGlucHV0bW9kZT1cImRlY2ltYWxcIiAudmFsdWU9JHtwcm9kdWN0LmRpc2NvdW50fSByZXF1aXJlZCA/ZGlzYWJsZWQ9JHtvcmRlciAmJiAhWydtYW5hZ2VyJywgJ2FkbWluJ10uaW5jbHVkZXMobG9nZ2VkSW5Vc2VyLnJvbGUpfS8+PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgbmFtZT1cInN1YnRvdGFsXCI+JHtmb3JtYXRQcmljZSgocHJvZHVjdC5wcmljZSAqIHByb2R1Y3QucXVhbnRpdHkpICogKDEgLSBwcm9kdWN0LmRpc2NvdW50IC8gMTAwKSl9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9XCJ0ZXh0LWFsaWduOiBlbmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHtvcmRlciAmJiAhWydtYW5hZ2VyJywgJ2FkbWluJ10uaW5jbHVkZXMobG9nZ2VkSW5Vc2VyLnJvbGUpID8gJycgOiBodG1sYDxidXR0b24gQGNsaWNrPSR7cmVtb3ZlUHJvZHVjdH0gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIj5YPC9idXR0b24+YH08L3RkPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgIGApfVxyXG5cclxuICAgICAgICAgICAgJHtvcmRlciAmJiAhWydtYW5hZ2VyJywgJ2FkbWluJ10uaW5jbHVkZXMobG9nZ2VkSW5Vc2VyLnJvbGUpID8gJycgOiBhZGRQcm9kdWN0Um93KCl9XHJcbiAgICAgICAgPC90Ym9keT5cclxuICAgIDwvdGFibGU+XHJcbmA7XHJcblxyXG5jb25zdCByZXRhaWxQcm9kdWN0c1RhYmxlID0gKHByb2R1Y3RzKSA9PiBodG1sYFxyXG4gICAgPHRhYmxlIGNsYXNzPVwidGFibGUgbXQtMyB0YWJsZS1zdHJpcGVkXCI+XHJcbiAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICA8dGg+0J/RgNC+0LTRg9C60YI8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPtCg0LDQt9C80LXRgDwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGg+0JzRj9GA0LrQsDwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGg+0JrQvtC70LjRh9C10YHRgtCy0L48L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPtCm0LXQvdCwPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD7QntGC0YHRgtGK0L/QutCwICU8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPtCh0YPQvNCwPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD7QlNC10LnRgdGC0LLQuNGPPC90aD5cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgJHtwcm9kdWN0cz8ubWFwKHByb2R1Y3QgPT4gaHRtbGBcclxuICAgICAgICAgICAgICAgIDx0ciBhZGRlZFByb2R1Y3RzSW5kZXg9JHtwcm9kdWN0LmluZGV4fT5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHtwcm9kdWN0Py5wcm9kdWN0Py5uYW1lIHx8IHByb2R1Y3QubmFtZX0gJHtwcm9kdWN0LnByb2R1Y3QgJiYgJ1sjJyArIHByb2R1Y3QucHJvZHVjdC5jb2RlICsgJ10nfTwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHtwcm9kdWN0LnByb2R1Y3QgJiYgcHJvZHVjdC5wcm9kdWN0LnNpemVzLmxlbmd0aCA/IGh0bWxgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IEBjaGFuZ2U9JHt1cGRhdGVTaXplfSBuYW1lPVwic2l6ZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcmVxdWlyZWQgP2Rpc2FibGVkPSR7b3JkZXIgJiYgIVsnbWFuYWdlcicsICdhZG1pbiddLmluY2x1ZGVzKGxvZ2dlZEluVXNlci5yb2xlKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiA/c2VsZWN0ZWQ9JHshcHJvZHVjdD8uc2l6ZX0gZGlzYWJsZWQ+0JjQt9Cx0LXRgNC4PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtwcm9kdWN0LnByb2R1Y3Quc2l6ZXMubWFwKHNpemUgPT4gaHRtbGA8b3B0aW9uIHZhbHVlPSR7c2l6ZS5zaXplfSA/c2VsZWN0ZWQ9JHtzaXplLnNpemUgPT09IHByb2R1Y3Quc2l6ZX0gP2Rpc2FibGVkPSR7c2l6ZS5xdWFudGl0eSA8IDF9PiR7c2l6ZS5zaXplfTwvb3B0aW9uPmApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+YCA6IHByb2R1Y3QucHJvZHVjdCA/ICcnIDogaHRtbGA8aW5wdXQgQGNoYW5nZT0ke3VwZGF0ZVNpemV9IG5hbWU9XCJzaXplXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwidGV4dFwiIC52YWx1ZT0ke3Byb2R1Y3Q/LnNpemUgfHwgJyd9ID9kaXNhYmxlZD0ke29yZGVyICYmICFbJ21hbmFnZXInLCAnYWRtaW4nXS5pbmNsdWRlcyhsb2dnZWRJblVzZXIucm9sZSl9IC8+YH1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7cHJvZHVjdD8ucHJvZHVjdD8udW5pdE9mTWVhc3VyZSA9PT0gJ9C/0LDQutC10YInID8gJyDQsdGALicgOiBwcm9kdWN0Py5wcm9kdWN0Py51bml0T2ZNZWFzdXJlIHx8IGh0bWxgPGlucHV0IEBjaGFuZ2U9JHt1cGRhdGVVbml0T2ZNZWFzdXJlfSB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcmVxdWlyZWQgbmFtZT1cInVuaXRPZk1lYXN1cmVcIiA/ZGlzYWJsZWQ9JHtvcmRlciAmJiAhWydtYW5hZ2VyJywgJ2FkbWluJ10uaW5jbHVkZXMobG9nZ2VkSW5Vc2VyLnJvbGUpfSAudmFsdWU9JHtwcm9kdWN0LnVuaXRPZk1lYXN1cmV9Lz5gfTwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgQGNoYW5nZT0ke3VwZGF0ZVF1YW50aXR5fSBuYW1lPVwicXVhbnRpdHlcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJudW1iZXJcIiAudmFsdWU9JHtwcm9kdWN0LnF1YW50aXR5fSBzdGVwPVwiMVwiIG1pbj1cIjFcIiBpbnB1dG1vZGU9XCJudW1lcmljXCIgLm1heD0keyFvcmRlciAmJiBwcm9kdWN0LnNpemUgJiYgcHJvZHVjdD8ucHJvZHVjdD8uc2l6ZXM/LmZpbmQocyA9PiBzLnNpemUgPT0gcHJvZHVjdC5zaXplKT8ucXVhbnRpdHl9ICByZXF1aXJlZCA/ZGlzYWJsZWQ9JHtvcmRlciAmJiAhWydtYW5hZ2VyJywgJ2FkbWluJ10uaW5jbHVkZXMobG9nZ2VkSW5Vc2VyLnJvbGUpfS8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLXRleHRcIiBpZD1cImJhc2ljLWFkZG9uMlwiPi8ke3Byb2R1Y3Quc2l6ZSA/IHByb2R1Y3Q/LnByb2R1Y3Q/LnNpemVzLmZpbmQocyA9PiBzLnNpemUgPT0gcHJvZHVjdC5zaXplKS5xdWFudGl0eSA6IHByb2R1Y3Q/LnByb2R1Y3Q/LnF1YW50aXR5IHx8ICcnfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPjxpbnB1dCBAY2hhbmdlPSR7dXBkYXRlUHJpY2V9IG5hbWU9XCJwcmljZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiAudmFsdWU9JHtwcm9kdWN0LnByaWNlfSBpbnB1dG1vZGU9XCJkZWNpbWFsXCIgcmVxdWlyZWQgP2Rpc2FibGVkPSR7b3JkZXIgJiYgIVsnbWFuYWdlcicsICdhZG1pbiddLmluY2x1ZGVzKGxvZ2dlZEluVXNlci5yb2xlKX0vPjwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD48aW5wdXQgQGNoYW5nZT0ke3VwZGF0ZURpc2NvdW50fSBuYW1lPVwiZGlzY291bnRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJudW1iZXJcIiBzdGVwPVwiMC4xXCIgaW5wdXRtb2RlPVwibnVtZXJpY1wiIC52YWx1ZT0ke3Byb2R1Y3QuZGlzY291bnR9IHJlcXVpcmVkID9kaXNhYmxlZD0ke29yZGVyICYmICFbJ21hbmFnZXInLCAnYWRtaW4nXS5pbmNsdWRlcyhsb2dnZWRJblVzZXIucm9sZSl9Lz48L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgbmFtZT1cInN1YnRvdGFsXCI+JHtmb3JtYXRQcmljZSgocHJvZHVjdC5wcmljZSAqIHByb2R1Y3QucXVhbnRpdHkpICogKDEgLSBwcm9kdWN0LmRpc2NvdW50IC8gMTAwKSl9PC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAke29yZGVyICYmICFbJ21hbmFnZXInLCAnYWRtaW4nXS5pbmNsdWRlcyhsb2dnZWRJblVzZXIucm9sZSkgPyAnJyA6IGh0bWxgPGJ1dHRvbiBAY2xpY2s9JHtyZW1vdmVQcm9kdWN0fSB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRhbmdlclwiPlg8L2J1dHRvbj5gfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPmApfVxyXG4gICAgICAgICAgICAke29yZGVyICYmICFbJ21hbmFnZXInLCAnYWRtaW4nXS5pbmNsdWRlcyhsb2dnZWRJblVzZXIucm9sZSkgPyAnJyA6IGFkZFByb2R1Y3RSb3coKX1cclxuICAgICAgICA8L3Rib2R5PlxyXG4gICAgPC90YWJsZT5cclxuYDtcclxuXHJcbnZhciBsYXN0U2NhblRpbWU7XHJcbmZ1bmN0aW9uIHNjYW5CYXJjb2RlKCkge1xyXG4gICAgY29uc3QgdmlkZW9FbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXJjb2RlVmlkZW8nKTtcclxuICAgIGNvbnN0IHNjYW5CYXJjb2RlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjYW5CYXJjb2RlJyk7XHJcbiAgICBjb25zdCBjYW5jZWxCYXJjb2RlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0b3BCYXJjb2RlJyk7XHJcbiAgICBzY2FuQmFyY29kZUJ0bi5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTtcclxuICAgIGNhbmNlbEJhcmNvZGVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcblxyXG4gICAgY29uc3QgY29uZmlnID0ge1xyXG4gICAgICAgIGlucHV0U3RyZWFtOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiTGl2ZVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcIkxpdmVTdHJlYW1cIixcclxuICAgICAgICAgICAgdGFyZ2V0OiB2aWRlb0VsLFxyXG4gICAgICAgICAgICBjb25zdHJhaW50czoge1xyXG4gICAgICAgICAgICAgICAgZmFjaW5nTW9kZTogXCJlbnZpcm9ubWVudFwiLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVjb2Rlcjoge1xyXG4gICAgICAgICAgICByZWFkZXJzOiBbXCJlYW5fcmVhZGVyXCIsIFwiY29kZV8xMjhfcmVhZGVyXCJdLFxyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIFF1YWdnYS5pbml0KGNvbmZpZywgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHJldHVybiBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgUXVhZ2dhLnN0YXJ0KCk7XHJcblxyXG4gICAgICAgIFF1YWdnYS5vbkRldGVjdGVkKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBiYXJjb2RlID0gZGF0YS5jb2RlUmVzdWx0LmNvZGU7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gcGF1c2Ugc2Nhbm5pbmcgZm9yIDEgc2Vjb25kIHRvIHNraXAgZHVwbGljYXRlc1xyXG4gICAgICAgICAgICBpZiAobm93IDwgbGFzdFNjYW5UaW1lICsgMTAwMClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGxhc3RTY2FuVGltZSA9IG5vdztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2R1Y3QnKTtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgKz0gYmFyY29kZTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNpbXVsYXRlIEVudGVyIGtleSBwcmVzc2VkIG9uIGlucHV0IGZpZWxkIHRvIGFjdGl2YXRlIGFkZFByb2R1Y3QgZnVuY3Rpb25cclxuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgS2V5Ym9hcmRFdmVudCgna2V5dXAnLCB7XHJcbiAgICAgICAgICAgICAgICBrZXk6ICdFbnRlcicsXHJcbiAgICAgICAgICAgICAgICBjb2RlOiAnRW50ZXInLFxyXG4gICAgICAgICAgICAgICAgd2hpY2g6IDEzLFxyXG4gICAgICAgICAgICAgICAga2V5Q29kZTogMTMsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gZGlzcGF0Y2ggdGhlIGV2ZW50IG9uIHNvbWUgRE9NIGVsZW1lbnRcclxuICAgICAgICAgICAgaW5wdXQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RvcEJhcmNvZGUoKSB7XHJcbiAgICBjb25zdCB2aWRlb0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhcmNvZGVWaWRlbycpO1xyXG4gICAgY29uc3Qgc2NhbkJhcmNvZGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NhbkJhcmNvZGUnKTtcclxuICAgIGNvbnN0IGNhbmNlbEJhcmNvZGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RvcEJhcmNvZGUnKTtcclxuXHJcbiAgICBzY2FuQmFyY29kZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTtcclxuICAgIGNhbmNlbEJhcmNvZGVCdG4uY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcbiAgICB2aWRlb0VsLmlubmVySFRNTCA9ICcnO1xyXG4gICAgUXVhZ2dhLnN0b3AoKTtcclxuICAgIFF1YWdnYS5vZmZEZXRlY3RlZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRQcm9kdWN0KGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09ICcnKSByZXR1cm47XHJcblxyXG4gICAgLy8gcmV0dXJuIGlmIG5vdCBhbnkgb2YgdGhlIGtleSBjb21iaW5hdGlvbnMgYmVsb3cgKENUUkwrViwgTUFDK1YsIEVOVEVSLCBOVU0gRU5URVIpXHJcbiAgICBpZiAoKGUuY3RybEtleSAmJiBlLmtleSAhPT0gJ3YnIHx8IGUuY29kZSAhPT0gJ01ldGFMZWZ0JykgJiYgZS5jb2RlICE9PSAnRW50ZXInICYmIGUuY29kZSAhPT0gJ051bXBhZEVudGVyJykgcmV0dXJuO1xyXG5cclxuICAgIHZhciBwcm9kdWN0LCBxdWFudGl0eSA9IDE7XHJcblxyXG4gICAgLy8gY2hlY2sgaWYgcXVhbnRpdHkgd2FzIGVudGVyZWQgaW4gaW5wdXQgZmllbGRcclxuICAgIGlmIChlLnRhcmdldC52YWx1ZS5zcGxpdCgnKicpLmxlbmd0aCA9PT0gMSlcclxuICAgICAgICBwcm9kdWN0ID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBxdWFudGl0eSA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlLnNwbGl0KCcqJylbMF0pO1xyXG4gICAgICAgIHF1YW50aXR5ID0gIWlzTmFOKHF1YW50aXR5KSAmJiBxdWFudGl0eSA+IDAgPyBxdWFudGl0eSA6IDE7XHJcbiAgICAgICAgcHJvZHVjdCA9IGUudGFyZ2V0LnZhbHVlLnNwbGl0KCcqJylbMV07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2hlY2sgaWYgcHJvZHVjdCBleGlzdHMgaW4gZGIgYnkgY29kZSwgYmFyY29kZSAoMTMgZGlnaXQpIG9yIGJhcmNvZGUgKG1pbnVzIHRoZSBmaXJzdCBkaWdpdCBiZWNhdXNlIGl0cyBza2lwcGVkIGJ5IHRoZSBzY2FubmVyKVxyXG4gICAgY29uc3QgcHJvZHVjdEluREIgPSBwcm9kdWN0cy5maW5kKHAgPT4gcC5jb2RlID09PSBwcm9kdWN0IHx8IHAuYmFyY29kZSA9PT0gcHJvZHVjdCB8fCBwLmJhcmNvZGUuc2xpY2UoMSkgPT09IHByb2R1Y3QpO1xyXG5cclxuICAgIC8vIFdob2xlc2FsZSArIElOIERCICsgdmFyaWFibGVcclxuICAgIGlmIChvcmRlclR5cGUgPT09ICd3aG9sZXNhbGUnICYmIHByb2R1Y3RJbkRCICYmIHByb2R1Y3RJbkRCLnNpemVzPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBpbiBhZGRlZFByb2R1Y3RzIGFuZCBpZiBhbGwgc2l6ZXMgYXJlIHNlbGVjdGVkXHJcbiAgICAgICAgY29uc3QgaW5BcnJheSA9IGFkZGVkUHJvZHVjdHMuZmluZChwID0+IHAucHJvZHVjdC5faWQgPT09IHByb2R1Y3RJbkRCLl9pZCAmJiBwLnNlbGVjdGVkU2l6ZXMubGVuZ3RoID09PSBwLnNpemVzLmxlbmd0aCk7XHJcblxyXG4gICAgICAgIGlmIChpbkFycmF5KSBpbkFycmF5LnF1YW50aXR5ICs9IHF1YW50aXR5O1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB0ZW1wID0ge1xyXG4gICAgICAgICAgICAgICAgaW5kZXg6IGFkZGVkUHJvZHVjdHNJbmRleCsrLFxyXG4gICAgICAgICAgICAgICAgcHJvZHVjdDogcHJvZHVjdEluREIsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFNpemVzOiBwcm9kdWN0SW5EQi5zaXplcy5maWx0ZXIocyA9PiBzLnF1YW50aXR5ID4gMCkubWFwKHMgPT4gcy5zaXplKSwgLy8gc2VsZWN0ZWQgKGNoZWNrZWQpIHNpemVzXHJcbiAgICAgICAgICAgICAgICBzaXplczogcHJvZHVjdEluREIuc2l6ZXMubWFwKHMgPT4gcy5zaXplKSwgLy8gYWxsIGF2YWlsYWJsZSBzaXplcyB0byBzZWxlY3RcclxuICAgICAgICAgICAgICAgIHF1YW50aXR5OiBxdWFudGl0eSA+IHByb2R1Y3RJbkRCLnF1YW50aXR5ID8gcHJvZHVjdEluREIucXVhbnRpdHkgfHwgMSA6IHF1YW50aXR5LCAvLyBpZiBxdHkgaW4gZGIgaXMgMCwgc2V0IHRvIDEuIGlmIHF0eSBpcyBtb3JlIHRoYW4gaW4gZGIsIHNldCBpdCBhcyBtYXhcclxuICAgICAgICAgICAgICAgIHByaWNlOiBwcm9kdWN0SW5EQi53aG9sZXNhbGVQcmljZSxcclxuICAgICAgICAgICAgICAgIHVuaXRQcmljZTogcHJvZHVjdEluREIud2hvbGVzYWxlUHJpY2UgLyBwcm9kdWN0SW5EQi5zaXplcy5sZW5ndGgsIC8vIG9ubHkgdXNlZCB0byBkaXNwbGF5IHRoZSBwcmljZSBwZXIgdW5pdCBpbiBjb2x1bW5cclxuICAgICAgICAgICAgICAgIGRpc2NvdW50OiBzZWxlY3RlZEN1c3RvbWVyPy5kaXNjb3VudCB8fCAwXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAodGVtcC5zZWxlY3RlZFNpemVzLmxlbmd0aCAhPT0gcHJvZHVjdEluREIuc2l6ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1bml0UHJpY2UgPSBwcm9kdWN0SW5EQi53aG9sZXNhbGVQcmljZSAvIHByb2R1Y3RJbkRCLnNpemVzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHRlbXAucHJpY2UgPSAodW5pdFByaWNlICogdGVtcC5zZWxlY3RlZFNpemVzLmxlbmd0aCkudG9GaXhlZCgyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYWRkZWRQcm9kdWN0cy5wdXNoKHRlbXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFdob2xlc2FsZSArIElOIERCICsgc2ltcGxlXHJcbiAgICBlbHNlIGlmIChvcmRlclR5cGUgPT09ICd3aG9sZXNhbGUnICYmIHByb2R1Y3RJbkRCICYmIHByb2R1Y3RJbkRCLnNpemVzPy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBjb25zdCBpbkFycmF5ID0gYWRkZWRQcm9kdWN0cy5maW5kKHAgPT4gcC5wcm9kdWN0Ll9pZCA9PT0gcHJvZHVjdEluREIuX2lkKTtcclxuICAgICAgICAvLyBDaGVjayBpZiBwcm9kdWN0IGlzIGFscmVhZHkgaW4gYWRkZWRQcm9kdWN0c1xyXG4gICAgICAgIGlmIChpbkFycmF5KSB7XHJcbiAgICAgICAgICAgIGluQXJyYXkucXVhbnRpdHkgKz0gcXVhbnRpdHk7XHJcbiAgICAgICAgICAgIC8vIGlmIHF0eSBpcyBtb3JlIHRoYW4gaW4gZGIsIHNldCBpdCBhcyBtYXhcclxuICAgICAgICAgICAgaWYgKGluQXJyYXkucXVhbnRpdHkgPiBwcm9kdWN0SW5EQi5xdWFudGl0eSlcclxuICAgICAgICAgICAgICAgIGluQXJyYXkucXVhbnRpdHkgPSBwcm9kdWN0SW5EQi5xdWFudGl0eTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBhZGRlZFByb2R1Y3RzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgaW5kZXg6IGFkZGVkUHJvZHVjdHNJbmRleCsrLFxyXG4gICAgICAgICAgICAgICAgcHJvZHVjdDogcHJvZHVjdEluREIsXHJcbiAgICAgICAgICAgICAgICB1bml0T2ZNZWFzdXJlOiBwcm9kdWN0SW5EQi51bml0T2ZNZWFzdXJlLFxyXG4gICAgICAgICAgICAgICAgcXVhbnRpdHk6IHF1YW50aXR5ID4gcHJvZHVjdEluREIucXVhbnRpdHkgPyBwcm9kdWN0SW5EQi5xdWFudGl0eSA6IHF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgcHJpY2U6IHByb2R1Y3RJbkRCLndob2xlc2FsZVByaWNlLFxyXG4gICAgICAgICAgICAgICAgZGlzY291bnQ6IHNlbGVjdGVkQ3VzdG9tZXI/LmRpc2NvdW50IHx8IDBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0YWlsICsgSU4gREIgKyB2YXJpYWJsZVxyXG4gICAgZWxzZSBpZiAob3JkZXJUeXBlID09PSAncmV0YWlsJyAmJiBwcm9kdWN0SW5EQiAmJiBwcm9kdWN0SW5EQi5zaXplcz8ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGluQXJyYXkgPSBhZGRlZFByb2R1Y3RzLmZpbmQocCA9PiBwLnByb2R1Y3QuX2lkID09PSBwcm9kdWN0SW5EQi5faWQgJiYgIXAuc2l6ZSk7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBpbiBhZGRlZFByb2R1Y3RzIGFuZCBOTyBzaXplIGlzIHNlbGVjdGVkXHJcbiAgICAgICAgaWYgKGluQXJyYXkpIHtcclxuICAgICAgICAgICAgaW5BcnJheS5xdWFudGl0eSArPSBxdWFudGl0eTtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgYWRkZWRQcm9kdWN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGluZGV4OiBhZGRlZFByb2R1Y3RzSW5kZXgrKyxcclxuICAgICAgICAgICAgICAgIHByb2R1Y3Q6IHByb2R1Y3RJbkRCLFxyXG4gICAgICAgICAgICAgICAgdW5pdE9mTWVhc3VyZTogcHJvZHVjdEluREIudW5pdE9mTWVhc3VyZSxcclxuICAgICAgICAgICAgICAgIHF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgcHJpY2U6IHByb2R1Y3RJbkRCLnJldGFpbFByaWNlLFxyXG4gICAgICAgICAgICAgICAgZGlzY291bnQ6IHNlbGVjdGVkQ3VzdG9tZXI/LmRpc2NvdW50IHx8IDBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0YWlsICsgSU4gREIgKyBzaW1wbGVcclxuICAgIGVsc2UgaWYgKG9yZGVyVHlwZSA9PT0gJ3JldGFpbCcgJiYgcHJvZHVjdEluREIgJiYgcHJvZHVjdEluREIuc2l6ZXM/Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGNvbnN0IGluQXJyYXkgPSBhZGRlZFByb2R1Y3RzLmZpbmQocCA9PiBwLnByb2R1Y3QuX2lkID09PSBwcm9kdWN0SW5EQi5faWQpO1xyXG4gICAgICAgIC8vIENoZWNrIGlmIGFscmVhZHkgaW4gYWRkZWRQcm9kdWN0c1xyXG4gICAgICAgIGlmIChpbkFycmF5KSB7XHJcbiAgICAgICAgICAgIGluQXJyYXkucXVhbnRpdHkgKz0gcXVhbnRpdHk7XHJcbiAgICAgICAgICAgIC8vIGlmIHF0eSBpcyBtb3JlIHRoYW4gcXR5IGluIGRiLCBzZXQgaXQgYXMgbWF4XHJcbiAgICAgICAgICAgIGlmIChpbkFycmF5LnF1YW50aXR5ID4gcHJvZHVjdEluREIucXVhbnRpdHkpXHJcbiAgICAgICAgICAgICAgICBpbkFycmF5LnF1YW50aXR5ID0gcHJvZHVjdEluREIucXVhbnRpdHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgYWRkZWRQcm9kdWN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGluZGV4OiBhZGRlZFByb2R1Y3RzSW5kZXgrKyxcclxuICAgICAgICAgICAgICAgIHByb2R1Y3Q6IHByb2R1Y3RJbkRCLFxyXG4gICAgICAgICAgICAgICAgcXVhbnRpdHk6IHF1YW50aXR5ID4gcHJvZHVjdEluREIucXVhbnRpdHkgPyBwcm9kdWN0SW5EQi5xdWFudGl0eSA6IHF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgcHJpY2U6IHByb2R1Y3RJbkRCLnJldGFpbFByaWNlLFxyXG4gICAgICAgICAgICAgICAgdW5pdE9mTWVhc3VyZTogcHJvZHVjdEluREIudW5pdE9mTWVhc3VyZSA9PT0gJ9C/0LDQutC10YInID8gJ9Cx0YAuJyA6IHByb2R1Y3RJbkRCLnVuaXRPZk1lYXN1cmUsXHJcbiAgICAgICAgICAgICAgICBkaXNjb3VudDogc2VsZWN0ZWRDdXN0b21lcj8uZGlzY291bnQgfHwgMFxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBXaG9sZXNhbGUgYW5kIE5PVCBpbiBEQlxyXG4gICAgZWxzZSBpZiAob3JkZXJUeXBlID09PSAnd2hvbGVzYWxlJyAmJiAhcHJvZHVjdEluREIpXHJcbiAgICAgICAgYWRkZWRQcm9kdWN0cy5wdXNoKHtcclxuICAgICAgICAgICAgaW5kZXg6IGFkZGVkUHJvZHVjdHNJbmRleCsrLFxyXG4gICAgICAgICAgICBuYW1lOiBwcm9kdWN0LFxyXG4gICAgICAgICAgICBxdWFudGl0eSxcclxuICAgICAgICAgICAgcHJpY2U6IDAsXHJcbiAgICAgICAgICAgIHF0eUluUGFja2FnZTogMCxcclxuICAgICAgICAgICAgdW5pdE9mTWVhc3VyZTogJ9C/0LDQutC10YInLFxyXG4gICAgICAgICAgICBkaXNjb3VudDogc2VsZWN0ZWRDdXN0b21lcj8uZGlzY291bnQgfHwgMFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8vIFJldGFpbCBhbmQgTk9UIGluIERCXHJcbiAgICBlbHNlIGlmIChvcmRlclR5cGUgPT09ICdyZXRhaWwnICYmICFwcm9kdWN0SW5EQilcclxuICAgICAgICBhZGRlZFByb2R1Y3RzLnB1c2goe1xyXG4gICAgICAgICAgICBpbmRleDogYWRkZWRQcm9kdWN0c0luZGV4KyssXHJcbiAgICAgICAgICAgIG5hbWU6IHByb2R1Y3QsXHJcbiAgICAgICAgICAgIHF1YW50aXR5LFxyXG4gICAgICAgICAgICBwcmljZTogMCxcclxuICAgICAgICAgICAgdW5pdE9mTWVhc3VyZTogJ9Cx0YAuJyxcclxuICAgICAgICAgICAgZGlzY291bnQ6IHNlbGVjdGVkQ3VzdG9tZXI/LmRpc2NvdW50IHx8IDBcclxuICAgICAgICB9KTtcclxuXHJcbiAgICBzdWNjZXNzU2NhbihlLnRhcmdldCk7XHJcbiAgICByZXJlbmRlclRhYmxlKCk7XHJcblxyXG4gICAgZS50YXJnZXQudmFsdWUgPSAnJztcclxuICAgIGUudGFyZ2V0LmZvY3VzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlT3JkZXIoZGF0YSkge1xyXG4gICAgdmFyIGludmFsaWRGbGFnID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKCFkYXRhLmN1c3RvbWVyKSB7XHJcbiAgICAgICAgbWFya0ludmFsaWQoJ2N1c3RvbWVyJyk7XHJcbiAgICAgICAgaW52YWxpZEZsYWcgPSB0cnVlO1xyXG4gICAgfSBlbHNlIG1hcmtWYWxpZCgnY3VzdG9tZXInKTtcclxuXHJcbiAgICBpZiAoIWRhdGEudHlwZSkge1xyXG4gICAgICAgIG1hcmtJbnZhbGlkKCd0eXBlJyk7XHJcbiAgICAgICAgaW52YWxpZEZsYWcgPSB0cnVlO1xyXG4gICAgfSBlbHNlIG1hcmtWYWxpZCgndHlwZScpO1xyXG5cclxuICAgIGlmICghZGF0YS5kYXRlKSB7XHJcbiAgICAgICAgbWFya0ludmFsaWQoJ2RhdGUnKTtcclxuICAgICAgICBpbnZhbGlkRmxhZyA9IHRydWU7XHJcbiAgICB9IGVsc2UgbWFya1ZhbGlkKCdkYXRlJyk7XHJcblxyXG4gICAgaWYgKCFkYXRhLm9yZGVyVHlwZSkge1xyXG4gICAgICAgIG1hcmtJbnZhbGlkKCdvcmRlclR5cGUnKTtcclxuICAgICAgICBpbnZhbGlkRmxhZyA9IHRydWU7XHJcbiAgICB9IGVsc2UgbWFya1ZhbGlkKCdvcmRlclR5cGUnKTtcclxuXHJcbiAgICBpZiAoIWRhdGEucGF5bWVudFR5cGUpIHtcclxuICAgICAgICBtYXJrSW52YWxpZCgncGF5bWVudFR5cGUnKTtcclxuICAgICAgICBpbnZhbGlkRmxhZyA9IHRydWU7XHJcbiAgICB9IGVsc2UgbWFya1ZhbGlkKCdwYXltZW50VHlwZScpO1xyXG5cclxuICAgIGlmIChkYXRhLnBhaWRBbW91bnQgPCAwKSB7XHJcbiAgICAgICAgbWFya0ludmFsaWQoJ3BhaWRBbW91bnQnKTtcclxuICAgICAgICBpbnZhbGlkRmxhZyA9IHRydWU7XHJcbiAgICB9IGVsc2UgbWFya1ZhbGlkKCdwYWlkQW1vdW50Jyk7XHJcblxyXG4gICAgaWYgKCFkYXRhLmNvbXBhbnkpIHtcclxuICAgICAgICBtYXJrSW52YWxpZCgnY29tcGFueScpO1xyXG4gICAgICAgIGludmFsaWRGbGFnID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBtYXJrVmFsaWQoJ2NvbXBhbnknKTtcclxuXHJcbiAgICBpZiAoIWRhdGEucmVjZWl2ZXIpIHtcclxuICAgICAgICBtYXJrSW52YWxpZCgncmVjZWl2ZXInKTtcclxuICAgICAgICBpbnZhbGlkRmxhZyA9IHRydWU7XHJcbiAgICB9IGVsc2UgbWFya1ZhbGlkKCdyZWNlaXZlcicpO1xyXG5cclxuICAgIGlmICghZGF0YS5zZW5kZXIpIHtcclxuICAgICAgICBtYXJrSW52YWxpZCgnc2VuZGVyJyk7XHJcbiAgICAgICAgaW52YWxpZEZsYWcgPSB0cnVlO1xyXG4gICAgfSBlbHNlIG1hcmtWYWxpZCgnc2VuZGVyJyk7XHJcblxyXG4gICAgaWYgKGRhdGEucHJvZHVjdHMubGVuZ3RoID09PSAwKVxyXG4gICAgICAgIGludmFsaWRGbGFnID0gdHJ1ZTtcclxuXHJcbiAgICBkYXRhLnByb2R1Y3RzLmZvckVhY2gocHJvZHVjdCA9PiB7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgdHJbYWRkZWRQcm9kdWN0c0luZGV4PVwiJHtwcm9kdWN0LmluZGV4fVwiXWApO1xyXG5cclxuICAgICAgICBpZiAoIXByb2R1Y3QubmFtZSAmJiAhcHJvZHVjdC5wcm9kdWN0KVxyXG4gICAgICAgICAgICBpbnZhbGlkRmxhZyA9IHRydWU7XHJcblxyXG4gICAgICAgIGlmIChwcm9kdWN0Lm5hbWUgJiYgb3JkZXJUeXBlID09PSAnd2hvbGVzYWxlJykge1xyXG4gICAgICAgICAgICBpZiAocHJvZHVjdC5xdHlJblBhY2thZ2UgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBtYXJrSW52YWxpZEVsKHJvdy5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwicXR5SW5QYWNrYWdlXCJdJykpO1xyXG4gICAgICAgICAgICAgICAgaW52YWxpZEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgbWFya1ZhbGlkRWwocm93LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJxdHlJblBhY2thZ2VcIl0nKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBWYXJpYWJsZSBleGlzdGluZyBwcm9kdWN0XHJcbiAgICAgICAgaWYgKG9yZGVyVHlwZSA9PT0gJ3dob2xlc2FsZScgJiYgcHJvZHVjdC5wcm9kdWN0ICYmIHByb2R1Y3Quc2VsZWN0ZWRTaXplcz8ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIGF0bGVhc3QgMSBzaXplIG11c3QgYmUgc2VsZWN0ZWRcclxuICAgICAgICAgICAgcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9XCJzaXplXCJdJykuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBtYXJrSW52YWxpZEVsKGVsKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpbnZhbGlkRmxhZyA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NlbGVjdFtuYW1lPVwic2l6ZVwiXScpLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgbWFya1ZhbGlkRWwoZWwpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwcm9kdWN0LnByb2R1Y3QgJiYgb3JkZXJUeXBlID09PSAncmV0YWlsJykge1xyXG4gICAgICAgICAgICBjb25zdCBzaXplRWwgPSByb3cucXVlcnlTZWxlY3Rvcignc2VsZWN0W25hbWU9XCJzaXplXCJdJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2l6ZUVsICYmICFwcm9kdWN0LnNpemUpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtJbnZhbGlkRWwoc2l6ZUVsKTtcclxuICAgICAgICAgICAgICAgIGludmFsaWRGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzaXplRWwgJiYgcHJvZHVjdC5zaXplKSBtYXJrVmFsaWRFbChzaXplRWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFwcm9kdWN0LnF1YW50aXR5IHx8IHByb2R1Y3QucXVhbnRpdHkgPCAxKSB7XHJcbiAgICAgICAgICAgIG1hcmtJbnZhbGlkRWwocm93LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJxdWFudGl0eVwiXScpKTtcclxuICAgICAgICAgICAgaW52YWxpZEZsYWcgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBtYXJrVmFsaWRFbChyb3cucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInF1YW50aXR5XCJdJykpO1xyXG5cclxuICAgICAgICBjb25zdCBkaXNjb3VudFJlZ2V4ID0gL15cXGR7MSx9KFxcLlxcZHsxfSk/JC87IC8vIGdvb2Q6IDAuMSwgMjsgYmFkOiAwLjAxXHJcblxyXG4gICAgICAgIGlmIChwcm9kdWN0LmRpc2NvdW50IDwgMCB8fCBwcm9kdWN0LmRpc2NvdW50ID4gMTAwIHx8ICFkaXNjb3VudFJlZ2V4LnRlc3QocHJvZHVjdC5kaXNjb3VudCkpIHtcclxuICAgICAgICAgICAgbWFya0ludmFsaWRFbChyb3cucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImRpc2NvdW50XCJdJykpO1xyXG4gICAgICAgICAgICBpbnZhbGlkRmxhZyA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIG1hcmtWYWxpZEVsKHJvdy5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiZGlzY291bnRcIl0nKSk7XHJcblxyXG4gICAgICAgIGlmICghcHJvZHVjdC5wcmljZSB8fCBwcm9kdWN0LnByaWNlIDwgMC4wMSB8fCAhcHJpY2VSZWdleC50ZXN0KHByb2R1Y3QucHJpY2UpKSB7XHJcbiAgICAgICAgICAgIG1hcmtJbnZhbGlkRWwocm93LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJwcmljZVwiXScpKTtcclxuICAgICAgICAgICAgaW52YWxpZEZsYWcgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBtYXJrVmFsaWRFbChyb3cucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInByaWNlXCJdJykpO1xyXG5cclxuICAgICAgICAvLyBPbmx5IGNoZWNrIGlmIHF1YW50aXR5IGV4aXN0cyBvbiByZXRhaWwgb3Igd2hvbGVzYWxlIGJ1dCBwcm9kdWN0IGlzIHNpbXBsZVxyXG4gICAgICAgIGlmIChvcmRlclR5cGUgPT09ICdyZXRhaWwnIHx8IChvcmRlclR5cGUgPT09ICd3aG9sZXNhbGUnICYmICFyb3cucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInNpemVcIl0nKSkpIHtcclxuICAgICAgICAgICAgaWYgKCFwcm9kdWN0LnF1YW50aXR5IHx8IHByb2R1Y3QucXVhbnRpdHkgPCAxKSB7XHJcbiAgICAgICAgICAgICAgICBtYXJrSW52YWxpZEVsKHJvdy5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwicXVhbnRpdHlcIl0nKSk7XHJcbiAgICAgICAgICAgICAgICBpbnZhbGlkRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBtYXJrVmFsaWRFbChyb3cucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInF1YW50aXR5XCJdJykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFwcm9kdWN0LnVuaXRPZk1lYXN1cmUpIHtcclxuICAgICAgICAgICAgbWFya0ludmFsaWRFbChyb3cucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInVuaXRPZk1lYXN1cmVcIl0nKSk7XHJcbiAgICAgICAgICAgIGludmFsaWRGbGFnID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHByb2R1Y3QudW5pdE9mTWVhc3VyZSAmJiAhcHJvZHVjdC5wcm9kdWN0KSBtYXJrVmFsaWRFbChyb3cucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInVuaXRPZk1lYXN1cmVcIl0nKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gaW52YWxpZEZsYWc7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUVkaXRPcmRlcigpIHtcclxuICAgIGlmIChvcmRlciAmJiAhWydtYW5hZ2VyJywgJ2FkbWluJ10uaW5jbHVkZXMobG9nZ2VkSW5Vc2VyLnJvbGUpKSAvLyBub3JtYWwgdXNlciBlZGl0aW5nLCBqdXN0IHByaW50IGJlY2F1c2UgdGhleSBjYW50IGVkaXQgYW55dGhpbmdcclxuICAgICAgICByZXR1cm4gcHJpbnRTYWxlKG9yZGVyKTtcclxuXHJcbiAgICB0b2dnbGVTdWJtaXRCdG4oKTtcclxuXHJcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpO1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XHJcbiAgICB2YXIgZmlsdGVyZWRQcm9kdWN0cyA9IFtdO1xyXG5cclxuXHJcbiAgICAvLyB0cmFuc2Zvcm0gYWRkZWRQcm9kdWN0cyB0byB0aGUgdHlwZSB1c2VkIGluIGJhY2tlbmRcclxuICAgIGlmIChvcmRlclR5cGUgPT09ICd3aG9sZXNhbGUnKSB7XHJcbiAgICAgICAgYWRkZWRQcm9kdWN0cy5mb3JFYWNoKHByb2R1Y3QgPT4ge1xyXG4gICAgICAgICAgICBpZiAocHJvZHVjdC5wcm9kdWN0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBWYXJpYWJsZSBQcm9kdWN0XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZHVjdC5zZWxlY3RlZFNpemVzPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRQcm9kdWN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHByb2R1Y3QuaW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6IHByb2R1Y3QucHJvZHVjdC5faWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiBwcm9kdWN0LnF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmljZTogcHJvZHVjdC5wcmljZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzY291bnQ6IHByb2R1Y3QuZGlzY291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkU2l6ZXM6IHByb2R1Y3Quc2VsZWN0ZWRTaXplcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pdE9mTWVhc3VyZTogcHJvZHVjdC5wcm9kdWN0LnVuaXRPZk1lYXN1cmVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTaW1wbGUgcHJvZHVjdFxyXG4gICAgICAgICAgICAgICAgaWYgKCFwcm9kdWN0LnNlbGVjdGVkU2l6ZXM/Lmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZFByb2R1Y3RzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogcHJvZHVjdC5pbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdDogcHJvZHVjdC5wcm9kdWN0Ll9pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IHByb2R1Y3QucXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiBwcm9kdWN0LnByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNjb3VudDogcHJvZHVjdC5kaXNjb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pdE9mTWVhc3VyZTogcHJvZHVjdC5wcm9kdWN0LnVuaXRPZk1lYXN1cmVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJlZFByb2R1Y3RzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBwcm9kdWN0LmluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHByb2R1Y3QubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogcHJvZHVjdC5xdWFudGl0eSxcclxuICAgICAgICAgICAgICAgICAgICBwcmljZTogcHJvZHVjdC5wcmljZSxcclxuICAgICAgICAgICAgICAgICAgICAuLi4ocHJvZHVjdC5xdHlJblBhY2thZ2UgPiAwICYmIHsgcXR5SW5QYWNrYWdlOiBwcm9kdWN0LnF0eUluUGFja2FnZSB9KSxcclxuICAgICAgICAgICAgICAgICAgICBkaXNjb3VudDogcHJvZHVjdC5kaXNjb3VudCxcclxuICAgICAgICAgICAgICAgICAgICB1bml0T2ZNZWFzdXJlOiBwcm9kdWN0LnVuaXRPZk1lYXN1cmVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmIChvcmRlclR5cGUgPT09ICdyZXRhaWwnKSB7XHJcbiAgICAgICAgYWRkZWRQcm9kdWN0cy5mb3JFYWNoKHByb2R1Y3QgPT4ge1xyXG4gICAgICAgICAgICBpZiAocHJvZHVjdC5wcm9kdWN0KVxyXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRQcm9kdWN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleDogcHJvZHVjdC5pbmRleCxcclxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiBwcm9kdWN0LnByb2R1Y3QuX2lkLFxyXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiBwcm9kdWN0LnF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBwcm9kdWN0LnByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLihwcm9kdWN0LnNpemUgJiYgeyBzaXplOiBwcm9kdWN0LnNpemUgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzY291bnQ6IHByb2R1Y3QuZGlzY291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdW5pdE9mTWVhc3VyZTogcHJvZHVjdC51bml0T2ZNZWFzdXJlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRQcm9kdWN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleDogcHJvZHVjdC5pbmRleCxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwcm9kdWN0Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IHByb2R1Y3QucXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHByb2R1Y3QucHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogcHJvZHVjdC5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2NvdW50OiBwcm9kdWN0LmRpc2NvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHVuaXRPZk1lYXN1cmU6IHByb2R1Y3QudW5pdE9mTWVhc3VyZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICBkYXRlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZScpLnZhbHVlLFxyXG4gICAgICAgIHR5cGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eXBlJykudmFsdWUsXHJcbiAgICAgICAgY3VzdG9tZXI6IHNlbGVjdGVkQ3VzdG9tZXI/Ll9pZCxcclxuICAgICAgICBvcmRlclR5cGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcmRlclR5cGUnKS52YWx1ZSxcclxuICAgICAgICBwcm9kdWN0czogZmlsdGVyZWRQcm9kdWN0cyxcclxuICAgICAgICBwYXltZW50VHlwZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BheW1lbnRUeXBlJykudmFsdWUsXHJcbiAgICAgICAgcGFpZEFtb3VudDogKyhmb3JtRGF0YS5nZXQoJ3BhaWRBbW91bnQnKS5yZXBsYWNlKCcsJywgJy4nKSksXHJcbiAgICAgICAgY29tcGFueTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbXBhbnknKS52YWx1ZSxcclxuICAgICAgICByZWNlaXZlcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2VpdmVyJykudmFsdWUsXHJcbiAgICAgICAgc2VuZGVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VuZGVyJykudmFsdWVcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpbnZhbGlkRGF0YSA9IHZhbGlkYXRlT3JkZXIoZGF0YSk7XHJcblxyXG4gICAgaWYgKGludmFsaWREYXRhKSB7XHJcbiAgICAgICAgZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCd3YXMtdmFsaWRhdGVkJyk7XHJcbiAgICAgICAgcmV0dXJuIHRvZ2dsZVN1Ym1pdEJ0bigpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvcm0uY2xhc3NMaXN0LmFkZCgnd2FzLXZhbGlkYXRlZCcpO1xyXG4gICAgZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCduZWVkcy12YWxpZGF0aW9uJylcclxuXHJcbiAgICBjb25zdCBhbGVydEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsZXJ0Jyk7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlcSA9IG9yZGVyID8gYXdhaXQgYXhpb3MucHV0KGAvb3JkZXJzLyR7b3JkZXIuX2lkfWAsIGRhdGEpIDogYXdhaXQgYXhpb3MucG9zdCgnL29yZGVycycsIGRhdGEpO1xyXG5cclxuICAgICAgICBpZiAocmVxLnN0YXR1cyA9PT0gMjAxKSB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVN1Ym1pdEJ0bigpO1xyXG5cclxuICAgICAgICAgICAgcGFnZShgL29yZGVycy8ke3JlcS5kYXRhfT9wcmludGApO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHRvZ2dsZVN1Ym1pdEJ0bigpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICBpZiAoZXJyLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAwKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJywgJ2FsZXJ0LXN1Y2Nlc3MnKTtcclxuICAgICAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QuYWRkKCdhbGVydC1kYW5nZXInKTtcclxuICAgICAgICAgICAgYWxlcnRFbC50ZXh0Q29udGVudCA9IGVyci5yZXNwb25zZS5kYXRhO1xyXG4gICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcy12YWxpZGF0ZWQnKTtcclxuICAgICAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKCduZWVkcy12YWxpZGF0aW9uJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlLmRhdGEudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygndmF0JykpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtJbnZhbGlkKCd2YXQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGVyci5yZXNwb25zZS5kYXRhLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3Bob25lJykpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtJbnZhbGlkKCdwaG9uZScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlLmRhdGEudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZGlzY291bnQnKSkge1xyXG4gICAgICAgICAgICAgICAgbWFya0ludmFsaWQoJ2Rpc2NvdW50Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXJyLnJlc3BvbnNlPy5zdGF0dXMgPT09IDUwMCkge1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScsICdhbGVydC1zdWNjZXNzJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LmFkZCgnYWxlcnQtZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwudGV4dENvbnRlbnQgPSAn0JPRgNC10YjQutCwINCyINGB0YrRgNCy0YrRgNCwJztcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIH0gZWxzZSBjb25zb2xlLmVycm9yKGVycilcclxuICAgIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcHJpbnRTYWxlKGRhdGEpIHtcclxuICAgIGNvbnN0IHByaW50Q29weSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludENvcHknKT8uY2hlY2tlZCB8fCBmYWxzZTtcclxuICAgIGNvbnN0IHByaW50U3Rva292YSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludFN0b2tvdmEnKT8uY2hlY2tlZCB8fCBmYWxzZTtcclxuICAgIGxldCBmbGFncyA9IHt9O1xyXG5cclxuICAgIC8vIENoZWNrIGlmIGFueSBwcm9kdWN0IGhhcyBkaXNjb3VudCwgaWYgbm9uZSAtIGRvbnQgc2hvdyBjb2x1bW5cclxuICAgIGZsYWdzLnRhYmxlU2hvd0Rpc2NvdW50cyA9IGRhdGEucHJvZHVjdHMuc29tZShwcm9kdWN0ID0+IHByb2R1Y3QuZGlzY291bnQgPiAwKTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiBhbnkgcHJvZHVjdCBoYXMgcXR5SW5QYWNrYWdlLCBpZiBub25lIC0gZG9udCBzaG93IGNvbHVtblxyXG4gICAgZmxhZ3MudGFibGVTaG93UXR5SW5QYWNrYWdlID0gZGF0YS5wcm9kdWN0cy5zb21lKHByb2R1Y3QgPT4gcHJvZHVjdC5xdHlJblBhY2thZ2UgPiAwKTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiBhbnkgcHJvZHVjdCBoYXMgc2l6ZSwgaWYgbm9uZSAtIGRvbnQgc2hvdyBjb2x1bW5cclxuICAgIGZsYWdzLnRhYmxlU2hvd1NpemVzID0gZGF0YS5wcm9kdWN0cy5zb21lKHByb2R1Y3QgPT4gcHJvZHVjdC5zaXplKTtcclxuXHJcbiAgICAvLyBzaG91bGQgcHJpbnQgc29tZXRoaW5nIGxpa2UgdGhpczogaW52b2ljZSBvcmlnaW5hbCwgaW52b2ljZSBjb3B5LCBldGMgZXRjIGRlcGVuZGluZyBvbiB3aGF0cyBzZWxlY3RlZCBhcyB0eXBlXHJcbiAgICBjb25zdCBwcmludFBhZ2VzID0gW107XHJcbiAgICBwcmludFBhZ2VzLnB1c2gocHJpbnRDb250YWluZXIoeyBkYXRhLCBmbGFncyB9KSk7XHJcbiAgICBpZiAocHJpbnRDb3B5ID09PSB0cnVlKSAvLyBwcmludCBhIGNvcHkgb2YgdGhlIGludm9pY2VcclxuICAgICAgICBwcmludFBhZ2VzLnB1c2gocHJpbnRDb250YWluZXIoeyBkYXRhLCBwYXJhbTogeyBjb3B5OiB0cnVlIH0sIGZsYWdzIH0pKTtcclxuXHJcbiAgICBpZiAocHJpbnRTdG9rb3ZhID09PSB0cnVlKSAvLyBwcmludCBzdG9rb3ZhIG9mIHRoZSBpbnZvaWNlXHJcbiAgICAgICAgcHJpbnRQYWdlcy5wdXNoKHByaW50Q29udGFpbmVyKHsgZGF0YSwgcGFyYW06IHsgc3Rva292YTogdHJ1ZSB9LCBmbGFncyB9KSk7XHJcblxyXG4gICAgcmVuZGVyKHByaW50UGFnZXMsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludENvbnRhaW5lcicpKTtcclxuICAgIHdpbmRvdy5wcmludCgpO1xyXG59XHJcblxyXG4vLyBpbnZvaWNlIHNob3VsZCBoYXZlIGRlZHVjdGVkIHRheCBpbiBwcm9kdWN0IHByaWNlIGFuZCBzaG93biBhcyBzdW0gYXQgdGhlIGVuZFxyXG4vLyBzdG9rb3ZhIHNob3VsZCBoYXZlIGFsbCBwcm9kdWN0cyB3aXRoIHRheCBpbmNsdWRlZCBpbiBwcmljZSBhbmQgc2hvd24gYXMgc3VtIGF0IHRoZSBlbmRcclxuY29uc3QgcHJpbnRDb250YWluZXIgPSAoeyBkYXRhLCBwYXJhbSwgZmxhZ3MgfSkgPT4gaHRtbGBcclxuICAgIDxkaXYgc3R5bGU9XCJicmVhay1hZnRlcjpwYWdlOyBwYWRkaW5nOiAxcmVtXCI+XHJcbiAgICAgICAgPGgxIGNsYXNzPVwidGV4dC1jZW50ZXIgZnctYm9sZFwiPiR7cGFyYW0/LnN0b2tvdmEgPyAn0KHRgtC+0LrQvtCy0LAg0YDQsNC30L/QuNGB0LrQsCcgOiBwYXJhbXMuZG9jdW1lbnRUeXBlc1tkYXRhLnR5cGVdfTwvaDE+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyIGZzLTVcIj4ke3BhcmFtPy5jb3B5ID8gJ9Ca0L7Qv9C40LUnIDogJ9Ce0YDQuNCz0LjQvdCw0LsnfTwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW5cIj5cclxuICAgICAgICAgICAgJHtwYXJhbT8uc3Rva292YSA/ICcnIDogaHRtbGA8ZGl2PtCU0L7QutGD0LzQtdC90YIg4oSWOiA8c3BhbiBjbGFzcz1cImZ3LWJvbGRcIj4ke2RhdGEubnVtYmVyfTwvc3Bhbj48L2Rpdj5gfVxyXG4gICAgICAgICAgICA8ZGl2PtCU0LDRgtCwOiA8c3BhbiBjbGFzcz1cImZ3LWJvbGRcIj4ke25ldyBEYXRlKGRhdGEuZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdiZycpfTwvc3Bhbj48L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBnYXAtMyBwLTNcIj5cclxuICAgICAgICAgICAgPHRhYmxlIGlkPVwiY3VzdG9tZXJJbmZvVGFibGVcIiBjbGFzcz1cImNvbCBib3JkZXIgcm91bmRlZFwiPlxyXG4gICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgIDx0cj48dGQ+0J/QvtC70YPRh9Cw0YLQtdC7PC90ZD4gPHRkPiR7ZGF0YS5jdXN0b21lci5uYW1lfTwvdGQ+PC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8dHI+JHtkYXRhLmN1c3RvbWVyPy50YXh2YXQgPyBodG1sYDx0ZD7QlNCU0KEg4oSWPC90ZD4gPHRkPiR7ZGF0YS5jdXN0b21lci50YXh2YXR9PC90ZD5gIDogJyd9PC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8dHI+PHRkPtCY0LTQtdC90YIuIOKEliA8dGQ+JHtkYXRhLmN1c3RvbWVyLnZhdH08L3RkPjwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZD7QkNC00YDQtdGBPC90ZD4gPHRkPiR7ZGF0YS5jdXN0b21lci5hZGRyZXNzfTwvdGQ+PC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8dHI+PHRkPtCc0J7QmzwvdGQ+IDx0ZD4ke2RhdGEuY3VzdG9tZXIubW9sfTwvdGQ+PC90cj5cclxuICAgICAgICAgICAgICAgICAgICAke2RhdGEuY3VzdG9tZXI/LnBob25lID8gaHRtbGA8dHI+PHRkPtCi0LXQu9C10YTQvtC9PC90ZD4gPHRkPiR7ZGF0YS5jdXN0b21lci5waG9uZX08L3RkPjwvdHI+YCA6ICcnfVxyXG4gICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgPC90YWJsZT5cclxuXHJcbiAgICAgICAgICAgIDx0YWJsZSBpZD1cImNvbXBhbnlJbmZvVGFibGVcIiBjbGFzcz1cImNvbCBib3JkZXIgcm91bmRlZFwiPlxyXG4gICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgIDx0cj48dGQ+0JTQvtGB0YLQsNCy0YfQuNC6PC90ZD4gPHRkPiR7ZGF0YS5jb21wYW55Lm5hbWV9PC90ZD48L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0cj4ke2RhdGEuY29tcGFueT8udGF4dmF0ID8gaHRtbGA8dGQ+0JTQlNChIOKEljwvdGQ+IDx0ZD4ke2RhdGEuY29tcGFueS50YXh2YXR9PC90ZD5gIDogJyd9PC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8dHI+PHRkPtCY0LTQtdC90YIuIOKEliA8dGQ+JHtkYXRhLmNvbXBhbnkudmF0fTwvdGQ+PC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8dHI+PHRkPtCQ0LTRgNC10YE8L3RkPiA8dGQ+JHtkYXRhLmNvbXBhbnkuYWRkcmVzc308L3RkPjwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZD7QnNCe0Js8L3RkPiA8dGQ+JHtkYXRhLmNvbXBhbnkubW9sfTwvdGQ+PC90cj5cclxuICAgICAgICAgICAgICAgICAgICAke2RhdGEuY29tcGFueT8ucGhvbmUgPyBodG1sYDx0cj48dGQ+0KLQtdC70LXRhNC+0L08L3RkPiA8dGQ+JHtkYXRhLmNvbXBhbnkucGhvbmV9PC90ZD48L3RyPmAgOiAnJ31cclxuICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICR7ZGF0YS5vcmRlclR5cGUgPT09ICd3aG9sZXNhbGUnID8gcHJpbnRUYWJsZVdob2xlc2FsZSh7IHRheDogZGF0YS5jb21wYW55LnRheCwgcHJvZHVjdHM6IGRhdGEucHJvZHVjdHMsIHR5cGU6IHBhcmFtPy5zdG9rb3ZhID8gJ3N0b2tvdmEnIDogZGF0YS50eXBlLCBmbGFncyB9KSA6IHByaW50VGFibGVSZXRhaWwoeyB0YXg6IGRhdGEuY29tcGFueS50YXgsIHByb2R1Y3RzOiBkYXRhLnByb2R1Y3RzLCB0eXBlOiBwYXJhbT8uc3Rva292YSA/ICdzdG9rb3ZhJyA6IGRhdGEudHlwZSwgZmxhZ3MgfSl9XHJcbiAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtc2l6ZTogMXJlbVwiPlxyXG4gICAgICAgICAgICDQodC70L7QstC+0Lw6ICR7bnVtYmVyVG9CR1RleHQoZGF0YS50b3RhbCl9XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXggZmxleC1jb2x1bW4gdGV4dC1lbmRcIj5cclxuICAgICAgICAgICAgJHtwYXJhbT8uc3Rva292YSB8fCBkYXRhLnR5cGUgPT09ICdzdG9rb3ZhJyA/ICcnIDogaHRtbGA8ZGl2PtCU0LDQvdGK0YfQvdCwINC+0YHQvdC+0LLQsCAke2RhdGEuY29tcGFueS50YXh9JTogJHtmb3JtYXRQcmljZShkZWR1Y3RWYXQoZGF0YS50b3RhbCwgZGF0YS5jb21wYW55LnRheCkpfTwvZGl2PmB9XHJcbiAgICAgICAgICAgICR7cGFyYW0/LnN0b2tvdmEgfHwgZGF0YS50eXBlID09PSAnc3Rva292YScgPyAnJyA6IGh0bWxgPGRpdj7QlNCU0KEgJHtkYXRhLmNvbXBhbnkudGF4fSU6ICR7Zm9ybWF0UHJpY2UoZGF0YS50b3RhbCAtIGRlZHVjdFZhdChkYXRhLnRvdGFsLCBkYXRhLmNvbXBhbnkudGF4KSl9PC9kaXY+YH1cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZ3LWJvbGRcIj7QodGD0LzQsCDQt9CwINC/0LvQsNGJ0LDQvdC1OiAke2Zvcm1hdFByaWNlKGRhdGEudG90YWwpfTwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8ZGl2PtCf0LvQsNGJ0LDQvdC1OiAke3BhcmFtcy5wYXltZW50VHlwZXNbZGF0YS5wYXltZW50VHlwZV19PC9kaXY+XHJcbiAgICAgICAgICAgICR7ZGF0YS5wYXltZW50VHlwZSA9PT0gJ2JhbmsnID8gaHRtbGBcclxuICAgICAgICAgICAgICAgIDxkaXY+SUJBTjogJHtkYXRhLmNvbXBhbnkuYmFuay5pYmFufTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdj7QkdCw0L3QutCwOiAke2RhdGEuY29tcGFueS5iYW5rLm5hbWV9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2PtCR0LDQvdC60L7QsiDQutC+0LQ6ICR7ZGF0YS5jb21wYW55LmJhbmsuY29kZX08L2Rpdj5gIDogJyd9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlblwiPlxyXG4gICAgICAgICAgICA8ZGl2PtCf0L7Qu9GD0YfQuNC7OiAke2RhdGEucmVjZWl2ZXJ9PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXY+0KHRitGB0YLQsNCy0LjQuzogJHtkYXRhLnNlbmRlcn08L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG5gO1xyXG5cclxuY29uc3QgcHJpbnRUYWJsZVdob2xlc2FsZSA9ICh7IHRheCwgcHJvZHVjdHMsIHR5cGUsIGZsYWdzIH0pID0+IGh0bWxgXHJcbiAgICA8dGFibGUgaWQ9XCJwcmludFByb2R1Y3RXaG9sZXNhbGVUYWJsZVwiIGNsYXNzPVwidGFibGUgdGFibGUtYm9yZGVyZWQgdGFibGUtc3RyaXBlZFwiPlxyXG4gICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgPHRyIGNsYXNzPVwiZnctYm9sZCB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgPHRkPuKEljwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+0JrQvtC0PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7QodGC0L7QutCwPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7QnNGP0YDQutCwPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD7Qn9Cw0LrQtdGC0Lg8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPtCR0YDQvtC5INCyINC/0LDQutC10YI8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPiR7ZmxhZ3MudGFibGVTaG93RGlzY291bnRzID8gJ9Cm0LXQvdCwINC30LAg0LHRgNC+0Lkg0YHQu9C10LQg0KLQniUnIDogJ9Cm0LXQvdCwINC30LAg0LHRgNC+0LknfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+0KbQtdC90LA8L3RkPlxyXG4gICAgICAgICAgICAgICAgJHtmbGFncy50YWJsZVNob3dEaXNjb3VudHMgPyBodG1sYDx0ZD7QntGC0YHRgtGK0L/QutCwPC90ZD5gIDogJyd9XHJcbiAgICAgICAgICAgICAgICAke2ZsYWdzLnRhYmxlU2hvd0Rpc2NvdW50cyA/IGh0bWxgPHRkPtCm0LXQvdCwINGB0LvQtdC0INCi0J4lPC90ZD5gIDogJyd9XHJcbiAgICAgICAgICAgICAgICA8dGQ+0KHRg9C80LA8L3RkPlxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgPHRib2R5IGNsYXNzPVwidGFibGUtZ3JvdXAtZGl2aWRlclwiPlxyXG4gICAgICAgICAgICAke3Byb2R1Y3RzLm1hcCgocHJvZHVjdCwgaW5kZXgpID0+IGh0bWxgXHJcbiAgICAgICAgICAgICAgICA8dHIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keysraW5kZXh9PC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7cHJvZHVjdD8ucHJvZHVjdD8uY29kZSB8fCAnJ308L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHtwcm9kdWN0Py5wcm9kdWN0Py5uYW1lIHx8IHByb2R1Y3QubmFtZX08L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHtwcm9kdWN0Py5wcm9kdWN0Py51bml0T2ZNZWFzdXJlIHx8IHByb2R1Y3QudW5pdE9mTWVhc3VyZX08L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJ0ZXh0LW5vd3JhcFwiPiR7cHJvZHVjdC5xdWFudGl0eX08L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHtwcm9kdWN0Py5zZWxlY3RlZFNpemVzPy5sZW5ndGggfHwgcHJvZHVjdC5xdHlJblBhY2thZ2V9PC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7cHJvZHVjdC5xdHlJblBhY2thZ2UgfHwgcHJvZHVjdD8uc2VsZWN0ZWRTaXplcz8ubGVuZ3RoID8gZm9ybWF0UHJpY2VOb0N1cnJlbmN5KHR5cGUgPT09ICdzdG9rb3ZhJyA/IChwcm9kdWN0LnByaWNlIC8gKHByb2R1Y3Q/LnNlbGVjdGVkU2l6ZXM/Lmxlbmd0aCB8fCBwcm9kdWN0LnF0eUluUGFja2FnZSkgKiAoMSAtIHByb2R1Y3QuZGlzY291bnQgLyAxMDApKSA6IGRlZHVjdFZhdCgocHJvZHVjdC5wcmljZSAvIChwcm9kdWN0Py5zZWxlY3RlZFNpemVzPy5sZW5ndGggfHwgcHJvZHVjdC5xdHlJblBhY2thZ2UpICogKDEgLSBwcm9kdWN0LmRpc2NvdW50IC8gMTAwKSksIHRheCkpIDogJyd9PC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwidGV4dC1ub3dyYXBcIj4ke2Zvcm1hdFByaWNlTm9DdXJyZW5jeSh0eXBlID09PSAnc3Rva292YScgPyBwcm9kdWN0LnByaWNlIDogZGVkdWN0VmF0KHByb2R1Y3QucHJpY2UsIHRheCkpfTwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICR7ZmxhZ3MudGFibGVTaG93RGlzY291bnRzID8gaHRtbGA8dGQ+JHtwcm9kdWN0Py5kaXNjb3VudCA+IDAgPyBwcm9kdWN0LmRpc2NvdW50ICsgJyUnIDogJzAlJ308L3RkPmAgOiAnJ31cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHtmbGFncy50YWJsZVNob3dEaXNjb3VudHMgPyBodG1sYDx0ZCBjbGFzcz1cInRleHQtbm93cmFwXCI+JHtwcm9kdWN0Py5kaXNjb3VudCA/IGZvcm1hdFByaWNlTm9DdXJyZW5jeSh0eXBlID09PSAnc3Rva292YScgPyBwcm9kdWN0LnByaWNlICogKDEgLSBwcm9kdWN0LmRpc2NvdW50IC8gMTAwKSA6IGRlZHVjdFZhdChwcm9kdWN0LnByaWNlICogKDEgLSBwcm9kdWN0LmRpc2NvdW50IC8gMTAwKSwgdGF4KSkgOiBmb3JtYXRQcmljZU5vQ3VycmVuY3kodHlwZSA9PT0gJ3N0b2tvdmEnID8gcHJvZHVjdC5wcmljZSA6IGRlZHVjdFZhdChwcm9kdWN0LnByaWNlLCB0YXgpKX08L3RkPmAgOiAnJ31cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwidGV4dC1ub3dyYXBcIj4ke2Zvcm1hdFByaWNlTm9DdXJyZW5jeSh0eXBlID09PSAnc3Rva292YScgPyAoKHByb2R1Y3QucHJpY2UgKiBwcm9kdWN0LnF1YW50aXR5KSAqICgxIC0gcHJvZHVjdC5kaXNjb3VudCAvIDEwMCkpIDogZGVkdWN0VmF0KChwcm9kdWN0LnByaWNlICogcHJvZHVjdC5xdWFudGl0eSkgKiAoMSAtIHByb2R1Y3QuZGlzY291bnQgLyAxMDApLCB0YXgpKX08L3RkPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgYCl9XHJcbiAgICAgICAgPC90Ym9keT5cclxuICAgIDwvdGFibGU+XHJcbmA7XHJcblxyXG4vLyBBZGQgc2FtZSBzdHlsaW5nIGFzIHdob2xlc2FsZSB0YWJsZVxyXG5jb25zdCBwcmludFRhYmxlUmV0YWlsID0gKHsgdGF4LCBwcm9kdWN0cywgdHlwZSwgZmxhZ3MgfSkgPT4gaHRtbGBcclxuPHRhYmxlIGlkPVwicHJpbnRQcm9kdWN0UmV0YWlsVGFibGVcIiBjbGFzcz1cInRhYmxlIHRhYmxlLWJvcmRlcmVkIHRhYmxlLXN0cmlwZWRcIj5cclxuICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgIDx0ciBjbGFzcz1cImZ3LWJvbGQgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgIDx0ZD7ihJY8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPtCa0L7QtDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+0KHRgtC+0LrQsDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+0JzRj9GA0LrQsDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAke2ZsYWdzLnRhYmxlU2hvd1NpemVzID8gaHRtbGA8dGQ+0KDQsNC30LzQtdGAPC90ZD5gIDogJyd9XHJcbiAgICAgICAgICAgICAgICA8dGQ+0JHRgNC+0Lk8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPtCm0LXQvdCwPC90ZD5cclxuICAgICAgICAgICAgICAgICR7ZmxhZ3MudGFibGVTaG93RGlzY291bnRzID8gaHRtbGA8dGQ+0J7RgtGB0YLRitC/0LrQsDwvdGQ+YCA6ICcnfVxyXG4gICAgICAgICAgICAgICAgJHtmbGFncy50YWJsZVNob3dEaXNjb3VudHMgPyBodG1sYDx0ZD7QptC10L3QsCDRgdC70LXQtCDQotCeJTwvdGQ+YCA6ICcnfVxyXG4gICAgICAgICAgICAgICAgPHRkPtCh0YPQvNCwPC90ZD5cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgIDx0Ym9keSBjbGFzcz1cInRhYmxlLWdyb3VwLWRpdmlkZXJcIj5cclxuICAgICAgICAgICAgJHtwcm9kdWN0cy5tYXAoKHByb2R1Y3QsIGluZGV4KSA9PiBodG1sYFxyXG4gICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwidGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsrK2luZGV4fTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7cHJvZHVjdD8ucHJvZHVjdD8uY29kZSB8fCAnJ308L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4ke3Byb2R1Y3Q/LnByb2R1Y3Q/Lm5hbWUgfHwgcHJvZHVjdC5uYW1lfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPCEtLSBpZiBwcm9kdWN0IHdpdGggc2l6ZXMsIGl0cyBwcm9iYWJseSBcItCx0YDQvtC5XCIsIGVsc2UgaXRzIFwi0L/QsNC60LXRglwiIC0tPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4ke3Byb2R1Y3Q/LnByb2R1Y3Q/LnVuaXRPZk1lYXN1cmUgPT09ICfQv9Cw0LrQtdGCJyA/ICfQsdGALicgOiBwcm9kdWN0Py5wcm9kdWN0Py51bml0T2ZNZWFzdXJlIHx8IHByb2R1Y3QudW5pdE9mTWVhc3VyZX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICR7ZmxhZ3MudGFibGVTaG93U2l6ZXMgPyBodG1sYDx0ZD4ke3Byb2R1Y3Q/LnNpemV9PC90ZD5gIDogJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwidGV4dC1ub3dyYXBcIj4ke3Byb2R1Y3QucXVhbnRpdHl9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJ0ZXh0LW5vd3JhcFwiPiR7Zm9ybWF0UHJpY2VOb0N1cnJlbmN5KHR5cGUgPT09ICdzdG9rb3ZhJyA/IHByb2R1Y3QucHJpY2UgOiBkZWR1Y3RWYXQocHJvZHVjdC5wcmljZSwgdGF4KSl9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAke2ZsYWdzLnRhYmxlU2hvd0Rpc2NvdW50cyA/IGh0bWxgPHRkPiR7cHJvZHVjdD8uZGlzY291bnQgPiAwID8gcHJvZHVjdC5kaXNjb3VudCArICclJyA6ICcwJSd9PC90ZD5gIDogJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgJHtmbGFncy50YWJsZVNob3dEaXNjb3VudHMgPyBodG1sYDx0ZCBjbGFzcz1cInRleHQtbm93cmFwXCI+JHtwcm9kdWN0Py5kaXNjb3VudCA/IGZvcm1hdFByaWNlTm9DdXJyZW5jeSh0eXBlID09PSAnc3Rva292YScgPyBwcm9kdWN0LnByaWNlICogKDEgLSBwcm9kdWN0LmRpc2NvdW50IC8gMTAwKSA6IGRlZHVjdFZhdCgocHJvZHVjdC5wcmljZSAqICgxIC0gcHJvZHVjdC5kaXNjb3VudCAvIDEwMCkpLCB0YXgpKSA6ICcnfTwvdGQ+YCA6ICcnfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJ0ZXh0LW5vd3JhcFwiPiR7Zm9ybWF0UHJpY2VOb0N1cnJlbmN5KHR5cGUgPT09ICdzdG9rb3ZhJyA/ICgocHJvZHVjdC5wcmljZSAqIHByb2R1Y3QucXVhbnRpdHkpICogKDEgLSBwcm9kdWN0LmRpc2NvdW50IC8gMTAwKSkgOiBkZWR1Y3RWYXQoKHByb2R1Y3QucHJpY2UgKiBwcm9kdWN0LnF1YW50aXR5KSAqICgxIC0gcHJvZHVjdC5kaXNjb3VudCAvIDEwMCksIHRheCkpfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICBgKX1cclxuICAgICAgICA8L3Rib2R5PlxyXG4gICAgPC90YWJsZT5cclxuYDtcclxuXHJcbmNvbnN0IHRlbXBsYXRlID0gKHBhcmFtcywgY3VzdG9tZXJzKSA9PiBodG1sYFxyXG4gICAgJHtuYXYoKX1cclxuICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWQgZC1wcmludC1ub25lXCI+XHJcbiAgICAgICAgPGZvcm0gbm92YWxpZGF0ZSBjbGFzcz1cIm10LTNcIj5cclxuICAgICAgICAgICAgJHt0b3BSb3cocGFyYW1zLCBjdXN0b21lcnMpfVxyXG4gICAgICAgICAgICA8ZGl2IGlkPVwidGFibGVcIiBjbGFzcz1cInRhYmxlLXJlc3BvbnNpdmVcIj48L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBpZD1cImJvdHRvbVJvd1wiIGNsYXNzPVwicm93IGctMyBhbGlnbi1pdGVtcy1lbmRcIj48L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBpZD1cIndvb2NvbW1lcmNlXCIgY2xhc3M9XCJyb3cgZy0zIGFsaWduLWl0ZW1zLWVuZCBtdC0xXCI+PC9kaXY+XHJcbiAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgIDxkaXYgaWQ9XCJhbGVydFwiIGNsYXNzPVwiYWxlcnQgZC1ub25lXCI+PC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgaWQ9XCJwcmludENvbnRhaW5lclwiIGNsYXNzPVwiZC1ub25lIGQtcHJpbnQtYmxvY2tcIj48L2Rpdj5gO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUVkaXRPcmRlclBhZ2UoY3R4LCBuZXh0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vVE9ETyBXaGVuIGFsbCByb3V0ZXMgYXJlIGNvbnZlcnRlZCB0byBjb250cm9sbGVycywgY3JlYXRlIHNpbmdsZSByb3V0ZXMgZm9yIHRoaXMga2luZCBvZiByZXF1ZXN0cy4gSW5zdGVhZCBvZiB1c2luZyA0IHNlcGVyYXRlIHJlcXVlc3RzIHRvIGdldCBjb21wYW5pZXMsIHByb2R1Y3RzLCBldGMuIGRvIG9uZSBzaW5nbGUgcmVxdWVzdCB0byBmb3IgZXhhbXBsZSBcIi9vcmRlcnNJbmZvXCIgYW5kIHVzZSB0aGUgY29udHJvbGxlcnMgdG8gZ2V0IGFsbCB0aGUgaW5mby5cclxuICAgICAgICBwYXJhbXMgPSAoYXdhaXQgYXhpb3MuZ2V0KCcvb3JkZXJzL3BhcmFtcycpKS5kYXRhO1xyXG4gICAgICAgIGNvbXBhbmllcyA9IChhd2FpdCBheGlvcy5nZXQoJy9jb21wYW5pZXMnKSkuZGF0YTtcclxuICAgICAgICBjdXN0b21lcnMgPSAoYXdhaXQgYXhpb3MuZ2V0KCcvY3VzdG9tZXJzJywgeyBwYXJhbXM6IHsgcGFnZTogJ2NyZWF0ZU9yZGVyJyB9IH0pKS5kYXRhLmN1c3RvbWVycztcclxuICAgICAgICBwcm9kdWN0cyA9IChhd2FpdCBheGlvcy5nZXQoJy9wcm9kdWN0cycsIHsgcGFyYW1zOiB7IHBhZ2U6ICdvcmRlcnMnIH0gfSkpLmRhdGEucHJvZHVjdHM7XHJcbiAgICAgICAgZGVmYXVsdFZhbHVlcyA9IChhd2FpdCBheGlvcy5nZXQoJy9zZXR0aW5ncycsIHsgcGFyYW1zOiB7IGtleXM6IFsnb3JkZXJUeXBlJywgJ3BheW1lbnRUeXBlJywgJ2RvY3VtZW50VHlwZScsICdvcmRlclByaW50J10sIH0gfSkpLmRhdGE7XHJcbiAgICAgICAgYWRkZWRQcm9kdWN0c0luZGV4ID0gMDtcclxuXHJcbiAgICAgICAgaWYgKGN0eC5wYXJhbXMuaWQpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVxID0gYXdhaXQgYXhpb3MuZ2V0KGAvb3JkZXJzLyR7Y3R4LnBhcmFtcy5pZH1gKTtcclxuICAgICAgICAgICAgb3JkZXIgPSByZXEuZGF0YTtcclxuICAgICAgICAgICAgb3JkZXJUeXBlID0gb3JkZXIub3JkZXJUeXBlO1xyXG4gICAgICAgICAgICBhZGRlZFByb2R1Y3RzID0gb3JkZXIucHJvZHVjdHM7XHJcbiAgICAgICAgICAgIGFkZGVkUHJvZHVjdHMubWFwKHByb2R1Y3QgPT4gcHJvZHVjdC5pbmRleCA9IGFkZGVkUHJvZHVjdHNJbmRleCsrKTtcclxuICAgICAgICAgICAgc2VsZWN0ZWRDdXN0b21lciA9IG9yZGVyLmN1c3RvbWVyO1xyXG4gICAgICAgICAgICBzZWxlY3RlZENvbXBhbnkgPSBjb21wYW5pZXMuZmlsdGVyKGMgPT4gYy5faWQgPT09IG9yZGVyLmNvbXBhbnkpWzBdO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgb3JkZXIgd2FzIGp1c3QgY3JlYXRlZCBhbmQgcHJpbnQgd2FzIHJlcXVlc3RlZFxyXG4gICAgICAgICAgICBpZiAoY3R4LnF1ZXJ5c3RyaW5nLmluY2x1ZGVzKCdwcmludCcpKSB7XHJcbiAgICAgICAgICAgICAgICBwcmludFNhbGUob3JkZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhZ2UoYC9vcmRlcnMvJHtjdHgucGFyYW1zLmlkfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb3JkZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGRvY3VtZW50VHlwZSA9IGRlZmF1bHRWYWx1ZXMuZmluZChvID0+IG8ua2V5ID09PSAnZG9jdW1lbnRUeXBlJykudmFsdWU7XHJcbiAgICAgICAgICAgIG9yZGVyVHlwZSA9IGRlZmF1bHRWYWx1ZXMuZmluZChvID0+IG8ua2V5ID09PSAnb3JkZXJUeXBlJykudmFsdWU7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkQ29tcGFueSA9IGNvbXBhbmllc1swXTtcclxuICAgICAgICAgICAgc2VsZWN0ZWRDdXN0b21lciA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgYWRkZWRQcm9kdWN0cyA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2cob3JkZXIpXHJcbiAgICAgICAgLy8gcmVzZXQgZm9ybVxyXG4gICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XHJcbiAgICAgICAgY29uc3QgYWxlcnRFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGVydCcpO1xyXG4gICAgICAgIGlmIChmb3JtICYmIGFsZXJ0RWwpIHtcclxuICAgICAgICAgICAgLy8gZm9ybS5yZXNldCgpO1xyXG4gICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcy12YWxpZGF0ZWQnKTtcclxuICAgICAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKCduZWVkcy12YWxpZGF0aW9uJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pcy1pbnZhbGlkJykuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1pbnZhbGlkJykpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXMtdmFsaWQnKS5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXZhbGlkJykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVuZGVyKHRlbXBsYXRlKHBhcmFtcywgY3VzdG9tZXJzKSwgY29udGFpbmVyKTtcclxuICAgICAgICByZXJlbmRlclRhYmxlKCk7XHJcbiAgICAgICAgcmVuZGVyKHNlbmRlclRlbXBsYXRlKCksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kZXJEaXYnKSk7XHJcbiAgICAgICAgcmVuZGVyKHJlY2VpdmVyVGVtcGxhdGUoKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2VpdmVyRGl2JykpO1xyXG5cclxuICAgICAgICAvLyBTZXQgZGF0ZSBpbiBmaWVsZFxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRlJykudmFsdWVBc0RhdGUgPSBvcmRlciA/IG5ldyBEYXRlKG9yZGVyLmRhdGUpIDogbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGxpc3RlbmVyIGZvciBiYXJjb2RlIHNjYW5uZXJcclxuICAgICAgICBjb25zdCBiYXJjb2RlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZHVjdCcpO1xyXG4gICAgICAgIGJhcmNvZGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCd0ZXh0SW5wdXQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5kYXRhLmxlbmd0aCA+PSAxMCkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgLy8gRW50ZXJlZCB0ZXh0IHdpdGggbW9yZSB0aGFuIDEwIGNoYXJhY3RlcnMgYXQgb25jZSAoZWl0aGVyIGJ5IHNjYW5uZXIgb3IgYnkgY29weS1wYXN0aW5nIHZhbHVlIGluIGZpZWxkKVxyXG4gICAgICAgICAgICAgICAgLy8gc2ltdWxhdGUgRW50ZXIga2V5IHByZXNzZWQgb24gaW5wdXQgZmllbGQgdG8gYWN0aXZhdGUgYWRkUHJvZHVjdCBmdW5jdGlvblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgS2V5Ym9hcmRFdmVudCgna2V5dXAnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnRW50ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6ICdFbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpY2g6IDEzLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleUNvZGU6IDEzLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYmFyY29kZUlucHV0LnZhbHVlICs9IGUuZGF0YTtcclxuICAgICAgICAgICAgICAgIGJhcmNvZGVJbnB1dC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIGFsZXJ0KCfQktGK0LfQvdC40LrQvdCwINCz0YDQtdGI0LrQsCcpXHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/views/orders/createEdit.js\n");

/***/ }),

/***/ "./src/views/orders/orders.js":
/*!************************************!*\
  !*** ./src/views/orders/orders.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   salesPage: () => (/* binding */ salesPage)\n/* harmony export */ });\n/* harmony import */ var _css_orders_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/css/orders.css */ \"./src/css/orders.css\");\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/api.js */ \"./src/api.js\");\n/* harmony import */ var _views_nav__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/views/nav */ \"./src/views/nav.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var lit_directives_until_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lit/directives/until.js */ \"./node_modules/lit/directives/until.js\");\n/* harmony import */ var _views_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/views/components */ \"./src/views/components.js\");\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _views_login_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/views/login.js */ \"./src/views/login.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar selectedSale, pageCtx, path, params, selectedFilters = {};\r\nvar temp;\r\n\r\nfunction switchPage(cursor) {\r\n    const query = pageCtx.querystring;\r\n\r\n    if (query.length === 0)\r\n        page__WEBPACK_IMPORTED_MODULE_7__('/orders/?cursor=' + cursor);\r\n    else if (query.includes('cursor')) {\r\n        // replace cursor value in query\r\n        const newQuery = query.split('&').map(q => q.includes('cursor') ? 'cursor=' + cursor : q).join('&');\r\n        page__WEBPACK_IMPORTED_MODULE_7__('/orders/?' + newQuery);\r\n    } else {\r\n        // add cursor to query\r\n        page__WEBPACK_IMPORTED_MODULE_7__('/orders/?' + query + '&cursor=' + cursor);\r\n    }\r\n}\r\n\r\nconst table = (orders, prevCursor, nextCursor) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <div class=\"table-responsive\">\r\n        <table class=\"mt-3 table table-striped table-hover text-center\">\r\n            <thead>\r\n                <tr>\r\n                    <th scope=\"col\">Тип</th>\r\n                    <th scope=\"col\">Номер</th>\r\n                    <th scope=\"col\">Партньор</th>\r\n                    <th scope=\"col\">Обект</th>\r\n                    <th scope=\"col\">Дата</th>\r\n                    <th scope=\"col\">Стойност</th>\r\n                    <th scope=\"col\">Начин на плащане</th>\r\n                    <th scope=\"col\">Тип на продажба</th>\r\n                    <th scope=\"col\">Задължения</th>\r\n                    <th scope=\"col\">Действия</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                ${orders?.map(order => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n                    <tr class=${order.unpaid === true ? \"table-danger\" : \"\"}>\r\n                        <td>${params.documentTypes[order.type]}</td>\r\n                        <td>${order.number}</td>\r\n                        <td>${order.customer.name}</td>\r\n                        <td>${order.company.name}</td>\r\n                        <td>${new Date(order.date).toLocaleDateString('bg')}</td>\r\n                        <td>${(0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPrice)(order.total)}</td>\r\n                        <td>${params.paymentTypes[order.paymentType]}</td>\r\n                        <td>${params.orderTypes[order.orderType]}</td>\r\n                        <td>${order.unpaid === true ? (0,_api_js__WEBPACK_IMPORTED_MODULE_3__.formatPrice)(order.total - order.paidAmount) : \"\"}</td>\r\n                        <td>\r\n                            <a href=\"/orders/${order._id}\" class=\"btn btn-primary\"><i class=\"bi bi-pencil\"></i> ${['manager', 'admin'].includes(_views_login_js__WEBPACK_IMPORTED_MODULE_8__.loggedInUser.role) ? 'Редактирай' : 'Преглед'}</a>\r\n                            ${_views_login_js__WEBPACK_IMPORTED_MODULE_8__.loggedInUser.role === 'admin' ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<button @click=${() => selectedSale = order._id} class=\"btn btn-danger\" data-bs-toggle=\"modal\" data-bs-target=\"#cancelModal\"><i class=\"bi bi-trash\"></i> Анулирай</button>` : ''}\r\n                        </td>\r\n                    </tr>\r\n                `)}\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <div class=\"d-flex justify-content-center\">\r\n        ${prevCursor ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<button @click=${() => switchPage(prevCursor)} class=\"btn btn-primary\"><i class=\"bi bi-arrow-left\"></i> Предишна страница</button>` : ''}\r\n        ${nextCursor ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<button @click=${() => switchPage(nextCursor)} class=\"btn btn-primary\">Следваща страница <i class=\"bi bi-arrow-right\"></i></button>` : ''}\r\n    </div>\r\n`;\r\n\r\nasync function applyFilters(e) {\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData(document.getElementById('filters'));\r\n    const data = Object.fromEntries(formData.entries());\r\n\r\n    if (data.customer)\r\n        data.customer = data.customer.split('[')[1].split(']')[0];\r\n\r\n    if (data.company)\r\n        data.company = data.company.split('[')[1].split(']')[0];\r\n\r\n    if (data.unpaid)\r\n        data.unpaid = true;\r\n\r\n    // remove empty fields\r\n    Object.keys(data).forEach(key => data[key] === '' && delete data[key]);\r\n\r\n    if (data.length === 0)\r\n        page__WEBPACK_IMPORTED_MODULE_7__('/orders')\r\n    else if (data.length === 1)\r\n        page__WEBPACK_IMPORTED_MODULE_7__(`/orders?${Object.keys(data)[0]}=${Object.values(data)[0]}`);\r\n    else {\r\n        const uri = Object.keys(data).map(key => `${key}=${data[key]}`).join('&');\r\n        page__WEBPACK_IMPORTED_MODULE_7__(`/orders?${uri}`);\r\n    }\r\n}\r\n\r\nconst filters = (customers, companies, params) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        <form @change=${applyFilters} id=\"filters\" class=\"row align-items-end w-100 g-3\">\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"customer\">Партньор:</label>\r\n                <input .value=${(temp = customers.filter(c => c.vat === selectedFilters?.customer)[0]) ? `${temp.name} [${temp.vat}] ${temp.phone ? `(${temp.phone})` : ''}` : ''} list=\"customersList\" placeholder=\"Всички\" name=\"customer\" id=\"customer\" class=\"form-control\" autocomplete=\"off\">\r\n                <datalist id=\"customersList\">\r\n                    ${customers.map(customer => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option value=${`${customer.name} [${customer.vat}] ${customer.phone ? `(${customer.phone})` : ''}`}>`)}\r\n                </datalist>\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"company\">Обект:</label>\r\n                <input .value=${(temp = companies.filter(c => c.vat === selectedFilters?.company)[0]) ? `${temp.name} [${temp.vat}]` : ''} list=\"companiesList\" placeholder=\"Всички\" name=\"company\" id=\"company\" class=\"form-control\" autocomplete=\"off\">\r\n                <datalist id=\"companiesList\">\r\n                    ${companies.map(company => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option value=${`${company.name} [${company.vat}]`}>`)}\r\n                </datalist>\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"number\" class=\"form-label\">Номер на документ</label>\r\n                <input type=\"text\" .value=${selectedFilters?.number || ''} id=\"number\" name=\"number\" class=\"form-control\" autocomplete=\"off\"/>\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"type\" class=\"form-label\">Тип на документ:</label>\r\n                <select id=\"type\" name=\"type\" class=\"form-control\">\r\n                    <option value=\"\" selected>Всички</option>\r\n                    ${Object.entries(params.documentTypes).map(type => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option ?selected=${selectedFilters?.type === type[0]} value=${type[0]}>${type[1]}</option>`)}\r\n                </select>\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"paymentType\" class=\"form-label\">Начин на плащане</label>\r\n                <select id=\"paymentType\" name=\"paymentType\" class=\"form-control\">\r\n                    <option value=\"\" selected>Всички</option>\r\n                    ${Object.entries(params.paymentTypes).map(type => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option ?selected=${selectedFilters?.paymentType === type[0]} value=${type[0]}>${type[1]}</option>`)}\r\n                </select>\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"orderType\">Тип на продажба</label>\r\n                <select id=\"orderType\" name=\"orderType\" class=\"form-control\">\r\n                    <option value=\"\" selected>Всички</option>\r\n                    ${Object.entries(params.orderTypes).map(type => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option ?selected=${selectedFilters?.orderType === type[0]} value=${type[0]}>${type[1]}</option>`)}\r\n                </select>\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"from\">От:</label>\r\n                <input type=\"date\" id=\"from\" .value=${selectedFilters?.from || ''} name=\"from\" class=\"form-control\">\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"to\">До:</label>\r\n                <input type=\"date\" id=\"to\" .value=${selectedFilters?.to || ''} name=\"to\" class=\"form-control\">\r\n            </div>\r\n            <div class=\"col-12 col-sm\">\r\n                <div class=\"form-check form-switch p-0\">\r\n                    <label class=\"form-check-label d-block\" for=\"unpaid\">Само неплатени:</label>\r\n                    <input class=\"form-check-input ms-0 fs-4\" type=\"checkbox\" role=\"switch\" id=\"unpaid\" ?checked=${selectedFilters?.unpaid} name=\"unpaid\">\r\n                </div>\r\n            </div>\r\n        </form>\r\n`;\r\n\r\nasync function loadSales() {\r\n    try {\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].get(path)\r\n        const orders = req.data.orders;\r\n        const prevCursor = req.data.prevCursor;\r\n        const nextCursor = req.data.nextCursor;\r\n\r\n\r\n        params = (await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].get('/orders/params')).data;\r\n        const customers = (await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].get('/customers', { params: { page: 'orders' } })).data.customers;\r\n        const companies = (await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].get('/companies')).data;\r\n\r\n        return (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        ${filters(customers, companies, params)}\r\n        ${table(orders, prevCursor, nextCursor)}`\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert('Възникна грешка');\r\n    }\r\n}\r\n\r\nasync function deleteSale() {\r\n    try {\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].delete(`/orders/${selectedSale}`);\r\n\r\n        if (req.status === 204) {\r\n            page__WEBPACK_IMPORTED_MODULE_7__('/orders');\r\n        }\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert('Възникна грешка');\r\n    }\r\n}\r\n\r\nfunction salesPage(ctx, next) {\r\n    path = ctx.path;\r\n    pageCtx = ctx;\r\n    temp = undefined;\r\n\r\n    // check if filters are applied\r\n    if (ctx.querystring)\r\n        selectedFilters = Object.fromEntries(new URLSearchParams(ctx.querystring));\r\n    else\r\n        selectedFilters = {};\r\n\r\n    const cancelModal = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <div class=\"modal fade\" id = \"cancelModal\" tabindex=\"-1\" aria-labelledby=\"cancelModalLabel\" aria-hidden=\"true\" >\r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h1 class=\"modal-title fs-5\" id=\"cancelModalLabel\">Анулирай продажба</h1>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    Сигурни ли сте че искате да анулирате продажбата? Това ще върне всички продукти в склада.\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Откажи</button>\r\n                    <button @click=${deleteSale} type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\">Анулирай</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>`;\r\n\r\n    const template = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        ${cancelModal()}\r\n        ${(0,_views_nav__WEBPACK_IMPORTED_MODULE_4__.nav)()}\r\n        <div class=\"container-fluid\">\r\n            <a href='/orders/create' class=\"btn btn-primary\"><i class=\"bi bi-plus\"></i> Създай продажба</a>\r\n            ${(0,lit_directives_until_js__WEBPACK_IMPORTED_MODULE_5__.until)(loadSales(), _views_components__WEBPACK_IMPORTED_MODULE_6__.spinner)}\r\n        </div>\r\n    `;\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(template(), _app_js__WEBPACK_IMPORTED_MODULE_1__.container);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw2Q0FBSztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDZDQUFLO0FBQzdCLGlDQUFpQyw2Q0FBSyxxQkFBcUIsVUFBVSxrQkFBa0I7QUFDdkYsaUNBQWlDLDZDQUFLO0FBQ3RDO0FBQ0EsZUFBZSxpREFBSTtBQUNuQixVQUFVO0FBQ1YsVUFBVSxzQ0FBc0M7QUFDaEQsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDZDQUFLLG1CQUFtQixhQUFhO0FBQy9EO0FBQ0E7QUFDQSxZQUFZLGlDQUFJO0FBQ2hCO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlEQUFJO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxZQUFZO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsaURBQUk7QUFDL0IsVUFBVTtBQUNWLFVBQVUsK0NBQUc7QUFDYjtBQUNBO0FBQ0EsY0FBYyw4REFBSyxjQUFjLHNEQUFPO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLElBQUksbURBQU0sYUFBYSw4Q0FBUztBQUNoQyIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvdmlld3Mvb3JkZXJzL29yZGVycy5qcz83M2U2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnQC9jc3Mvb3JkZXJzLmNzcyc7XHJcbmltcG9ydCB7IGNvbnRhaW5lciB9IGZyb20gXCJAL2FwcC5qc1wiO1xyXG5pbXBvcnQgeyBodG1sLCByZW5kZXIgfSBmcm9tICdsaXQvaHRtbC5qcyc7XHJcbmltcG9ydCB7IGZvcm1hdFByaWNlIH0gZnJvbSAnQC9hcGkuanMnO1xyXG5pbXBvcnQgeyBuYXYgfSBmcm9tIFwiQC92aWV3cy9uYXZcIjtcclxuaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xyXG5pbXBvcnQgeyB1bnRpbCB9IGZyb20gXCJsaXQvZGlyZWN0aXZlcy91bnRpbC5qc1wiO1xyXG5pbXBvcnQgeyBzcGlubmVyIH0gZnJvbSBcIkAvdmlld3MvY29tcG9uZW50c1wiO1xyXG5pbXBvcnQgcGFnZSBmcm9tICdwYWdlJztcclxuaW1wb3J0IHsgbG9nZ2VkSW5Vc2VyIH0gZnJvbSBcIkAvdmlld3MvbG9naW4uanNcIjtcclxuXHJcbnZhciBzZWxlY3RlZFNhbGUsIHBhZ2VDdHgsIHBhdGgsIHBhcmFtcywgc2VsZWN0ZWRGaWx0ZXJzID0ge307XHJcbnZhciB0ZW1wO1xyXG5cclxuZnVuY3Rpb24gc3dpdGNoUGFnZShjdXJzb3IpIHtcclxuICAgIGNvbnN0IHF1ZXJ5ID0gcGFnZUN0eC5xdWVyeXN0cmluZztcclxuXHJcbiAgICBpZiAocXVlcnkubGVuZ3RoID09PSAwKVxyXG4gICAgICAgIHBhZ2UoJy9vcmRlcnMvP2N1cnNvcj0nICsgY3Vyc29yKTtcclxuICAgIGVsc2UgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdjdXJzb3InKSkge1xyXG4gICAgICAgIC8vIHJlcGxhY2UgY3Vyc29yIHZhbHVlIGluIHF1ZXJ5XHJcbiAgICAgICAgY29uc3QgbmV3UXVlcnkgPSBxdWVyeS5zcGxpdCgnJicpLm1hcChxID0+IHEuaW5jbHVkZXMoJ2N1cnNvcicpID8gJ2N1cnNvcj0nICsgY3Vyc29yIDogcSkuam9pbignJicpO1xyXG4gICAgICAgIHBhZ2UoJy9vcmRlcnMvPycgKyBuZXdRdWVyeSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGFkZCBjdXJzb3IgdG8gcXVlcnlcclxuICAgICAgICBwYWdlKCcvb3JkZXJzLz8nICsgcXVlcnkgKyAnJmN1cnNvcj0nICsgY3Vyc29yKTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgdGFibGUgPSAob3JkZXJzLCBwcmV2Q3Vyc29yLCBuZXh0Q3Vyc29yKSA9PiBodG1sYFxyXG4gICAgPGRpdiBjbGFzcz1cInRhYmxlLXJlc3BvbnNpdmVcIj5cclxuICAgICAgICA8dGFibGUgY2xhc3M9XCJtdC0zIHRhYmxlIHRhYmxlLXN0cmlwZWQgdGFibGUtaG92ZXIgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPtCi0LjQvzwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0J3QvtC80LXRgDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0J/QsNGA0YLQvdGM0L7RgDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0J7QsdC10LrRgjwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0JTQsNGC0LA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPtCh0YLQvtC50L3QvtGB0YI8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPtCd0LDRh9C40L0g0L3QsCDQv9C70LDRidCw0L3QtTwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0KLQuNC/INC90LAg0L/RgNC+0LTQsNC20LHQsDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0JfQsNC00YrQu9C20LXQvdC40Y88L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPtCU0LXQudGB0YLQstC40Y88L3RoPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgJHtvcmRlcnM/Lm1hcChvcmRlciA9PiBodG1sYFxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz0ke29yZGVyLnVucGFpZCA9PT0gdHJ1ZSA/IFwidGFibGUtZGFuZ2VyXCIgOiBcIlwifT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7cGFyYW1zLmRvY3VtZW50VHlwZXNbb3JkZXIudHlwZV19PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7b3JkZXIubnVtYmVyfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke29yZGVyLmN1c3RvbWVyLm5hbWV9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7b3JkZXIuY29tcGFueS5uYW1lfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke25ldyBEYXRlKG9yZGVyLmRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygnYmcnKX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtmb3JtYXRQcmljZShvcmRlci50b3RhbCl9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7cGFyYW1zLnBheW1lbnRUeXBlc1tvcmRlci5wYXltZW50VHlwZV19PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7cGFyYW1zLm9yZGVyVHlwZXNbb3JkZXIub3JkZXJUeXBlXX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtvcmRlci51bnBhaWQgPT09IHRydWUgPyBmb3JtYXRQcmljZShvcmRlci50b3RhbCAtIG9yZGVyLnBhaWRBbW91bnQpIDogXCJcIn08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL29yZGVycy8ke29yZGVyLl9pZH1cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPjxpIGNsYXNzPVwiYmkgYmktcGVuY2lsXCI+PC9pPiAke1snbWFuYWdlcicsICdhZG1pbiddLmluY2x1ZGVzKGxvZ2dlZEluVXNlci5yb2xlKSA/ICfQoNC10LTQsNC60YLQuNGA0LDQuScgOiAn0J/RgNC10LPQu9C10LQnfTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7bG9nZ2VkSW5Vc2VyLnJvbGUgPT09ICdhZG1pbicgPyBodG1sYDxidXR0b24gQGNsaWNrPSR7KCkgPT4gc2VsZWN0ZWRTYWxlID0gb3JkZXIuX2lkfSBjbGFzcz1cImJ0biBidG4tZGFuZ2VyXCIgZGF0YS1icy10b2dnbGU9XCJtb2RhbFwiIGRhdGEtYnMtdGFyZ2V0PVwiI2NhbmNlbE1vZGFsXCI+PGkgY2xhc3M9XCJiaSBiaS10cmFzaFwiPjwvaT4g0JDQvdGD0LvQuNGA0LDQuTwvYnV0dG9uPmAgOiAnJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgYCl9XHJcbiAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgPC90YWJsZT5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cImQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCI+XHJcbiAgICAgICAgJHtwcmV2Q3Vyc29yID8gaHRtbGA8YnV0dG9uIEBjbGljaz0keygpID0+IHN3aXRjaFBhZ2UocHJldkN1cnNvcil9IGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+PGkgY2xhc3M9XCJiaSBiaS1hcnJvdy1sZWZ0XCI+PC9pPiDQn9GA0LXQtNC40YjQvdCwINGB0YLRgNCw0L3QuNGG0LA8L2J1dHRvbj5gIDogJyd9XHJcbiAgICAgICAgJHtuZXh0Q3Vyc29yID8gaHRtbGA8YnV0dG9uIEBjbGljaz0keygpID0+IHN3aXRjaFBhZ2UobmV4dEN1cnNvcil9IGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+0KHQu9C10LTQstCw0YnQsCDRgdGC0YDQsNC90LjRhtCwIDxpIGNsYXNzPVwiYmkgYmktYXJyb3ctcmlnaHRcIj48L2k+PC9idXR0b24+YCA6ICcnfVxyXG4gICAgPC9kaXY+XHJcbmA7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBhcHBseUZpbHRlcnMoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXJzJykpO1xyXG4gICAgY29uc3QgZGF0YSA9IE9iamVjdC5mcm9tRW50cmllcyhmb3JtRGF0YS5lbnRyaWVzKCkpO1xyXG5cclxuICAgIGlmIChkYXRhLmN1c3RvbWVyKVxyXG4gICAgICAgIGRhdGEuY3VzdG9tZXIgPSBkYXRhLmN1c3RvbWVyLnNwbGl0KCdbJylbMV0uc3BsaXQoJ10nKVswXTtcclxuXHJcbiAgICBpZiAoZGF0YS5jb21wYW55KVxyXG4gICAgICAgIGRhdGEuY29tcGFueSA9IGRhdGEuY29tcGFueS5zcGxpdCgnWycpWzFdLnNwbGl0KCddJylbMF07XHJcblxyXG4gICAgaWYgKGRhdGEudW5wYWlkKVxyXG4gICAgICAgIGRhdGEudW5wYWlkID0gdHJ1ZTtcclxuXHJcbiAgICAvLyByZW1vdmUgZW1wdHkgZmllbGRzXHJcbiAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKGtleSA9PiBkYXRhW2tleV0gPT09ICcnICYmIGRlbGV0ZSBkYXRhW2tleV0pO1xyXG5cclxuICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMClcclxuICAgICAgICBwYWdlKCcvb3JkZXJzJylcclxuICAgIGVsc2UgaWYgKGRhdGEubGVuZ3RoID09PSAxKVxyXG4gICAgICAgIHBhZ2UoYC9vcmRlcnM/JHtPYmplY3Qua2V5cyhkYXRhKVswXX09JHtPYmplY3QudmFsdWVzKGRhdGEpWzBdfWApO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgdXJpID0gT2JqZWN0LmtleXMoZGF0YSkubWFwKGtleSA9PiBgJHtrZXl9PSR7ZGF0YVtrZXldfWApLmpvaW4oJyYnKTtcclxuICAgICAgICBwYWdlKGAvb3JkZXJzPyR7dXJpfWApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBmaWx0ZXJzID0gKGN1c3RvbWVycywgY29tcGFuaWVzLCBwYXJhbXMpID0+IGh0bWxgXHJcbiAgICAgICAgPGZvcm0gQGNoYW5nZT0ke2FwcGx5RmlsdGVyc30gaWQ9XCJmaWx0ZXJzXCIgY2xhc3M9XCJyb3cgYWxpZ24taXRlbXMtZW5kIHctMTAwIGctM1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgY29sLXNtXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY3VzdG9tZXJcIj7Qn9Cw0YDRgtC90YzQvtGAOjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgLnZhbHVlPSR7KHRlbXAgPSBjdXN0b21lcnMuZmlsdGVyKGMgPT4gYy52YXQgPT09IHNlbGVjdGVkRmlsdGVycz8uY3VzdG9tZXIpWzBdKSA/IGAke3RlbXAubmFtZX0gWyR7dGVtcC52YXR9XSAke3RlbXAucGhvbmUgPyBgKCR7dGVtcC5waG9uZX0pYCA6ICcnfWAgOiAnJ30gbGlzdD1cImN1c3RvbWVyc0xpc3RcIiBwbGFjZWhvbGRlcj1cItCS0YHQuNGH0LrQuFwiIG5hbWU9XCJjdXN0b21lclwiIGlkPVwiY3VzdG9tZXJcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICAgICAgPGRhdGFsaXN0IGlkPVwiY3VzdG9tZXJzTGlzdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICR7Y3VzdG9tZXJzLm1hcChjdXN0b21lciA9PiBodG1sYDxvcHRpb24gdmFsdWU9JHtgJHtjdXN0b21lci5uYW1lfSBbJHtjdXN0b21lci52YXR9XSAke2N1c3RvbWVyLnBob25lID8gYCgke2N1c3RvbWVyLnBob25lfSlgIDogJyd9YH0+YCl9XHJcbiAgICAgICAgICAgICAgICA8L2RhdGFsaXN0PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC02IGNvbC1zbVwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNvbXBhbnlcIj7QntCx0LXQutGCOjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgLnZhbHVlPSR7KHRlbXAgPSBjb21wYW5pZXMuZmlsdGVyKGMgPT4gYy52YXQgPT09IHNlbGVjdGVkRmlsdGVycz8uY29tcGFueSlbMF0pID8gYCR7dGVtcC5uYW1lfSBbJHt0ZW1wLnZhdH1dYCA6ICcnfSBsaXN0PVwiY29tcGFuaWVzTGlzdFwiIHBsYWNlaG9sZGVyPVwi0JLRgdC40YfQutC4XCIgbmFtZT1cImNvbXBhbnlcIiBpZD1cImNvbXBhbnlcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICAgICAgPGRhdGFsaXN0IGlkPVwiY29tcGFuaWVzTGlzdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICR7Y29tcGFuaWVzLm1hcChjb21wYW55ID0+IGh0bWxgPG9wdGlvbiB2YWx1ZT0ke2Ake2NvbXBhbnkubmFtZX0gWyR7Y29tcGFueS52YXR9XWB9PmApfVxyXG4gICAgICAgICAgICAgICAgPC9kYXRhbGlzdD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtNiBjb2wtc21cIj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJudW1iZXJcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QndC+0LzQtdGAINC90LAg0LTQvtC60YPQvNC10L3RgjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiAudmFsdWU9JHtzZWxlY3RlZEZpbHRlcnM/Lm51bWJlciB8fCAnJ30gaWQ9XCJudW1iZXJcIiBuYW1lPVwibnVtYmVyXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBhdXRvY29tcGxldGU9XCJvZmZcIi8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgY29sLXNtXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwidHlwZVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCi0LjQvyDQvdCwINC00L7QutGD0LzQtdC90YI6PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9XCJ0eXBlXCIgbmFtZT1cInR5cGVcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIiBzZWxlY3RlZD7QktGB0LjRh9C60Lg8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAke09iamVjdC5lbnRyaWVzKHBhcmFtcy5kb2N1bWVudFR5cGVzKS5tYXAodHlwZSA9PiBodG1sYDxvcHRpb24gP3NlbGVjdGVkPSR7c2VsZWN0ZWRGaWx0ZXJzPy50eXBlID09PSB0eXBlWzBdfSB2YWx1ZT0ke3R5cGVbMF19PiR7dHlwZVsxXX08L29wdGlvbj5gKX1cclxuICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC02IGNvbC1zbVwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInBheW1lbnRUeXBlXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0J3QsNGH0LjQvSDQvdCwINC/0LvQsNGJ0LDQvdC1PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9XCJwYXltZW50VHlwZVwiIG5hbWU9XCJwYXltZW50VHlwZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiIHNlbGVjdGVkPtCS0YHQuNGH0LrQuDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICR7T2JqZWN0LmVudHJpZXMocGFyYW1zLnBheW1lbnRUeXBlcykubWFwKHR5cGUgPT4gaHRtbGA8b3B0aW9uID9zZWxlY3RlZD0ke3NlbGVjdGVkRmlsdGVycz8ucGF5bWVudFR5cGUgPT09IHR5cGVbMF19IHZhbHVlPSR7dHlwZVswXX0+JHt0eXBlWzFdfTwvb3B0aW9uPmApfVxyXG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgY29sLXNtXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwib3JkZXJUeXBlXCI+0KLQuNC/INC90LAg0L/RgNC+0LTQsNC20LHQsDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPVwib3JkZXJUeXBlXCIgbmFtZT1cIm9yZGVyVHlwZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiIHNlbGVjdGVkPtCS0YHQuNGH0LrQuDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICR7T2JqZWN0LmVudHJpZXMocGFyYW1zLm9yZGVyVHlwZXMpLm1hcCh0eXBlID0+IGh0bWxgPG9wdGlvbiA/c2VsZWN0ZWQ9JHtzZWxlY3RlZEZpbHRlcnM/Lm9yZGVyVHlwZSA9PT0gdHlwZVswXX0gdmFsdWU9JHt0eXBlWzBdfT4ke3R5cGVbMV19PC9vcHRpb24+YCl9XHJcbiAgICAgICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtNiBjb2wtc21cIj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJmcm9tXCI+0J7Rgjo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJkYXRlXCIgaWQ9XCJmcm9tXCIgLnZhbHVlPSR7c2VsZWN0ZWRGaWx0ZXJzPy5mcm9tIHx8ICcnfSBuYW1lPVwiZnJvbVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgY29sLXNtXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwidG9cIj7QlNC+OjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImRhdGVcIiBpZD1cInRvXCIgLnZhbHVlPSR7c2VsZWN0ZWRGaWx0ZXJzPy50byB8fCAnJ30gbmFtZT1cInRvXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtMTIgY29sLXNtXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1jaGVjayBmb3JtLXN3aXRjaCBwLTBcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtLWNoZWNrLWxhYmVsIGQtYmxvY2tcIiBmb3I9XCJ1bnBhaWRcIj7QodCw0LzQviDQvdC10L/Qu9Cw0YLQtdC90Lg6PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNoZWNrLWlucHV0IG1zLTAgZnMtNFwiIHR5cGU9XCJjaGVja2JveFwiIHJvbGU9XCJzd2l0Y2hcIiBpZD1cInVucGFpZFwiID9jaGVja2VkPSR7c2VsZWN0ZWRGaWx0ZXJzPy51bnBhaWR9IG5hbWU9XCJ1bnBhaWRcIj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Zvcm0+XHJcbmA7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBsb2FkU2FsZXMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlcSA9IGF3YWl0IGF4aW9zLmdldChwYXRoKVxyXG4gICAgICAgIGNvbnN0IG9yZGVycyA9IHJlcS5kYXRhLm9yZGVycztcclxuICAgICAgICBjb25zdCBwcmV2Q3Vyc29yID0gcmVxLmRhdGEucHJldkN1cnNvcjtcclxuICAgICAgICBjb25zdCBuZXh0Q3Vyc29yID0gcmVxLmRhdGEubmV4dEN1cnNvcjtcclxuXHJcblxyXG4gICAgICAgIHBhcmFtcyA9IChhd2FpdCBheGlvcy5nZXQoJy9vcmRlcnMvcGFyYW1zJykpLmRhdGE7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tZXJzID0gKGF3YWl0IGF4aW9zLmdldCgnL2N1c3RvbWVycycsIHsgcGFyYW1zOiB7IHBhZ2U6ICdvcmRlcnMnIH0gfSkpLmRhdGEuY3VzdG9tZXJzO1xyXG4gICAgICAgIGNvbnN0IGNvbXBhbmllcyA9IChhd2FpdCBheGlvcy5nZXQoJy9jb21wYW5pZXMnKSkuZGF0YTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgICAgJHtmaWx0ZXJzKGN1c3RvbWVycywgY29tcGFuaWVzLCBwYXJhbXMpfVxyXG4gICAgICAgICR7dGFibGUob3JkZXJzLCBwcmV2Q3Vyc29yLCBuZXh0Q3Vyc29yKX1gXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgYWxlcnQoJ9CS0YrQt9C90LjQutC90LAg0LPRgNC10YjQutCwJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNhbGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlcSA9IGF3YWl0IGF4aW9zLmRlbGV0ZShgL29yZGVycy8ke3NlbGVjdGVkU2FsZX1gKTtcclxuXHJcbiAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT09IDIwNCkge1xyXG4gICAgICAgICAgICBwYWdlKCcvb3JkZXJzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIGFsZXJ0KCfQktGK0LfQvdC40LrQvdCwINCz0YDQtdGI0LrQsCcpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2FsZXNQYWdlKGN0eCwgbmV4dCkge1xyXG4gICAgcGF0aCA9IGN0eC5wYXRoO1xyXG4gICAgcGFnZUN0eCA9IGN0eDtcclxuICAgIHRlbXAgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgLy8gY2hlY2sgaWYgZmlsdGVycyBhcmUgYXBwbGllZFxyXG4gICAgaWYgKGN0eC5xdWVyeXN0cmluZylcclxuICAgICAgICBzZWxlY3RlZEZpbHRlcnMgPSBPYmplY3QuZnJvbUVudHJpZXMobmV3IFVSTFNlYXJjaFBhcmFtcyhjdHgucXVlcnlzdHJpbmcpKTtcclxuICAgIGVsc2VcclxuICAgICAgICBzZWxlY3RlZEZpbHRlcnMgPSB7fTtcclxuXHJcbiAgICBjb25zdCBjYW5jZWxNb2RhbCA9ICgpID0+IGh0bWxgXHJcbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIGlkID0gXCJjYW5jZWxNb2RhbFwiIHRhYmluZGV4PVwiLTFcIiBhcmlhLWxhYmVsbGVkYnk9XCJjYW5jZWxNb2RhbExhYmVsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9XCJtb2RhbC10aXRsZSBmcy01XCIgaWQ9XCJjYW5jZWxNb2RhbExhYmVsXCI+0JDQvdGD0LvQuNGA0LDQuSDQv9GA0L7QtNCw0LbQsdCwPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0bi1jbG9zZVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAg0KHQuNCz0YPRgNC90Lgg0LvQuCDRgdGC0LUg0YfQtSDQuNGB0LrQsNGC0LUg0LTQsCDQsNC90YPQu9C40YDQsNGC0LUg0L/RgNC+0LTQsNC20LHQsNGC0LA/INCi0L7QstCwINGJ0LUg0LLRitGA0L3QtSDQstGB0LjRh9C60Lgg0L/RgNC+0LTRg9C60YLQuCDQsiDRgdC60LvQsNC00LAuXHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5XCIgZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIj7QntGC0LrQsNC20Lg8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIEBjbGljaz0ke2RlbGV0ZVNhbGV9IHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGFuZ2VyXCIgZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIj7QkNC90YPQu9C40YDQsNC5PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5gO1xyXG5cclxuICAgIGNvbnN0IHRlbXBsYXRlID0gKCkgPT4gaHRtbGBcclxuICAgICAgICAke2NhbmNlbE1vZGFsKCl9XHJcbiAgICAgICAgJHtuYXYoKX1cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkXCI+XHJcbiAgICAgICAgICAgIDxhIGhyZWY9Jy9vcmRlcnMvY3JlYXRlJyBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPjxpIGNsYXNzPVwiYmkgYmktcGx1c1wiPjwvaT4g0KHRitC30LTQsNC5INC/0YDQvtC00LDQttCx0LA8L2E+XHJcbiAgICAgICAgICAgICR7dW50aWwobG9hZFNhbGVzKCksIHNwaW5uZXIpfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICByZW5kZXIodGVtcGxhdGUoKSwgY29udGFpbmVyKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/orders/orders.js\n");

/***/ }),

/***/ "./src/views/orders/routes.js":
/*!************************************!*\
  !*** ./src/views/orders/routes.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   salesRoutes: () => (/* binding */ salesRoutes)\n/* harmony export */ });\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _orders_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./orders.js */ \"./src/views/orders/orders.js\");\n/* harmony import */ var _createEdit_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./createEdit.js */ \"./src/views/orders/createEdit.js\");\n\r\n\r\n\r\n\r\nfunction salesRoutes(auth) {\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/orders', auth, _orders_js__WEBPACK_IMPORTED_MODULE_1__.salesPage);\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/orders/create', auth, _createEdit_js__WEBPACK_IMPORTED_MODULE_2__.createEditOrderPage);\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/orders/:id', auth, _createEdit_js__WEBPACK_IMPORTED_MODULE_2__.createEditOrderPage);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3Mvb3JkZXJzL3JvdXRlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdCO0FBQ2dCO0FBQ2M7QUFDdEQ7QUFDTztBQUNQLElBQUksaUNBQUksa0JBQWtCLGlEQUFTO0FBQ25DLElBQUksaUNBQUkseUJBQXlCLCtEQUFtQjtBQUNwRCxJQUFJLGlDQUFJLHNCQUFzQiwrREFBbUI7QUFDakQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWJiLml0Ly4vc3JjL3ZpZXdzL29yZGVycy9yb3V0ZXMuanM/MjYyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFnZSBmcm9tICdwYWdlJztcclxuaW1wb3J0IHsgc2FsZXNQYWdlIH0gZnJvbSAnLi9vcmRlcnMuanMnO1xyXG5pbXBvcnQgeyBjcmVhdGVFZGl0T3JkZXJQYWdlIH0gZnJvbSAnLi9jcmVhdGVFZGl0LmpzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzYWxlc1JvdXRlcyhhdXRoKSB7XHJcbiAgICBwYWdlKCcvb3JkZXJzJywgYXV0aCwgc2FsZXNQYWdlKTtcclxuICAgIHBhZ2UoJy9vcmRlcnMvY3JlYXRlJywgYXV0aCwgY3JlYXRlRWRpdE9yZGVyUGFnZSk7XHJcbiAgICBwYWdlKCcvb3JkZXJzLzppZCcsIGF1dGgsIGNyZWF0ZUVkaXRPcmRlclBhZ2UpO1xyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/views/orders/routes.js\n");

/***/ }),

/***/ "./src/views/products/createEdit.js":
/*!******************************************!*\
  !*** ./src/views/products/createEdit.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEditProductPage: () => (/* binding */ createEditProductPage)\n/* harmony export */ });\n/* harmony import */ var _css_products_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/css/products.css */ \"./src/css/products.css\");\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/api */ \"./src/api.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _views_categories_categories__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/views/categories/categories */ \"./src/views/categories/categories.js\");\n/* harmony import */ var lit_directives_until_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lit/directives/until.js */ \"./node_modules/lit/directives/until.js\");\n/* harmony import */ var _views_nav__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/views/nav */ \"./src/views/nav.js\");\n/* harmony import */ var _views_components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/views/components */ \"./src/views/components.js\");\n/* harmony import */ var _views_login__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/views/login */ \"./src/views/login.js\");\n/* harmony import */ var quagga__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! quagga */ \"./node_modules/quagga/dist/quagga.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar selectedSizes, deliveryPriceFields, wholesalePriceFields, retailPriceField, wholesaleMarkup, retailMarkup, product, editPage = false;\r\n\r\nasync function loadCategories() {\r\n    const req = await axios__WEBPACK_IMPORTED_MODULE_10__[\"default\"].get('/categories');\r\n    const categories = req.data;\r\n\r\n    const options = {\r\n        categories,\r\n        selected: product && product.category,\r\n        showNoParent: false,\r\n        disableWithChilden: true\r\n    }\r\n\r\n    return (0,_views_categories_categories__WEBPACK_IMPORTED_MODULE_4__.categoriesOptions)(options);\r\n}\r\n\r\n\r\nfunction calculateUnitPrice() {\r\n    // if (selectedSizes.length === 0) return; // if no sizes added, do nothing\r\n    const deliveryEl = document.getElementById('deliveryPrice');\r\n    const wholesalePrice = document.getElementById('wholesalePrice');\r\n    const wholesaleUnitPrice = document.getElementById('wholesaleUnitPrice');\r\n    const retailPrice = document.getElementById('retailPrice');\r\n    const unitPriceEl = document.getElementById('deliveryPricePerUnit');\r\n\r\n    (0,_api__WEBPACK_IMPORTED_MODULE_3__.fixInputPrice)(unitPriceEl, true);\r\n\r\n    const unitPrice = unitPriceEl.value;\r\n\r\n    if (unitPriceEl.value === '') {\r\n        deliveryEl.value = '';\r\n        wholesalePrice.value = '';\r\n        wholesaleUnitPrice.value = '';\r\n        retailPrice.value = '';\r\n        return unitPriceEl.value = '';\r\n    }\r\n\r\n    const deliveryPriceEl = document.getElementById('deliveryPrice');\r\n    deliveryPriceEl.value = (0,_api__WEBPACK_IMPORTED_MODULE_3__.roundPrice)(unitPrice * (selectedSizes.length || 1));\r\n\r\n    calculateProductPrices();\r\n}\r\n\r\nfunction calculateProductPrices(e) {\r\n    const deliveryPriceEl = document.getElementById('deliveryPrice');\r\n    const wholesaleUnitPrice = document.getElementById('wholesaleUnitPrice');\r\n    const wholesalePrice = document.getElementById('wholesalePrice');\r\n    const retailPrice = document.getElementById('retailPrice');\r\n    const unitPriceEl = document.getElementById('deliveryPricePerUnit');\r\n\r\n    (0,_api__WEBPACK_IMPORTED_MODULE_3__.fixInputPrice)(deliveryPriceEl, true);\r\n\r\n    const deliveryPrice = deliveryPriceEl.value;\r\n\r\n    if (deliveryPriceEl.value === '') {\r\n        wholesaleUnitPrice.value = '';\r\n        deliveryPriceEl.value = '';\r\n        wholesalePrice.value = '';\r\n        retailPrice.value = '';\r\n        return unitPriceEl.value = '';\r\n    }\r\n\r\n    // Update price per unit if coming from event (changing this price directly and not from the unitPrice funciton) and sizes are selected\r\n    if (e)\r\n        unitPriceEl.value = (deliveryPrice / (selectedSizes.length || 1)).toFixed(2);\r\n\r\n    const wholesale = (0,_api__WEBPACK_IMPORTED_MODULE_3__.roundPrice)(deliveryPrice * (1 + wholesaleMarkup / 100));\r\n\r\n    //Retail price is calculated per piece, hencefore the price is divided by amount of sizes\r\n    const sizesLength = selectedSizes.length || 1;\r\n    const retail = (0,_api__WEBPACK_IMPORTED_MODULE_3__.roundPrice)(deliveryPrice * (1 + retailMarkup / 100) / sizesLength);\r\n\r\n    wholesalePrice.value = (0,_api__WEBPACK_IMPORTED_MODULE_3__.roundPrice)(wholesale);\r\n    wholesaleUnitPrice.value = (wholesale / sizesLength).toFixed(2);\r\n    retailPrice.value = (0,_api__WEBPACK_IMPORTED_MODULE_3__.roundPrice)(retail);\r\n}\r\n\r\nfunction calculatePriceWholesale() {\r\n    const wholesaleUnitPrice = document.getElementById('wholesaleUnitPrice');\r\n    const wholesalePrice = document.getElementById('wholesalePrice');\r\n\r\n    (0,_api__WEBPACK_IMPORTED_MODULE_3__.fixInputPrice)(wholesaleUnitPrice, true);\r\n\r\n    wholesalePrice.value = (0,_api__WEBPACK_IMPORTED_MODULE_3__.roundPrice)(wholesaleUnitPrice.value * (selectedSizes.length || 1));\r\n}\r\n\r\nfunction calculateUnitPriceWholesale() {\r\n    const wholesaleUnitPrice = document.getElementById('wholesaleUnitPrice');\r\n    const wholesalePrice = document.getElementById('wholesalePrice');\r\n\r\n\r\n    (0,_api__WEBPACK_IMPORTED_MODULE_3__.fixInputPrice)(wholesalePrice, true);\r\n\r\n    wholesaleUnitPrice.value = (wholesalePrice.value / (selectedSizes.length || 1)).toFixed(2);\r\n}\r\n\r\nfunction updateQuantity() {\r\n    const quantity = document.getElementById('quantity').value;\r\n    const quantityEl = document.getElementById('quantityEl');\r\n\r\n    if (quantity === '' || selectedSizes.length === 0) {\r\n        quantityEl.value = '';\r\n        return;\r\n    }\r\n\r\n    const totalQuantity = selectedSizes.length * quantity;\r\n\r\n    quantityEl.value = totalQuantity;\r\n\r\n    // Update prices, because retail price uses quantity to calculate\r\n    calculateProductPrices();\r\n}\r\n\r\nfunction addSize(e) {\r\n    e.preventDefault();\r\n    document.getElementById('deliveryPricePerUnit').disabled = false;\r\n    const sizeEl = document.getElementById('size');\r\n    const suffixEl = document.getElementById('suffix');\r\n    const suffix = suffixEl.value;\r\n\r\n    const size = suffix ? sizeEl.value + suffix : sizeEl.value;\r\n\r\n    if (size !== '' && !selectedSizes.includes(size)) {\r\n        selectedSizes.push(size);\r\n\r\n        const addedSizes = document.getElementById('addedSizes');\r\n\r\n        (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(sizesTemplate(selectedSizes), addedSizes);\r\n    }\r\n\r\n    updateQuantity();\r\n\r\n    sizeEl.value = '';\r\n    sizeEl.focus();\r\n}\r\n\r\nfunction removeSize(e) {\r\n    e.preventDefault();\r\n    const size = e.target.textContent;\r\n    selectedSizes = selectedSizes.filter(s => s !== size);\r\n\r\n    if (selectedSizes.length === 0)\r\n        document.getElementById('deliveryPricePerUnit').disabled = true;\r\n\r\n    const addedSizes = document.getElementById('addedSizes');\r\n\r\n    updateQuantity();\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(sizesTemplate(selectedSizes), addedSizes);\r\n}\r\n\r\nconst quantityTemplate = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        <div class=\"row mb-3\" id=\"qtyTemplate\">\r\n            <div class=\"col-12 col-sm-4 mb-3\">\r\n                <label for=\"quantity\" class=\"form-label\">Брой | Мярка</label>\r\n                <div class=\"input-group\">\r\n                    <input @change=${updateQuantity} @keyup=${updateQuantity} class=\"form-control w-50 border-primary\" type=\"number\" inputmode=\"numeric\" name=\"quantity\" id=\"quantity\" min=\"1\" step=\"1\" required .value=${product && product.quantity} autocomplete=\"off\" ?readonly=\"${editPage}\">\r\n                    <input class=\"form-control border-primary\" type=\"text\" placeholder=\"пакет\" value=${product?.unitOfMeasure ? product.unitOfMeasure : ''} autocomplete=\"off\" name=\"unitOfMeasure\" id=\"unitOfMeasure\" list=\"unitOfMeasureOptions\">\r\n                    <datalist id=\"unitOfMeasureOptions\">\r\n                        <option value=\"пакет\"></option>\r\n                        <option value=\"бр.\"></option>\r\n                        <option value=\"кг.\"></option>\r\n                        <option value=\"л.\"></option>\r\n                    </datalist>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"col-12 col-sm-3 mb-3 d-none\">\r\n                <label for=\"minQty\" class=\"form-label\">Мин. брой за на едро</label>\r\n                <input class=\"form-control\" type=\"number\" inputmode=\"numeric\" name=\"minQty\" id=\"minQty\" min=\"0\" step=\"1\" aria-describedby=\"minQtyHelp\" .value=${product && product.minQty} autocomplete=\"off\">\r\n                <div id=\"minQtyHelp\" class=\"form-text\">Бройки които да се запазят за продажби на едро. Няма да може да се продават на дребно.</div>\r\n            </div>\r\n\r\n            <div class=\"col-12 col-sm-4 mb-3\">\r\n                <label for=\"size\" class=\"form-label\">Размери | Суфикс</label>\r\n                <div class=\"input-group\">\r\n                    <input class=\"form-control\" name=\"size\" id=\"size\" autocomplete=\"off\" ?readonly=\"${editPage}\">\r\n                    <input class=\"form-control\" name=\"suffix\" id=\"suffix\" autocomplete=\"off\" placeholder=\"г. / м.\">\r\n                    <button @click=${addSize} class=\"btn btn-primary\" ?disabled=${editPage}><i class=\"bi bi-plus-lg\"></i></button>\r\n                </div>\r\n                <div id=\"addedSizes\" class=\"d-flex gap-1 mt-1 flex-wrap\"></div>\r\n            </div>\r\n\r\n            <div class=\"col-12 col-sm-4\">\r\n                <label for=\"quantityEl\" class=\"form-label\">Общ брой</label>\r\n                <input class=\"form-control\" type=\"number\" .value=${product && product.quantity * selectedSizes.length} id=\"quantityEl\" min=\"0\" step=\"1\" disabled>\r\n            </div>\r\n        </div>\r\n    `;\r\n\r\nconst pricesTemplate = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        <div class=\"row mb-3 row-gap-3 align-items-end\">\r\n            <div class=\"col ${!['both', 'unit'].includes(deliveryPriceFields) ? 'd-none' : ''}\">\r\n                <label for=\"deliveryPricePerUnit\" class=\"form-label\">Доставна цена за брой</label>\r\n                <input @change=${calculateUnitPrice} @keyup=${calculateUnitPrice} class=\"form-control border-primary\" type=\"text\" name=\"deliveryPricePerUnit\" id=\"deliveryPricePerUnit\" inputmode=\"decimal\" .value=${product && product.sizes?.length && (0,_api__WEBPACK_IMPORTED_MODULE_3__.roundPrice)(product.deliveryPrice / product.sizes.length)} autocomplete=\"off\">\r\n            </div>\r\n\r\n            <div class=\"col ${!['both', 'whole'].includes(deliveryPriceFields) ? 'd-none' : ''}\">\r\n                <label for=\"deliveryPrice\" class=\"form-label\">Доставна цена за пакет</label>\r\n                <input @change=${calculateProductPrices} @keyup=${calculateProductPrices} class=\"form-control border-primary\" type=\"text\" inputmode=\"decimal\" name=\"deliveryPrice\" id=\"deliveryPrice\" required .value=${product && product.deliveryPrice} autocomplete=\"off\">\r\n            </div>\r\n\r\n            <div class=\"col pe-0 ${!['both', 'unit'].includes(wholesalePriceFields) ? 'd-none' : ''}\"\">\r\n                <label for=\"unitPrice\" class=\"form-label\">Цена на едро за брой <span class=\"text-primary\">(+${wholesaleMarkup}%)</span></label>\r\n                <input class=\"form-control border-primary\" @keyup=${calculatePriceWholesale} type=\"text\" name=\"wholesaleUnitPrice\" id=\"wholesaleUnitPrice\" inputmode=\"decimal\" .value=${product && product.sizes?.length && (0,_api__WEBPACK_IMPORTED_MODULE_3__.roundPrice)(product.wholesalePrice / product.sizes.length)} autocomplete=\"off\">\r\n            </div>\r\n\r\n\r\n            <div class=\"col pe-0 ${!['both', 'whole'].includes(wholesalePriceFields) ? 'd-none' : ''}\"\">\r\n                <label for=\"wholesalePrice\" class=\"form-label\">Цена на едро <span class=\"text-primary\">(+${wholesaleMarkup}%)</span></label>\r\n                <input class=\"form-control border-primary\" @keyup=${calculateUnitPriceWholesale} type=\"text\" name=\"wholesalePrice\" id=\"wholesalePrice\" inputmode=\"decimal\" required .value=${product && product.wholesalePrice} autocomplete=\"off\">\r\n            </div>\r\n\r\n            <div class=\"col ${retailPriceField === 'true' ? '' : 'd-none'}\">\r\n            <label for=\"retailPrice\" class= \"form-label\" > Цена на дребно <span class=\"text-primary\"> (+${retailMarkup}%)</span></label >\r\n            <input class=\"form-control border-primary\" type=\"text\" name=\"retailPrice\" id=\"retailPrice\" inputmode=\"decimal\" required .value=${product && product.retailPrice} autocomplete=\"off\">\r\n            </div>\r\n        </div>\r\n    `;\r\n\r\nconst sizesTemplate = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        ${selectedSizes.map(size => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n            ${editPage ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<div class=\"btn bg-primary text-white\">${size}</div>` : (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<button @click=${removeSize} class=\"btn bg-primary bgDangerHover\">${size}</button>`}\r\n        `)\r\n    }\r\n`;\r\n\r\n\r\nfunction removeImage(e) {\r\n    const dt = new DataTransfer();\r\n    const input = document.getElementById('additionalImages');\r\n    const { files } = input;\r\n\r\n    for (let file of files) {\r\n        if (file.name !== e.target.getAttribute('filename'))\r\n            dt.items.add(file);\r\n    }\r\n\r\n    input.files = dt.files // Assign the updates list to the input field\r\n\r\n    e.target.parentElement.remove(); // Delete the div element of the image\r\n};\r\n\r\nconst imgTemplate = (img, fileName) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n    <div class=\"uploadImgContainer m-1\">\r\n        <img src=\"${img}\" class=\"img-thumbnail\" alt=\"\">\r\n            ${fileName ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<button @click=${removeImage} fileName=${fileName} class=\"btn btn-danger\">X</button>` : ''}\r\n        </div>\r\n`;\r\n\r\nfunction validateProduct(data) {\r\n    var invalidFlag = false;\r\n\r\n    if (!data.name)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('name');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_3__.markValid)('name');\r\n\r\n    if (!data.category)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('category');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_3__.markValid)('category');\r\n\r\n    data.hidden = typeof data.hidden === 'string' ? true : false;\r\n\r\n    if (!data.quantity)\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('quantity');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_3__.markValid)('quantity');\r\n\r\n    if (!data.deliveryPrice || data.deliveryPrice < 0 || !_api__WEBPACK_IMPORTED_MODULE_3__.priceRegex.test(data.deliveryPrice)) {\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('deliveryPrice');\r\n        (0,_api__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('deliveryPricePerUnit');\r\n    } else {\r\n        (0,_api__WEBPACK_IMPORTED_MODULE_3__.markValid)('deliveryPrice');\r\n        (0,_api__WEBPACK_IMPORTED_MODULE_3__.markValid)('deliveryPricePerUnit');\r\n    }\r\n\r\n    if (!data.wholesalePrice || data.wholesalePrice < 0 || !_api__WEBPACK_IMPORTED_MODULE_3__.priceRegex.test(data.wholesalePrice) || Number(data.deliveryPrice) >= Number(data.wholesalePrice)) {\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('wholesalePrice');\r\n        (0,_api__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('wholesaleUnitPrice');\r\n    } else {\r\n        (0,_api__WEBPACK_IMPORTED_MODULE_3__.markValid)('wholesalePrice');\r\n        (0,_api__WEBPACK_IMPORTED_MODULE_3__.markValid)('wholesaleUnitPrice');\r\n    }\r\n\r\n    if (!data.retailPrice || data.retailPrice < 0 || !_api__WEBPACK_IMPORTED_MODULE_3__.priceRegex.test(data.retailPrice) || Number(data.deliveryPrice / (selectedSizes.length || 1)) >= Number(data.retailPrice))\r\n        invalidFlag = (0,_api__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('retailPrice');\r\n    else (0,_api__WEBPACK_IMPORTED_MODULE_3__.markValid)('retailPrice');\r\n\r\n    return invalidFlag;\r\n}\r\n\r\nasync function updateProduct(e) {\r\n    e.preventDefault();\r\n    (0,_views_components__WEBPACK_IMPORTED_MODULE_7__.toggleSubmitBtn)();\r\n\r\n    const form = e.target;\r\n    const formData = new FormData(form);\r\n\r\n    const data = Object.fromEntries(formData.entries());\r\n    data.sizes = selectedSizes.map(size => ({ size, quantity: data.quantity }));\r\n    formData.set('sizes', JSON.stringify(data.sizes));\r\n\r\n    const invalidData = validateProduct(data);\r\n    if (invalidData)\r\n        return (0,_views_components__WEBPACK_IMPORTED_MODULE_7__.toggleSubmitBtn)();\r\n\r\n    form.classList.add('was-validated');\r\n    form.classList.remove('needs-validation');\r\n\r\n    const alertEl = document.getElementById('alert');\r\n\r\n    try {\r\n        const req = product ? await axios__WEBPACK_IMPORTED_MODULE_10__[\"default\"].put(`/products/${product._id}`, formData) : await axios__WEBPACK_IMPORTED_MODULE_10__[\"default\"].post('/products', formData);\r\n        if (req.status === 201) {\r\n            (0,_views_components__WEBPACK_IMPORTED_MODULE_7__.toggleSubmitBtn)();\r\n\r\n            if (!product) { // if product creation and not editing\r\n                document.getElementById('category').classList.remove('is-valid', 'is-invalid');\r\n                selectedSizes = [];\r\n                (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(sizesTemplate(), document.getElementById('addedSizes'));\r\n                document.getElementById('imagePreview').src = '';\r\n                document.getElementById('imagePreview').classList.add('d-none');\r\n                document.getElementById('additionalImagesPreview').innerHTML = '';\r\n\r\n                form.reset();\r\n            }\r\n\r\n            document.querySelectorAll('input').forEach(el => el.classList.remove('is-valid', 'is-invalid'));\r\n\r\n            form.classList.remove('was-validated');\r\n            form.classList.add('needs-validation');\r\n            alertEl.classList.remove('d-none', 'alert-danger');\r\n            alertEl.classList.add('alert-success');\r\n            document.querySelectorAll('.is-invalid').forEach(el => el.classList.remove('is-invalid'));\r\n            document.querySelectorAll('.is-valid').forEach(el => el.classList.remove('is-valid'));\r\n            alertEl.textContent = `Продуктът е ${product ? 'редактиран' : 'създаден'} успешно.`;\r\n        }\r\n    } catch (err) {\r\n        (0,_views_components__WEBPACK_IMPORTED_MODULE_7__.toggleSubmitBtn)();\r\n        if (err.response.status === 400 || err.response.status === 404) {\r\n            alertEl.classList.remove('d-none', 'alert-success');\r\n            alertEl.classList.add('alert-danger');\r\n            alertEl.textContent = err.response.data;\r\n            form.classList.remove('was-validated');\r\n            form.classList.add('needs-validation');\r\n\r\n            if (err.response.data.toLowerCase().includes(' код')) {\r\n                (0,_api__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('code');\r\n            }\r\n\r\n            if (err.response.data.toLowerCase().includes('баркод')) {\r\n                (0,_api__WEBPACK_IMPORTED_MODULE_3__.markInvalid)('barcode');\r\n            }\r\n\r\n        }\r\n        else if (err.response?.status === 500) {\r\n            alertEl.classList.remove('d-none', 'alert-success');\r\n            alertEl.classList.add('alert-danger');\r\n            alertEl.textContent = 'Грешка в сървъра';\r\n            console.error(err);\r\n        } else console.error(err)\r\n    }\r\n\r\n}\r\n\r\nvar scanned = false;\r\nfunction scanBarcode() {\r\n    const videoEl = document.getElementById('barcodeVideo');\r\n    const scanBarcodeBtn = document.getElementById('scanBarcode');\r\n    const cancelBarcodeBtn = document.getElementById('stopBarcode');\r\n    scanBarcodeBtn.classList.add('d-none');\r\n    cancelBarcodeBtn.classList.remove('d-none');\r\n\r\n    const config = {\r\n        inputStream: {\r\n            name: \"Live\",\r\n            type: \"LiveStream\",\r\n            target: videoEl,\r\n            constraints: {\r\n                facingMode: \"environment\",\r\n            },\r\n        },\r\n        decoder: {\r\n            readers: [\"ean_reader\", \"code_128_reader\"],\r\n        },\r\n    };\r\n\r\n    quagga__WEBPACK_IMPORTED_MODULE_9__.init(config, function (err) {\r\n        if (err) return console.log(err);\r\n        quagga__WEBPACK_IMPORTED_MODULE_9__.start();\r\n        scanned = false;\r\n\r\n        quagga__WEBPACK_IMPORTED_MODULE_9__.onDetected(data => {\r\n            if (scanned) return; // this is used because every time you init Quagga, it adds a new listener and starts duplicating events\r\n            scanned = true;\r\n\r\n            quagga__WEBPACK_IMPORTED_MODULE_9__.stop();\r\n            const barcode = data.codeResult.code;\r\n            document.getElementById('barcode').value = barcode;\r\n            (0,_api__WEBPACK_IMPORTED_MODULE_3__.successScan)(document.getElementById('barcode'));\r\n            videoEl.innerHTML = ''\r\n            scanBarcodeBtn.classList.remove('d-none');\r\n            cancelBarcodeBtn.classList.add('d-none');\r\n        });\r\n    });\r\n}\r\n\r\nfunction stopBarcode() {\r\n    const videoEl = document.getElementById('barcodeVideo');\r\n    const scanBarcodeBtn = document.getElementById('scanBarcode');\r\n    const cancelBarcodeBtn = document.getElementById('stopBarcode');\r\n\r\n    scanBarcodeBtn.classList.remove('d-none');\r\n    cancelBarcodeBtn.classList.add('d-none');\r\n    videoEl.innerHTML = '';\r\n    quagga__WEBPACK_IMPORTED_MODULE_9__.stop();\r\n    quagga__WEBPACK_IMPORTED_MODULE_9__.offDetected();\r\n}\r\n\r\nfunction loadPreviewImages(e) {\r\n    const additionalImagesPreview = document.getElementById('additionalImagesPreview');\r\n\r\n    var files = e.target.files;\r\n    var filesArr = Array.prototype.slice.call(files);\r\n    var htmlArray = [];\r\n\r\n    filesArr.forEach(function (file, index) {\r\n        if (!file.type.match('image.*')) {\r\n            return;\r\n        }\r\n\r\n        var reader = new FileReader();\r\n\r\n        reader.onload = function (e) {\r\n            htmlArray.push(imgTemplate(e.target.result, file.name));\r\n            (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(htmlArray, additionalImagesPreview);\r\n        }\r\n        reader.readAsDataURL(file);\r\n    });\r\n}\r\n\r\nasync function createEditProductPage(ctx, next) {\r\n    try {\r\n        if (ctx.params.id) {\r\n            editPage = true;\r\n            const req = await axios__WEBPACK_IMPORTED_MODULE_10__[\"default\"].get(`/products/${ctx.params.id}`);\r\n            product = req.data;\r\n            selectedSizes = product.sizes.map(s => s.size);\r\n        } else {\r\n            editPage = false;\r\n            product = '';\r\n            selectedSizes = [];\r\n        }\r\n\r\n        const keys = ['wholesaleMarkup', 'retailMarkup', 'deliveryPriceFields', 'wholesalePriceFields', 'retailPriceField'];\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_10__[\"default\"].get('/settings', { params: { keys } });\r\n        wholesaleMarkup = req.data.filter(s => s.key === 'wholesaleMarkup')[0].value;\r\n        retailMarkup = req.data.filter(s => s.key === 'retailMarkup')[0].value;\r\n        deliveryPriceFields = req.data.filter(s => s.key === 'deliveryPriceFields')[0].value;\r\n        wholesalePriceFields = req.data.filter(s => s.key === 'wholesalePriceFields')[0].value;\r\n        retailPriceField = req.data.filter(s => s.key === 'retailPriceField')[0].value;\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert('Възникна грешка')\r\n    }\r\n\r\n    const template = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n        ${(0,_views_nav__WEBPACK_IMPORTED_MODULE_6__.nav)()}\r\n<div class=\"container-fluid\">\r\n    <form enctype=\"multipart/form-data\" novalidate @submit=${updateProduct} id=\"createProductForm\" class=\"needs-validation p-2\">\r\n    <div class=\"row mb-3\">\r\n        <label for=\"image\" class=\"form-label\">Главна снимка</label>\r\n        <input @change=${_api__WEBPACK_IMPORTED_MODULE_3__.loadPreviewImage} name=\"image\" class=\"form-control\" type=\"file\" id=\"image\" accept=\"capture=camera,image/*\">\r\n        <img id=\"imagePreview\" class=\"${product?.image?.url ? '' : 'd-none'} img-thumbnail w-25\" .src=${product?.image?.url} alt=\"\">\r\n    </div>\r\n\r\n    <div class=\"row mb-3\">\r\n        <label for=\"additionalImages\" class=\"form-label\">Допълнителни снимка</label>\r\n        <input @change=${loadPreviewImages} class=\"form-control\" type=\"file\" name=\"additionalImages\" id=\"additionalImages\" accept=\"image/*\" multiple>\r\n        <div id=\"additionalImagesPreview\" class=\"d-flex flex-wrap\"></div>\r\n    </div>\r\n\r\n    <div class=\"row mb-3\">\r\n        <label for=\"category\" class=\"form-label\">Категория</label>\r\n        <select class=\"form-select border-primary\" name=\"category\" id=\"category\" required>\r\n            ${(0,lit_directives_until_js__WEBPACK_IMPORTED_MODULE_5__.until)(loadCategories(), (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`<option>Зареждане...</option>`)}\r\n        </select>\r\n    </div>\r\n\r\n    <div class=\"row mb-3\">\r\n        <label for=\"name\" class=\"form-label\">Име</label>\r\n        <input class=\"form-control border-primary\" type=\"text\" name=\"name\" id=\"name\" placeholder=\"Цветна тениска\" .value=${product && product.name} required autocomplete=\"off\">\r\n    </div>\r\n\r\n    <div class=\"row mb-3\">\r\n        <label for=\"description\" class=\"form-label\">Описание</label>\r\n        <textarea class=\"form-control\" name=\"description\" id=\"description\" rows=\"3\" placeholder=\"Много готина тениска\" .value=${product && product.description} autocomplete=\"off\"></textarea>\r\n</div>\r\n\r\n                ${quantityTemplate()}\r\n\r\n                ${pricesTemplate()}\r\n\r\n                <div class=\"row mb-3\">\r\n                    <label for=\"code\" class=\"form-label\">Код</label>\r\n                    <input class=\"form-control\" type=\"text\" name=\"code\" id=\"code\" .value=${product && product.code || ''} autocomplete=\"off\">\r\n                </div>\r\n\r\n                <div class=\"row mb-3\">\r\n                    <div id=\"barcodeVideo\"></div>\r\n                    <label for=\"barcode\" class=\"form-label\">Баркод</label>\r\n                    <div class=\"input-group p-0\">\r\n                        <input class=\"form-control\" type=\"text\" name=\"barcode\" id=\"barcode\" .value=${product && product.barcode || ''} autocomplete=\"off\">\r\n                        <button @click=${scanBarcode} class=\"btn btn-primary\" type=\"button\" id=\"scanBarcode\"><i class=\"bi bi-camera\"></i> Сканирай</button>\r\n                        <button @click=${stopBarcode} class=\"btn btn-primary d-none\" type=\"button\" id=\"stopBarcode\"><i class=\"bi bi-camera\"></i> Затвори</button>\r\n                    </div >\r\n                </div >\r\n\r\n                <h3>Опции</h3>\r\n                <div class=\"mb-3\">\r\n                    <input class=\"form-check-input\" type=\"checkbox\" value=\"\" name=\"hidden\" id=\"hidden\" ?disabled=${product} ?checked=${product?.hidden}>\r\n                    <label class=\"form-check-label\" for=\"hidden\">\r\n                        Скрит продукт (не се показва в сайта)\r\n                    </label>\r\n                </div>\r\n\r\n                <div class=\"mb-3\">\r\n                    <input class=\"form-check-input\" type=\"checkbox\" value=\"\" name=\"noInvoice\" id=\"noInvoice\" ?checked=${product?.noInvoice}>\r\n                    <label class=\"form-check-label\" for=\"noInvoice\">\r\n                        Продукт без фактура (може да се продава само в ПОС системата)\r\n                    </label>\r\n                </div>\r\n\r\n                ${editPage ? \"\" : (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.html)`\r\n                    <div class=\"mb-3\">\r\n                        <input class=\"form-check-input\" type=\"checkbox\" value=\"\" name=\"printLabel\" id=\"printLabel\" checked>\r\n                        <label class=\"form-check-label\" for=\"printLabel\">\r\n                            Принтирай етикети\r\n                        </label>\r\n                    </div>`}\r\n\r\n<div id=\"alert\" class=\"d-none alert\" role=\"alert\"></div>\r\n                ${['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_8__.loggedInUser.role) ? (0,_views_components__WEBPACK_IMPORTED_MODULE_7__.submitBtn)({ type: 'submit', icon: 'bi-check-lg', classes: 'd-block m-auto col-sm-3' }) : ''}\r\n            </form >\r\n        </div >\r\n    `;\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(template(), _app_js__WEBPACK_IMPORTED_MODULE_1__.container);\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(sizesTemplate(selectedSizes), document.getElementById('addedSizes'));\r\n\r\n    // If product has images, render them\r\n    if (product && product.additionalImages.length > 0)\r\n        (0,lit_html_js__WEBPACK_IMPORTED_MODULE_2__.render)(product.additionalImages.map(img => imgTemplate(img.url)), document.getElementById('additionalImagesPreview'));\r\n\r\n    // If product has sizes, enable deliveryPricePerUnit\r\n    if (selectedSizes.length)\r\n        document.getElementById('deliveryPricePerUnit').disabled = false;\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvcHJvZHVjdHMvY3JlYXRlRWRpdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBNEI7QUFDUztBQUNNO0FBQzBFO0FBQzNGO0FBQ3dDO0FBQ2xCO0FBQ2Q7QUFDOEI7QUFDbkI7QUFDakI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsOENBQUs7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywrRUFBaUI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxtREFBYTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0RBQVU7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksbURBQWE7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGdEQUFVO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnREFBVTtBQUM3QjtBQUNBLDJCQUEyQixnREFBVTtBQUNyQztBQUNBLHdCQUF3QixnREFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLG1EQUFhO0FBQ2pCO0FBQ0EsMkJBQTJCLGdEQUFVO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxtREFBYTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLG1EQUFNO0FBQ1Y7QUFDQTtBQUNBLCtCQUErQixpREFBSTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxnQkFBZ0IsU0FBUyxnQkFBZ0IsNElBQTRJLDZCQUE2QixnQ0FBZ0MsU0FBUztBQUNoUyx1R0FBdUcscURBQXFEO0FBQzVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnS0FBZ0ssMkJBQTJCO0FBQzNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRyxTQUFTO0FBQy9HO0FBQ0EscUNBQXFDLFNBQVMsb0NBQW9DLFNBQVM7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLG9EQUFvRDtBQUN2SDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixpREFBSTtBQUNqQztBQUNBLDhCQUE4QixnRUFBZ0U7QUFDOUY7QUFDQSxpQ0FBaUMsb0JBQW9CLFNBQVMsb0JBQW9CLG1JQUFtSSxvQ0FBb0MsZ0RBQVUsZ0RBQWdEO0FBQ25UO0FBQ0E7QUFDQSw4QkFBOEIsaUVBQWlFO0FBQy9GO0FBQ0EsaUNBQWlDLHdCQUF3QixTQUFTLHdCQUF3Qiw4SEFBOEgsa0NBQWtDO0FBQzFQO0FBQ0E7QUFDQSxtQ0FBbUMsaUVBQWlFO0FBQ3BHLDhHQUE4RyxnQkFBZ0I7QUFDOUgsb0VBQW9FLHlCQUF5QiwyRkFBMkYsb0NBQW9DLGdEQUFVLGlEQUFpRDtBQUN2UjtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsa0VBQWtFO0FBQ3JHLDJHQUEyRyxnQkFBZ0I7QUFDM0gsb0VBQW9FLDZCQUE2Qiw0RkFBNEYsbUNBQW1DO0FBQ2hPO0FBQ0E7QUFDQSw4QkFBOEIsNENBQTRDO0FBQzFFLDBHQUEwRyxhQUFhO0FBQ3ZILDZJQUE2SSxnQ0FBZ0M7QUFDN0s7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsaURBQUk7QUFDaEMsVUFBVSwwQkFBMEIsaURBQUk7QUFDeEMsY0FBYyxXQUFXLGlEQUFJLDBDQUEwQyxLQUFLLFVBQVUsaURBQUksa0JBQWtCLFlBQVksdUNBQXVDLEtBQUs7QUFDcEs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQSx1Q0FBdUMsaURBQUk7QUFDM0M7QUFDQSxvQkFBb0IsSUFBSTtBQUN4QixjQUFjLFdBQVcsaURBQUksa0JBQWtCLGFBQWEsV0FBVyxVQUFVO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlEQUFXO0FBQ2pDLFNBQVMsK0NBQVM7QUFDbEI7QUFDQTtBQUNBLHNCQUFzQixpREFBVztBQUNqQyxTQUFTLCtDQUFTO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlEQUFXO0FBQ2pDLFNBQVMsK0NBQVM7QUFDbEI7QUFDQSwwREFBMEQsNENBQVU7QUFDcEUsc0JBQXNCLGlEQUFXO0FBQ2pDLFFBQVEsaURBQVc7QUFDbkIsTUFBTTtBQUNOLFFBQVEsK0NBQVM7QUFDakIsUUFBUSwrQ0FBUztBQUNqQjtBQUNBO0FBQ0EsNERBQTRELDRDQUFVO0FBQ3RFLHNCQUFzQixpREFBVztBQUNqQyxRQUFRLGlEQUFXO0FBQ25CLE1BQU07QUFDTixRQUFRLCtDQUFTO0FBQ2pCLFFBQVEsK0NBQVM7QUFDakI7QUFDQTtBQUNBLHNEQUFzRCw0Q0FBVTtBQUNoRSxzQkFBc0IsaURBQVc7QUFDakMsU0FBUywrQ0FBUztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtFQUFlO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsK0JBQStCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrRUFBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyw4Q0FBSyxrQkFBa0IsWUFBWSxxQkFBcUIsOENBQUs7QUFDakc7QUFDQSxZQUFZLGtFQUFlO0FBQzNCO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQSxnQkFBZ0IsbURBQU07QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHFDQUFxQztBQUN0RjtBQUNBLE1BQU07QUFDTixRQUFRLGtFQUFlO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaURBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGlEQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLElBQUksd0NBQVc7QUFDZjtBQUNBLFFBQVEseUNBQVk7QUFDcEI7QUFDQTtBQUNBLFFBQVEsOENBQWlCO0FBQ3pCLGlDQUFpQztBQUNqQztBQUNBO0FBQ0EsWUFBWSx3Q0FBVztBQUN2QjtBQUNBO0FBQ0EsWUFBWSxpREFBVztBQUN2QjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx3Q0FBVztBQUNmLElBQUksK0NBQWtCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbURBQU07QUFDbEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsOENBQUssa0JBQWtCLGNBQWM7QUFDbkU7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOENBQUssb0JBQW9CLFVBQVUsUUFBUTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlEQUFJO0FBQy9CLFVBQVUsK0NBQUc7QUFDYjtBQUNBLDZEQUE2RCxlQUFlO0FBQzVFO0FBQ0E7QUFDQSx5QkFBeUIsa0RBQWdCLEVBQUU7QUFDM0Msd0NBQXdDLHFDQUFxQywyQkFBMkIscUJBQXFCO0FBQzdIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG1CQUFtQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDhEQUFLLG1CQUFtQixpREFBSTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkhBQTJILHlCQUF5QjtBQUNwSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdJQUFnSSxnQ0FBZ0M7QUFDaEs7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQSwyRkFBMkYsK0JBQStCO0FBQzFIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFHQUFxRyxrQ0FBa0M7QUFDdkkseUNBQXlDLGFBQWE7QUFDdEQseUNBQXlDLGFBQWE7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1IQUFtSCxTQUFTLFdBQVcsZ0JBQWdCO0FBQ3ZKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdIQUF3SCxtQkFBbUI7QUFDM0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0IsaURBQUk7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw4QkFBOEIsc0RBQVksU0FBUyw0REFBUyxHQUFHLHlFQUF5RTtBQUMxSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksbURBQU0sYUFBYSw4Q0FBUztBQUNoQyxJQUFJLG1EQUFNO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWJiLml0Ly4vc3JjL3ZpZXdzL3Byb2R1Y3RzL2NyZWF0ZUVkaXQuanM/OTE0OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ0AvY3NzL3Byb2R1Y3RzLmNzcyc7XHJcbmltcG9ydCB7IGNvbnRhaW5lciB9IGZyb20gXCJAL2FwcC5qc1wiO1xyXG5pbXBvcnQgeyBodG1sLCByZW5kZXIgfSBmcm9tICdsaXQvaHRtbC5qcyc7XHJcbmltcG9ydCB7IG1hcmtJbnZhbGlkLCBtYXJrVmFsaWQsIHJvdW5kUHJpY2UsIHN1Y2Nlc3NTY2FuLCBsb2FkUHJldmlld0ltYWdlLCBwcmljZVJlZ2V4LCBmaXhJbnB1dFByaWNlIH0gZnJvbSAnQC9hcGknO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XHJcbmltcG9ydCB7IGNhdGVnb3JpZXNPcHRpb25zIH0gZnJvbSAnQC92aWV3cy9jYXRlZ29yaWVzL2NhdGVnb3JpZXMnO1xyXG5pbXBvcnQgeyB1bnRpbCB9IGZyb20gJ2xpdC9kaXJlY3RpdmVzL3VudGlsLmpzJztcclxuaW1wb3J0IHsgbmF2IH0gZnJvbSAnQC92aWV3cy9uYXYnO1xyXG5pbXBvcnQgeyBzdWJtaXRCdG4sIHRvZ2dsZVN1Ym1pdEJ0biB9IGZyb20gJ0Avdmlld3MvY29tcG9uZW50cyc7XHJcbmltcG9ydCB7IGxvZ2dlZEluVXNlciB9IGZyb20gXCJAL3ZpZXdzL2xvZ2luXCI7XHJcbmltcG9ydCBRdWFnZ2EgZnJvbSAncXVhZ2dhJztcclxuXHJcbnZhciBzZWxlY3RlZFNpemVzLCBkZWxpdmVyeVByaWNlRmllbGRzLCB3aG9sZXNhbGVQcmljZUZpZWxkcywgcmV0YWlsUHJpY2VGaWVsZCwgd2hvbGVzYWxlTWFya3VwLCByZXRhaWxNYXJrdXAsIHByb2R1Y3QsIGVkaXRQYWdlID0gZmFsc2U7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBsb2FkQ2F0ZWdvcmllcygpIHtcclxuICAgIGNvbnN0IHJlcSA9IGF3YWl0IGF4aW9zLmdldCgnL2NhdGVnb3JpZXMnKTtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSByZXEuZGF0YTtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgIGNhdGVnb3JpZXMsXHJcbiAgICAgICAgc2VsZWN0ZWQ6IHByb2R1Y3QgJiYgcHJvZHVjdC5jYXRlZ29yeSxcclxuICAgICAgICBzaG93Tm9QYXJlbnQ6IGZhbHNlLFxyXG4gICAgICAgIGRpc2FibGVXaXRoQ2hpbGRlbjogdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjYXRlZ29yaWVzT3B0aW9ucyhvcHRpb25zKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZVVuaXRQcmljZSgpIHtcclxuICAgIC8vIGlmIChzZWxlY3RlZFNpemVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOyAvLyBpZiBubyBzaXplcyBhZGRlZCwgZG8gbm90aGluZ1xyXG4gICAgY29uc3QgZGVsaXZlcnlFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWxpdmVyeVByaWNlJyk7XHJcbiAgICBjb25zdCB3aG9sZXNhbGVQcmljZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aG9sZXNhbGVQcmljZScpO1xyXG4gICAgY29uc3Qgd2hvbGVzYWxlVW5pdFByaWNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dob2xlc2FsZVVuaXRQcmljZScpO1xyXG4gICAgY29uc3QgcmV0YWlsUHJpY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV0YWlsUHJpY2UnKTtcclxuICAgIGNvbnN0IHVuaXRQcmljZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbGl2ZXJ5UHJpY2VQZXJVbml0Jyk7XHJcblxyXG4gICAgZml4SW5wdXRQcmljZSh1bml0UHJpY2VFbCwgdHJ1ZSk7XHJcblxyXG4gICAgY29uc3QgdW5pdFByaWNlID0gdW5pdFByaWNlRWwudmFsdWU7XHJcblxyXG4gICAgaWYgKHVuaXRQcmljZUVsLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgIGRlbGl2ZXJ5RWwudmFsdWUgPSAnJztcclxuICAgICAgICB3aG9sZXNhbGVQcmljZS52YWx1ZSA9ICcnO1xyXG4gICAgICAgIHdob2xlc2FsZVVuaXRQcmljZS52YWx1ZSA9ICcnO1xyXG4gICAgICAgIHJldGFpbFByaWNlLnZhbHVlID0gJyc7XHJcbiAgICAgICAgcmV0dXJuIHVuaXRQcmljZUVsLnZhbHVlID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGVsaXZlcnlQcmljZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbGl2ZXJ5UHJpY2UnKTtcclxuICAgIGRlbGl2ZXJ5UHJpY2VFbC52YWx1ZSA9IHJvdW5kUHJpY2UodW5pdFByaWNlICogKHNlbGVjdGVkU2l6ZXMubGVuZ3RoIHx8IDEpKTtcclxuXHJcbiAgICBjYWxjdWxhdGVQcm9kdWN0UHJpY2VzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZVByb2R1Y3RQcmljZXMoZSkge1xyXG4gICAgY29uc3QgZGVsaXZlcnlQcmljZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbGl2ZXJ5UHJpY2UnKTtcclxuICAgIGNvbnN0IHdob2xlc2FsZVVuaXRQcmljZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aG9sZXNhbGVVbml0UHJpY2UnKTtcclxuICAgIGNvbnN0IHdob2xlc2FsZVByaWNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dob2xlc2FsZVByaWNlJyk7XHJcbiAgICBjb25zdCByZXRhaWxQcmljZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXRhaWxQcmljZScpO1xyXG4gICAgY29uc3QgdW5pdFByaWNlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsaXZlcnlQcmljZVBlclVuaXQnKTtcclxuXHJcbiAgICBmaXhJbnB1dFByaWNlKGRlbGl2ZXJ5UHJpY2VFbCwgdHJ1ZSk7XHJcblxyXG4gICAgY29uc3QgZGVsaXZlcnlQcmljZSA9IGRlbGl2ZXJ5UHJpY2VFbC52YWx1ZTtcclxuXHJcbiAgICBpZiAoZGVsaXZlcnlQcmljZUVsLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgIHdob2xlc2FsZVVuaXRQcmljZS52YWx1ZSA9ICcnO1xyXG4gICAgICAgIGRlbGl2ZXJ5UHJpY2VFbC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIHdob2xlc2FsZVByaWNlLnZhbHVlID0gJyc7XHJcbiAgICAgICAgcmV0YWlsUHJpY2UudmFsdWUgPSAnJztcclxuICAgICAgICByZXR1cm4gdW5pdFByaWNlRWwudmFsdWUgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgcHJpY2UgcGVyIHVuaXQgaWYgY29taW5nIGZyb20gZXZlbnQgKGNoYW5naW5nIHRoaXMgcHJpY2UgZGlyZWN0bHkgYW5kIG5vdCBmcm9tIHRoZSB1bml0UHJpY2UgZnVuY2l0b24pIGFuZCBzaXplcyBhcmUgc2VsZWN0ZWRcclxuICAgIGlmIChlKVxyXG4gICAgICAgIHVuaXRQcmljZUVsLnZhbHVlID0gKGRlbGl2ZXJ5UHJpY2UgLyAoc2VsZWN0ZWRTaXplcy5sZW5ndGggfHwgMSkpLnRvRml4ZWQoMik7XHJcblxyXG4gICAgY29uc3Qgd2hvbGVzYWxlID0gcm91bmRQcmljZShkZWxpdmVyeVByaWNlICogKDEgKyB3aG9sZXNhbGVNYXJrdXAgLyAxMDApKTtcclxuXHJcbiAgICAvL1JldGFpbCBwcmljZSBpcyBjYWxjdWxhdGVkIHBlciBwaWVjZSwgaGVuY2Vmb3JlIHRoZSBwcmljZSBpcyBkaXZpZGVkIGJ5IGFtb3VudCBvZiBzaXplc1xyXG4gICAgY29uc3Qgc2l6ZXNMZW5ndGggPSBzZWxlY3RlZFNpemVzLmxlbmd0aCB8fCAxO1xyXG4gICAgY29uc3QgcmV0YWlsID0gcm91bmRQcmljZShkZWxpdmVyeVByaWNlICogKDEgKyByZXRhaWxNYXJrdXAgLyAxMDApIC8gc2l6ZXNMZW5ndGgpO1xyXG5cclxuICAgIHdob2xlc2FsZVByaWNlLnZhbHVlID0gcm91bmRQcmljZSh3aG9sZXNhbGUpO1xyXG4gICAgd2hvbGVzYWxlVW5pdFByaWNlLnZhbHVlID0gKHdob2xlc2FsZSAvIHNpemVzTGVuZ3RoKS50b0ZpeGVkKDIpO1xyXG4gICAgcmV0YWlsUHJpY2UudmFsdWUgPSByb3VuZFByaWNlKHJldGFpbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZVByaWNlV2hvbGVzYWxlKCkge1xyXG4gICAgY29uc3Qgd2hvbGVzYWxlVW5pdFByaWNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dob2xlc2FsZVVuaXRQcmljZScpO1xyXG4gICAgY29uc3Qgd2hvbGVzYWxlUHJpY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2hvbGVzYWxlUHJpY2UnKTtcclxuXHJcbiAgICBmaXhJbnB1dFByaWNlKHdob2xlc2FsZVVuaXRQcmljZSwgdHJ1ZSk7XHJcblxyXG4gICAgd2hvbGVzYWxlUHJpY2UudmFsdWUgPSByb3VuZFByaWNlKHdob2xlc2FsZVVuaXRQcmljZS52YWx1ZSAqIChzZWxlY3RlZFNpemVzLmxlbmd0aCB8fCAxKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZVVuaXRQcmljZVdob2xlc2FsZSgpIHtcclxuICAgIGNvbnN0IHdob2xlc2FsZVVuaXRQcmljZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aG9sZXNhbGVVbml0UHJpY2UnKTtcclxuICAgIGNvbnN0IHdob2xlc2FsZVByaWNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dob2xlc2FsZVByaWNlJyk7XHJcblxyXG5cclxuICAgIGZpeElucHV0UHJpY2Uod2hvbGVzYWxlUHJpY2UsIHRydWUpO1xyXG5cclxuICAgIHdob2xlc2FsZVVuaXRQcmljZS52YWx1ZSA9ICh3aG9sZXNhbGVQcmljZS52YWx1ZSAvIChzZWxlY3RlZFNpemVzLmxlbmd0aCB8fCAxKSkudG9GaXhlZCgyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlUXVhbnRpdHkoKSB7XHJcbiAgICBjb25zdCBxdWFudGl0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWFudGl0eScpLnZhbHVlO1xyXG4gICAgY29uc3QgcXVhbnRpdHlFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWFudGl0eUVsJyk7XHJcblxyXG4gICAgaWYgKHF1YW50aXR5ID09PSAnJyB8fCBzZWxlY3RlZFNpemVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHF1YW50aXR5RWwudmFsdWUgPSAnJztcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdG90YWxRdWFudGl0eSA9IHNlbGVjdGVkU2l6ZXMubGVuZ3RoICogcXVhbnRpdHk7XHJcblxyXG4gICAgcXVhbnRpdHlFbC52YWx1ZSA9IHRvdGFsUXVhbnRpdHk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHByaWNlcywgYmVjYXVzZSByZXRhaWwgcHJpY2UgdXNlcyBxdWFudGl0eSB0byBjYWxjdWxhdGVcclxuICAgIGNhbGN1bGF0ZVByb2R1Y3RQcmljZXMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkU2l6ZShlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsaXZlcnlQcmljZVBlclVuaXQnKS5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgY29uc3Qgc2l6ZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpemUnKTtcclxuICAgIGNvbnN0IHN1ZmZpeEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1ZmZpeCcpO1xyXG4gICAgY29uc3Qgc3VmZml4ID0gc3VmZml4RWwudmFsdWU7XHJcblxyXG4gICAgY29uc3Qgc2l6ZSA9IHN1ZmZpeCA/IHNpemVFbC52YWx1ZSArIHN1ZmZpeCA6IHNpemVFbC52YWx1ZTtcclxuXHJcbiAgICBpZiAoc2l6ZSAhPT0gJycgJiYgIXNlbGVjdGVkU2l6ZXMuaW5jbHVkZXMoc2l6ZSkpIHtcclxuICAgICAgICBzZWxlY3RlZFNpemVzLnB1c2goc2l6ZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZGVkU2l6ZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkZWRTaXplcycpO1xyXG5cclxuICAgICAgICByZW5kZXIoc2l6ZXNUZW1wbGF0ZShzZWxlY3RlZFNpemVzKSwgYWRkZWRTaXplcyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlUXVhbnRpdHkoKTtcclxuXHJcbiAgICBzaXplRWwudmFsdWUgPSAnJztcclxuICAgIHNpemVFbC5mb2N1cygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVTaXplKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IHNpemUgPSBlLnRhcmdldC50ZXh0Q29udGVudDtcclxuICAgIHNlbGVjdGVkU2l6ZXMgPSBzZWxlY3RlZFNpemVzLmZpbHRlcihzID0+IHMgIT09IHNpemUpO1xyXG5cclxuICAgIGlmIChzZWxlY3RlZFNpemVzLmxlbmd0aCA9PT0gMClcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsaXZlcnlQcmljZVBlclVuaXQnKS5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgY29uc3QgYWRkZWRTaXplcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRlZFNpemVzJyk7XHJcblxyXG4gICAgdXBkYXRlUXVhbnRpdHkoKTtcclxuXHJcbiAgICByZW5kZXIoc2l6ZXNUZW1wbGF0ZShzZWxlY3RlZFNpemVzKSwgYWRkZWRTaXplcyk7XHJcbn1cclxuXHJcbmNvbnN0IHF1YW50aXR5VGVtcGxhdGUgPSAoKSA9PiBodG1sYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgbWItM1wiIGlkPVwicXR5VGVtcGxhdGVcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0xMiBjb2wtc20tNCBtYi0zXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicXVhbnRpdHlcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QkdGA0L7QuSB8INCc0Y/RgNC60LA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IEBjaGFuZ2U9JHt1cGRhdGVRdWFudGl0eX0gQGtleXVwPSR7dXBkYXRlUXVhbnRpdHl9IGNsYXNzPVwiZm9ybS1jb250cm9sIHctNTAgYm9yZGVyLXByaW1hcnlcIiB0eXBlPVwibnVtYmVyXCIgaW5wdXRtb2RlPVwibnVtZXJpY1wiIG5hbWU9XCJxdWFudGl0eVwiIGlkPVwicXVhbnRpdHlcIiBtaW49XCIxXCIgc3RlcD1cIjFcIiByZXF1aXJlZCAudmFsdWU9JHtwcm9kdWN0ICYmIHByb2R1Y3QucXVhbnRpdHl9IGF1dG9jb21wbGV0ZT1cIm9mZlwiID9yZWFkb25seT1cIiR7ZWRpdFBhZ2V9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sIGJvcmRlci1wcmltYXJ5XCIgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cItC/0LDQutC10YJcIiB2YWx1ZT0ke3Byb2R1Y3Q/LnVuaXRPZk1lYXN1cmUgPyBwcm9kdWN0LnVuaXRPZk1lYXN1cmUgOiAnJ30gYXV0b2NvbXBsZXRlPVwib2ZmXCIgbmFtZT1cInVuaXRPZk1lYXN1cmVcIiBpZD1cInVuaXRPZk1lYXN1cmVcIiBsaXN0PVwidW5pdE9mTWVhc3VyZU9wdGlvbnNcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGF0YWxpc3QgaWQ9XCJ1bml0T2ZNZWFzdXJlT3B0aW9uc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwi0L/QsNC60LXRglwiPjwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwi0LHRgC5cIj48L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cItC60LMuXCI+PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCLQuy5cIj48L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2RhdGFsaXN0PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0xMiBjb2wtc20tMyBtYi0zIGQtbm9uZVwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIm1pblF0eVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCc0LjQvS4g0LHRgNC+0Lkg0LfQsCDQvdCwINC10LTRgNC+PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJudW1iZXJcIiBpbnB1dG1vZGU9XCJudW1lcmljXCIgbmFtZT1cIm1pblF0eVwiIGlkPVwibWluUXR5XCIgbWluPVwiMFwiIHN0ZXA9XCIxXCIgYXJpYS1kZXNjcmliZWRieT1cIm1pblF0eUhlbHBcIiAudmFsdWU9JHtwcm9kdWN0ICYmIHByb2R1Y3QubWluUXR5fSBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJtaW5RdHlIZWxwXCIgY2xhc3M9XCJmb3JtLXRleHRcIj7QkdGA0L7QudC60Lgg0LrQvtC40YLQviDQtNCwINGB0LUg0LfQsNC/0LDQt9GP0YIg0LfQsCDQv9GA0L7QtNCw0LbQsdC4INC90LAg0LXQtNGA0L4uINCd0Y/QvNCwINC00LAg0LzQvtC20LUg0LTQsCDRgdC1INC/0YDQvtC00LDQstCw0YIg0L3QsCDQtNGA0LXQsdC90L4uPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0xMiBjb2wtc20tNCBtYi0zXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwic2l6ZVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCg0LDQt9C80LXRgNC4IHwg0KHRg9GE0LjQutGBPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIG5hbWU9XCJzaXplXCIgaWQ9XCJzaXplXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgP3JlYWRvbmx5PVwiJHtlZGl0UGFnZX1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuYW1lPVwic3VmZml4XCIgaWQ9XCJzdWZmaXhcIiBhdXRvY29tcGxldGU9XCJvZmZcIiBwbGFjZWhvbGRlcj1cItCzLiAvINC8LlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gQGNsaWNrPSR7YWRkU2l6ZX0gY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIiA/ZGlzYWJsZWQ9JHtlZGl0UGFnZX0+PGkgY2xhc3M9XCJiaSBiaS1wbHVzLWxnXCI+PC9pPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiYWRkZWRTaXplc1wiIGNsYXNzPVwiZC1mbGV4IGdhcC0xIG10LTEgZmxleC13cmFwXCI+PC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0xMiBjb2wtc20tNFwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInF1YW50aXR5RWxcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QntCx0Ykg0LHRgNC+0Lk8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cIm51bWJlclwiIC52YWx1ZT0ke3Byb2R1Y3QgJiYgcHJvZHVjdC5xdWFudGl0eSAqIHNlbGVjdGVkU2l6ZXMubGVuZ3RofSBpZD1cInF1YW50aXR5RWxcIiBtaW49XCIwXCIgc3RlcD1cIjFcIiBkaXNhYmxlZD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuY29uc3QgcHJpY2VzVGVtcGxhdGUgPSAoKSA9PiBodG1sYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgbWItMyByb3ctZ2FwLTMgYWxpZ24taXRlbXMtZW5kXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wgJHshWydib3RoJywgJ3VuaXQnXS5pbmNsdWRlcyhkZWxpdmVyeVByaWNlRmllbGRzKSA/ICdkLW5vbmUnIDogJyd9XCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZGVsaXZlcnlQcmljZVBlclVuaXRcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QlNC+0YHRgtCw0LLQvdCwINGG0LXQvdCwINC30LAg0LHRgNC+0Lk8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IEBjaGFuZ2U9JHtjYWxjdWxhdGVVbml0UHJpY2V9IEBrZXl1cD0ke2NhbGN1bGF0ZVVuaXRQcmljZX0gY2xhc3M9XCJmb3JtLWNvbnRyb2wgYm9yZGVyLXByaW1hcnlcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJkZWxpdmVyeVByaWNlUGVyVW5pdFwiIGlkPVwiZGVsaXZlcnlQcmljZVBlclVuaXRcIiBpbnB1dG1vZGU9XCJkZWNpbWFsXCIgLnZhbHVlPSR7cHJvZHVjdCAmJiBwcm9kdWN0LnNpemVzPy5sZW5ndGggJiYgcm91bmRQcmljZShwcm9kdWN0LmRlbGl2ZXJ5UHJpY2UgLyBwcm9kdWN0LnNpemVzLmxlbmd0aCl9IGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wgJHshWydib3RoJywgJ3dob2xlJ10uaW5jbHVkZXMoZGVsaXZlcnlQcmljZUZpZWxkcykgPyAnZC1ub25lJyA6ICcnfVwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImRlbGl2ZXJ5UHJpY2VcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QlNC+0YHRgtCw0LLQvdCwINGG0LXQvdCwINC30LAg0L/QsNC60LXRgjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgQGNoYW5nZT0ke2NhbGN1bGF0ZVByb2R1Y3RQcmljZXN9IEBrZXl1cD0ke2NhbGN1bGF0ZVByb2R1Y3RQcmljZXN9IGNsYXNzPVwiZm9ybS1jb250cm9sIGJvcmRlci1wcmltYXJ5XCIgdHlwZT1cInRleHRcIiBpbnB1dG1vZGU9XCJkZWNpbWFsXCIgbmFtZT1cImRlbGl2ZXJ5UHJpY2VcIiBpZD1cImRlbGl2ZXJ5UHJpY2VcIiByZXF1aXJlZCAudmFsdWU9JHtwcm9kdWN0ICYmIHByb2R1Y3QuZGVsaXZlcnlQcmljZX0gYXV0b2NvbXBsZXRlPVwib2ZmXCI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbCBwZS0wICR7IVsnYm90aCcsICd1bml0J10uaW5jbHVkZXMod2hvbGVzYWxlUHJpY2VGaWVsZHMpID8gJ2Qtbm9uZScgOiAnJ31cIlwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInVuaXRQcmljZVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCm0LXQvdCwINC90LAg0LXQtNGA0L4g0LfQsCDQsdGA0L7QuSA8c3BhbiBjbGFzcz1cInRleHQtcHJpbWFyeVwiPigrJHt3aG9sZXNhbGVNYXJrdXB9JSk8L3NwYW4+PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbCBib3JkZXItcHJpbWFyeVwiIEBrZXl1cD0ke2NhbGN1bGF0ZVByaWNlV2hvbGVzYWxlfSB0eXBlPVwidGV4dFwiIG5hbWU9XCJ3aG9sZXNhbGVVbml0UHJpY2VcIiBpZD1cIndob2xlc2FsZVVuaXRQcmljZVwiIGlucHV0bW9kZT1cImRlY2ltYWxcIiAudmFsdWU9JHtwcm9kdWN0ICYmIHByb2R1Y3Quc2l6ZXM/Lmxlbmd0aCAmJiByb3VuZFByaWNlKHByb2R1Y3Qud2hvbGVzYWxlUHJpY2UgLyBwcm9kdWN0LnNpemVzLmxlbmd0aCl9IGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuXHJcblxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sIHBlLTAgJHshWydib3RoJywgJ3dob2xlJ10uaW5jbHVkZXMod2hvbGVzYWxlUHJpY2VGaWVsZHMpID8gJ2Qtbm9uZScgOiAnJ31cIlwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIndob2xlc2FsZVByaWNlXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0KbQtdC90LAg0L3QsCDQtdC00YDQviA8c3BhbiBjbGFzcz1cInRleHQtcHJpbWFyeVwiPigrJHt3aG9sZXNhbGVNYXJrdXB9JSk8L3NwYW4+PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbCBib3JkZXItcHJpbWFyeVwiIEBrZXl1cD0ke2NhbGN1bGF0ZVVuaXRQcmljZVdob2xlc2FsZX0gdHlwZT1cInRleHRcIiBuYW1lPVwid2hvbGVzYWxlUHJpY2VcIiBpZD1cIndob2xlc2FsZVByaWNlXCIgaW5wdXRtb2RlPVwiZGVjaW1hbFwiIHJlcXVpcmVkIC52YWx1ZT0ke3Byb2R1Y3QgJiYgcHJvZHVjdC53aG9sZXNhbGVQcmljZX0gYXV0b2NvbXBsZXRlPVwib2ZmXCI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbCAke3JldGFpbFByaWNlRmllbGQgPT09ICd0cnVlJyA/ICcnIDogJ2Qtbm9uZSd9XCI+XHJcbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJyZXRhaWxQcmljZVwiIGNsYXNzPSBcImZvcm0tbGFiZWxcIiA+INCm0LXQvdCwINC90LAg0LTRgNC10LHQvdC+IDxzcGFuIGNsYXNzPVwidGV4dC1wcmltYXJ5XCI+ICgrJHtyZXRhaWxNYXJrdXB9JSk8L3NwYW4+PC9sYWJlbCA+XHJcbiAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbCBib3JkZXItcHJpbWFyeVwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInJldGFpbFByaWNlXCIgaWQ9XCJyZXRhaWxQcmljZVwiIGlucHV0bW9kZT1cImRlY2ltYWxcIiByZXF1aXJlZCAudmFsdWU9JHtwcm9kdWN0ICYmIHByb2R1Y3QucmV0YWlsUHJpY2V9IGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGA7XHJcblxyXG5jb25zdCBzaXplc1RlbXBsYXRlID0gKCkgPT4gaHRtbGBcclxuICAgICAgICAke3NlbGVjdGVkU2l6ZXMubWFwKHNpemUgPT4gaHRtbGBcclxuICAgICAgICAgICAgJHtlZGl0UGFnZSA/IGh0bWxgPGRpdiBjbGFzcz1cImJ0biBiZy1wcmltYXJ5IHRleHQtd2hpdGVcIj4ke3NpemV9PC9kaXY+YCA6IGh0bWxgPGJ1dHRvbiBAY2xpY2s9JHtyZW1vdmVTaXplfSBjbGFzcz1cImJ0biBiZy1wcmltYXJ5IGJnRGFuZ2VySG92ZXJcIj4ke3NpemV9PC9idXR0b24+YH1cclxuICAgICAgICBgKVxyXG4gICAgfVxyXG5gO1xyXG5cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUltYWdlKGUpIHtcclxuICAgIGNvbnN0IGR0ID0gbmV3IERhdGFUcmFuc2ZlcigpO1xyXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkaXRpb25hbEltYWdlcycpO1xyXG4gICAgY29uc3QgeyBmaWxlcyB9ID0gaW5wdXQ7XHJcblxyXG4gICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xyXG4gICAgICAgIGlmIChmaWxlLm5hbWUgIT09IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZmlsZW5hbWUnKSlcclxuICAgICAgICAgICAgZHQuaXRlbXMuYWRkKGZpbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlucHV0LmZpbGVzID0gZHQuZmlsZXMgLy8gQXNzaWduIHRoZSB1cGRhdGVzIGxpc3QgdG8gdGhlIGlucHV0IGZpZWxkXHJcblxyXG4gICAgZS50YXJnZXQucGFyZW50RWxlbWVudC5yZW1vdmUoKTsgLy8gRGVsZXRlIHRoZSBkaXYgZWxlbWVudCBvZiB0aGUgaW1hZ2VcclxufTtcclxuXHJcbmNvbnN0IGltZ1RlbXBsYXRlID0gKGltZywgZmlsZU5hbWUpID0+IGh0bWxgXHJcbiAgICA8ZGl2IGNsYXNzPVwidXBsb2FkSW1nQ29udGFpbmVyIG0tMVwiPlxyXG4gICAgICAgIDxpbWcgc3JjPVwiJHtpbWd9XCIgY2xhc3M9XCJpbWctdGh1bWJuYWlsXCIgYWx0PVwiXCI+XHJcbiAgICAgICAgICAgICR7ZmlsZU5hbWUgPyBodG1sYDxidXR0b24gQGNsaWNrPSR7cmVtb3ZlSW1hZ2V9IGZpbGVOYW1lPSR7ZmlsZU5hbWV9IGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIj5YPC9idXR0b24+YCA6ICcnfVxyXG4gICAgICAgIDwvZGl2PlxyXG5gO1xyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGVQcm9kdWN0KGRhdGEpIHtcclxuICAgIHZhciBpbnZhbGlkRmxhZyA9IGZhbHNlO1xyXG5cclxuICAgIGlmICghZGF0YS5uYW1lKVxyXG4gICAgICAgIGludmFsaWRGbGFnID0gbWFya0ludmFsaWQoJ25hbWUnKTtcclxuICAgIGVsc2UgbWFya1ZhbGlkKCduYW1lJyk7XHJcblxyXG4gICAgaWYgKCFkYXRhLmNhdGVnb3J5KVxyXG4gICAgICAgIGludmFsaWRGbGFnID0gbWFya0ludmFsaWQoJ2NhdGVnb3J5Jyk7XHJcbiAgICBlbHNlIG1hcmtWYWxpZCgnY2F0ZWdvcnknKTtcclxuXHJcbiAgICBkYXRhLmhpZGRlbiA9IHR5cGVvZiBkYXRhLmhpZGRlbiA9PT0gJ3N0cmluZycgPyB0cnVlIDogZmFsc2U7XHJcblxyXG4gICAgaWYgKCFkYXRhLnF1YW50aXR5KVxyXG4gICAgICAgIGludmFsaWRGbGFnID0gbWFya0ludmFsaWQoJ3F1YW50aXR5Jyk7XHJcbiAgICBlbHNlIG1hcmtWYWxpZCgncXVhbnRpdHknKTtcclxuXHJcbiAgICBpZiAoIWRhdGEuZGVsaXZlcnlQcmljZSB8fCBkYXRhLmRlbGl2ZXJ5UHJpY2UgPCAwIHx8ICFwcmljZVJlZ2V4LnRlc3QoZGF0YS5kZWxpdmVyeVByaWNlKSkge1xyXG4gICAgICAgIGludmFsaWRGbGFnID0gbWFya0ludmFsaWQoJ2RlbGl2ZXJ5UHJpY2UnKTtcclxuICAgICAgICBtYXJrSW52YWxpZCgnZGVsaXZlcnlQcmljZVBlclVuaXQnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbWFya1ZhbGlkKCdkZWxpdmVyeVByaWNlJyk7XHJcbiAgICAgICAgbWFya1ZhbGlkKCdkZWxpdmVyeVByaWNlUGVyVW5pdCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZGF0YS53aG9sZXNhbGVQcmljZSB8fCBkYXRhLndob2xlc2FsZVByaWNlIDwgMCB8fCAhcHJpY2VSZWdleC50ZXN0KGRhdGEud2hvbGVzYWxlUHJpY2UpIHx8IE51bWJlcihkYXRhLmRlbGl2ZXJ5UHJpY2UpID49IE51bWJlcihkYXRhLndob2xlc2FsZVByaWNlKSkge1xyXG4gICAgICAgIGludmFsaWRGbGFnID0gbWFya0ludmFsaWQoJ3dob2xlc2FsZVByaWNlJyk7XHJcbiAgICAgICAgbWFya0ludmFsaWQoJ3dob2xlc2FsZVVuaXRQcmljZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBtYXJrVmFsaWQoJ3dob2xlc2FsZVByaWNlJyk7XHJcbiAgICAgICAgbWFya1ZhbGlkKCd3aG9sZXNhbGVVbml0UHJpY2UnKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWRhdGEucmV0YWlsUHJpY2UgfHwgZGF0YS5yZXRhaWxQcmljZSA8IDAgfHwgIXByaWNlUmVnZXgudGVzdChkYXRhLnJldGFpbFByaWNlKSB8fCBOdW1iZXIoZGF0YS5kZWxpdmVyeVByaWNlIC8gKHNlbGVjdGVkU2l6ZXMubGVuZ3RoIHx8IDEpKSA+PSBOdW1iZXIoZGF0YS5yZXRhaWxQcmljZSkpXHJcbiAgICAgICAgaW52YWxpZEZsYWcgPSBtYXJrSW52YWxpZCgncmV0YWlsUHJpY2UnKTtcclxuICAgIGVsc2UgbWFya1ZhbGlkKCdyZXRhaWxQcmljZScpO1xyXG5cclxuICAgIHJldHVybiBpbnZhbGlkRmxhZztcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvZHVjdChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0b2dnbGVTdWJtaXRCdG4oKTtcclxuXHJcbiAgICBjb25zdCBmb3JtID0gZS50YXJnZXQ7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKTtcclxuXHJcbiAgICBjb25zdCBkYXRhID0gT2JqZWN0LmZyb21FbnRyaWVzKGZvcm1EYXRhLmVudHJpZXMoKSk7XHJcbiAgICBkYXRhLnNpemVzID0gc2VsZWN0ZWRTaXplcy5tYXAoc2l6ZSA9PiAoeyBzaXplLCBxdWFudGl0eTogZGF0YS5xdWFudGl0eSB9KSk7XHJcbiAgICBmb3JtRGF0YS5zZXQoJ3NpemVzJywgSlNPTi5zdHJpbmdpZnkoZGF0YS5zaXplcykpO1xyXG5cclxuICAgIGNvbnN0IGludmFsaWREYXRhID0gdmFsaWRhdGVQcm9kdWN0KGRhdGEpO1xyXG4gICAgaWYgKGludmFsaWREYXRhKVxyXG4gICAgICAgIHJldHVybiB0b2dnbGVTdWJtaXRCdG4oKTtcclxuXHJcbiAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ3dhcy12YWxpZGF0ZWQnKTtcclxuICAgIGZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnbmVlZHMtdmFsaWRhdGlvbicpO1xyXG5cclxuICAgIGNvbnN0IGFsZXJ0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxlcnQnKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlcSA9IHByb2R1Y3QgPyBhd2FpdCBheGlvcy5wdXQoYC9wcm9kdWN0cy8ke3Byb2R1Y3QuX2lkfWAsIGZvcm1EYXRhKSA6IGF3YWl0IGF4aW9zLnBvc3QoJy9wcm9kdWN0cycsIGZvcm1EYXRhKTtcclxuICAgICAgICBpZiAocmVxLnN0YXR1cyA9PT0gMjAxKSB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVN1Ym1pdEJ0bigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFwcm9kdWN0KSB7IC8vIGlmIHByb2R1Y3QgY3JlYXRpb24gYW5kIG5vdCBlZGl0aW5nXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0ZWdvcnknKS5jbGFzc0xpc3QucmVtb3ZlKCdpcy12YWxpZCcsICdpcy1pbnZhbGlkJyk7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFNpemVzID0gW107XHJcbiAgICAgICAgICAgICAgICByZW5kZXIoc2l6ZXNUZW1wbGF0ZSgpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkZWRTaXplcycpKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZVByZXZpZXcnKS5zcmMgPSAnJztcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZVByZXZpZXcnKS5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRpdGlvbmFsSW1hZ2VzUHJldmlldycpLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcm0ucmVzZXQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKS5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLXZhbGlkJywgJ2lzLWludmFsaWQnKSk7XHJcblxyXG4gICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcy12YWxpZGF0ZWQnKTtcclxuICAgICAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKCduZWVkcy12YWxpZGF0aW9uJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJywgJ2FsZXJ0LWRhbmdlcicpO1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LXN1Y2Nlc3MnKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlzLWludmFsaWQnKS5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWludmFsaWQnKSk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pcy12YWxpZCcpLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtdmFsaWQnKSk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwudGV4dENvbnRlbnQgPSBg0J/RgNC+0LTRg9C60YLRitGCINC1ICR7cHJvZHVjdCA/ICfRgNC10LTQsNC60YLQuNGA0LDQvScgOiAn0YHRitC30LTQsNC00LXQvSd9INGD0YHQv9C10YjQvdC+LmA7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgdG9nZ2xlU3VibWl0QnRuKCk7XHJcbiAgICAgICAgaWYgKGVyci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMCB8fCBlcnIucmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcclxuICAgICAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnLCAnYWxlcnQtc3VjY2VzcycpO1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LWRhbmdlcicpO1xyXG4gICAgICAgICAgICBhbGVydEVsLnRleHRDb250ZW50ID0gZXJyLnJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnd2FzLXZhbGlkYXRlZCcpO1xyXG4gICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ25lZWRzLXZhbGlkYXRpb24nKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlcnIucmVzcG9uc2UuZGF0YS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCcg0LrQvtC0JykpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtJbnZhbGlkKCdjb2RlJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlcnIucmVzcG9uc2UuZGF0YS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCfQsdCw0YDQutC+0LQnKSkge1xyXG4gICAgICAgICAgICAgICAgbWFya0ludmFsaWQoJ2JhcmNvZGUnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXJyLnJlc3BvbnNlPy5zdGF0dXMgPT09IDUwMCkge1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScsICdhbGVydC1zdWNjZXNzJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LmFkZCgnYWxlcnQtZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwudGV4dENvbnRlbnQgPSAn0JPRgNC10YjQutCwINCyINGB0YrRgNCy0YrRgNCwJztcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIH0gZWxzZSBjb25zb2xlLmVycm9yKGVycilcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbnZhciBzY2FubmVkID0gZmFsc2U7XHJcbmZ1bmN0aW9uIHNjYW5CYXJjb2RlKCkge1xyXG4gICAgY29uc3QgdmlkZW9FbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXJjb2RlVmlkZW8nKTtcclxuICAgIGNvbnN0IHNjYW5CYXJjb2RlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjYW5CYXJjb2RlJyk7XHJcbiAgICBjb25zdCBjYW5jZWxCYXJjb2RlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0b3BCYXJjb2RlJyk7XHJcbiAgICBzY2FuQmFyY29kZUJ0bi5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTtcclxuICAgIGNhbmNlbEJhcmNvZGVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcblxyXG4gICAgY29uc3QgY29uZmlnID0ge1xyXG4gICAgICAgIGlucHV0U3RyZWFtOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiTGl2ZVwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcIkxpdmVTdHJlYW1cIixcclxuICAgICAgICAgICAgdGFyZ2V0OiB2aWRlb0VsLFxyXG4gICAgICAgICAgICBjb25zdHJhaW50czoge1xyXG4gICAgICAgICAgICAgICAgZmFjaW5nTW9kZTogXCJlbnZpcm9ubWVudFwiLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVjb2Rlcjoge1xyXG4gICAgICAgICAgICByZWFkZXJzOiBbXCJlYW5fcmVhZGVyXCIsIFwiY29kZV8xMjhfcmVhZGVyXCJdLFxyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIFF1YWdnYS5pbml0KGNvbmZpZywgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpIHJldHVybiBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIFF1YWdnYS5zdGFydCgpO1xyXG4gICAgICAgIHNjYW5uZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgUXVhZ2dhLm9uRGV0ZWN0ZWQoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzY2FubmVkKSByZXR1cm47IC8vIHRoaXMgaXMgdXNlZCBiZWNhdXNlIGV2ZXJ5IHRpbWUgeW91IGluaXQgUXVhZ2dhLCBpdCBhZGRzIGEgbmV3IGxpc3RlbmVyIGFuZCBzdGFydHMgZHVwbGljYXRpbmcgZXZlbnRzXHJcbiAgICAgICAgICAgIHNjYW5uZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgUXVhZ2dhLnN0b3AoKTtcclxuICAgICAgICAgICAgY29uc3QgYmFyY29kZSA9IGRhdGEuY29kZVJlc3VsdC5jb2RlO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFyY29kZScpLnZhbHVlID0gYmFyY29kZTtcclxuICAgICAgICAgICAgc3VjY2Vzc1NjYW4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhcmNvZGUnKSk7XHJcbiAgICAgICAgICAgIHZpZGVvRWwuaW5uZXJIVE1MID0gJydcclxuICAgICAgICAgICAgc2NhbkJhcmNvZGVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcbiAgICAgICAgICAgIGNhbmNlbEJhcmNvZGVCdG4uY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RvcEJhcmNvZGUoKSB7XHJcbiAgICBjb25zdCB2aWRlb0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhcmNvZGVWaWRlbycpO1xyXG4gICAgY29uc3Qgc2NhbkJhcmNvZGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NhbkJhcmNvZGUnKTtcclxuICAgIGNvbnN0IGNhbmNlbEJhcmNvZGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RvcEJhcmNvZGUnKTtcclxuXHJcbiAgICBzY2FuQmFyY29kZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTtcclxuICAgIGNhbmNlbEJhcmNvZGVCdG4uY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcbiAgICB2aWRlb0VsLmlubmVySFRNTCA9ICcnO1xyXG4gICAgUXVhZ2dhLnN0b3AoKTtcclxuICAgIFF1YWdnYS5vZmZEZXRlY3RlZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkUHJldmlld0ltYWdlcyhlKSB7XHJcbiAgICBjb25zdCBhZGRpdGlvbmFsSW1hZ2VzUHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRpdGlvbmFsSW1hZ2VzUHJldmlldycpO1xyXG5cclxuICAgIHZhciBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzO1xyXG4gICAgdmFyIGZpbGVzQXJyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZmlsZXMpO1xyXG4gICAgdmFyIGh0bWxBcnJheSA9IFtdO1xyXG5cclxuICAgIGZpbGVzQXJyLmZvckVhY2goZnVuY3Rpb24gKGZpbGUsIGluZGV4KSB7XHJcbiAgICAgICAgaWYgKCFmaWxlLnR5cGUubWF0Y2goJ2ltYWdlLionKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuXHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGh0bWxBcnJheS5wdXNoKGltZ1RlbXBsYXRlKGUudGFyZ2V0LnJlc3VsdCwgZmlsZS5uYW1lKSk7XHJcbiAgICAgICAgICAgIHJlbmRlcihodG1sQXJyYXksIGFkZGl0aW9uYWxJbWFnZXNQcmV2aWV3KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUVkaXRQcm9kdWN0UGFnZShjdHgsIG5leHQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKGN0eC5wYXJhbXMuaWQpIHtcclxuICAgICAgICAgICAgZWRpdFBhZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zdCByZXEgPSBhd2FpdCBheGlvcy5nZXQoYC9wcm9kdWN0cy8ke2N0eC5wYXJhbXMuaWR9YCk7XHJcbiAgICAgICAgICAgIHByb2R1Y3QgPSByZXEuZGF0YTtcclxuICAgICAgICAgICAgc2VsZWN0ZWRTaXplcyA9IHByb2R1Y3Quc2l6ZXMubWFwKHMgPT4gcy5zaXplKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlZGl0UGFnZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBwcm9kdWN0ID0gJyc7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkU2l6ZXMgPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGtleXMgPSBbJ3dob2xlc2FsZU1hcmt1cCcsICdyZXRhaWxNYXJrdXAnLCAnZGVsaXZlcnlQcmljZUZpZWxkcycsICd3aG9sZXNhbGVQcmljZUZpZWxkcycsICdyZXRhaWxQcmljZUZpZWxkJ107XHJcbiAgICAgICAgY29uc3QgcmVxID0gYXdhaXQgYXhpb3MuZ2V0KCcvc2V0dGluZ3MnLCB7IHBhcmFtczogeyBrZXlzIH0gfSk7XHJcbiAgICAgICAgd2hvbGVzYWxlTWFya3VwID0gcmVxLmRhdGEuZmlsdGVyKHMgPT4gcy5rZXkgPT09ICd3aG9sZXNhbGVNYXJrdXAnKVswXS52YWx1ZTtcclxuICAgICAgICByZXRhaWxNYXJrdXAgPSByZXEuZGF0YS5maWx0ZXIocyA9PiBzLmtleSA9PT0gJ3JldGFpbE1hcmt1cCcpWzBdLnZhbHVlO1xyXG4gICAgICAgIGRlbGl2ZXJ5UHJpY2VGaWVsZHMgPSByZXEuZGF0YS5maWx0ZXIocyA9PiBzLmtleSA9PT0gJ2RlbGl2ZXJ5UHJpY2VGaWVsZHMnKVswXS52YWx1ZTtcclxuICAgICAgICB3aG9sZXNhbGVQcmljZUZpZWxkcyA9IHJlcS5kYXRhLmZpbHRlcihzID0+IHMua2V5ID09PSAnd2hvbGVzYWxlUHJpY2VGaWVsZHMnKVswXS52YWx1ZTtcclxuICAgICAgICByZXRhaWxQcmljZUZpZWxkID0gcmVxLmRhdGEuZmlsdGVyKHMgPT4gcy5rZXkgPT09ICdyZXRhaWxQcmljZUZpZWxkJylbMF0udmFsdWU7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgYWxlcnQoJ9CS0YrQt9C90LjQutC90LAg0LPRgNC10YjQutCwJylcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICgpID0+IGh0bWxgXHJcbiAgICAgICAgJHtuYXYoKX1cclxuPGRpdiBjbGFzcz1cImNvbnRhaW5lci1mbHVpZFwiPlxyXG4gICAgPGZvcm0gZW5jdHlwZT1cIm11bHRpcGFydC9mb3JtLWRhdGFcIiBub3ZhbGlkYXRlIEBzdWJtaXQ9JHt1cGRhdGVQcm9kdWN0fSBpZD1cImNyZWF0ZVByb2R1Y3RGb3JtXCIgY2xhc3M9XCJuZWVkcy12YWxpZGF0aW9uIHAtMlwiPlxyXG4gICAgPGRpdiBjbGFzcz1cInJvdyBtYi0zXCI+XHJcbiAgICAgICAgPGxhYmVsIGZvcj1cImltYWdlXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0JPQu9Cw0LLQvdCwINGB0L3QuNC80LrQsDwvbGFiZWw+XHJcbiAgICAgICAgPGlucHV0IEBjaGFuZ2U9JHtsb2FkUHJldmlld0ltYWdlfSBuYW1lPVwiaW1hZ2VcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJmaWxlXCIgaWQ9XCJpbWFnZVwiIGFjY2VwdD1cImNhcHR1cmU9Y2FtZXJhLGltYWdlLypcIj5cclxuICAgICAgICA8aW1nIGlkPVwiaW1hZ2VQcmV2aWV3XCIgY2xhc3M9XCIke3Byb2R1Y3Q/LmltYWdlPy51cmwgPyAnJyA6ICdkLW5vbmUnfSBpbWctdGh1bWJuYWlsIHctMjVcIiAuc3JjPSR7cHJvZHVjdD8uaW1hZ2U/LnVybH0gYWx0PVwiXCI+XHJcbiAgICA8L2Rpdj5cclxuXHJcbiAgICA8ZGl2IGNsYXNzPVwicm93IG1iLTNcIj5cclxuICAgICAgICA8bGFiZWwgZm9yPVwiYWRkaXRpb25hbEltYWdlc1wiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCU0L7Qv9GK0LvQvdC40YLQtdC70L3QuCDRgdC90LjQvNC60LA8L2xhYmVsPlxyXG4gICAgICAgIDxpbnB1dCBAY2hhbmdlPSR7bG9hZFByZXZpZXdJbWFnZXN9IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cImZpbGVcIiBuYW1lPVwiYWRkaXRpb25hbEltYWdlc1wiIGlkPVwiYWRkaXRpb25hbEltYWdlc1wiIGFjY2VwdD1cImltYWdlLypcIiBtdWx0aXBsZT5cclxuICAgICAgICA8ZGl2IGlkPVwiYWRkaXRpb25hbEltYWdlc1ByZXZpZXdcIiBjbGFzcz1cImQtZmxleCBmbGV4LXdyYXBcIj48L2Rpdj5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIDxkaXYgY2xhc3M9XCJyb3cgbWItM1wiPlxyXG4gICAgICAgIDxsYWJlbCBmb3I9XCJjYXRlZ29yeVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCa0LDRgtC10LPQvtGA0LjRjzwvbGFiZWw+XHJcbiAgICAgICAgPHNlbGVjdCBjbGFzcz1cImZvcm0tc2VsZWN0IGJvcmRlci1wcmltYXJ5XCIgbmFtZT1cImNhdGVnb3J5XCIgaWQ9XCJjYXRlZ29yeVwiIHJlcXVpcmVkPlxyXG4gICAgICAgICAgICAke3VudGlsKGxvYWRDYXRlZ29yaWVzKCksIGh0bWxgPG9wdGlvbj7Ql9Cw0YDQtdC20LTQsNC90LUuLi48L29wdGlvbj5gKX1cclxuICAgICAgICA8L3NlbGVjdD5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIDxkaXYgY2xhc3M9XCJyb3cgbWItM1wiPlxyXG4gICAgICAgIDxsYWJlbCBmb3I9XCJuYW1lXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0JjQvNC1PC9sYWJlbD5cclxuICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2wgYm9yZGVyLXByaW1hcnlcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJuYW1lXCIgaWQ9XCJuYW1lXCIgcGxhY2Vob2xkZXI9XCLQptCy0LXRgtC90LAg0YLQtdC90LjRgdC60LBcIiAudmFsdWU9JHtwcm9kdWN0ICYmIHByb2R1Y3QubmFtZX0gcmVxdWlyZWQgYXV0b2NvbXBsZXRlPVwib2ZmXCI+XHJcbiAgICA8L2Rpdj5cclxuXHJcbiAgICA8ZGl2IGNsYXNzPVwicm93IG1iLTNcIj5cclxuICAgICAgICA8bGFiZWwgZm9yPVwiZGVzY3JpcHRpb25cIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QntC/0LjRgdCw0L3QuNC1PC9sYWJlbD5cclxuICAgICAgICA8dGV4dGFyZWEgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuYW1lPVwiZGVzY3JpcHRpb25cIiBpZD1cImRlc2NyaXB0aW9uXCIgcm93cz1cIjNcIiBwbGFjZWhvbGRlcj1cItCc0L3QvtCz0L4g0LPQvtGC0LjQvdCwINGC0LXQvdC40YHQutCwXCIgLnZhbHVlPSR7cHJvZHVjdCAmJiBwcm9kdWN0LmRlc2NyaXB0aW9ufSBhdXRvY29tcGxldGU9XCJvZmZcIj48L3RleHRhcmVhPlxyXG48L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAke3F1YW50aXR5VGVtcGxhdGUoKX1cclxuXHJcbiAgICAgICAgICAgICAgICAke3ByaWNlc1RlbXBsYXRlKCl9XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBtYi0zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNvZGVcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QmtC+0LQ8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImNvZGVcIiBpZD1cImNvZGVcIiAudmFsdWU9JHtwcm9kdWN0ICYmIHByb2R1Y3QuY29kZSB8fCAnJ30gYXV0b2NvbXBsZXRlPVwib2ZmXCI+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IG1iLTNcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiYmFyY29kZVZpZGVvXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImJhcmNvZGVcIiBjbGFzcz1cImZvcm0tbGFiZWxcIj7QkdCw0YDQutC+0LQ8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cCBwLTBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiBuYW1lPVwiYmFyY29kZVwiIGlkPVwiYmFyY29kZVwiIC52YWx1ZT0ke3Byb2R1Y3QgJiYgcHJvZHVjdC5iYXJjb2RlIHx8ICcnfSBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBAY2xpY2s9JHtzY2FuQmFyY29kZX0gY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIiB0eXBlPVwiYnV0dG9uXCIgaWQ9XCJzY2FuQmFyY29kZVwiPjxpIGNsYXNzPVwiYmkgYmktY2FtZXJhXCI+PC9pPiDQodC60LDQvdC40YDQsNC5PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gQGNsaWNrPSR7c3RvcEJhcmNvZGV9IGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGQtbm9uZVwiIHR5cGU9XCJidXR0b25cIiBpZD1cInN0b3BCYXJjb2RlXCI+PGkgY2xhc3M9XCJiaSBiaS1jYW1lcmFcIj48L2k+INCX0LDRgtCy0L7RgNC4PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXYgPlxyXG4gICAgICAgICAgICAgICAgPC9kaXYgPlxyXG5cclxuICAgICAgICAgICAgICAgIDxoMz7QntC/0YbQuNC4PC9oMz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYi0zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jaGVjay1pbnB1dFwiIHR5cGU9XCJjaGVja2JveFwiIHZhbHVlPVwiXCIgbmFtZT1cImhpZGRlblwiIGlkPVwiaGlkZGVuXCIgP2Rpc2FibGVkPSR7cHJvZHVjdH0gP2NoZWNrZWQ9JHtwcm9kdWN0Py5oaWRkZW59PlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tY2hlY2stbGFiZWxcIiBmb3I9XCJoaWRkZW5cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAg0KHQutGA0LjRgiDQv9GA0L7QtNGD0LrRgiAo0L3QtSDRgdC1INC/0L7QutCw0LfQstCwINCyINGB0LDQudGC0LApXHJcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYi0zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jaGVjay1pbnB1dFwiIHR5cGU9XCJjaGVja2JveFwiIHZhbHVlPVwiXCIgbmFtZT1cIm5vSW52b2ljZVwiIGlkPVwibm9JbnZvaWNlXCIgP2NoZWNrZWQ9JHtwcm9kdWN0Py5ub0ludm9pY2V9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tY2hlY2stbGFiZWxcIiBmb3I9XCJub0ludm9pY2VcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAg0J/RgNC+0LTRg9C60YIg0LHQtdC3INGE0LDQutGC0YPRgNCwICjQvNC+0LbQtSDQtNCwINGB0LUg0L/RgNC+0LTQsNCy0LAg0YHQsNC80L4g0LIg0J/QntChINGB0LjRgdGC0LXQvNCw0YLQsClcclxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgJHtlZGl0UGFnZSA/IFwiXCIgOiBodG1sYFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYi0zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY2hlY2staW5wdXRcIiB0eXBlPVwiY2hlY2tib3hcIiB2YWx1ZT1cIlwiIG5hbWU9XCJwcmludExhYmVsXCIgaWQ9XCJwcmludExhYmVsXCIgY2hlY2tlZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1jaGVjay1sYWJlbFwiIGZvcj1cInByaW50TGFiZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgINCf0YDQuNC90YLQuNGA0LDQuSDQtdGC0LjQutC10YLQuFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PmB9XHJcblxyXG48ZGl2IGlkPVwiYWxlcnRcIiBjbGFzcz1cImQtbm9uZSBhbGVydFwiIHJvbGU9XCJhbGVydFwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgJHtbJ21hbmFnZXInLCAnYWRtaW4nXS5pbmNsdWRlcyhsb2dnZWRJblVzZXIucm9sZSkgPyBzdWJtaXRCdG4oeyB0eXBlOiAnc3VibWl0JywgaWNvbjogJ2JpLWNoZWNrLWxnJywgY2xhc3NlczogJ2QtYmxvY2sgbS1hdXRvIGNvbC1zbS0zJyB9KSA6ICcnfVxyXG4gICAgICAgICAgICA8L2Zvcm0gPlxyXG4gICAgICAgIDwvZGl2ID5cclxuICAgIGA7XHJcblxyXG4gICAgcmVuZGVyKHRlbXBsYXRlKCksIGNvbnRhaW5lcik7XHJcbiAgICByZW5kZXIoc2l6ZXNUZW1wbGF0ZShzZWxlY3RlZFNpemVzKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZGVkU2l6ZXMnKSk7XHJcblxyXG4gICAgLy8gSWYgcHJvZHVjdCBoYXMgaW1hZ2VzLCByZW5kZXIgdGhlbVxyXG4gICAgaWYgKHByb2R1Y3QgJiYgcHJvZHVjdC5hZGRpdGlvbmFsSW1hZ2VzLmxlbmd0aCA+IDApXHJcbiAgICAgICAgcmVuZGVyKHByb2R1Y3QuYWRkaXRpb25hbEltYWdlcy5tYXAoaW1nID0+IGltZ1RlbXBsYXRlKGltZy51cmwpKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZGl0aW9uYWxJbWFnZXNQcmV2aWV3JykpO1xyXG5cclxuICAgIC8vIElmIHByb2R1Y3QgaGFzIHNpemVzLCBlbmFibGUgZGVsaXZlcnlQcmljZVBlclVuaXRcclxuICAgIGlmIChzZWxlY3RlZFNpemVzLmxlbmd0aClcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsaXZlcnlQcmljZVBlclVuaXQnKS5kaXNhYmxlZCA9IGZhbHNlO1xyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/views/products/createEdit.js\n");

/***/ }),

/***/ "./src/views/products/products.js":
/*!****************************************!*\
  !*** ./src/views/products/products.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   productsPage: () => (/* binding */ productsPage)\n/* harmony export */ });\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _css_products_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/css/products.css */ \"./src/css/products.css\");\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var _views_nav_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/views/nav.js */ \"./src/views/nav.js\");\n/* harmony import */ var lit_directives_until_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lit/directives/until.js */ \"./node_modules/lit/directives/until.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/api */ \"./src/api.js\");\n/* harmony import */ var _views_components__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/views/components */ \"./src/views/components.js\");\n/* harmony import */ var _views_login__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/views/login */ \"./src/views/login.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar path, pageCtx;\r\n\r\n\r\nvar selectedProduct;\r\n\r\nasync function loadProducts() {\r\n    try {\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].get(path)\r\n        const products = req.data.products;\r\n        const prevCursor = req.data.prevCursor;\r\n        const nextCursor = req.data.nextCursor;\r\n\r\n        return table(products, prevCursor, nextCursor);\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert('Грешка при зареждане на продуктите');\r\n        return;\r\n    }\r\n}\r\n\r\nasync function deleteProduct() {\r\n    try {\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_9__[\"default\"].delete(`/products/${selectedProduct}`);\r\n\r\n        if (req.status === 204) {\r\n            page__WEBPACK_IMPORTED_MODULE_0__('/products');\r\n        }\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert('Възникна грешка');\r\n    }\r\n}\r\n\r\nconst deleteModal = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\" aria-labelledby=\"deleteModalLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h1 class=\"modal-title fs-5\" id=\"deleteModalLabel\">Изтрий продукт</h1>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    Сигурни ли сте че искате да изтриете този продукт? Това действие не може да бъде отменено.\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Откажи</button>\r\n                    <button @click=${deleteProduct} type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\">Изтрий</button>\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </div>`;\r\n\r\nfunction onSubmitPrint(e) {\r\n    e.preventDefault();\r\n    if (!_api__WEBPACK_IMPORTED_MODULE_6__.socket || !_api__WEBPACK_IMPORTED_MODULE_6__.socket.connected) return;\r\n\r\n    const qty = document.getElementById('printQty');\r\n\r\n    _api__WEBPACK_IMPORTED_MODULE_6__.socket.emit('send-print', selectedProduct, qty.value);\r\n\r\n    qty.value = 1;\r\n}\r\n\r\nconst printModal = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`\r\n        <div class=\"modal fade\" id=\"printModal\" tabindex=\"-1\" aria-labelledby=\"printModalLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog\">\r\n                <form @submit=${onSubmitPrint}>\r\n                    <div class=\"modal-content\">\r\n                        <div class=\"modal-header\">\r\n                            <h1 class=\"modal-title fs-5\" id=\"printModalLabel\">Принтирай етикет</h1>\r\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                        </div>\r\n                        <div class=\"modal-body\">\r\n                            <label for=\"printQty\" class=\"form-label\">Брой етикети</label>\r\n                            <input type=\"number\" step=\"1\" value=\"1\" class=\"form-control\" id=\"printQty\" required>\r\n                        </div>\r\n                        <div class=\"modal-footer\">\r\n                            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Затвори</button>\r\n                            <button type=\"submit\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\">Принтирай</button>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n\r\n            </div>\r\n        </div>`;\r\n\r\nconst sizesTemplate = (sizes) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`\r\n    <!-- Sum of all sizes quantity -->\r\n    <div>${sizes.reduce((a, v) => a + v.quantity, 0)} бр.</div>\r\n\r\n    <div class=\"d-flex flex-wrap gap-1\">\r\n        ${sizes.map(size => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`<span class=\"badge text-bg-secondary\">${size.size}: ${size.quantity} бр.</span>`)}\r\n    </div>\r\n`;\r\n\r\nfunction uslugifyPath(path) {\r\n    var newPath = path.split(',').filter(e => e != '');\r\n    newPath = newPath.map(e => (0,_api__WEBPACK_IMPORTED_MODULE_6__.unslugify)(e));\r\n    return newPath.join(' > ');\r\n}\r\n\r\nconst table = (products, prevCursor, nextCursor) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`\r\n    <div class=\"table-responsive mt-2\">\r\n        <table class=\"table table-striped table-hover text-center\">\r\n                <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">Снимка</th>\r\n                        <th scope=\"col\">Категория</th>\r\n                        <th scope=\"col\">Код</th>\r\n                        <th scope=\"col\">Име</th>\r\n                        <th scope=\"col\" class=\"text-nowrap\">Брой пакети</th>\r\n                        <th scope=\"col\">Размери</th>\r\n                        <th scope=\"col\" class=\"text-nowrap\">Доставна</th>\r\n                        <th scope=\"col\" class=\"text-nowrap\">Едро</th>\r\n                        <th scope=\"col\">Дребно</th>\r\n                        <th scope=\"col\">Действия</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    ${products.map(product => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`\r\n                        <tr>\r\n                            <td>${product?.image?.url ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`<img class=\"img-thumbnail\" src=${product.image.url}/>` : ''}</td>\r\n                            <td>${product.category.path ? `${uslugifyPath(product.category.path)} > ${product.category.name}` : product.category.name}</td>\r\n                            <td>${product.code}</td>\r\n                            <td>${product.name}</td>\r\n                            <td class=\"text-nowrap\">${product.quantity} бр.</td>\r\n                            <td>${product.sizes.length > 0 ? sizesTemplate(product.sizes) : ''}</td>\r\n                            <td class=\"text-nowrap\">\r\n                                ${(0,_api__WEBPACK_IMPORTED_MODULE_6__.formatPrice)(product.deliveryPrice)}\r\n                                <div class=\"text-secondary\">${product.sizes.length > 0 ? (0,_api__WEBPACK_IMPORTED_MODULE_6__.formatPrice)(product.deliveryPrice / product.sizes.length) : ''}</div>\r\n                            </td>\r\n                            <td class=\"text-nowrap\">\r\n                                ${(0,_api__WEBPACK_IMPORTED_MODULE_6__.formatPrice)(product.wholesalePrice)}\r\n                                <div class=\"text-secondary\">${product.sizes.length > 0 ? (0,_api__WEBPACK_IMPORTED_MODULE_6__.formatPrice)(product.wholesalePrice / product.sizes.length) : ''}</div>\r\n                            </td>\r\n                            <td class=\"text-nowrap\">${(0,_api__WEBPACK_IMPORTED_MODULE_6__.formatPrice)(product.retailPrice)}</td>\r\n                            <td class=\"text-nowrap\">\r\n                                <a href=\"/products/${product._id}\" class=\"btn btn-primary\"><i class=\"bi bi-pencil\"></i><span class=\"d-none d-sm-inline\"> ${['manager', 'admin'].includes(_views_login__WEBPACK_IMPORTED_MODULE_8__.loggedInUser.role) ? 'Редактирай' : 'Преглед'}</span></a>\r\n                                <button @click=${() => selectedProduct = product} class=\"btn btn-success\" data-bs-toggle=\"modal\" data-bs-target=\"#printModal\"><i class=\"bi bi-upc\"></i><span class=\"d-none d-sm-inline\"> Етикети</span></button>\r\n                                ${_views_login__WEBPACK_IMPORTED_MODULE_8__.loggedInUser.role === 'admin' ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`<button @click=${() => selectedProduct = product._id} class=\"btn btn-danger\" data-bs-toggle=\"modal\" data-bs-target=\"#deleteModal\"><i class=\"bi bi-trash\"></i><span class=\"d-none d-sm-inline\"> Изтрий</span></button>` : ''}\r\n                            </td>\r\n                        </tr>\r\n                    `)}\r\n                </tbody>\r\n            </table>\r\n            <div class=\"d-flex justify-content-center\">\r\n                ${prevCursor ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`<button @click=${() => switchPage(prevCursor)} class=\"btn btn-primary\"><i class=\"bi bi-arrow-left\"></i> Предишна страница</button>` : ''}\r\n                ${nextCursor ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`<button @click=${() => switchPage(nextCursor)} class=\"btn btn-primary\">Следваща страница <i class=\"bi bi-arrow-right\"></i></button>` : ''}\r\n            </div>\r\n    </div>`;\r\n\r\nfunction switchPage(cursor) {\r\n    var uri;\r\n\r\n    uri = (0,_api__WEBPACK_IMPORTED_MODULE_6__.addQuery)(pageCtx, 'cursor', cursor);\r\n\r\n    page__WEBPACK_IMPORTED_MODULE_0__(uri);\r\n}\r\n\r\nfunction productsPage(ctx, next) {\r\n    path = ctx.path;\r\n    pageCtx = ctx;\r\n\r\n    selectedProduct = null;\r\n\r\n    function findProduct(e) {\r\n        const search = e.target.value;\r\n        const lastSearch = ctx.querystring.split('search=')[1]?.split('&')[0];\r\n\r\n        if (lastSearch === search) // Skip\r\n            return;\r\n\r\n        var uri;\r\n        if (search.length == 0) // Remove from query\r\n            uri = (0,_api__WEBPACK_IMPORTED_MODULE_6__.removeQuery)(ctx, 'search');\r\n        else\r\n            uri = (0,_api__WEBPACK_IMPORTED_MODULE_6__.addQuery)(ctx, 'search', search);\r\n\r\n        page__WEBPACK_IMPORTED_MODULE_0__(uri);\r\n    }\r\n\r\n    const filters = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`\r\n    <div class=\"col-9 col-sm\">\r\n        <label for=\"customer\">Продукт:</label>\r\n        <input @keyup=${(0,_api__WEBPACK_IMPORTED_MODULE_6__.delay)(findProduct, 300)} list=\"customersList\" placeholder=\"Въведи име или код\" id=\"customer\" class=\"form-control\" autocomplete=\"off\">\r\n    </div>\r\n`;\r\n\r\n    const template = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`\r\n        ${deleteModal()}\r\n        ${printModal()}\r\n        ${(0,_views_nav_js__WEBPACK_IMPORTED_MODULE_4__.nav)()}\r\n        <div class=\"container-fluid\">\r\n            <a href='/products/create' class=\"btn btn-primary\"><i class=\"bi bi-plus\"></i> Създай продукт</a>\r\n            <a href='/products/restock' class=\"btn btn-primary\"><i class=\"bi bi-boxes\"></i> Зареждане на бройки</a>\r\n            <div id=\"filters\" class=\"mt-2 row align-items-end w-100\">\r\n                ${filters()}\r\n            </div>\r\n            ${(0,lit_directives_until_js__WEBPACK_IMPORTED_MODULE_5__.until)(loadProducts(), _views_components__WEBPACK_IMPORTED_MODULE_7__.spinner)}\r\n        </div >\r\n    `;\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.render)(template(), _app_js__WEBPACK_IMPORTED_MODULE_2__.container);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJO0FBQzlCO0FBQ0E7QUFDQSx3QkFBd0IsMkNBQUssb0JBQW9CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixpREFBSTtBQUMvQixVQUFVO0FBQ1YsVUFBVTtBQUNWLFVBQVUsa0RBQUc7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGNBQWMsOERBQUssaUJBQWlCLHNEQUFPO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLElBQUksbURBQU0sYUFBYSw4Q0FBUztBQUNoQyIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvdmlld3MvcHJvZHVjdHMvcHJvZHVjdHMuanM/OTU1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFnZSBmcm9tICdwYWdlJztcclxuaW1wb3J0ICdAL2Nzcy9wcm9kdWN0cy5jc3MnO1xyXG5pbXBvcnQgeyBjb250YWluZXIgfSBmcm9tIFwiQC9hcHAuanNcIjtcclxuaW1wb3J0IHsgaHRtbCwgcmVuZGVyIH0gZnJvbSAnbGl0L2h0bWwuanMnO1xyXG5pbXBvcnQgeyBuYXYgfSBmcm9tICdAL3ZpZXdzL25hdi5qcyc7XHJcbmltcG9ydCB7IHVudGlsIH0gZnJvbSAnbGl0L2RpcmVjdGl2ZXMvdW50aWwuanMnO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgeyBhZGRRdWVyeSwgZGVsYXksIHJlbW92ZVF1ZXJ5LCB1bnNsdWdpZnksIGZvcm1hdFByaWNlIH0gZnJvbSAnQC9hcGknO1xyXG5pbXBvcnQgeyBzcGlubmVyIH0gZnJvbSAnQC92aWV3cy9jb21wb25lbnRzJztcclxuaW1wb3J0IHsgbG9nZ2VkSW5Vc2VyIH0gZnJvbSAnQC92aWV3cy9sb2dpbic7XHJcbmltcG9ydCB7IHNvY2tldCB9IGZyb20gJ0AvYXBpJztcclxuXHJcbnZhciBwYXRoLCBwYWdlQ3R4O1xyXG5cclxuXHJcbnZhciBzZWxlY3RlZFByb2R1Y3Q7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBsb2FkUHJvZHVjdHMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlcSA9IGF3YWl0IGF4aW9zLmdldChwYXRoKVxyXG4gICAgICAgIGNvbnN0IHByb2R1Y3RzID0gcmVxLmRhdGEucHJvZHVjdHM7XHJcbiAgICAgICAgY29uc3QgcHJldkN1cnNvciA9IHJlcS5kYXRhLnByZXZDdXJzb3I7XHJcbiAgICAgICAgY29uc3QgbmV4dEN1cnNvciA9IHJlcS5kYXRhLm5leHRDdXJzb3I7XHJcblxyXG4gICAgICAgIHJldHVybiB0YWJsZShwcm9kdWN0cywgcHJldkN1cnNvciwgbmV4dEN1cnNvcik7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgYWxlcnQoJ9CT0YDQtdGI0LrQsCDQv9GA0Lgg0LfQsNGA0LXQttC00LDQvdC1INC90LAg0L/RgNC+0LTRg9C60YLQuNGC0LUnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVByb2R1Y3QoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlcSA9IGF3YWl0IGF4aW9zLmRlbGV0ZShgL3Byb2R1Y3RzLyR7c2VsZWN0ZWRQcm9kdWN0fWApO1xyXG5cclxuICAgICAgICBpZiAocmVxLnN0YXR1cyA9PT0gMjA0KSB7XHJcbiAgICAgICAgICAgIHBhZ2UoJy9wcm9kdWN0cycpO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICBhbGVydCgn0JLRitC30L3QuNC60L3QsCDQs9GA0LXRiNC60LAnKTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgZGVsZXRlTW9kYWwgPSAoKSA9PiBodG1sYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlXCIgaWQ9XCJkZWxldGVNb2RhbFwiIHRhYmluZGV4PVwiLTFcIiBhcmlhLWxhYmVsbGVkYnk9XCJkZWxldGVNb2RhbExhYmVsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzPVwibW9kYWwtdGl0bGUgZnMtNVwiIGlkPVwiZGVsZXRlTW9kYWxMYWJlbFwiPtCY0LfRgtGA0LjQuSDQv9GA0L7QtNGD0LrRgjwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4tY2xvc2VcIiBkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgICAgINCh0LjQs9GD0YDQvdC4INC70Lgg0YHRgtC1INGH0LUg0LjRgdC60LDRgtC1INC00LAg0LjQt9GC0YDQuNC10YLQtSDRgtC+0LfQuCDQv9GA0L7QtNGD0LrRgj8g0KLQvtCy0LAg0LTQtdC50YHRgtCy0LjQtSDQvdC1INC80L7QttC1INC00LAg0LHRitC00LUg0L7RgtC80LXQvdC10L3Qvi5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnlcIiBkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiPtCe0YLQutCw0LbQuDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gQGNsaWNrPSR7ZGVsZXRlUHJvZHVjdH0gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIiBkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiPtCY0LfRgtGA0LjQuTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+YDtcclxuXHJcbmZ1bmN0aW9uIG9uU3VibWl0UHJpbnQoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKCFzb2NrZXQgfHwgIXNvY2tldC5jb25uZWN0ZWQpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBxdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnRRdHknKTtcclxuXHJcbiAgICBzb2NrZXQuZW1pdCgnc2VuZC1wcmludCcsIHNlbGVjdGVkUHJvZHVjdCwgcXR5LnZhbHVlKTtcclxuXHJcbiAgICBxdHkudmFsdWUgPSAxO1xyXG59XHJcblxyXG5jb25zdCBwcmludE1vZGFsID0gKCkgPT4gaHRtbGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIGlkPVwicHJpbnRNb2RhbFwiIHRhYmluZGV4PVwiLTFcIiBhcmlhLWxhYmVsbGVkYnk9XCJwcmludE1vZGFsTGFiZWxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiPlxyXG4gICAgICAgICAgICAgICAgPGZvcm0gQHN1Ym1pdD0ke29uU3VibWl0UHJpbnR9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzcz1cIm1vZGFsLXRpdGxlIGZzLTVcIiBpZD1cInByaW50TW9kYWxMYWJlbFwiPtCf0YDQuNC90YLQuNGA0LDQuSDQtdGC0LjQutC10YI8L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4tY2xvc2VcIiBkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJwcmludFF0eVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCR0YDQvtC5INC10YLQuNC60LXRgtC4PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgc3RlcD1cIjFcIiB2YWx1ZT1cIjFcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwicHJpbnRRdHlcIiByZXF1aXJlZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnlcIiBkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiPtCX0LDRgtCy0L7RgNC4PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCI+0J/RgNC40L3RgtC40YDQsNC5PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9mb3JtPlxyXG5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+YDtcclxuXHJcbmNvbnN0IHNpemVzVGVtcGxhdGUgPSAoc2l6ZXMpID0+IGh0bWxgXHJcbiAgICA8IS0tIFN1bSBvZiBhbGwgc2l6ZXMgcXVhbnRpdHkgLS0+XHJcbiAgICA8ZGl2PiR7c2l6ZXMucmVkdWNlKChhLCB2KSA9PiBhICsgdi5xdWFudGl0eSwgMCl9INCx0YAuPC9kaXY+XHJcblxyXG4gICAgPGRpdiBjbGFzcz1cImQtZmxleCBmbGV4LXdyYXAgZ2FwLTFcIj5cclxuICAgICAgICAke3NpemVzLm1hcChzaXplID0+IGh0bWxgPHNwYW4gY2xhc3M9XCJiYWRnZSB0ZXh0LWJnLXNlY29uZGFyeVwiPiR7c2l6ZS5zaXplfTogJHtzaXplLnF1YW50aXR5fSDQsdGALjwvc3Bhbj5gKX1cclxuICAgIDwvZGl2PlxyXG5gO1xyXG5cclxuZnVuY3Rpb24gdXNsdWdpZnlQYXRoKHBhdGgpIHtcclxuICAgIHZhciBuZXdQYXRoID0gcGF0aC5zcGxpdCgnLCcpLmZpbHRlcihlID0+IGUgIT0gJycpO1xyXG4gICAgbmV3UGF0aCA9IG5ld1BhdGgubWFwKGUgPT4gdW5zbHVnaWZ5KGUpKTtcclxuICAgIHJldHVybiBuZXdQYXRoLmpvaW4oJyA+ICcpO1xyXG59XHJcblxyXG5jb25zdCB0YWJsZSA9IChwcm9kdWN0cywgcHJldkN1cnNvciwgbmV4dEN1cnNvcikgPT4gaHRtbGBcclxuICAgIDxkaXYgY2xhc3M9XCJ0YWJsZS1yZXNwb25zaXZlIG10LTJcIj5cclxuICAgICAgICA8dGFibGUgY2xhc3M9XCJ0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWhvdmVyIHRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj7QodC90LjQvNC60LA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj7QmtCw0YLQtdCz0L7RgNC40Y88L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj7QmtC+0LQ8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj7QmNC80LU8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIiBjbGFzcz1cInRleHQtbm93cmFwXCI+0JHRgNC+0Lkg0L/QsNC60LXRgtC4PC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0KDQsNC30LzQtdGA0Lg8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIiBjbGFzcz1cInRleHQtbm93cmFwXCI+0JTQvtGB0YLQsNCy0L3QsDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiIGNsYXNzPVwidGV4dC1ub3dyYXBcIj7QldC00YDQvjwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPtCU0YDQtdCx0L3QvjwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPtCU0LXQudGB0YLQstC40Y88L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICR7cHJvZHVjdHMubWFwKHByb2R1Y3QgPT4gaHRtbGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7cHJvZHVjdD8uaW1hZ2U/LnVybCA/IGh0bWxgPGltZyBjbGFzcz1cImltZy10aHVtYm5haWxcIiBzcmM9JHtwcm9kdWN0LmltYWdlLnVybH0vPmAgOiAnJ308L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7cHJvZHVjdC5jYXRlZ29yeS5wYXRoID8gYCR7dXNsdWdpZnlQYXRoKHByb2R1Y3QuY2F0ZWdvcnkucGF0aCl9ID4gJHtwcm9kdWN0LmNhdGVnb3J5Lm5hbWV9YCA6IHByb2R1Y3QuY2F0ZWdvcnkubmFtZX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7cHJvZHVjdC5jb2RlfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtwcm9kdWN0Lm5hbWV9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInRleHQtbm93cmFwXCI+JHtwcm9kdWN0LnF1YW50aXR5fSDQsdGALjwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtwcm9kdWN0LnNpemVzLmxlbmd0aCA+IDAgPyBzaXplc1RlbXBsYXRlKHByb2R1Y3Quc2l6ZXMpIDogJyd9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInRleHQtbm93cmFwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtmb3JtYXRQcmljZShwcm9kdWN0LmRlbGl2ZXJ5UHJpY2UpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXNlY29uZGFyeVwiPiR7cHJvZHVjdC5zaXplcy5sZW5ndGggPiAwID8gZm9ybWF0UHJpY2UocHJvZHVjdC5kZWxpdmVyeVByaWNlIC8gcHJvZHVjdC5zaXplcy5sZW5ndGgpIDogJyd9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwidGV4dC1ub3dyYXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2Zvcm1hdFByaWNlKHByb2R1Y3Qud2hvbGVzYWxlUHJpY2UpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXNlY29uZGFyeVwiPiR7cHJvZHVjdC5zaXplcy5sZW5ndGggPiAwID8gZm9ybWF0UHJpY2UocHJvZHVjdC53aG9sZXNhbGVQcmljZSAvIHByb2R1Y3Quc2l6ZXMubGVuZ3RoKSA6ICcnfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInRleHQtbm93cmFwXCI+JHtmb3JtYXRQcmljZShwcm9kdWN0LnJldGFpbFByaWNlKX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwidGV4dC1ub3dyYXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL3Byb2R1Y3RzLyR7cHJvZHVjdC5faWR9XCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIj48aSBjbGFzcz1cImJpIGJpLXBlbmNpbFwiPjwvaT48c3BhbiBjbGFzcz1cImQtbm9uZSBkLXNtLWlubGluZVwiPiAke1snbWFuYWdlcicsICdhZG1pbiddLmluY2x1ZGVzKGxvZ2dlZEluVXNlci5yb2xlKSA/ICfQoNC10LTQsNC60YLQuNGA0LDQuScgOiAn0J/RgNC10LPQu9C10LQnfTwvc3Bhbj48L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBAY2xpY2s9JHsoKSA9PiBzZWxlY3RlZFByb2R1Y3QgPSBwcm9kdWN0fSBjbGFzcz1cImJ0biBidG4tc3VjY2Vzc1wiIGRhdGEtYnMtdG9nZ2xlPVwibW9kYWxcIiBkYXRhLWJzLXRhcmdldD1cIiNwcmludE1vZGFsXCI+PGkgY2xhc3M9XCJiaSBiaS11cGNcIj48L2k+PHNwYW4gY2xhc3M9XCJkLW5vbmUgZC1zbS1pbmxpbmVcIj4g0JXRgtC40LrQtdGC0Lg8L3NwYW4+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtsb2dnZWRJblVzZXIucm9sZSA9PT0gJ2FkbWluJyA/IGh0bWxgPGJ1dHRvbiBAY2xpY2s9JHsoKSA9PiBzZWxlY3RlZFByb2R1Y3QgPSBwcm9kdWN0Ll9pZH0gY2xhc3M9XCJidG4gYnRuLWRhbmdlclwiIGRhdGEtYnMtdG9nZ2xlPVwibW9kYWxcIiBkYXRhLWJzLXRhcmdldD1cIiNkZWxldGVNb2RhbFwiPjxpIGNsYXNzPVwiYmkgYmktdHJhc2hcIj48L2k+PHNwYW4gY2xhc3M9XCJkLW5vbmUgZC1zbS1pbmxpbmVcIj4g0JjQt9GC0YDQuNC5PC9zcGFuPjwvYnV0dG9uPmAgOiAnJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgYCl9XHJcbiAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICR7cHJldkN1cnNvciA/IGh0bWxgPGJ1dHRvbiBAY2xpY2s9JHsoKSA9PiBzd2l0Y2hQYWdlKHByZXZDdXJzb3IpfSBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPjxpIGNsYXNzPVwiYmkgYmktYXJyb3ctbGVmdFwiPjwvaT4g0J/RgNC10LTQuNGI0L3QsCDRgdGC0YDQsNC90LjRhtCwPC9idXR0b24+YCA6ICcnfVxyXG4gICAgICAgICAgICAgICAgJHtuZXh0Q3Vyc29yID8gaHRtbGA8YnV0dG9uIEBjbGljaz0keygpID0+IHN3aXRjaFBhZ2UobmV4dEN1cnNvcil9IGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+0KHQu9C10LTQstCw0YnQsCDRgdGC0YDQsNC90LjRhtCwIDxpIGNsYXNzPVwiYmkgYmktYXJyb3ctcmlnaHRcIj48L2k+PC9idXR0b24+YCA6ICcnfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PmA7XHJcblxyXG5mdW5jdGlvbiBzd2l0Y2hQYWdlKGN1cnNvcikge1xyXG4gICAgdmFyIHVyaTtcclxuXHJcbiAgICB1cmkgPSBhZGRRdWVyeShwYWdlQ3R4LCAnY3Vyc29yJywgY3Vyc29yKTtcclxuXHJcbiAgICBwYWdlKHVyaSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwcm9kdWN0c1BhZ2UoY3R4LCBuZXh0KSB7XHJcbiAgICBwYXRoID0gY3R4LnBhdGg7XHJcbiAgICBwYWdlQ3R4ID0gY3R4O1xyXG5cclxuICAgIHNlbGVjdGVkUHJvZHVjdCA9IG51bGw7XHJcblxyXG4gICAgZnVuY3Rpb24gZmluZFByb2R1Y3QoZSkge1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaCA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGxhc3RTZWFyY2ggPSBjdHgucXVlcnlzdHJpbmcuc3BsaXQoJ3NlYXJjaD0nKVsxXT8uc3BsaXQoJyYnKVswXTtcclxuXHJcbiAgICAgICAgaWYgKGxhc3RTZWFyY2ggPT09IHNlYXJjaCkgLy8gU2tpcFxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciB1cmk7XHJcbiAgICAgICAgaWYgKHNlYXJjaC5sZW5ndGggPT0gMCkgLy8gUmVtb3ZlIGZyb20gcXVlcnlcclxuICAgICAgICAgICAgdXJpID0gcmVtb3ZlUXVlcnkoY3R4LCAnc2VhcmNoJyk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB1cmkgPSBhZGRRdWVyeShjdHgsICdzZWFyY2gnLCBzZWFyY2gpO1xyXG5cclxuICAgICAgICBwYWdlKHVyaSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZmlsdGVycyA9ICgpID0+IGh0bWxgXHJcbiAgICA8ZGl2IGNsYXNzPVwiY29sLTkgY29sLXNtXCI+XHJcbiAgICAgICAgPGxhYmVsIGZvcj1cImN1c3RvbWVyXCI+0J/RgNC+0LTRg9C60YI6PC9sYWJlbD5cclxuICAgICAgICA8aW5wdXQgQGtleXVwPSR7ZGVsYXkoZmluZFByb2R1Y3QsIDMwMCl9IGxpc3Q9XCJjdXN0b21lcnNMaXN0XCIgcGxhY2Vob2xkZXI9XCLQktGK0LLQtdC00Lgg0LjQvNC1INC40LvQuCDQutC+0LRcIiBpZD1cImN1c3RvbWVyXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgIDwvZGl2PlxyXG5gO1xyXG5cclxuICAgIGNvbnN0IHRlbXBsYXRlID0gKCkgPT4gaHRtbGBcclxuICAgICAgICAke2RlbGV0ZU1vZGFsKCl9XHJcbiAgICAgICAgJHtwcmludE1vZGFsKCl9XHJcbiAgICAgICAgJHtuYXYoKX1cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkXCI+XHJcbiAgICAgICAgICAgIDxhIGhyZWY9Jy9wcm9kdWN0cy9jcmVhdGUnIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+PGkgY2xhc3M9XCJiaSBiaS1wbHVzXCI+PC9pPiDQodGK0LfQtNCw0Lkg0L/RgNC+0LTRg9C60YI8L2E+XHJcbiAgICAgICAgICAgIDxhIGhyZWY9Jy9wcm9kdWN0cy9yZXN0b2NrJyBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPjxpIGNsYXNzPVwiYmkgYmktYm94ZXNcIj48L2k+INCX0LDRgNC10LbQtNCw0L3QtSDQvdCwINCx0YDQvtC50LrQuDwvYT5cclxuICAgICAgICAgICAgPGRpdiBpZD1cImZpbHRlcnNcIiBjbGFzcz1cIm10LTIgcm93IGFsaWduLWl0ZW1zLWVuZCB3LTEwMFwiPlxyXG4gICAgICAgICAgICAgICAgJHtmaWx0ZXJzKCl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAke3VudGlsKGxvYWRQcm9kdWN0cygpLCBzcGlubmVyKX1cclxuICAgICAgICA8L2RpdiA+XHJcbiAgICBgO1xyXG5cclxuICAgIHJlbmRlcih0ZW1wbGF0ZSgpLCBjb250YWluZXIpO1xyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/views/products/products.js\n");

/***/ }),

/***/ "./src/views/products/restock.js":
/*!***************************************!*\
  !*** ./src/views/products/restock.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   restockPage: () => (/* binding */ restockPage)\n/* harmony export */ });\n/* harmony import */ var _css_products_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/css/products.css */ \"./src/css/products.css\");\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/api.js */ \"./src/api.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _views_nav__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/views/nav */ \"./src/views/nav.js\");\n/* harmony import */ var _views_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/views/components */ \"./src/views/components.js\");\n/* harmony import */ var quagga__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! quagga */ \"./node_modules/quagga/dist/quagga.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar addedProducts = [], products, addedProductsIndex = 0;\r\n\r\n\r\nfunction rerenderTable() {\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.render)(table(addedProducts), document.getElementById('table'));\r\n}\r\n\r\nvar lastScanTime;\r\nfunction scanBarcode() {\r\n    const videoEl = document.getElementById('barcodeVideo');\r\n    const scanBarcodeBtn = document.getElementById('scanBarcode');\r\n    const cancelBarcodeBtn = document.getElementById('stopBarcode');\r\n    scanBarcodeBtn.classList.add('d-none');\r\n    cancelBarcodeBtn.classList.remove('d-none');\r\n\r\n    const config = {\r\n        inputStream: {\r\n            name: \"Live\",\r\n            type: \"LiveStream\",\r\n            target: videoEl,\r\n            constraints: {\r\n                facingMode: \"environment\",\r\n            },\r\n        },\r\n        decoder: {\r\n            readers: [\"ean_reader\", \"code_128_reader\"],\r\n        },\r\n    };\r\n\r\n    quagga__WEBPACK_IMPORTED_MODULE_6__.init(config, function (err) {\r\n        if (err) return console.log(err);\r\n        quagga__WEBPACK_IMPORTED_MODULE_6__.start();\r\n\r\n        quagga__WEBPACK_IMPORTED_MODULE_6__.onDetected(data => {\r\n            const barcode = data.codeResult.code;\r\n            const now = new Date().getTime();\r\n\r\n            // pause scanning for 1 second to skip duplicates\r\n            if (now < lastScanTime + 1000)\r\n                return;\r\n\r\n            lastScanTime = now;\r\n\r\n            const input = document.getElementById('product');\r\n            input.value += barcode;\r\n\r\n            // simulate Enter key pressed on input field to activate addProduct function\r\n            const event = new KeyboardEvent('keyup', {\r\n                key: 'Enter',\r\n                code: 'Enter',\r\n                which: 13,\r\n                keyCode: 13,\r\n            });\r\n\r\n            // dispatch the event on some DOM element\r\n            input.dispatchEvent(event);\r\n        });\r\n    });\r\n}\r\n\r\nfunction stopBarcode() {\r\n    const videoEl = document.getElementById('barcodeVideo');\r\n    const scanBarcodeBtn = document.getElementById('scanBarcode');\r\n    const cancelBarcodeBtn = document.getElementById('stopBarcode');\r\n\r\n    scanBarcodeBtn.classList.remove('d-none');\r\n    cancelBarcodeBtn.classList.add('d-none');\r\n    videoEl.innerHTML = '';\r\n    quagga__WEBPACK_IMPORTED_MODULE_6__.stop();\r\n    quagga__WEBPACK_IMPORTED_MODULE_6__.offDetected();\r\n}\r\n\r\nfunction addProduct(e) {\r\n    e.preventDefault();\r\n\r\n    if (e.target.value === '')\r\n        return;\r\n\r\n    // check if copy-pasted or enter was pressed\r\n    if ((e.ctrlKey && e.key === 'v' || e.code === 'MetaLeft') || e.code === 'Enter' || e.code === 'NumpadEnter') {\r\n        var product, quantity = 1;\r\n\r\n        // check if quantity was entered\r\n        if (e.target.value.split('*').length === 1)\r\n            product = e.target.value;\r\n        else {\r\n            quantity = +e.target.value.split('*')[0];\r\n            quantity = quantity > 0 ? quantity : 1;\r\n            product = e.target.value.split('*')[1];\r\n        }\r\n\r\n        // check if product exists in db by code, barcode (13 digit) or barcode (minus the first digit because its skipped by the scanner)\r\n        const productInDB = products.find(p => p.code === product || p.barcode === product || p.barcode.slice(1) === product);\r\n\r\n        if (productInDB) {\r\n            // check if product already in table and increase quantity\r\n            addedProducts.push({\r\n                _id: productInDB._id,\r\n                index: addedProductsIndex++,\r\n                code: productInDB.code,\r\n                name: productInDB.name,\r\n                ...(productInDB.barcode && { barcode: productInDB.barcode }),\r\n                quantity,\r\n                sizes: productInDB?.sizes.map(size => size.size),\r\n                selectedSizes: productInDB?.sizes.map(size => size.size)\r\n            });\r\n\r\n            rerenderTable();\r\n            (0,_api_js__WEBPACK_IMPORTED_MODULE_2__.successScan)(e.target);\r\n        }\r\n        e.target.value = '';\r\n        e.target.focus();\r\n    }\r\n}\r\n\r\nfunction updateQuantity(e) {\r\n    const index = e.target.closest('tr').getAttribute('addedProductsIndex');\r\n    // find actual index in the array of addedProducts\r\n    const arrayIndex = addedProducts.indexOf(addedProducts.find(product => product.index == index));\r\n    addedProducts[arrayIndex].quantity = e.target.value;\r\n\r\n    rerenderTable();\r\n}\r\n\r\nfunction removeProduct(e) {\r\n    const index = e.target.closest('tr').getAttribute('addedProductsIndex');\r\n    addedProducts = addedProducts.filter(product => product.index != index);\r\n    rerenderTable();\r\n}\r\n\r\nfunction updateSizes(e) {\r\n    const index = e.target.closest('tr').getAttribute('addedProductsIndex');\r\n    // find actual index in the array of addedProducts\r\n    const arrayIndex = addedProducts.indexOf(addedProducts.find(product => product.index == index));\r\n\r\n    if (!e.target.checked)\r\n        addedProducts[arrayIndex].selectedSizes = addedProducts[arrayIndex].selectedSizes.filter(size => size !== e.target.value);\r\n    else\r\n        addedProducts[arrayIndex].selectedSizes.push(e.target.value);\r\n\r\n    rerenderTable();\r\n}\r\n\r\nconst table = (products) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`\r\n    <table class=\"table mt-3 table-striped\">\r\n        <thead>\r\n            <tr>\r\n                <th>Продукт</th>\r\n                <th>Размер</th>\r\n                <th>Брой</th>\r\n                <th>Действия</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            ${products.map(product => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`\r\n                <tr addedProductsIndex=${product.index}>\r\n                    <td>${product.name} [${product.code}]</td>\r\n                    <td>\r\n                        ${product.sizes.map(size => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`\r\n                            <input @change=${updateSizes} class=\"form-check-input\" type=\"checkbox\" value=${size} ?checked=${product?.selectedSizes?.includes(size)} id=\"${product._id}-${size}\">\r\n                            <label class=\"form-check-label me-1\" for=\"${product._id}-${size}\">\r\n                                ${size}\r\n                            </label>\r\n                        `)}\r\n                    </td>\r\n                    <td>\r\n                        <input @change=${updateQuantity} name=\"quantity\" class=\"form-control\" type=\"number\" .value=${product.quantity} step=\"1\" min=\"1\" required/>\r\n                    </td>\r\n                    <td>\r\n                        <button @click=${removeProduct} type=\"button\" class=\"btn btn-danger\">X</button>\r\n                    </td>\r\n                </tr>`)}\r\n            <tr id=\"addNewProduct\">\r\n                <td colspan=\"4\">\r\n                    <div id=\"barcodeVideo\"></div>\r\n                    <div class=\"input-group\">\r\n                        <input @keyup=${addProduct} placeholder=\"Баркод/код\" class=\"form-control\" type=\"text\" name=\"product\" id=\"product\" autocomplete=\"off\">\r\n                        <button @click=${scanBarcode} class=\"btn btn-primary\" type=\"button\" id=\"scanBarcode\"><i class=\"bi bi-camera\"></i> Сканирай</button>\r\n                        <button @click=${stopBarcode} class=\"btn btn-primary d-none\" type=\"button\" id=\"stopBarcode\"><i class=\"bi bi-camera\"></i> Затвори</button>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n`\r\n\r\nasync function restockProducts() {\r\n    ;(0,_views_components__WEBPACK_IMPORTED_MODULE_5__.toggleSubmitBtn)();\r\n    const alertEl = document.getElementById('alert');\r\n    const printLabelCheck = document.getElementById('printLabel').checked;\r\n\r\n    if (addedProducts.length === 0) {\r\n        alertEl.classList.remove('alert-success');\r\n        alertEl.classList.add('alert-danger');\r\n        alertEl.classList.remove('d-none');\r\n        alertEl.textContent = 'Няма добавени продукти!';\r\n        (0,_views_components__WEBPACK_IMPORTED_MODULE_5__.toggleSubmitBtn)();\r\n        return;\r\n    }\r\n\r\n    try {\r\n        const res = await axios__WEBPACK_IMPORTED_MODULE_7__[\"default\"].post('/products/restock', { products: addedProducts, printLabelCheck });\r\n\r\n        if (res.status === 200) {\r\n            addedProductsIndex = 0;\r\n            (0,_views_components__WEBPACK_IMPORTED_MODULE_5__.toggleSubmitBtn)();\r\n\r\n            alertEl.classList.remove('alert-danger');\r\n            alertEl.classList.add('alert-success');\r\n            alertEl.classList.remove('d-none');\r\n            alertEl.textContent = 'Продуктите бяха успешно заредени!';\r\n\r\n            addedProducts = [];\r\n            rerenderTable();\r\n        }\r\n    } catch (err) {\r\n        console.error(err);\r\n        (0,_views_components__WEBPACK_IMPORTED_MODULE_5__.toggleSubmitBtn)();\r\n\r\n        alertEl.classList.remove('alert-success');\r\n        alertEl.classList.add('alert-danger');\r\n        alertEl.classList.remove('d-none');\r\n        alertEl.textContent = err.response.data;\r\n    }\r\n}\r\n\r\nasync function restockPage() {\r\n    try {\r\n        products = (await axios__WEBPACK_IMPORTED_MODULE_7__[\"default\"].get('/products', { params: { page: 'restock' } })).data.products;\r\n        addedProducts = [];\r\n        addedProductsIndex = 0;\r\n    } catch (error) {\r\n        alert('Грешка при зареждане на продуктите')\r\n        console.error(error);\r\n    }\r\n\r\n    const template = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.html)`\r\n    ${(0,_views_nav__WEBPACK_IMPORTED_MODULE_4__.nav)()}\r\n    <div class=\"container-fluid\">\r\n        <div id=\"table\" class=\"table-responsive\"></div>\r\n        <div id=\"alert\" class=\"d-none alert\" role=\"alert\"></div>\r\n        <div class=\"mb-3\">\r\n            <input class=\"form-check-input\" type=\"checkbox\" value=\"\" name=\"printLabel\" id=\"printLabel\" checked>\r\n            <label class=\"form-check-label\" for=\"printLabel\">\r\n                Принтирай етикети\r\n            </label>\r\n        </div>\r\n        ${(0,_views_components__WEBPACK_IMPORTED_MODULE_5__.submitBtn)({ func: restockProducts, icon: \"bi-boxes\", text: \"Зареди бройки\", type: \"button\", classes: \"d-block mx-auto\" })}\r\n    </div>\r\n`;\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.render)(template(), _app_js__WEBPACK_IMPORTED_MODULE_1__.container);\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_3__.render)(table(addedProducts), document.getElementById('table'));\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlEQUFJO0FBQy9CLE1BQU0sK0NBQUc7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDREQUFTLEdBQUcsNEdBQTRHO0FBQ2xJO0FBQ0E7QUFDQTtBQUNBLElBQUksbURBQU0sYUFBYSw4Q0FBUztBQUNoQyxJQUFJLG1EQUFNO0FBQ1YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWJiLml0Ly4vc3JjL3ZpZXdzL3Byb2R1Y3RzL3Jlc3RvY2suanM/MThhZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ0AvY3NzL3Byb2R1Y3RzLmNzcyc7XHJcbmltcG9ydCB7IGNvbnRhaW5lciB9IGZyb20gXCJAL2FwcC5qc1wiO1xyXG5pbXBvcnQgeyBzdWNjZXNzU2NhbiB9IGZyb20gXCJAL2FwaS5qc1wiO1xyXG5pbXBvcnQgeyBodG1sLCByZW5kZXIgfSBmcm9tICdsaXQvaHRtbC5qcyc7XHJcbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcclxuaW1wb3J0IHsgbmF2IH0gZnJvbSAnQC92aWV3cy9uYXYnO1xyXG5pbXBvcnQgeyBzdWJtaXRCdG4sIHRvZ2dsZVN1Ym1pdEJ0biB9IGZyb20gJ0Avdmlld3MvY29tcG9uZW50cyc7XHJcbmltcG9ydCBRdWFnZ2EgZnJvbSAncXVhZ2dhJztcclxuXHJcbnZhciBhZGRlZFByb2R1Y3RzID0gW10sIHByb2R1Y3RzLCBhZGRlZFByb2R1Y3RzSW5kZXggPSAwO1xyXG5cclxuXHJcbmZ1bmN0aW9uIHJlcmVuZGVyVGFibGUoKSB7XHJcbiAgICByZW5kZXIodGFibGUoYWRkZWRQcm9kdWN0cyksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJsZScpKTtcclxufVxyXG5cclxudmFyIGxhc3RTY2FuVGltZTtcclxuZnVuY3Rpb24gc2NhbkJhcmNvZGUoKSB7XHJcbiAgICBjb25zdCB2aWRlb0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhcmNvZGVWaWRlbycpO1xyXG4gICAgY29uc3Qgc2NhbkJhcmNvZGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NhbkJhcmNvZGUnKTtcclxuICAgIGNvbnN0IGNhbmNlbEJhcmNvZGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RvcEJhcmNvZGUnKTtcclxuICAgIHNjYW5CYXJjb2RlQnRuLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpO1xyXG4gICAgY2FuY2VsQmFyY29kZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTtcclxuXHJcbiAgICBjb25zdCBjb25maWcgPSB7XHJcbiAgICAgICAgaW5wdXRTdHJlYW06IHtcclxuICAgICAgICAgICAgbmFtZTogXCJMaXZlXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiTGl2ZVN0cmVhbVwiLFxyXG4gICAgICAgICAgICB0YXJnZXQ6IHZpZGVvRWwsXHJcbiAgICAgICAgICAgIGNvbnN0cmFpbnRzOiB7XHJcbiAgICAgICAgICAgICAgICBmYWNpbmdNb2RlOiBcImVudmlyb25tZW50XCIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZWNvZGVyOiB7XHJcbiAgICAgICAgICAgIHJlYWRlcnM6IFtcImVhbl9yZWFkZXJcIiwgXCJjb2RlXzEyOF9yZWFkZXJcIl0sXHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcblxyXG4gICAgUXVhZ2dhLmluaXQoY29uZmlnLCBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgUXVhZ2dhLnN0YXJ0KCk7XHJcblxyXG4gICAgICAgIFF1YWdnYS5vbkRldGVjdGVkKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBiYXJjb2RlID0gZGF0YS5jb2RlUmVzdWx0LmNvZGU7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gcGF1c2Ugc2Nhbm5pbmcgZm9yIDEgc2Vjb25kIHRvIHNraXAgZHVwbGljYXRlc1xyXG4gICAgICAgICAgICBpZiAobm93IDwgbGFzdFNjYW5UaW1lICsgMTAwMClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGxhc3RTY2FuVGltZSA9IG5vdztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2R1Y3QnKTtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgKz0gYmFyY29kZTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNpbXVsYXRlIEVudGVyIGtleSBwcmVzc2VkIG9uIGlucHV0IGZpZWxkIHRvIGFjdGl2YXRlIGFkZFByb2R1Y3QgZnVuY3Rpb25cclxuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgS2V5Ym9hcmRFdmVudCgna2V5dXAnLCB7XHJcbiAgICAgICAgICAgICAgICBrZXk6ICdFbnRlcicsXHJcbiAgICAgICAgICAgICAgICBjb2RlOiAnRW50ZXInLFxyXG4gICAgICAgICAgICAgICAgd2hpY2g6IDEzLFxyXG4gICAgICAgICAgICAgICAga2V5Q29kZTogMTMsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gZGlzcGF0Y2ggdGhlIGV2ZW50IG9uIHNvbWUgRE9NIGVsZW1lbnRcclxuICAgICAgICAgICAgaW5wdXQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RvcEJhcmNvZGUoKSB7XHJcbiAgICBjb25zdCB2aWRlb0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhcmNvZGVWaWRlbycpO1xyXG4gICAgY29uc3Qgc2NhbkJhcmNvZGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NhbkJhcmNvZGUnKTtcclxuICAgIGNvbnN0IGNhbmNlbEJhcmNvZGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RvcEJhcmNvZGUnKTtcclxuXHJcbiAgICBzY2FuQmFyY29kZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTtcclxuICAgIGNhbmNlbEJhcmNvZGVCdG4uY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcbiAgICB2aWRlb0VsLmlubmVySFRNTCA9ICcnO1xyXG4gICAgUXVhZ2dhLnN0b3AoKTtcclxuICAgIFF1YWdnYS5vZmZEZXRlY3RlZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRQcm9kdWN0KGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZiAoZS50YXJnZXQudmFsdWUgPT09ICcnKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAvLyBjaGVjayBpZiBjb3B5LXBhc3RlZCBvciBlbnRlciB3YXMgcHJlc3NlZFxyXG4gICAgaWYgKChlLmN0cmxLZXkgJiYgZS5rZXkgPT09ICd2JyB8fCBlLmNvZGUgPT09ICdNZXRhTGVmdCcpIHx8IGUuY29kZSA9PT0gJ0VudGVyJyB8fCBlLmNvZGUgPT09ICdOdW1wYWRFbnRlcicpIHtcclxuICAgICAgICB2YXIgcHJvZHVjdCwgcXVhbnRpdHkgPSAxO1xyXG5cclxuICAgICAgICAvLyBjaGVjayBpZiBxdWFudGl0eSB3YXMgZW50ZXJlZFxyXG4gICAgICAgIGlmIChlLnRhcmdldC52YWx1ZS5zcGxpdCgnKicpLmxlbmd0aCA9PT0gMSlcclxuICAgICAgICAgICAgcHJvZHVjdCA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBxdWFudGl0eSA9ICtlLnRhcmdldC52YWx1ZS5zcGxpdCgnKicpWzBdO1xyXG4gICAgICAgICAgICBxdWFudGl0eSA9IHF1YW50aXR5ID4gMCA/IHF1YW50aXR5IDogMTtcclxuICAgICAgICAgICAgcHJvZHVjdCA9IGUudGFyZ2V0LnZhbHVlLnNwbGl0KCcqJylbMV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjaGVjayBpZiBwcm9kdWN0IGV4aXN0cyBpbiBkYiBieSBjb2RlLCBiYXJjb2RlICgxMyBkaWdpdCkgb3IgYmFyY29kZSAobWludXMgdGhlIGZpcnN0IGRpZ2l0IGJlY2F1c2UgaXRzIHNraXBwZWQgYnkgdGhlIHNjYW5uZXIpXHJcbiAgICAgICAgY29uc3QgcHJvZHVjdEluREIgPSBwcm9kdWN0cy5maW5kKHAgPT4gcC5jb2RlID09PSBwcm9kdWN0IHx8IHAuYmFyY29kZSA9PT0gcHJvZHVjdCB8fCBwLmJhcmNvZGUuc2xpY2UoMSkgPT09IHByb2R1Y3QpO1xyXG5cclxuICAgICAgICBpZiAocHJvZHVjdEluREIpIHtcclxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgcHJvZHVjdCBhbHJlYWR5IGluIHRhYmxlIGFuZCBpbmNyZWFzZSBxdWFudGl0eVxyXG4gICAgICAgICAgICBhZGRlZFByb2R1Y3RzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgX2lkOiBwcm9kdWN0SW5EQi5faWQsXHJcbiAgICAgICAgICAgICAgICBpbmRleDogYWRkZWRQcm9kdWN0c0luZGV4KyssXHJcbiAgICAgICAgICAgICAgICBjb2RlOiBwcm9kdWN0SW5EQi5jb2RlLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogcHJvZHVjdEluREIubmFtZSxcclxuICAgICAgICAgICAgICAgIC4uLihwcm9kdWN0SW5EQi5iYXJjb2RlICYmIHsgYmFyY29kZTogcHJvZHVjdEluREIuYmFyY29kZSB9KSxcclxuICAgICAgICAgICAgICAgIHF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgc2l6ZXM6IHByb2R1Y3RJbkRCPy5zaXplcy5tYXAoc2l6ZSA9PiBzaXplLnNpemUpLFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRTaXplczogcHJvZHVjdEluREI/LnNpemVzLm1hcChzaXplID0+IHNpemUuc2l6ZSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXJlbmRlclRhYmxlKCk7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3NTY2FuKGUudGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZS50YXJnZXQudmFsdWUgPSAnJztcclxuICAgICAgICBlLnRhcmdldC5mb2N1cygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVRdWFudGl0eShlKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuZ2V0QXR0cmlidXRlKCdhZGRlZFByb2R1Y3RzSW5kZXgnKTtcclxuICAgIC8vIGZpbmQgYWN0dWFsIGluZGV4IGluIHRoZSBhcnJheSBvZiBhZGRlZFByb2R1Y3RzXHJcbiAgICBjb25zdCBhcnJheUluZGV4ID0gYWRkZWRQcm9kdWN0cy5pbmRleE9mKGFkZGVkUHJvZHVjdHMuZmluZChwcm9kdWN0ID0+IHByb2R1Y3QuaW5kZXggPT0gaW5kZXgpKTtcclxuICAgIGFkZGVkUHJvZHVjdHNbYXJyYXlJbmRleF0ucXVhbnRpdHkgPSBlLnRhcmdldC52YWx1ZTtcclxuXHJcbiAgICByZXJlbmRlclRhYmxlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZVByb2R1Y3QoZSkge1xyXG4gICAgY29uc3QgaW5kZXggPSBlLnRhcmdldC5jbG9zZXN0KCd0cicpLmdldEF0dHJpYnV0ZSgnYWRkZWRQcm9kdWN0c0luZGV4Jyk7XHJcbiAgICBhZGRlZFByb2R1Y3RzID0gYWRkZWRQcm9kdWN0cy5maWx0ZXIocHJvZHVjdCA9PiBwcm9kdWN0LmluZGV4ICE9IGluZGV4KTtcclxuICAgIHJlcmVuZGVyVGFibGUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlU2l6ZXMoZSkge1xyXG4gICAgY29uc3QgaW5kZXggPSBlLnRhcmdldC5jbG9zZXN0KCd0cicpLmdldEF0dHJpYnV0ZSgnYWRkZWRQcm9kdWN0c0luZGV4Jyk7XHJcbiAgICAvLyBmaW5kIGFjdHVhbCBpbmRleCBpbiB0aGUgYXJyYXkgb2YgYWRkZWRQcm9kdWN0c1xyXG4gICAgY29uc3QgYXJyYXlJbmRleCA9IGFkZGVkUHJvZHVjdHMuaW5kZXhPZihhZGRlZFByb2R1Y3RzLmZpbmQocHJvZHVjdCA9PiBwcm9kdWN0LmluZGV4ID09IGluZGV4KSk7XHJcblxyXG4gICAgaWYgKCFlLnRhcmdldC5jaGVja2VkKVxyXG4gICAgICAgIGFkZGVkUHJvZHVjdHNbYXJyYXlJbmRleF0uc2VsZWN0ZWRTaXplcyA9IGFkZGVkUHJvZHVjdHNbYXJyYXlJbmRleF0uc2VsZWN0ZWRTaXplcy5maWx0ZXIoc2l6ZSA9PiBzaXplICE9PSBlLnRhcmdldC52YWx1ZSk7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgYWRkZWRQcm9kdWN0c1thcnJheUluZGV4XS5zZWxlY3RlZFNpemVzLnB1c2goZS50YXJnZXQudmFsdWUpO1xyXG5cclxuICAgIHJlcmVuZGVyVGFibGUoKTtcclxufVxyXG5cclxuY29uc3QgdGFibGUgPSAocHJvZHVjdHMpID0+IGh0bWxgXHJcbiAgICA8dGFibGUgY2xhc3M9XCJ0YWJsZSBtdC0zIHRhYmxlLXN0cmlwZWRcIj5cclxuICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0aD7Qn9GA0L7QtNGD0LrRgjwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGg+0KDQsNC30LzQtdGAPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD7QkdGA0L7QuTwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGg+0JTQtdC50YHRgtCy0LjRjzwvdGg+XHJcbiAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgPC90aGVhZD5cclxuICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICR7cHJvZHVjdHMubWFwKHByb2R1Y3QgPT4gaHRtbGBcclxuICAgICAgICAgICAgICAgIDx0ciBhZGRlZFByb2R1Y3RzSW5kZXg9JHtwcm9kdWN0LmluZGV4fT5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHtwcm9kdWN0Lm5hbWV9IFske3Byb2R1Y3QuY29kZX1dPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7cHJvZHVjdC5zaXplcy5tYXAoc2l6ZSA9PiBodG1sYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IEBjaGFuZ2U9JHt1cGRhdGVTaXplc30gY2xhc3M9XCJmb3JtLWNoZWNrLWlucHV0XCIgdHlwZT1cImNoZWNrYm94XCIgdmFsdWU9JHtzaXplfSA/Y2hlY2tlZD0ke3Byb2R1Y3Q/LnNlbGVjdGVkU2l6ZXM/LmluY2x1ZGVzKHNpemUpfSBpZD1cIiR7cHJvZHVjdC5faWR9LSR7c2l6ZX1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tY2hlY2stbGFiZWwgbWUtMVwiIGZvcj1cIiR7cHJvZHVjdC5faWR9LSR7c2l6ZX1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3NpemV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgKX1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IEBjaGFuZ2U9JHt1cGRhdGVRdWFudGl0eX0gbmFtZT1cInF1YW50aXR5XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwibnVtYmVyXCIgLnZhbHVlPSR7cHJvZHVjdC5xdWFudGl0eX0gc3RlcD1cIjFcIiBtaW49XCIxXCIgcmVxdWlyZWQvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIEBjbGljaz0ke3JlbW92ZVByb2R1Y3R9IHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGFuZ2VyXCI+WDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPmApfVxyXG4gICAgICAgICAgICA8dHIgaWQ9XCJhZGROZXdQcm9kdWN0XCI+XHJcbiAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj1cIjRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiYmFyY29kZVZpZGVvXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBAa2V5dXA9JHthZGRQcm9kdWN0fSBwbGFjZWhvbGRlcj1cItCR0LDRgNC60L7QtC/QutC+0LRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInByb2R1Y3RcIiBpZD1cInByb2R1Y3RcIiBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBAY2xpY2s9JHtzY2FuQmFyY29kZX0gY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIiB0eXBlPVwiYnV0dG9uXCIgaWQ9XCJzY2FuQmFyY29kZVwiPjxpIGNsYXNzPVwiYmkgYmktY2FtZXJhXCI+PC9pPiDQodC60LDQvdC40YDQsNC5PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gQGNsaWNrPSR7c3RvcEJhcmNvZGV9IGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGQtbm9uZVwiIHR5cGU9XCJidXR0b25cIiBpZD1cInN0b3BCYXJjb2RlXCI+PGkgY2xhc3M9XCJiaSBiaS1jYW1lcmFcIj48L2k+INCX0LDRgtCy0L7RgNC4PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgIDwvdGJvZHk+XHJcbiAgICA8L3RhYmxlPlxyXG5gXHJcblxyXG5hc3luYyBmdW5jdGlvbiByZXN0b2NrUHJvZHVjdHMoKSB7XHJcbiAgICB0b2dnbGVTdWJtaXRCdG4oKTtcclxuICAgIGNvbnN0IGFsZXJ0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxlcnQnKTtcclxuICAgIGNvbnN0IHByaW50TGFiZWxDaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludExhYmVsJykuY2hlY2tlZDtcclxuXHJcbiAgICBpZiAoYWRkZWRQcm9kdWN0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FsZXJ0LXN1Y2Nlc3MnKTtcclxuICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LWRhbmdlcicpO1xyXG4gICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcbiAgICAgICAgYWxlcnRFbC50ZXh0Q29udGVudCA9ICfQndGP0LzQsCDQtNC+0LHQsNCy0LXQvdC4INC/0YDQvtC00YPQutGC0LghJztcclxuICAgICAgICB0b2dnbGVTdWJtaXRCdG4oKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5wb3N0KCcvcHJvZHVjdHMvcmVzdG9jaycsIHsgcHJvZHVjdHM6IGFkZGVkUHJvZHVjdHMsIHByaW50TGFiZWxDaGVjayB9KTtcclxuXHJcbiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICBhZGRlZFByb2R1Y3RzSW5kZXggPSAwO1xyXG4gICAgICAgICAgICB0b2dnbGVTdWJtaXRCdG4oKTtcclxuXHJcbiAgICAgICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LnJlbW92ZSgnYWxlcnQtZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgIGFsZXJ0RWwuY2xhc3NMaXN0LmFkZCgnYWxlcnQtc3VjY2VzcycpO1xyXG4gICAgICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG4gICAgICAgICAgICBhbGVydEVsLnRleHRDb250ZW50ID0gJ9Cf0YDQvtC00YPQutGC0LjRgtC1INCx0Y/RhdCwINGD0YHQv9C10YjQvdC+INC30LDRgNC10LTQtdC90LghJztcclxuXHJcbiAgICAgICAgICAgIGFkZGVkUHJvZHVjdHMgPSBbXTtcclxuICAgICAgICAgICAgcmVyZW5kZXJUYWJsZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICB0b2dnbGVTdWJtaXRCdG4oKTtcclxuXHJcbiAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QucmVtb3ZlKCdhbGVydC1zdWNjZXNzJyk7XHJcbiAgICAgICAgYWxlcnRFbC5jbGFzc0xpc3QuYWRkKCdhbGVydC1kYW5nZXInKTtcclxuICAgICAgICBhbGVydEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG4gICAgICAgIGFsZXJ0RWwudGV4dENvbnRlbnQgPSBlcnIucmVzcG9uc2UuZGF0YTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc3RvY2tQYWdlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBwcm9kdWN0cyA9IChhd2FpdCBheGlvcy5nZXQoJy9wcm9kdWN0cycsIHsgcGFyYW1zOiB7IHBhZ2U6ICdyZXN0b2NrJyB9IH0pKS5kYXRhLnByb2R1Y3RzO1xyXG4gICAgICAgIGFkZGVkUHJvZHVjdHMgPSBbXTtcclxuICAgICAgICBhZGRlZFByb2R1Y3RzSW5kZXggPSAwO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBhbGVydCgn0JPRgNC10YjQutCwINC/0YDQuCDQt9Cw0YDQtdC20LTQsNC90LUg0L3QsCDQv9GA0L7QtNGD0LrRgtC40YLQtScpXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdGVtcGxhdGUgPSAoKSA9PiBodG1sYFxyXG4gICAgJHtuYXYoKX1cclxuICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWRcIj5cclxuICAgICAgICA8ZGl2IGlkPVwidGFibGVcIiBjbGFzcz1cInRhYmxlLXJlc3BvbnNpdmVcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2IGlkPVwiYWxlcnRcIiBjbGFzcz1cImQtbm9uZSBhbGVydFwiIHJvbGU9XCJhbGVydFwiPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtYi0zXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY2hlY2staW5wdXRcIiB0eXBlPVwiY2hlY2tib3hcIiB2YWx1ZT1cIlwiIG5hbWU9XCJwcmludExhYmVsXCIgaWQ9XCJwcmludExhYmVsXCIgY2hlY2tlZD5cclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1jaGVjay1sYWJlbFwiIGZvcj1cInByaW50TGFiZWxcIj5cclxuICAgICAgICAgICAgICAgINCf0YDQuNC90YLQuNGA0LDQuSDQtdGC0LjQutC10YLQuFxyXG4gICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgICR7c3VibWl0QnRuKHsgZnVuYzogcmVzdG9ja1Byb2R1Y3RzLCBpY29uOiBcImJpLWJveGVzXCIsIHRleHQ6IFwi0JfQsNGA0LXQtNC4INCx0YDQvtC50LrQuFwiLCB0eXBlOiBcImJ1dHRvblwiLCBjbGFzc2VzOiBcImQtYmxvY2sgbXgtYXV0b1wiIH0pfVxyXG4gICAgPC9kaXY+XHJcbmA7XHJcblxyXG4gICAgcmVuZGVyKHRlbXBsYXRlKCksIGNvbnRhaW5lcik7XHJcbiAgICByZW5kZXIodGFibGUoYWRkZWRQcm9kdWN0cyksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJsZScpKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/products/restock.js\n");

/***/ }),

/***/ "./src/views/products/routes.js":
/*!**************************************!*\
  !*** ./src/views/products/routes.js ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   productsRoutes: () => (/* binding */ productsRoutes)\n/* harmony export */ });\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _views_products_products__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/views/products/products */ \"./src/views/products/products.js\");\n/* harmony import */ var _views_products_createEdit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/views/products/createEdit */ \"./src/views/products/createEdit.js\");\n/* harmony import */ var _views_products_restock__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/views/products/restock */ \"./src/views/products/restock.js\");\n\r\n\r\n\r\n\r\n\r\nfunction productsRoutes(auth) {\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/products', auth, _views_products_products__WEBPACK_IMPORTED_MODULE_1__.productsPage);\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/products/create', auth, _views_products_createEdit__WEBPACK_IMPORTED_MODULE_2__.createEditProductPage);\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/products/restock', auth, _views_products_restock__WEBPACK_IMPORTED_MODULE_3__.restockPage);\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/products/:id', auth, _views_products_createEdit__WEBPACK_IMPORTED_MODULE_2__.createEditProductPage);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvcHJvZHVjdHMvcm91dGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdCO0FBQ2lDO0FBQ1c7QUFDYjtBQUN2RDtBQUNPO0FBQ1AsSUFBSSxpQ0FBSSxvQkFBb0Isa0VBQVk7QUFDeEMsSUFBSSxpQ0FBSSwyQkFBMkIsNkVBQXFCO0FBQ3hELElBQUksaUNBQUksNEJBQTRCLGdFQUFXO0FBQy9DLElBQUksaUNBQUksd0JBQXdCLDZFQUFxQjtBQUNyRCIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvdmlld3MvcHJvZHVjdHMvcm91dGVzLmpzPzdhNTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhZ2UgZnJvbSAncGFnZSc7XHJcbmltcG9ydCB7IHByb2R1Y3RzUGFnZSB9IGZyb20gJ0Avdmlld3MvcHJvZHVjdHMvcHJvZHVjdHMnO1xyXG5pbXBvcnQgeyBjcmVhdGVFZGl0UHJvZHVjdFBhZ2UgfSBmcm9tICdAL3ZpZXdzL3Byb2R1Y3RzL2NyZWF0ZUVkaXQnO1xyXG5pbXBvcnQgeyByZXN0b2NrUGFnZSB9IGZyb20gJ0Avdmlld3MvcHJvZHVjdHMvcmVzdG9jayc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJvZHVjdHNSb3V0ZXMoYXV0aCkge1xyXG4gICAgcGFnZSgnL3Byb2R1Y3RzJywgYXV0aCwgcHJvZHVjdHNQYWdlKTtcclxuICAgIHBhZ2UoJy9wcm9kdWN0cy9jcmVhdGUnLCBhdXRoLCBjcmVhdGVFZGl0UHJvZHVjdFBhZ2UpO1xyXG4gICAgcGFnZSgnL3Byb2R1Y3RzL3Jlc3RvY2snLCBhdXRoLCByZXN0b2NrUGFnZSk7XHJcbiAgICBwYWdlKCcvcHJvZHVjdHMvOmlkJywgYXV0aCwgY3JlYXRlRWRpdFByb2R1Y3RQYWdlKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/products/routes.js\n");

/***/ }),

/***/ "./src/views/references/orders/references.orders.js":
/*!**********************************************************!*\
  !*** ./src/views/references/orders/references.orders.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   referencesOrdersPage: () => (/* binding */ referencesOrdersPage)\n/* harmony export */ });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/app.js */ \"./src/app.js\");\n/* harmony import */ var lit_html_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/html.js */ \"./node_modules/lit/html.js\");\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/api.js */ \"./src/api.js\");\n/* harmony import */ var _views_nav__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/views/nav */ \"./src/views/nav.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var lit_directives_until_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lit/directives/until.js */ \"./node_modules/lit/directives/until.js\");\n/* harmony import */ var _views_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/views/components */ \"./src/views/components.js\");\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _views_login__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/views/login */ \"./src/views/login.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar pageCtx, path, params, selectedFilters = {};\r\nvar temp;\r\n\r\nfunction switchPage(cursor) {\r\n    const query = pageCtx.querystring;\r\n\r\n    if (query.length === 0)\r\n        page__WEBPACK_IMPORTED_MODULE_6__('/references/orders/?cursor=' + cursor);\r\n    else if (query.includes('cursor')) {\r\n        // replace cursor value in query\r\n        const newQuery = query.split('&').map(q => q.includes('cursor') ? 'cursor=' + cursor : q).join('&');\r\n        page__WEBPACK_IMPORTED_MODULE_6__('/references/orders/?' + newQuery);\r\n    } else {\r\n        // add cursor to query\r\n        page__WEBPACK_IMPORTED_MODULE_6__('/references/orders/?' + query + '&cursor=' + cursor);\r\n    }\r\n}\r\n\r\nconst table = (orders, prevCursor, nextCursor) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n    <div class=\"table-responsive\">\r\n        <table class=\"mt-3 table table-striped table-hover text-center\">\r\n            <thead>\r\n                <tr>\r\n                    <th scope=\"col\">Тип</th>\r\n                    <th scope=\"col\">Номер</th>\r\n                    <th scope=\"col\">Партньор</th>\r\n                    <th scope=\"col\">Обект</th>\r\n                    <th scope=\"col\">Потребител</th>\r\n                    <th scope=\"col\">Дата</th>\r\n                    <th scope=\"col\">Артикул</th>\r\n                    <th scope=\"col\">Цена</th>\r\n                    <th scope=\"col\">Пакети/Бройки</th>\r\n                    <th scope=\"col\">Бройки в пакет/Размер</th>\r\n                    <th scope=\"col\">Отстъпка %</th>\r\n                    <th scope=\"col\">Сума</th>\r\n                    <th scope=\"col\">Начин на плащане</th>\r\n                    <th scope=\"col\">Тип на продажба</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                ${orders?.map(order => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n                    ${order.products.map(product => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n                    <tr>\r\n                        <td>${params.documentTypes[order.type]}</td>\r\n                        <td>${order.number}</td>\r\n                        <td>${order.customer.name}</td>\r\n                        <td>${order.company.name}</td>\r\n                        <td>${order.user.username}</td>\r\n                        <td>${new Date(order.date).toLocaleDateString('bg')}</td>\r\n                        <td>${product.product ? `${product.product.name} [${product.product.code}]` : product.name}</td>\r\n                        <td>${(0,_api_js__WEBPACK_IMPORTED_MODULE_2__.formatPrice)(product.price)}</td>\r\n                        <td>${product.quantity}</td>\r\n                        ${console.log(product)}\r\n                        <td>${product?.qtyInPackage || product?.selectedSizes?.length || ''}</td>\r\n                        <td>${product?.discount}</td>\r\n                        <td>${(0,_api_js__WEBPACK_IMPORTED_MODULE_2__.formatPrice)((product.price * product.quantity) * (1 - product.discount / 100))}</td>\r\n                        <td>${params.paymentTypes[order.paymentType]}</td>\r\n                        <td>${params.orderTypes[order.orderType]}</td>\r\n                    </tr>\r\n                    `)}\r\n                `)}\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <div class=\"d-flex justify-content-center\">\r\n        ${prevCursor ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<button @click=${() => switchPage(prevCursor)} class=\"btn btn-primary\"><i class=\"bi bi-arrow-left\"></i> Предишна страница</button>` : ''}\r\n        ${nextCursor ? (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<button @click=${() => switchPage(nextCursor)} class=\"btn btn-primary\">Следваща страница <i class=\"bi bi-arrow-right\"></i></button>` : ''}\r\n    </div>\r\n`;\r\n\r\nasync function applyFilters(e) {\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData(document.getElementById('filters'));\r\n    const data = Object.fromEntries(formData.entries());\r\n\r\n    if (data.customer)\r\n        data.customer = data.customer.split('[')[1].split(']')[0];\r\n\r\n    if (data.company)\r\n        data.company = data.company.split('[')[1].split(']')[0];\r\n\r\n    if (data.user)\r\n        data.user = data.user.split('[')[1].split(']')[0];\r\n\r\n    if (data.product)\r\n        data.product = data.product.split('[')[1].split(']')[0];\r\n\r\n    // remove empty fields\r\n    Object.keys(data).forEach(key => data[key] === '' && delete data[key]);\r\n\r\n    if (data.length === 0)\r\n        page__WEBPACK_IMPORTED_MODULE_6__('/references/orders')\r\n    else if (data.length === 1)\r\n        page__WEBPACK_IMPORTED_MODULE_6__(`/references/orders?${Object.keys(data)[0]}=${Object.values(data)[0]}`);\r\n    else {\r\n        const uri = Object.keys(data).map(key => `${key}=${data[key]}`).join('&');\r\n        page__WEBPACK_IMPORTED_MODULE_6__(`/references/orders?${uri}`);\r\n    }\r\n}\r\n\r\nconst filters = (customers, companies, users, products, params) => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n        <form @change=${applyFilters} id=\"filters\" class=\"row align-items-end w-100 g-3\">\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"product\">Продукт:</label>\r\n                <input .value=${(temp = products.filter(c => c.code === selectedFilters?.product)[0]) ? `${temp.name} [${temp.code}]` : ''} list=\"productsList\" placeholder=\"Име/код\" name=\"product\" id=\"product\" class=\"form-control\" autocomplete=\"off\">\r\n                <datalist id=\"productsList\">\r\n                    ${products.map(product => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<option value=${`${product.name} [${product.code}]`}>`)}\r\n                </datalist>\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"customer\">Партньор:</label>\r\n                <input .value=${(temp = customers.filter(c => c.vat === selectedFilters?.customer)[0]) ? `${temp.name} [${temp.vat}]` : ''} list=\"customersList\" placeholder=\"Всички\" name=\"customer\" id=\"customer\" class=\"form-control\" autocomplete=\"off\">\r\n                <datalist id=\"customersList\">\r\n                    ${customers.map(customer => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<option value=${`${customer.name} [${customer.vat}]`}>`)}\r\n                </datalist>\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"company\">Издадена от фирма:</label>\r\n                <input .value=${(temp = companies.filter(c => c.vat === selectedFilters?.company)[0]) ? `${temp.name} [${temp.vat}]` : ''} list=\"companiesList\" placeholder=\"Всички\" name=\"company\" id=\"company\" class=\"form-control\" autocomplete=\"off\">\r\n                <datalist id=\"companiesList\">\r\n                    ${companies.map(company => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<option value=${`${company.name} [${company.vat}]`}>`)}\r\n                </datalist>\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"user\">Издадена от потребител:</label>\r\n                <input .value=${(temp = users.filter(c => c._id === selectedFilters?.user)[0]) ? `${temp.username} [${temp._id}]` : ''} list=\"usersList\" placeholder=\"Всички\" name=\"user\" id=\"user\" class=\"form-control\" autocomplete=\"off\">\r\n                <datalist id=\"usersList\">\r\n                    ${users.map(user => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<option value=${`${user.username} [${user._id}]`}>`)}\r\n                </datalist>\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label class=\"form-label\">Номер на документ</label>\r\n                <div class=\"d-flex gap-1 align-items-center\">\r\n                    <input type=\"text\" .value=${selectedFilters?.numberFrom || ''} id=\"numberFrom\" name=\"numberFrom\" class=\"form-control\" autocomplete=\"off\"/>\r\n                    <span>-</span>\r\n                    <input type=\"text\" .value=${selectedFilters?.numberTo || ''} id=\"numberTo\" name=\"numberTo\" class=\"form-control\" autocomplete=\"off\"/>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"type\" class=\"form-label\">Тип на документ:</label>\r\n                <select id=\"type\" name=\"type\" class=\"form-control\">\r\n                    <option value=\"\" selected>Всички</option>\r\n                    ${Object.entries(params.documentTypes).map(type => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<option ?selected=${selectedFilters?.type === type[0]} value=${type[0]}>${type[1]}</option>`)}\r\n                </select>\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"paymentType\" class=\"form-label\">Начин на плащане</label>\r\n                <select id=\"paymentType\" name=\"paymentType\" class=\"form-control\">\r\n                    <option value=\"\" selected>Всички</option>\r\n                    ${Object.entries(params.paymentTypes).map(type => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<option ?selected=${selectedFilters?.paymentType === type[0]} value=${type[0]}>${type[1]}</option>`)}\r\n                </select>\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"orderType\">Тип на продажба</label>\r\n                <select id=\"orderType\" name=\"orderType\" class=\"form-control\">\r\n                    <option value=\"\" selected>Всички</option>\r\n                    ${Object.entries(params.orderTypes).map(type => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`<option ?selected=${selectedFilters?.orderType === type[0]} value=${type[0]}>${type[1]}</option>`)}\r\n                </select>\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"from\">От:</label>\r\n                <input type=\"date\" id=\"from\" .value=${selectedFilters?.from || ''} name=\"from\" class=\"form-control\">\r\n            </div>\r\n            <div class=\"col-6 col-sm\">\r\n                <label for=\"to\">До:</label>\r\n                <input type=\"date\" id=\"to\" .value=${selectedFilters?.to || ''} name=\"to\" class=\"form-control\">\r\n            </div>\r\n        </form>\r\n`;\r\n\r\nasync function loadReferences() {\r\n    try {\r\n        const req = await axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"].get(path)\r\n        const orders = req.data.orders;\r\n        const prevCursor = req.data.prevCursor;\r\n        const nextCursor = req.data.nextCursor;\r\n\r\n        //TODO When all controlers done, do a one route to get all params\r\n        params = (await axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"].get('/orders/params')).data;\r\n        const customers = (await axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"].get('/customers', { params: { page: 'references' } })).data.customers;\r\n        const companies = (await axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"].get('/companies')).data;\r\n        const users = (await axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"].get('/users')).data;\r\n        const products = (await axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"].get('/products', { params: { page: 'references' } })).data.products;\r\n\r\n        return (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n        ${filters(customers, companies, users, products, params)}\r\n        ${table(orders, prevCursor, nextCursor)}`\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert('Възникна грешка');\r\n    }\r\n}\r\n\r\nfunction referencesOrdersPage(ctx, next) {\r\n    if (_views_login__WEBPACK_IMPORTED_MODULE_7__.loggedInUser.role !== 'admin')\r\n        return page__WEBPACK_IMPORTED_MODULE_6__('/');\r\n\r\n    path = ctx.path;\r\n    pageCtx = ctx;\r\n    temp = undefined;\r\n\r\n    // check if filters are applied\r\n    //TODO Use this way to get params from filters everywhere\r\n    if (ctx.querystring)\r\n        selectedFilters = Object.fromEntries(new URLSearchParams(ctx.querystring));\r\n    else\r\n        selectedFilters = {};\r\n\r\n    const template = () => (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.html)`\r\n        ${(0,_views_nav__WEBPACK_IMPORTED_MODULE_3__.nav)()}\r\n        <div class=\"container-fluid\">\r\n            <button class=\"btn btn-primary text-end\">Принтирай</button>\r\n            ${(0,lit_directives_until_js__WEBPACK_IMPORTED_MODULE_4__.until)(loadReferences(), _views_components__WEBPACK_IMPORTED_MODULE_5__.spinner)}\r\n        </div>\r\n    `;\r\n\r\n    (0,lit_html_js__WEBPACK_IMPORTED_MODULE_1__.render)(template(), _app_js__WEBPACK_IMPORTED_MODULE_0__.container);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvcmVmZXJlbmNlcy9vcmRlcnMvcmVmZXJlbmNlcy5vcmRlcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFxQztBQUNNO0FBQ0o7QUFDTDtBQUNSO0FBQ3NCO0FBQ0g7QUFDckI7QUFDcUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUNBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlDQUFJO0FBQ1osTUFBTTtBQUNOO0FBQ0EsUUFBUSxpQ0FBSTtBQUNaO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxpREFBSTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscUJBQXFCLGlEQUFJO0FBQzNDLHNCQUFzQiw4QkFBOEIsaURBQUk7QUFDeEQ7QUFDQSw4QkFBOEIsaUNBQWlDO0FBQy9ELDhCQUE4QixhQUFhO0FBQzNDLDhCQUE4QixvQkFBb0I7QUFDbEQsOEJBQThCLG1CQUFtQjtBQUNqRCw4QkFBOEIsb0JBQW9CO0FBQ2xELDhCQUE4Qiw4Q0FBOEM7QUFDNUUsOEJBQThCLHFCQUFxQixzQkFBc0IsR0FBRyxxQkFBcUIsa0JBQWtCO0FBQ25ILDhCQUE4QixvREFBVyxnQkFBZ0I7QUFDekQsOEJBQThCLGlCQUFpQjtBQUMvQywwQkFBMEI7QUFDMUIsOEJBQThCLDhEQUE4RDtBQUM1Riw4QkFBOEIsa0JBQWtCO0FBQ2hELDhCQUE4QixvREFBVyxvRUFBb0U7QUFDN0csOEJBQThCLHVDQUF1QztBQUNyRSw4QkFBOEIsbUNBQW1DO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxhQUFhLGlEQUFJLGtCQUFrQiw4QkFBOEI7QUFDM0UsVUFBVSxhQUFhLGlEQUFJLGtCQUFrQiw4QkFBOEI7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlDQUFJO0FBQ1o7QUFDQSxRQUFRLGlDQUFJLHVCQUF1QixxQkFBcUIsR0FBRyx1QkFBdUI7QUFDbEY7QUFDQSxvREFBb0QsSUFBSSxHQUFHLFVBQVU7QUFDckUsUUFBUSxpQ0FBSSx1QkFBdUIsSUFBSTtBQUN2QztBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsaURBQUk7QUFDdkUsd0JBQXdCLGNBQWM7QUFDdEM7QUFDQTtBQUNBLGdDQUFnQywyRUFBMkUsV0FBVyxHQUFHLFVBQVUsU0FBUztBQUM1STtBQUNBLHNCQUFzQix3QkFBd0IsaURBQUksaUJBQWlCLEdBQUcsY0FBYyxHQUFHLGFBQWEsR0FBRztBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw0RUFBNEUsV0FBVyxHQUFHLFNBQVMsU0FBUztBQUM1STtBQUNBLHNCQUFzQiwwQkFBMEIsaURBQUksaUJBQWlCLEdBQUcsZUFBZSxHQUFHLGFBQWEsR0FBRztBQUMxRztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQywyRUFBMkUsV0FBVyxHQUFHLFNBQVMsU0FBUztBQUMzSTtBQUNBLHNCQUFzQix5QkFBeUIsaURBQUksaUJBQWlCLEdBQUcsY0FBYyxHQUFHLFlBQVksR0FBRztBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxvRUFBb0UsZUFBZSxHQUFHLFNBQVMsU0FBUztBQUN4STtBQUNBLHNCQUFzQixrQkFBa0IsaURBQUksaUJBQWlCLEdBQUcsZUFBZSxHQUFHLFNBQVMsR0FBRztBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELG1DQUFtQztBQUNuRjtBQUNBLGdEQUFnRCxpQ0FBaUM7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlEQUFpRCxpREFBSSxxQkFBcUIsbUNBQW1DLFFBQVEsUUFBUSxHQUFHLFFBQVE7QUFDOUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGdEQUFnRCxpREFBSSxxQkFBcUIsMENBQTBDLFFBQVEsUUFBUSxHQUFHLFFBQVE7QUFDcEs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDhDQUE4QyxpREFBSSxxQkFBcUIsd0NBQXdDLFFBQVEsUUFBUSxHQUFHLFFBQVE7QUFDaEs7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsNkJBQTZCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCwyQkFBMkI7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDZDQUFLO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkNBQUs7QUFDN0IsaUNBQWlDLDZDQUFLLHFCQUFxQixVQUFVLHNCQUFzQjtBQUMzRixpQ0FBaUMsNkNBQUs7QUFDdEMsNkJBQTZCLDZDQUFLO0FBQ2xDLGdDQUFnQyw2Q0FBSyxvQkFBb0IsVUFBVSxzQkFBc0I7QUFDekY7QUFDQSxlQUFlLGlEQUFJO0FBQ25CLFVBQVU7QUFDVixVQUFVLHNDQUFzQztBQUNoRCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsUUFBUSxzREFBWTtBQUNwQixlQUFlLGlDQUFJO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixpREFBSTtBQUMvQixVQUFVLCtDQUFHO0FBQ2I7QUFDQTtBQUNBLGNBQWMsOERBQUssbUJBQW1CLHNEQUFPO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLElBQUksbURBQU0sYUFBYSw4Q0FBUztBQUNoQyIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmIuaXQvLi9zcmMvdmlld3MvcmVmZXJlbmNlcy9vcmRlcnMvcmVmZXJlbmNlcy5vcmRlcnMuanM/ZjA3NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb250YWluZXIgfSBmcm9tIFwiQC9hcHAuanNcIjtcclxuaW1wb3J0IHsgaHRtbCwgcmVuZGVyIH0gZnJvbSAnbGl0L2h0bWwuanMnO1xyXG5pbXBvcnQgeyBmb3JtYXRQcmljZSB9IGZyb20gJ0AvYXBpLmpzJztcclxuaW1wb3J0IHsgbmF2IH0gZnJvbSBcIkAvdmlld3MvbmF2XCI7XHJcbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcclxuaW1wb3J0IHsgdW50aWwgfSBmcm9tIFwibGl0L2RpcmVjdGl2ZXMvdW50aWwuanNcIjtcclxuaW1wb3J0IHsgc3Bpbm5lciB9IGZyb20gXCJAL3ZpZXdzL2NvbXBvbmVudHNcIjtcclxuaW1wb3J0IHBhZ2UgZnJvbSAncGFnZSc7XHJcbmltcG9ydCB7IGxvZ2dlZEluVXNlciB9IGZyb20gXCJAL3ZpZXdzL2xvZ2luXCI7XHJcblxyXG52YXIgcGFnZUN0eCwgcGF0aCwgcGFyYW1zLCBzZWxlY3RlZEZpbHRlcnMgPSB7fTtcclxudmFyIHRlbXA7XHJcblxyXG5mdW5jdGlvbiBzd2l0Y2hQYWdlKGN1cnNvcikge1xyXG4gICAgY29uc3QgcXVlcnkgPSBwYWdlQ3R4LnF1ZXJ5c3RyaW5nO1xyXG5cclxuICAgIGlmIChxdWVyeS5sZW5ndGggPT09IDApXHJcbiAgICAgICAgcGFnZSgnL3JlZmVyZW5jZXMvb3JkZXJzLz9jdXJzb3I9JyArIGN1cnNvcik7XHJcbiAgICBlbHNlIGlmIChxdWVyeS5pbmNsdWRlcygnY3Vyc29yJykpIHtcclxuICAgICAgICAvLyByZXBsYWNlIGN1cnNvciB2YWx1ZSBpbiBxdWVyeVxyXG4gICAgICAgIGNvbnN0IG5ld1F1ZXJ5ID0gcXVlcnkuc3BsaXQoJyYnKS5tYXAocSA9PiBxLmluY2x1ZGVzKCdjdXJzb3InKSA/ICdjdXJzb3I9JyArIGN1cnNvciA6IHEpLmpvaW4oJyYnKTtcclxuICAgICAgICBwYWdlKCcvcmVmZXJlbmNlcy9vcmRlcnMvPycgKyBuZXdRdWVyeSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGFkZCBjdXJzb3IgdG8gcXVlcnlcclxuICAgICAgICBwYWdlKCcvcmVmZXJlbmNlcy9vcmRlcnMvPycgKyBxdWVyeSArICcmY3Vyc29yPScgKyBjdXJzb3IpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCB0YWJsZSA9IChvcmRlcnMsIHByZXZDdXJzb3IsIG5leHRDdXJzb3IpID0+IGh0bWxgXHJcbiAgICA8ZGl2IGNsYXNzPVwidGFibGUtcmVzcG9uc2l2ZVwiPlxyXG4gICAgICAgIDx0YWJsZSBjbGFzcz1cIm10LTMgdGFibGUgdGFibGUtc3RyaXBlZCB0YWJsZS1ob3ZlciB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0KLQuNC/PC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj7QndC+0LzQtdGAPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj7Qn9Cw0YDRgtC90YzQvtGAPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj7QntCx0LXQutGCPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj7Qn9C+0YLRgNC10LHQuNGC0LXQuzwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0JTQsNGC0LA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPtCQ0YDRgtC40LrRg9C7PC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj7QptC10L3QsDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0J/QsNC60LXRgtC4L9CR0YDQvtC50LrQuDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+0JHRgNC+0LnQutC4INCyINC/0LDQutC10YIv0KDQsNC30LzQtdGAPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj7QntGC0YHRgtGK0L/QutCwICU8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPtCh0YPQvNCwPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj7QndCw0YfQuNC9INC90LAg0L/Qu9Cw0YnQsNC90LU8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPtCi0LjQvyDQvdCwINC/0YDQvtC00LDQttCx0LA8L3RoPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgJHtvcmRlcnM/Lm1hcChvcmRlciA9PiBodG1sYFxyXG4gICAgICAgICAgICAgICAgICAgICR7b3JkZXIucHJvZHVjdHMubWFwKHByb2R1Y3QgPT4gaHRtbGBcclxuICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke3BhcmFtcy5kb2N1bWVudFR5cGVzW29yZGVyLnR5cGVdfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke29yZGVyLm51bWJlcn08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtvcmRlci5jdXN0b21lci5uYW1lfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke29yZGVyLmNvbXBhbnkubmFtZX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtvcmRlci51c2VyLnVzZXJuYW1lfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke25ldyBEYXRlKG9yZGVyLmRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygnYmcnKX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtwcm9kdWN0LnByb2R1Y3QgPyBgJHtwcm9kdWN0LnByb2R1Y3QubmFtZX0gWyR7cHJvZHVjdC5wcm9kdWN0LmNvZGV9XWAgOiBwcm9kdWN0Lm5hbWV9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7Zm9ybWF0UHJpY2UocHJvZHVjdC5wcmljZSl9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7cHJvZHVjdC5xdWFudGl0eX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAke2NvbnNvbGUubG9nKHByb2R1Y3QpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtwcm9kdWN0Py5xdHlJblBhY2thZ2UgfHwgcHJvZHVjdD8uc2VsZWN0ZWRTaXplcz8ubGVuZ3RoIHx8ICcnfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke3Byb2R1Y3Q/LmRpc2NvdW50fTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke2Zvcm1hdFByaWNlKChwcm9kdWN0LnByaWNlICogcHJvZHVjdC5xdWFudGl0eSkgKiAoMSAtIHByb2R1Y3QuZGlzY291bnQgLyAxMDApKX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtwYXJhbXMucGF5bWVudFR5cGVzW29yZGVyLnBheW1lbnRUeXBlXX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtwYXJhbXMub3JkZXJUeXBlc1tvcmRlci5vcmRlclR5cGVdfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICBgKX1cclxuICAgICAgICAgICAgICAgIGApfVxyXG4gICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgIDwvdGFibGU+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlclwiPlxyXG4gICAgICAgICR7cHJldkN1cnNvciA/IGh0bWxgPGJ1dHRvbiBAY2xpY2s9JHsoKSA9PiBzd2l0Y2hQYWdlKHByZXZDdXJzb3IpfSBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPjxpIGNsYXNzPVwiYmkgYmktYXJyb3ctbGVmdFwiPjwvaT4g0J/RgNC10LTQuNGI0L3QsCDRgdGC0YDQsNC90LjRhtCwPC9idXR0b24+YCA6ICcnfVxyXG4gICAgICAgICR7bmV4dEN1cnNvciA/IGh0bWxgPGJ1dHRvbiBAY2xpY2s9JHsoKSA9PiBzd2l0Y2hQYWdlKG5leHRDdXJzb3IpfSBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPtCh0LvQtdC00LLQsNGJ0LAg0YHRgtGA0LDQvdC40YbQsCA8aSBjbGFzcz1cImJpIGJpLWFycm93LXJpZ2h0XCI+PC9pPjwvYnV0dG9uPmAgOiAnJ31cclxuICAgIDwvZGl2PlxyXG5gO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gYXBwbHlGaWx0ZXJzKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsdGVycycpKTtcclxuICAgIGNvbnN0IGRhdGEgPSBPYmplY3QuZnJvbUVudHJpZXMoZm9ybURhdGEuZW50cmllcygpKTtcclxuXHJcbiAgICBpZiAoZGF0YS5jdXN0b21lcilcclxuICAgICAgICBkYXRhLmN1c3RvbWVyID0gZGF0YS5jdXN0b21lci5zcGxpdCgnWycpWzFdLnNwbGl0KCddJylbMF07XHJcblxyXG4gICAgaWYgKGRhdGEuY29tcGFueSlcclxuICAgICAgICBkYXRhLmNvbXBhbnkgPSBkYXRhLmNvbXBhbnkuc3BsaXQoJ1snKVsxXS5zcGxpdCgnXScpWzBdO1xyXG5cclxuICAgIGlmIChkYXRhLnVzZXIpXHJcbiAgICAgICAgZGF0YS51c2VyID0gZGF0YS51c2VyLnNwbGl0KCdbJylbMV0uc3BsaXQoJ10nKVswXTtcclxuXHJcbiAgICBpZiAoZGF0YS5wcm9kdWN0KVxyXG4gICAgICAgIGRhdGEucHJvZHVjdCA9IGRhdGEucHJvZHVjdC5zcGxpdCgnWycpWzFdLnNwbGl0KCddJylbMF07XHJcblxyXG4gICAgLy8gcmVtb3ZlIGVtcHR5IGZpZWxkc1xyXG4gICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChrZXkgPT4gZGF0YVtrZXldID09PSAnJyAmJiBkZWxldGUgZGF0YVtrZXldKTtcclxuXHJcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApXHJcbiAgICAgICAgcGFnZSgnL3JlZmVyZW5jZXMvb3JkZXJzJylcclxuICAgIGVsc2UgaWYgKGRhdGEubGVuZ3RoID09PSAxKVxyXG4gICAgICAgIHBhZ2UoYC9yZWZlcmVuY2VzL29yZGVycz8ke09iamVjdC5rZXlzKGRhdGEpWzBdfT0ke09iamVjdC52YWx1ZXMoZGF0YSlbMF19YCk7XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCB1cmkgPSBPYmplY3Qua2V5cyhkYXRhKS5tYXAoa2V5ID0+IGAke2tleX09JHtkYXRhW2tleV19YCkuam9pbignJicpO1xyXG4gICAgICAgIHBhZ2UoYC9yZWZlcmVuY2VzL29yZGVycz8ke3VyaX1gKTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgZmlsdGVycyA9IChjdXN0b21lcnMsIGNvbXBhbmllcywgdXNlcnMsIHByb2R1Y3RzLCBwYXJhbXMpID0+IGh0bWxgXHJcbiAgICAgICAgPGZvcm0gQGNoYW5nZT0ke2FwcGx5RmlsdGVyc30gaWQ9XCJmaWx0ZXJzXCIgY2xhc3M9XCJyb3cgYWxpZ24taXRlbXMtZW5kIHctMTAwIGctM1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgY29sLXNtXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicHJvZHVjdFwiPtCf0YDQvtC00YPQutGCOjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgLnZhbHVlPSR7KHRlbXAgPSBwcm9kdWN0cy5maWx0ZXIoYyA9PiBjLmNvZGUgPT09IHNlbGVjdGVkRmlsdGVycz8ucHJvZHVjdClbMF0pID8gYCR7dGVtcC5uYW1lfSBbJHt0ZW1wLmNvZGV9XWAgOiAnJ30gbGlzdD1cInByb2R1Y3RzTGlzdFwiIHBsYWNlaG9sZGVyPVwi0JjQvNC1L9C60L7QtFwiIG5hbWU9XCJwcm9kdWN0XCIgaWQ9XCJwcm9kdWN0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgICAgIDxkYXRhbGlzdCBpZD1cInByb2R1Y3RzTGlzdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICR7cHJvZHVjdHMubWFwKHByb2R1Y3QgPT4gaHRtbGA8b3B0aW9uIHZhbHVlPSR7YCR7cHJvZHVjdC5uYW1lfSBbJHtwcm9kdWN0LmNvZGV9XWB9PmApfVxyXG4gICAgICAgICAgICAgICAgPC9kYXRhbGlzdD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtNiBjb2wtc21cIj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJjdXN0b21lclwiPtCf0LDRgNGC0L3RjNC+0YA6PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCAudmFsdWU9JHsodGVtcCA9IGN1c3RvbWVycy5maWx0ZXIoYyA9PiBjLnZhdCA9PT0gc2VsZWN0ZWRGaWx0ZXJzPy5jdXN0b21lcilbMF0pID8gYCR7dGVtcC5uYW1lfSBbJHt0ZW1wLnZhdH1dYCA6ICcnfSBsaXN0PVwiY3VzdG9tZXJzTGlzdFwiIHBsYWNlaG9sZGVyPVwi0JLRgdC40YfQutC4XCIgbmFtZT1cImN1c3RvbWVyXCIgaWQ9XCJjdXN0b21lclwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGF0YWxpc3QgaWQ9XCJjdXN0b21lcnNMaXN0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgJHtjdXN0b21lcnMubWFwKGN1c3RvbWVyID0+IGh0bWxgPG9wdGlvbiB2YWx1ZT0ke2Ake2N1c3RvbWVyLm5hbWV9IFske2N1c3RvbWVyLnZhdH1dYH0+YCl9XHJcbiAgICAgICAgICAgICAgICA8L2RhdGFsaXN0PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC02IGNvbC1zbVwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNvbXBhbnlcIj7QmNC30LTQsNC00LXQvdCwINC+0YIg0YTQuNGA0LzQsDo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IC52YWx1ZT0keyh0ZW1wID0gY29tcGFuaWVzLmZpbHRlcihjID0+IGMudmF0ID09PSBzZWxlY3RlZEZpbHRlcnM/LmNvbXBhbnkpWzBdKSA/IGAke3RlbXAubmFtZX0gWyR7dGVtcC52YXR9XWAgOiAnJ30gbGlzdD1cImNvbXBhbmllc0xpc3RcIiBwbGFjZWhvbGRlcj1cItCS0YHQuNGH0LrQuFwiIG5hbWU9XCJjb21wYW55XCIgaWQ9XCJjb21wYW55XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBhdXRvY29tcGxldGU9XCJvZmZcIj5cclxuICAgICAgICAgICAgICAgIDxkYXRhbGlzdCBpZD1cImNvbXBhbmllc0xpc3RcIj5cclxuICAgICAgICAgICAgICAgICAgICAke2NvbXBhbmllcy5tYXAoY29tcGFueSA9PiBodG1sYDxvcHRpb24gdmFsdWU9JHtgJHtjb21wYW55Lm5hbWV9IFske2NvbXBhbnkudmF0fV1gfT5gKX1cclxuICAgICAgICAgICAgICAgIDwvZGF0YWxpc3Q+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgY29sLXNtXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwidXNlclwiPtCY0LfQtNCw0LTQtdC90LAg0L7RgiDQv9C+0YLRgNC10LHQuNGC0LXQuzo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IC52YWx1ZT0keyh0ZW1wID0gdXNlcnMuZmlsdGVyKGMgPT4gYy5faWQgPT09IHNlbGVjdGVkRmlsdGVycz8udXNlcilbMF0pID8gYCR7dGVtcC51c2VybmFtZX0gWyR7dGVtcC5faWR9XWAgOiAnJ30gbGlzdD1cInVzZXJzTGlzdFwiIHBsYWNlaG9sZGVyPVwi0JLRgdC40YfQutC4XCIgbmFtZT1cInVzZXJcIiBpZD1cInVzZXJcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICAgICAgPGRhdGFsaXN0IGlkPVwidXNlcnNMaXN0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgJHt1c2Vycy5tYXAodXNlciA9PiBodG1sYDxvcHRpb24gdmFsdWU9JHtgJHt1c2VyLnVzZXJuYW1lfSBbJHt1c2VyLl9pZH1dYH0+YCl9XHJcbiAgICAgICAgICAgICAgICA8L2RhdGFsaXN0PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC02IGNvbC1zbVwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCd0L7QvNC10YAg0L3QsCDQtNC+0LrRg9C80LXQvdGCPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXggZ2FwLTEgYWxpZ24taXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgLnZhbHVlPSR7c2VsZWN0ZWRGaWx0ZXJzPy5udW1iZXJGcm9tIHx8ICcnfSBpZD1cIm51bWJlckZyb21cIiBuYW1lPVwibnVtYmVyRnJvbVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPi08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgLnZhbHVlPSR7c2VsZWN0ZWRGaWx0ZXJzPy5udW1iZXJUbyB8fCAnJ30gaWQ9XCJudW1iZXJUb1wiIG5hbWU9XCJudW1iZXJUb1wiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgY29sLXNtXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwidHlwZVwiIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCi0LjQvyDQvdCwINC00L7QutGD0LzQtdC90YI6PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9XCJ0eXBlXCIgbmFtZT1cInR5cGVcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIiBzZWxlY3RlZD7QktGB0LjRh9C60Lg8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAke09iamVjdC5lbnRyaWVzKHBhcmFtcy5kb2N1bWVudFR5cGVzKS5tYXAodHlwZSA9PiBodG1sYDxvcHRpb24gP3NlbGVjdGVkPSR7c2VsZWN0ZWRGaWx0ZXJzPy50eXBlID09PSB0eXBlWzBdfSB2YWx1ZT0ke3R5cGVbMF19PiR7dHlwZVsxXX08L29wdGlvbj5gKX1cclxuICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC02IGNvbC1zbVwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInBheW1lbnRUeXBlXCIgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0J3QsNGH0LjQvSDQvdCwINC/0LvQsNGJ0LDQvdC1PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9XCJwYXltZW50VHlwZVwiIG5hbWU9XCJwYXltZW50VHlwZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiIHNlbGVjdGVkPtCS0YHQuNGH0LrQuDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICR7T2JqZWN0LmVudHJpZXMocGFyYW1zLnBheW1lbnRUeXBlcykubWFwKHR5cGUgPT4gaHRtbGA8b3B0aW9uID9zZWxlY3RlZD0ke3NlbGVjdGVkRmlsdGVycz8ucGF5bWVudFR5cGUgPT09IHR5cGVbMF19IHZhbHVlPSR7dHlwZVswXX0+JHt0eXBlWzFdfTwvb3B0aW9uPmApfVxyXG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgY29sLXNtXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwib3JkZXJUeXBlXCI+0KLQuNC/INC90LAg0L/RgNC+0LTQsNC20LHQsDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPVwib3JkZXJUeXBlXCIgbmFtZT1cIm9yZGVyVHlwZVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiIHNlbGVjdGVkPtCS0YHQuNGH0LrQuDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICR7T2JqZWN0LmVudHJpZXMocGFyYW1zLm9yZGVyVHlwZXMpLm1hcCh0eXBlID0+IGh0bWxgPG9wdGlvbiA/c2VsZWN0ZWQ9JHtzZWxlY3RlZEZpbHRlcnM/Lm9yZGVyVHlwZSA9PT0gdHlwZVswXX0gdmFsdWU9JHt0eXBlWzBdfT4ke3R5cGVbMV19PC9vcHRpb24+YCl9XHJcbiAgICAgICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtNiBjb2wtc21cIj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJmcm9tXCI+0J7Rgjo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJkYXRlXCIgaWQ9XCJmcm9tXCIgLnZhbHVlPSR7c2VsZWN0ZWRGaWx0ZXJzPy5mcm9tIHx8ICcnfSBuYW1lPVwiZnJvbVwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgY29sLXNtXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwidG9cIj7QlNC+OjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImRhdGVcIiBpZD1cInRvXCIgLnZhbHVlPSR7c2VsZWN0ZWRGaWx0ZXJzPy50byB8fCAnJ30gbmFtZT1cInRvXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9mb3JtPlxyXG5gO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gbG9hZFJlZmVyZW5jZXMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlcSA9IGF3YWl0IGF4aW9zLmdldChwYXRoKVxyXG4gICAgICAgIGNvbnN0IG9yZGVycyA9IHJlcS5kYXRhLm9yZGVycztcclxuICAgICAgICBjb25zdCBwcmV2Q3Vyc29yID0gcmVxLmRhdGEucHJldkN1cnNvcjtcclxuICAgICAgICBjb25zdCBuZXh0Q3Vyc29yID0gcmVxLmRhdGEubmV4dEN1cnNvcjtcclxuXHJcbiAgICAgICAgLy9UT0RPIFdoZW4gYWxsIGNvbnRyb2xlcnMgZG9uZSwgZG8gYSBvbmUgcm91dGUgdG8gZ2V0IGFsbCBwYXJhbXNcclxuICAgICAgICBwYXJhbXMgPSAoYXdhaXQgYXhpb3MuZ2V0KCcvb3JkZXJzL3BhcmFtcycpKS5kYXRhO1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbWVycyA9IChhd2FpdCBheGlvcy5nZXQoJy9jdXN0b21lcnMnLCB7IHBhcmFtczogeyBwYWdlOiAncmVmZXJlbmNlcycgfSB9KSkuZGF0YS5jdXN0b21lcnM7XHJcbiAgICAgICAgY29uc3QgY29tcGFuaWVzID0gKGF3YWl0IGF4aW9zLmdldCgnL2NvbXBhbmllcycpKS5kYXRhO1xyXG4gICAgICAgIGNvbnN0IHVzZXJzID0gKGF3YWl0IGF4aW9zLmdldCgnL3VzZXJzJykpLmRhdGE7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdHMgPSAoYXdhaXQgYXhpb3MuZ2V0KCcvcHJvZHVjdHMnLCB7IHBhcmFtczogeyBwYWdlOiAncmVmZXJlbmNlcycgfSB9KSkuZGF0YS5wcm9kdWN0cztcclxuXHJcbiAgICAgICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgICAgJHtmaWx0ZXJzKGN1c3RvbWVycywgY29tcGFuaWVzLCB1c2VycywgcHJvZHVjdHMsIHBhcmFtcyl9XHJcbiAgICAgICAgJHt0YWJsZShvcmRlcnMsIHByZXZDdXJzb3IsIG5leHRDdXJzb3IpfWBcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICBhbGVydCgn0JLRitC30L3QuNC60L3QsCDQs9GA0LXRiNC60LAnKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlZmVyZW5jZXNPcmRlcnNQYWdlKGN0eCwgbmV4dCkge1xyXG4gICAgaWYgKGxvZ2dlZEluVXNlci5yb2xlICE9PSAnYWRtaW4nKVxyXG4gICAgICAgIHJldHVybiBwYWdlKCcvJyk7XHJcblxyXG4gICAgcGF0aCA9IGN0eC5wYXRoO1xyXG4gICAgcGFnZUN0eCA9IGN0eDtcclxuICAgIHRlbXAgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgLy8gY2hlY2sgaWYgZmlsdGVycyBhcmUgYXBwbGllZFxyXG4gICAgLy9UT0RPIFVzZSB0aGlzIHdheSB0byBnZXQgcGFyYW1zIGZyb20gZmlsdGVycyBldmVyeXdoZXJlXHJcbiAgICBpZiAoY3R4LnF1ZXJ5c3RyaW5nKVxyXG4gICAgICAgIHNlbGVjdGVkRmlsdGVycyA9IE9iamVjdC5mcm9tRW50cmllcyhuZXcgVVJMU2VhcmNoUGFyYW1zKGN0eC5xdWVyeXN0cmluZykpO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIHNlbGVjdGVkRmlsdGVycyA9IHt9O1xyXG5cclxuICAgIGNvbnN0IHRlbXBsYXRlID0gKCkgPT4gaHRtbGBcclxuICAgICAgICAke25hdigpfVxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWRcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSB0ZXh0LWVuZFwiPtCf0YDQuNC90YLQuNGA0LDQuTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAke3VudGlsKGxvYWRSZWZlcmVuY2VzKCksIHNwaW5uZXIpfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICByZW5kZXIodGVtcGxhdGUoKSwgY29udGFpbmVyKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/references/orders/references.orders.js\n");

/***/ }),

/***/ "./src/views/references/orders/routes.js":
/*!***********************************************!*\
  !*** ./src/views/references/orders/routes.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   referencesSalesRoutes: () => (/* binding */ referencesSalesRoutes)\n/* harmony export */ });\n/* harmony import */ var page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! page */ \"./node_modules/page/page.js\");\n/* harmony import */ var _views_references_orders_references_orders_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/views/references/orders/references.orders.js */ \"./src/views/references/orders/references.orders.js\");\n\r\n\r\n\r\nfunction referencesSalesRoutes(auth) {\r\n    page__WEBPACK_IMPORTED_MODULE_0__('/references/orders', auth, _views_references_orders_references_orders_js__WEBPACK_IMPORTED_MODULE_1__.referencesOrdersPage);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvcmVmZXJlbmNlcy9vcmRlcnMvcm91dGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF3QjtBQUM4RDtBQUN0RjtBQUNPO0FBQ1AsSUFBSSxpQ0FBSSw2QkFBNkIsK0ZBQW9CO0FBQ3pEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmFiYi5pdC8uL3NyYy92aWV3cy9yZWZlcmVuY2VzL29yZGVycy9yb3V0ZXMuanM/ZTIwYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFnZSBmcm9tICdwYWdlJztcclxuaW1wb3J0IHsgcmVmZXJlbmNlc09yZGVyc1BhZ2UgfSBmcm9tICdAL3ZpZXdzL3JlZmVyZW5jZXMvb3JkZXJzL3JlZmVyZW5jZXMub3JkZXJzLmpzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWZlcmVuY2VzU2FsZXNSb3V0ZXMoYXV0aCkge1xyXG4gICAgcGFnZSgnL3JlZmVyZW5jZXMvb3JkZXJzJywgYXV0aCwgcmVmZXJlbmNlc09yZGVyc1BhZ2UpO1xyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/views/references/orders/routes.js\n");

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendors"], () => (__webpack_exec__("./src/app.js")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);